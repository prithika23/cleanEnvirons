"use strict";(self.webpackChunkcleanEnvirons=self.webpackChunkcleanEnvirons||[]).push([[792],{9583:(on,rt,$)=>{$.d(rt,{fS:()=>k_,Ix:()=>Bu,H6:()=>Bg,T1:()=>Wi,Wq:()=>_u,uY:()=>ju,W6:()=>Pe,Ci:()=>bh,YQ:()=>Oh,NJ:()=>wl,Dc:()=>ht,GA:()=>Q_,cm:()=>ws,K$:()=>Ot,FA:()=>Dn,lo:()=>gr,bI:()=>Bn,qG:()=>wa,qi:()=>rn,c8:()=>Vg,gS:()=>Tl,C3:()=>sr,hq:()=>Y_,me:()=>$g,rJ:()=>MI,Cs:()=>NI,vN:()=>Td,kd:()=>B_,CL:()=>Yv,LA:()=>w_,H9:()=>Pv,ol:()=>xI,Q5:()=>OI,Os:()=>VI,FD:()=>$I,rf:()=>x_,Ws:()=>Ei,z6:()=>bd,x7:()=>Hv,nY:()=>U_,_e:()=>kh,GG:()=>ap,kU:()=>em,Rr:()=>Gv,aU:()=>E_,GV:()=>J_,AB:()=>N_,$1:()=>Lv,po:()=>Nv,St:()=>xv,aQ:()=>j_,FC:()=>$_,My:()=>M_,P:()=>BI,B:()=>Lg,yx:()=>y_,c4:()=>Xv,O5:()=>X_,BN:()=>zv,He:()=>Ut,lN:()=>$v,HM:()=>qo,EO:()=>Ad,mZ:()=>tm,iB:()=>kI,_M:()=>jI});var Qe,We,m=$(467),V=$(7852),oe=$(1362),ne=$(8041),k=$(1076),Ue=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},le={};(function(){var u;function o(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function c(xe,_e,Ce){Ce||(Ce=0);var Ve=Array(16);if("string"==typeof _e)for(var Ge=0;16>Ge;++Ge)Ve[Ge]=_e.charCodeAt(Ce++)|_e.charCodeAt(Ce++)<<8|_e.charCodeAt(Ce++)<<16|_e.charCodeAt(Ce++)<<24;else for(Ge=0;16>Ge;++Ge)Ve[Ge]=_e[Ce++]|_e[Ce++]<<8|_e[Ce++]<<16|_e[Ce++]<<24;var st=xe.g[3],De=(_e=xe.g[0])+(st^(Ce=xe.g[1])&((Ge=xe.g[2])^st))+Ve[0]+3614090360&4294967295;De=(Ce=(Ge=(st=(_e=(Ce=(Ge=(st=(_e=(Ce=(Ge=(st=(_e=(Ce=(Ge=(st=(_e=(Ce=(Ge=(st=(_e=(Ce=(Ge=(st=(_e=(Ce=(Ge=(st=(_e=(Ce=(Ge=(st=(_e=(Ce=(Ge=(st=(_e=(Ce=(Ge=(st=(_e=(Ce=(Ge=(st=(_e=(Ce=(Ge=(st=(_e=(Ce=(Ge=(st=(_e=(Ce=(Ge=(st=(_e=(Ce=(Ge=(st=(_e=Ce+(De<<7&4294967295|De>>>25))+((De=st+(Ge^_e&(Ce^Ge))+Ve[1]+3905402710&4294967295)<<12&4294967295|De>>>20))+((De=Ge+(Ce^st&(_e^Ce))+Ve[2]+606105819&4294967295)<<17&4294967295|De>>>15))+((De=Ce+(_e^Ge&(st^_e))+Ve[3]+3250441966&4294967295)<<22&4294967295|De>>>10))+((De=_e+(st^Ce&(Ge^st))+Ve[4]+4118548399&4294967295)<<7&4294967295|De>>>25))+((De=st+(Ge^_e&(Ce^Ge))+Ve[5]+1200080426&4294967295)<<12&4294967295|De>>>20))+((De=Ge+(Ce^st&(_e^Ce))+Ve[6]+2821735955&4294967295)<<17&4294967295|De>>>15))+((De=Ce+(_e^Ge&(st^_e))+Ve[7]+4249261313&4294967295)<<22&4294967295|De>>>10))+((De=_e+(st^Ce&(Ge^st))+Ve[8]+1770035416&4294967295)<<7&4294967295|De>>>25))+((De=st+(Ge^_e&(Ce^Ge))+Ve[9]+2336552879&4294967295)<<12&4294967295|De>>>20))+((De=Ge+(Ce^st&(_e^Ce))+Ve[10]+4294925233&4294967295)<<17&4294967295|De>>>15))+((De=Ce+(_e^Ge&(st^_e))+Ve[11]+2304563134&4294967295)<<22&4294967295|De>>>10))+((De=_e+(st^Ce&(Ge^st))+Ve[12]+1804603682&4294967295)<<7&4294967295|De>>>25))+((De=st+(Ge^_e&(Ce^Ge))+Ve[13]+4254626195&4294967295)<<12&4294967295|De>>>20))+((De=Ge+(Ce^st&(_e^Ce))+Ve[14]+2792965006&4294967295)<<17&4294967295|De>>>15))+((De=Ce+(_e^Ge&(st^_e))+Ve[15]+1236535329&4294967295)<<22&4294967295|De>>>10))+((De=_e+(Ge^st&(Ce^Ge))+Ve[1]+4129170786&4294967295)<<5&4294967295|De>>>27))+((De=st+(Ce^Ge&(_e^Ce))+Ve[6]+3225465664&4294967295)<<9&4294967295|De>>>23))+((De=Ge+(_e^Ce&(st^_e))+Ve[11]+643717713&4294967295)<<14&4294967295|De>>>18))+((De=Ce+(st^_e&(Ge^st))+Ve[0]+3921069994&4294967295)<<20&4294967295|De>>>12))+((De=_e+(Ge^st&(Ce^Ge))+Ve[5]+3593408605&4294967295)<<5&4294967295|De>>>27))+((De=st+(Ce^Ge&(_e^Ce))+Ve[10]+38016083&4294967295)<<9&4294967295|De>>>23))+((De=Ge+(_e^Ce&(st^_e))+Ve[15]+3634488961&4294967295)<<14&4294967295|De>>>18))+((De=Ce+(st^_e&(Ge^st))+Ve[4]+3889429448&4294967295)<<20&4294967295|De>>>12))+((De=_e+(Ge^st&(Ce^Ge))+Ve[9]+568446438&4294967295)<<5&4294967295|De>>>27))+((De=st+(Ce^Ge&(_e^Ce))+Ve[14]+3275163606&4294967295)<<9&4294967295|De>>>23))+((De=Ge+(_e^Ce&(st^_e))+Ve[3]+4107603335&4294967295)<<14&4294967295|De>>>18))+((De=Ce+(st^_e&(Ge^st))+Ve[8]+1163531501&4294967295)<<20&4294967295|De>>>12))+((De=_e+(Ge^st&(Ce^Ge))+Ve[13]+2850285829&4294967295)<<5&4294967295|De>>>27))+((De=st+(Ce^Ge&(_e^Ce))+Ve[2]+4243563512&4294967295)<<9&4294967295|De>>>23))+((De=Ge+(_e^Ce&(st^_e))+Ve[7]+1735328473&4294967295)<<14&4294967295|De>>>18))+((De=Ce+(st^_e&(Ge^st))+Ve[12]+2368359562&4294967295)<<20&4294967295|De>>>12))+((De=_e+(Ce^Ge^st)+Ve[5]+4294588738&4294967295)<<4&4294967295|De>>>28))+((De=st+(_e^Ce^Ge)+Ve[8]+2272392833&4294967295)<<11&4294967295|De>>>21))+((De=Ge+(st^_e^Ce)+Ve[11]+1839030562&4294967295)<<16&4294967295|De>>>16))+((De=Ce+(Ge^st^_e)+Ve[14]+4259657740&4294967295)<<23&4294967295|De>>>9))+((De=_e+(Ce^Ge^st)+Ve[1]+2763975236&4294967295)<<4&4294967295|De>>>28))+((De=st+(_e^Ce^Ge)+Ve[4]+1272893353&4294967295)<<11&4294967295|De>>>21))+((De=Ge+(st^_e^Ce)+Ve[7]+4139469664&4294967295)<<16&4294967295|De>>>16))+((De=Ce+(Ge^st^_e)+Ve[10]+3200236656&4294967295)<<23&4294967295|De>>>9))+((De=_e+(Ce^Ge^st)+Ve[13]+681279174&4294967295)<<4&4294967295|De>>>28))+((De=st+(_e^Ce^Ge)+Ve[0]+3936430074&4294967295)<<11&4294967295|De>>>21))+((De=Ge+(st^_e^Ce)+Ve[3]+3572445317&4294967295)<<16&4294967295|De>>>16))+((De=Ce+(Ge^st^_e)+Ve[6]+76029189&4294967295)<<23&4294967295|De>>>9))+((De=_e+(Ce^Ge^st)+Ve[9]+3654602809&4294967295)<<4&4294967295|De>>>28))+((De=st+(_e^Ce^Ge)+Ve[12]+3873151461&4294967295)<<11&4294967295|De>>>21))+((De=Ge+(st^_e^Ce)+Ve[15]+530742520&4294967295)<<16&4294967295|De>>>16))+((De=Ce+(Ge^st^_e)+Ve[2]+3299628645&4294967295)<<23&4294967295|De>>>9))+((De=_e+(Ge^(Ce|~st))+Ve[0]+4096336452&4294967295)<<6&4294967295|De>>>26))+((De=st+(Ce^(_e|~Ge))+Ve[7]+1126891415&4294967295)<<10&4294967295|De>>>22))+((De=Ge+(_e^(st|~Ce))+Ve[14]+2878612391&4294967295)<<15&4294967295|De>>>17))+((De=Ce+(st^(Ge|~_e))+Ve[5]+4237533241&4294967295)<<21&4294967295|De>>>11))+((De=_e+(Ge^(Ce|~st))+Ve[12]+1700485571&4294967295)<<6&4294967295|De>>>26))+((De=st+(Ce^(_e|~Ge))+Ve[3]+2399980690&4294967295)<<10&4294967295|De>>>22))+((De=Ge+(_e^(st|~Ce))+Ve[10]+4293915773&4294967295)<<15&4294967295|De>>>17))+((De=Ce+(st^(Ge|~_e))+Ve[1]+2240044497&4294967295)<<21&4294967295|De>>>11))+((De=_e+(Ge^(Ce|~st))+Ve[8]+1873313359&4294967295)<<6&4294967295|De>>>26))+((De=st+(Ce^(_e|~Ge))+Ve[15]+4264355552&4294967295)<<10&4294967295|De>>>22))+((De=Ge+(_e^(st|~Ce))+Ve[6]+2734768916&4294967295)<<15&4294967295|De>>>17))+((De=Ce+(st^(Ge|~_e))+Ve[13]+1309151649&4294967295)<<21&4294967295|De>>>11))+((st=(_e=Ce+((De=_e+(Ge^(Ce|~st))+Ve[4]+4149444226&4294967295)<<6&4294967295|De>>>26))+((De=st+(Ce^(_e|~Ge))+Ve[11]+3174756917&4294967295)<<10&4294967295|De>>>22))^((Ge=st+((De=Ge+(_e^(st|~Ce))+Ve[2]+718787259&4294967295)<<15&4294967295|De>>>17))|~_e))+Ve[9]+3951481745&4294967295,xe.g[0]=xe.g[0]+_e&4294967295,xe.g[1]=xe.g[1]+(Ge+(De<<21&4294967295|De>>>11))&4294967295,xe.g[2]=xe.g[2]+Ge&4294967295,xe.g[3]=xe.g[3]+st&4294967295}function _(xe,_e){this.h=_e;for(var Ce=[],Ve=!0,Ge=xe.length-1;0<=Ge;Ge--){var st=0|xe[Ge];Ve&&st==_e||(Ce[Ge]=st,Ve=!1)}this.g=Ce}(function t(xe,_e){function Ce(){}Ce.prototype=_e.prototype,xe.D=_e.prototype,xe.prototype=new Ce,xe.prototype.constructor=xe,xe.C=function(Ve,Ge,st){for(var De=Array(arguments.length-2),Xa=2;Xa<arguments.length;Xa++)De[Xa-2]=arguments[Xa];return _e.prototype[Ge].apply(Ve,De)}})(o,function i(){this.blockSize=-1}),o.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},o.prototype.u=function(xe,_e){void 0===_e&&(_e=xe.length);for(var Ce=_e-this.blockSize,Ve=this.B,Ge=this.h,st=0;st<_e;){if(0==Ge)for(;st<=Ce;)c(this,xe,st),st+=this.blockSize;if("string"==typeof xe){for(;st<_e;)if(Ve[Ge++]=xe.charCodeAt(st++),Ge==this.blockSize){c(this,Ve),Ge=0;break}}else for(;st<_e;)if(Ve[Ge++]=xe[st++],Ge==this.blockSize){c(this,Ve),Ge=0;break}}this.h=Ge,this.o+=_e},o.prototype.v=function(){var xe=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);xe[0]=128;for(var _e=1;_e<xe.length-8;++_e)xe[_e]=0;var Ce=8*this.o;for(_e=xe.length-8;_e<xe.length;++_e)xe[_e]=255&Ce,Ce/=256;for(this.u(xe),xe=Array(16),_e=Ce=0;4>_e;++_e)for(var Ve=0;32>Ve;Ve+=8)xe[Ce++]=this.g[_e]>>>Ve&255;return xe};var A={};function S(xe){return-128<=xe&&128>xe?function f(xe,_e){var Ce=A;return Object.prototype.hasOwnProperty.call(Ce,xe)?Ce[xe]:Ce[xe]=_e(xe)}(xe,function(_e){return new _([0|_e],0>_e?-1:0)}):new _([0|xe],0>xe?-1:0)}function L(xe){if(isNaN(xe)||!isFinite(xe))return re;if(0>xe)return Vt(L(-xe));for(var _e=[],Ce=1,Ve=0;xe>=Ce;Ve++)_e[Ve]=xe/Ce|0,Ce*=4294967296;return new _(_e,0)}var re=S(0),we=S(1),Ye=S(16777216);function Rt(xe){if(0!=xe.h)return!1;for(var _e=0;_e<xe.g.length;_e++)if(0!=xe.g[_e])return!1;return!0}function jt(xe){return-1==xe.h}function Vt(xe){for(var _e=xe.g.length,Ce=[],Ve=0;Ve<_e;Ve++)Ce[Ve]=~xe.g[Ve];return new _(Ce,~xe.h).add(we)}function vn(xe,_e){return xe.add(Vt(_e))}function Rn(xe,_e){for(;(65535&xe[_e])!=xe[_e];)xe[_e+1]+=xe[_e]>>>16,xe[_e]&=65535,_e++}function Tn(xe,_e){this.g=xe,this.h=_e}function nr(xe,_e){if(Rt(_e))throw Error("division by zero");if(Rt(xe))return new Tn(re,re);if(jt(xe))return _e=nr(Vt(xe),_e),new Tn(Vt(_e.g),Vt(_e.h));if(jt(_e))return _e=nr(xe,Vt(_e)),new Tn(Vt(_e.g),_e.h);if(30<xe.g.length){if(jt(xe)||jt(_e))throw Error("slowDivide_ only works with positive integers.");for(var Ce=we,Ve=_e;0>=Ve.l(xe);)Ce=Ur(Ce),Ve=Ur(Ve);var Ge=hr(Ce,1),st=hr(Ve,1);for(Ve=hr(Ve,2),Ce=hr(Ce,2);!Rt(Ve);){var De=st.add(Ve);0>=De.l(xe)&&(Ge=Ge.add(Ce),st=De),Ve=hr(Ve,1),Ce=hr(Ce,1)}return _e=vn(xe,Ge.j(_e)),new Tn(Ge,_e)}for(Ge=re;0<=xe.l(_e);){for(Ce=Math.max(1,Math.floor(xe.m()/_e.m())),Ve=48>=(Ve=Math.ceil(Math.log(Ce)/Math.LN2))?1:Math.pow(2,Ve-48),De=(st=L(Ce)).j(_e);jt(De)||0<De.l(xe);)De=(st=L(Ce-=Ve)).j(_e);Rt(st)&&(st=we),Ge=Ge.add(st),xe=vn(xe,De)}return new Tn(Ge,xe)}function Ur(xe){for(var _e=xe.g.length+1,Ce=[],Ve=0;Ve<_e;Ve++)Ce[Ve]=xe.i(Ve)<<1|xe.i(Ve-1)>>>31;return new _(Ce,xe.h)}function hr(xe,_e){var Ce=_e>>5;_e%=32;for(var Ve=xe.g.length-Ce,Ge=[],st=0;st<Ve;st++)Ge[st]=0<_e?xe.i(st+Ce)>>>_e|xe.i(st+Ce+1)<<32-_e:xe.i(st+Ce);return new _(Ge,xe.h)}(u=_.prototype).m=function(){if(jt(this))return-Vt(this).m();for(var xe=0,_e=1,Ce=0;Ce<this.g.length;Ce++){var Ve=this.i(Ce);xe+=(0<=Ve?Ve:4294967296+Ve)*_e,_e*=4294967296}return xe},u.toString=function(xe){if(2>(xe=xe||10)||36<xe)throw Error("radix out of range: "+xe);if(Rt(this))return"0";if(jt(this))return"-"+Vt(this).toString(xe);for(var _e=L(Math.pow(xe,6)),Ce=this,Ve="";;){var Ge=nr(Ce,_e).g,st=((0<(Ce=vn(Ce,Ge.j(_e))).g.length?Ce.g[0]:Ce.h)>>>0).toString(xe);if(Rt(Ce=Ge))return st+Ve;for(;6>st.length;)st="0"+st;Ve=st+Ve}},u.i=function(xe){return 0>xe?0:xe<this.g.length?this.g[xe]:this.h},u.l=function(xe){return jt(xe=vn(this,xe))?-1:Rt(xe)?0:1},u.abs=function(){return jt(this)?Vt(this):this},u.add=function(xe){for(var _e=Math.max(this.g.length,xe.g.length),Ce=[],Ve=0,Ge=0;Ge<=_e;Ge++){var st=Ve+(65535&this.i(Ge))+(65535&xe.i(Ge)),De=(st>>>16)+(this.i(Ge)>>>16)+(xe.i(Ge)>>>16);Ve=De>>>16,Ce[Ge]=(De&=65535)<<16|(st&=65535)}return new _(Ce,-2147483648&Ce[Ce.length-1]?-1:0)},u.j=function(xe){if(Rt(this)||Rt(xe))return re;if(jt(this))return jt(xe)?Vt(this).j(Vt(xe)):Vt(Vt(this).j(xe));if(jt(xe))return Vt(this.j(Vt(xe)));if(0>this.l(Ye)&&0>xe.l(Ye))return L(this.m()*xe.m());for(var _e=this.g.length+xe.g.length,Ce=[],Ve=0;Ve<2*_e;Ve++)Ce[Ve]=0;for(Ve=0;Ve<this.g.length;Ve++)for(var Ge=0;Ge<xe.g.length;Ge++){var st=this.i(Ve)>>>16,De=65535&this.i(Ve),Xa=xe.i(Ge)>>>16,Bh=65535&xe.i(Ge);Ce[2*Ve+2*Ge]+=De*Bh,Rn(Ce,2*Ve+2*Ge),Ce[2*Ve+2*Ge+1]+=st*Bh,Rn(Ce,2*Ve+2*Ge+1),Ce[2*Ve+2*Ge+1]+=De*Xa,Rn(Ce,2*Ve+2*Ge+1),Ce[2*Ve+2*Ge+2]+=st*Xa,Rn(Ce,2*Ve+2*Ge+2)}for(Ve=0;Ve<_e;Ve++)Ce[Ve]=Ce[2*Ve+1]<<16|Ce[2*Ve];for(Ve=_e;Ve<2*_e;Ve++)Ce[Ve]=0;return new _(Ce,0)},u.A=function(xe){return nr(this,xe).h},u.and=function(xe){for(var _e=Math.max(this.g.length,xe.g.length),Ce=[],Ve=0;Ve<_e;Ve++)Ce[Ve]=this.i(Ve)&xe.i(Ve);return new _(Ce,this.h&xe.h)},u.or=function(xe){for(var _e=Math.max(this.g.length,xe.g.length),Ce=[],Ve=0;Ve<_e;Ve++)Ce[Ve]=this.i(Ve)|xe.i(Ve);return new _(Ce,this.h|xe.h)},u.xor=function(xe){for(var _e=Math.max(this.g.length,xe.g.length),Ce=[],Ve=0;Ve<_e;Ve++)Ce[Ve]=this.i(Ve)^xe.i(Ve);return new _(Ce,this.h^xe.h)},o.prototype.digest=o.prototype.v,o.prototype.reset=o.prototype.s,o.prototype.update=o.prototype.u,We=le.Md5=o,_.prototype.add=_.prototype.add,_.prototype.multiply=_.prototype.j,_.prototype.modulo=_.prototype.A,_.prototype.compare=_.prototype.l,_.prototype.toNumber=_.prototype.m,_.prototype.toString=_.prototype.toString,_.prototype.getBits=_.prototype.i,_.fromNumber=L,_.fromString=function Q(xe,_e){if(0==xe.length)throw Error("number format error: empty string");if(2>(_e=_e||10)||36<_e)throw Error("radix out of range: "+_e);if("-"==xe.charAt(0))return Vt(Q(xe.substring(1),_e));if(0<=xe.indexOf("-"))throw Error('number format error: interior "-" character');for(var Ce=L(Math.pow(_e,8)),Ve=re,Ge=0;Ge<xe.length;Ge+=8){var st=Math.min(8,xe.length-Ge),De=parseInt(xe.substring(Ge,Ge+st),_e);8>st?(st=L(Math.pow(_e,st)),Ve=Ve.j(st).add(L(De))):Ve=(Ve=Ve.j(Ce)).add(L(De))}return Ve},Qe=le.Integer=_}).apply(typeof Ue<"u"?Ue:typeof self<"u"?self:typeof window<"u"?window:{});var Be,Je,xt,qt,$t,Nt,un,ln,pe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},fe={};(function(){var u,t="function"==typeof Object.defineProperties?Object.defineProperty:function(g,P,B){return g==Array.prototype||g==Object.prototype||(g[P]=B.value),g},o=function i(g){g=["object"==typeof globalThis&&globalThis,g,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof pe&&pe];for(var P=0;P<g.length;++P){var B=g[P];if(B&&B.Math==Math)return B}throw Error("Cannot find global object")}(this);!function c(g,P){if(P)e:{var B=o;g=g.split(".");for(var ee=0;ee<g.length-1;ee++){var qe=g[ee];if(!(qe in B))break e;B=B[qe]}(P=P(ee=B[g=g[g.length-1]]))!=ee&&null!=P&&t(B,g,{configurable:!0,writable:!0,value:P})}}("Array.prototype.values",function(g){return g||function(){return function f(g,P){g instanceof String&&(g+="");var B=0,ee=!1,qe={next:function(){if(!ee&&B<g.length){var ft=B++;return{value:P(ft,g[ft]),done:!1}}return ee=!0,{done:!0,value:void 0}}};return qe[Symbol.iterator]=function(){return qe},qe}(this,function(P,B){return B})}});var _=_||{},A=this||self;function S(g){var P=typeof g;return"array"==(P="object"!=P?P:g?Array.isArray(g)?"array":P:"null")||"object"==P&&"number"==typeof g.length}function L(g){var P=typeof g;return"object"==P&&null!=g||"function"==P}function Q(g,P,B){return g.call.apply(g.bind,arguments)}function re(g,P,B){if(!g)throw Error();if(2<arguments.length){var ee=Array.prototype.slice.call(arguments,2);return function(){var qe=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(qe,ee),g.apply(P,qe)}}return function(){return g.apply(P,arguments)}}function we(g,P,B){return(we=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Q:re).apply(null,arguments)}function Ye(g,P){var B=Array.prototype.slice.call(arguments,1);return function(){var ee=B.slice();return ee.push.apply(ee,arguments),g.apply(this,ee)}}function Rt(g,P){function B(){}B.prototype=P.prototype,g.aa=P.prototype,g.prototype=new B,g.prototype.constructor=g,g.Qb=function(ee,qe,ft){for(var nn=Array(arguments.length-2),ni=2;ni<arguments.length;ni++)nn[ni-2]=arguments[ni];return P.prototype[qe].apply(ee,nn)}}function jt(g){const P=g.length;if(0<P){const B=Array(P);for(let ee=0;ee<P;ee++)B[ee]=g[ee];return B}return[]}function Vt(g,P){for(let B=1;B<arguments.length;B++){const ee=arguments[B];if(S(ee)){const qe=g.length||0,ft=ee.length||0;g.length=qe+ft;for(let nn=0;nn<ft;nn++)g[qe+nn]=ee[nn]}else g.push(ee)}}function Rn(g){return/^[\s\xa0]*$/.test(g)}function Tn(){var g=A.navigator;return g&&(g=g.userAgent)?g:""}function nr(g){return nr[" "](g),g}nr[" "]=function(){};var Ur=!(-1==Tn().indexOf("Gecko")||-1!=Tn().toLowerCase().indexOf("webkit")&&-1==Tn().indexOf("Edge")||-1!=Tn().indexOf("Trident")||-1!=Tn().indexOf("MSIE")||-1!=Tn().indexOf("Edge"));function hr(g,P,B){for(const ee in g)P.call(B,g[ee],ee,g)}function _e(g){const P={};for(const B in g)P[B]=g[B];return P}const Ce="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ve(g,P){let B,ee;for(let qe=1;qe<arguments.length;qe++){for(B in ee=arguments[qe],ee)g[B]=ee[B];for(let ft=0;ft<Ce.length;ft++)B=Ce[ft],Object.prototype.hasOwnProperty.call(ee,B)&&(g[B]=ee[B])}}function Ge(g){var P=1;g=g.split(":");const B=[];for(;0<P&&g.length;)B.push(g.shift()),P--;return g.length&&B.push(g.join(":")),B}function st(g){A.setTimeout(()=>{throw g},0)}function De(){var g=Pd;let P=null;return g.g&&(P=g.g,g.g=g.g.next,g.g||(g.h=null),P.next=null),P}var Bh=new class vn{constructor(P,B){this.i=P,this.j=B,this.h=0,this.g=null}get(){let P;return 0<this.h?(this.h--,P=this.g,this.g=P.next,P.next=null):P=this.i(),P}}(()=>new nE,g=>g.reset());class nE{constructor(){this.next=this.g=this.h=null}set(P,B){this.h=P,this.g=B,this.next=null}reset(){this.next=this.g=this.h=null}}let Sd,Rd=!1,Pd=new class Xa{constructor(){this.h=this.g=null}add(P,B){const ee=Bh.get();ee.set(P,B),this.h?this.h.next=ee:this.g=ee,this.h=ee}},fp=()=>{const g=A.Promise.resolve(void 0);Sd=()=>{g.then(GI)}};var GI=()=>{for(var g;g=De();){try{g.h.call(g.g)}catch(B){st(B)}var P=Bh;P.j(g),100>P.h&&(P.h++,g.next=P.g,P.g=g)}Rd=!1};function Gu(){this.s=this.s,this.C=this.C}function Us(g,P){this.type=g,this.g=this.target=P,this.defaultPrevented=!1}Gu.prototype.s=!1,Gu.prototype.ma=function(){this.s||(this.s=!0,this.N())},Gu.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},Us.prototype.h=function(){this.defaultPrevented=!0};var ny=function(){if(!A.addEventListener||!Object.defineProperty)return!1;var g=!1,P=Object.defineProperty({},"passive",{get:function(){g=!0}});try{const B=()=>{};A.addEventListener("test",B,P),A.removeEventListener("test",B,P)}catch{}return g}();function Mc(g,P){if(Us.call(this,g?g.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,g){var B=this.type=g.type,ee=g.changedTouches&&g.changedTouches.length?g.changedTouches[0]:null;if(this.target=g.target||g.srcElement,this.g=P,P=g.relatedTarget){if(Ur){e:{try{nr(P.nodeName);var qe=!0;break e}catch{}qe=!1}qe||(P=null)}}else"mouseover"==B?P=g.fromElement:"mouseout"==B&&(P=g.toElement);this.relatedTarget=P,ee?(this.clientX=void 0!==ee.clientX?ee.clientX:ee.pageX,this.clientY=void 0!==ee.clientY?ee.clientY:ee.pageY,this.screenX=ee.screenX||0,this.screenY=ee.screenY||0):(this.clientX=void 0!==g.clientX?g.clientX:g.pageX,this.clientY=void 0!==g.clientY?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0),this.button=g.button,this.key=g.key||"",this.ctrlKey=g.ctrlKey,this.altKey=g.altKey,this.shiftKey=g.shiftKey,this.metaKey=g.metaKey,this.pointerId=g.pointerId||0,this.pointerType="string"==typeof g.pointerType?g.pointerType:cm[g.pointerType]||"",this.state=g.state,this.i=g,g.defaultPrevented&&Mc.aa.h.call(this)}}Rt(Mc,Us);var cm={2:"touch",3:"pen",4:"mouse"};Mc.prototype.h=function(){Mc.aa.h.call(this);var g=this.i;g.preventDefault?g.preventDefault():g.returnValue=!1};var Qo="closure_listenable_"+(1e6*Math.random()|0),rE=0;function iE(g,P,B,ee,qe){this.listener=g,this.proxy=null,this.src=P,this.type=B,this.capture=!!ee,this.ha=qe,this.key=++rE,this.da=this.fa=!1}function Md(g){g.da=!0,g.listener=null,g.proxy=null,g.src=null,g.ha=null}function pp(g){this.src=g,this.g={},this.h=0}function Dl(g,P){var B=P.type;if(B in g.g){var ft,ee=g.g[B],qe=Array.prototype.indexOf.call(ee,P,void 0);(ft=0<=qe)&&Array.prototype.splice.call(ee,qe,1),ft&&(Md(P),0==g.g[B].length&&(delete g.g[B],g.h--))}}function gp(g,P,B,ee){for(var qe=0;qe<g.length;++qe){var ft=g[qe];if(!ft.da&&ft.listener==P&&ft.capture==!!B&&ft.ha==ee)return qe}return-1}pp.prototype.add=function(g,P,B,ee,qe){var ft=g.toString();(g=this.g[ft])||(g=this.g[ft]=[],this.h++);var nn=gp(g,P,ee,qe);return-1<nn?(P=g[nn],B||(P.fa=!1)):((P=new iE(P,this.src,ft,!!ee,qe)).fa=B,g.push(P)),P};var Nc="closure_lm_"+(1e6*Math.random()|0),Al={};function mp(g,P,B,ee,qe){if(ee&&ee.once)return lm(g,P,B,ee,qe);if(Array.isArray(P)){for(var ft=0;ft<P.length;ft++)mp(g,P[ft],B,ee,qe);return null}return B=hm(B),g&&g[Qo]?g.K(P,B,L(ee)?!!ee.capture:!!ee,qe):Nd(g,P,B,!1,ee,qe)}function Nd(g,P,B,ee,qe,ft){if(!P)throw Error("Invalid event type");var nn=L(qe)?!!qe.capture:!!qe,ni=_p(g);if(ni||(g[Nc]=ni=new pp(g)),(B=ni.add(P,B,ee,nn,ft)).proxy)return B;if(ee=function ry(){const P=sE;return function g(B){return P.call(g.src,g.listener,B)}}(),B.proxy=ee,ee.src=g,ee.listener=B,g.addEventListener)ny||(qe=nn),void 0===qe&&(qe=!1),g.addEventListener(P.toString(),ee,qe);else if(g.attachEvent)g.attachEvent(sy(P.toString()),ee);else{if(!g.addListener||!g.removeListener)throw Error("addEventListener and attachEvent are unavailable.");g.addListener(ee)}return B}function lm(g,P,B,ee,qe){if(Array.isArray(P)){for(var ft=0;ft<P.length;ft++)lm(g,P[ft],B,ee,qe);return null}return B=hm(B),g&&g[Qo]?g.L(P,B,L(ee)?!!ee.capture:!!ee,qe):Nd(g,P,B,!0,ee,qe)}function iy(g,P,B,ee,qe){if(Array.isArray(P))for(var ft=0;ft<P.length;ft++)iy(g,P[ft],B,ee,qe);else ee=L(ee)?!!ee.capture:!!ee,B=hm(B),g&&g[Qo]?(g=g.i,(P=String(P).toString())in g.g&&-1<(B=gp(ft=g.g[P],B,ee,qe))&&(Md(ft[B]),Array.prototype.splice.call(ft,B,1),0==ft.length&&(delete g.g[P],g.h--))):g&&(g=_p(g))&&(P=g.g[P.toString()],g=-1,P&&(g=gp(P,B,ee,qe)),(B=-1<g?P[g]:null)&&dm(B))}function dm(g){if("number"!=typeof g&&g&&!g.da){var P=g.src;if(P&&P[Qo])Dl(P.i,g);else{var B=g.type,ee=g.proxy;P.removeEventListener?P.removeEventListener(B,ee,g.capture):P.detachEvent?P.detachEvent(sy(B),ee):P.addListener&&P.removeListener&&P.removeListener(ee),(B=_p(P))?(Dl(B,g),0==B.h&&(B.src=null,P[Nc]=null)):Md(g)}}}function sy(g){return g in Al?Al[g]:Al[g]="on"+g}function sE(g,P){if(g.da)g=!0;else{P=new Mc(P,this);var B=g.listener,ee=g.ha||g.src;g.fa&&dm(g),g=B.call(ee,P)}return g}function _p(g){return(g=g[Nc])instanceof pp?g:null}var xd="__closure_events_fn_"+(1e9*Math.random()>>>0);function hm(g){return"function"==typeof g?g:(g[xd]||(g[xd]=function(P){return g.handleEvent(P)}),g[xd])}function lo(){Gu.call(this),this.i=new pp(this),this.M=this,this.F=null}function ho(g,P){var B,ee=g.F;if(ee)for(B=[];ee;ee=ee.F)B.push(ee);if(g=g.M,ee=P.type||P,"string"==typeof P)P=new Us(P,g);else if(P instanceof Us)P.target=P.target||g;else{var qe=P;Ve(P=new Us(ee,g),qe)}if(qe=!0,B)for(var ft=B.length-1;0<=ft;ft--){var nn=P.g=B[ft];qe=yp(nn,ee,!0,P)&&qe}if(qe=yp(nn=P.g=g,ee,!0,P)&&qe,qe=yp(nn,ee,!1,P)&&qe,B)for(ft=0;ft<B.length;ft++)qe=yp(nn=P.g=B[ft],ee,!1,P)&&qe}function yp(g,P,B,ee){if(!(P=g.i.g[String(P)]))return!0;P=P.concat();for(var qe=!0,ft=0;ft<P.length;++ft){var nn=P[ft];if(nn&&!nn.da&&nn.capture==B){var ni=nn.listener,ss=nn.ha||nn.src;nn.fa&&Dl(g.i,nn),qe=!1!==ni.call(ss,ee)&&qe}}return qe&&!ee.defaultPrevented}function fm(g,P,B){if("function"==typeof g)B&&(g=we(g,B));else{if(!g||"function"!=typeof g.handleEvent)throw Error("Invalid listener argument");g=we(g.handleEvent,g)}return 2147483647<Number(P)?-1:A.setTimeout(g,P||0)}function oy(g){g.g=fm(()=>{g.g=null,g.i&&(g.i=!1,oy(g))},g.l);const P=g.h;g.h=null,g.m.apply(null,P)}Rt(lo,Gu),lo.prototype[Qo]=!0,lo.prototype.removeEventListener=function(g,P,B,ee){iy(this,g,P,B,ee)},lo.prototype.N=function(){if(lo.aa.N.call(this),this.i){var P,g=this.i;for(P in g.g){for(var B=g.g[P],ee=0;ee<B.length;ee++)Md(B[ee]);delete g.g[P],g.h--}}this.F=null},lo.prototype.K=function(g,P,B,ee){return this.i.add(String(g),P,!1,B,ee)},lo.prototype.L=function(g,P,B,ee){return this.i.add(String(g),P,!0,B,ee)};class oE extends Gu{constructor(P,B){super(),this.m=P,this.l=B,this.h=null,this.i=!1,this.g=null}j(P){this.h=arguments,this.g?this.i=!0:oy(this)}N(){super.N(),this.g&&(A.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Od(g){Gu.call(this),this.h=g,this.g={}}Rt(Od,Gu);var vp=[];function pm(g){hr(g.g,function(P,B){this.g.hasOwnProperty(B)&&dm(P)},g),g.g={}}Od.prototype.N=function(){Od.aa.N.call(this),pm(this)},Od.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Cl=A.JSON.stringify,jh=A.JSON.parse,$h=class{stringify(g){return A.JSON.stringify(g,void 0)}parse(g){return A.JSON.parse(g,void 0)}};function gm(){}function uy(){}gm.prototype.h=null;var xc={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Hh(){Us.call(this,"d")}function mm(){Us.call(this,"c")}Rt(Hh,Us),Rt(mm,Us);var kd={},aE=null;function Ep(){return aE=aE||new lo}function cy(g){Us.call(this,kd.La,g)}function Ip(g){const P=Ep();ho(P,new cy(P))}function ly(g,P){Us.call(this,kd.STAT_EVENT,g),this.stat=P}function Ro(g){const P=Ep();ho(P,new ly(P,g))}function dy(g,P){Us.call(this,kd.Ma,g),this.size=P}function Gh(g,P){if("function"!=typeof g)throw Error("Fn must not be null and must be a function");return A.setTimeout(function(){g()},P)}function zh(){this.g=!0}function Oc(g,P,B,ee){g.info(function(){return"XMLHTTP TEXT ("+P+"): "+function hy(g,P){if(!g.g)return P;if(!P)return null;try{var B=JSON.parse(P);if(B)for(g=0;g<B.length;g++)if(Array.isArray(B[g])){var ee=B[g];if(!(2>ee.length)){var qe=ee[1];if(Array.isArray(qe)&&!(1>qe.length)){var ft=qe[0];if("noop"!=ft&&"stop"!=ft&&"close"!=ft)for(var nn=1;nn<qe.length;nn++)qe[nn]=""}}}return Cl(B)}catch{return P}}(g,B)+(ee?" "+ee:"")})}kd.La="serverreachability",Rt(cy,Us),kd.STAT_EVENT="statevent",Rt(ly,Us),kd.Ma="timingevent",Rt(dy,Us),zh.prototype.xa=function(){this.g=!1},zh.prototype.info=function(){};var vm,kc={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ym={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Vc(){}function zu(g,P,B,ee){this.j=g,this.i=P,this.l=B,this.R=ee||1,this.U=new Od(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new fy}function fy(){this.i=null,this.g="",this.h=!1}Rt(Vc,gm),Vc.prototype.g=function(){return new XMLHttpRequest},Vc.prototype.i=function(){return{}},vm=new Vc;var Em={},Im={};function Vd(g,P,B){g.L=1,g.v=Cp(qu(P)),g.m=B,g.P=!0,py(g,null)}function py(g,P){g.F=Date.now(),Tp(g),g.A=qu(g.v);var B=g.A,ee=g.R;Array.isArray(ee)||(ee=[String(ee)]),Ki(B.i,"t",ee),g.C=0,B=g.j.J,g.h=new fy,g.g=Fy(g.j,B?P:null,!g.m),0<g.O&&(g.M=new oE(we(g.Y,g,g.g),g.O)),P=g.U,B=g.g,ee=g.ca;var qe="readystatechange";Array.isArray(qe)||(qe&&(vp[0]=qe.toString()),qe=vp);for(var ft=0;ft<qe.length;ft++){var nn=mp(B,qe[ft],ee||P.handleEvent,!1,P.h||P);if(!nn)break;P.g[nn.key]=nn}P=g.H?_e(g.H):{},g.m?(g.u||(g.u="POST"),P["Content-Type"]="application/x-www-form-urlencoded",g.g.ea(g.A,g.u,g.m,P)):(g.u="GET",g.g.ea(g.A,g.u,null,P)),Ip(),function _m(g,P,B,ee,qe,ft){g.info(function(){if(g.g)if(ft)for(var nn="",ni=ft.split("&"),ss=0;ss<ni.length;ss++){var Vr=ni[ss].split("=");if(1<Vr.length){var vs=Vr[0];Vr=Vr[1];var Es=vs.split("_");nn=2<=Es.length&&"type"==Es[1]?nn+(vs+"=")+Vr+"&":nn+(vs+"=redacted&")}}else nn=null;else nn=ft;return"XMLHTTP REQ ("+ee+") [attempt "+qe+"]: "+P+"\n"+B+"\n"+nn})}(g.i,g.u,g.A,g.l,g.R,g.m)}function gy(g){return!!g.g&&"GET"==g.u&&2!=g.L&&g.j.Ca}function uE(g,P){var B=g.C,ee=P.indexOf("\n",B);return-1==ee?Im:(B=Number(P.substring(B,ee)),isNaN(B)?Em:(ee+=1)+B>P.length?Im:(P=P.slice(ee,ee+B),g.C=ee+B,P))}function Tp(g){g.S=Date.now()+g.I,my(g,g.I)}function my(g,P){if(null!=g.B)throw Error("WatchDog timer not null");g.B=Gh(we(g.ba,g),P)}function Kh(g){g.B&&(A.clearTimeout(g.B),g.B=null)}function Wu(g){0==g.j.G||g.J||Oy(g.j,g)}function bl(g){Kh(g);var P=g.M;P&&"function"==typeof P.ma&&P.ma(),g.M=null,pm(g.U),g.g&&(P=g.g,g.g=null,P.abort(),P.ma())}function Fd(g,P){try{var B=g.j;if(0!=B.G&&(B.g==g||qh(B.h,g)))if(!g.K&&qh(B.h,g)&&3==B.G){try{var ee=B.Da.g.parse(P)}catch{ee=null}if(Array.isArray(ee)&&3==ee.length){var qe=ee;if(0==qe[0]){e:if(!B.u){if(B.g){if(!(B.g.F+3e3<g.F))break e;Pp(B),Lc(B)}Mm(B),Ro(18)}}else B.za=qe[1],0<B.za-B.T&&37500>qe[2]&&B.F&&0==B.v&&!B.C&&(B.C=Gh(we(B.Za,B),6e3));if(1>=yy(B.h)&&B.ca){try{B.ca()}catch{}B.ca=void 0}}else Ml(B,11)}else if((g.K||B.g==g)&&Pp(B),!Rn(P))for(qe=B.Da.g.parse(P),P=0;P<qe.length;P++){let Vr=qe[P];if(B.T=Vr[0],Vr=Vr[1],2==B.G)if("c"==Vr[0]){B.K=Vr[1],B.ia=Vr[2];const vs=Vr[3];null!=vs&&(B.la=vs,B.j.info("VER="+B.la));const Es=Vr[4];null!=Es&&(B.Aa=Es,B.j.info("SVER="+B.Aa));const Wd=Vr[5];null!=Wd&&"number"==typeof Wd&&0<Wd&&(B.L=ee=1.5*Wd,B.j.info("backChannelRequestTimeoutMs_="+ee)),ee=B;const Ja=g.g;if(Ja){const Np=Ja.g?Ja.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Np){var ft=ee.h;ft.g||-1==Np.indexOf("spdy")&&-1==Np.indexOf("quic")&&-1==Np.indexOf("h2")||(ft.j=ft.l,ft.g=new Set,ft.h&&(wm(ft,ft.h),ft.h=null))}if(ee.D){const Om=Ja.g?Ja.g.getResponseHeader("X-HTTP-Session-Id"):null;Om&&(ee.ya=Om,Di(ee.I,ee.D,Om))}}B.G=3,B.l&&B.l.ua(),B.ba&&(B.R=Date.now()-g.F,B.j.info("Handshake RTT: "+B.R+"ms"));var nn=g;if((ee=B).qa=Jh(ee,ee.J?ee.ia:null,ee.W),nn.K){Tm(ee.h,nn);var ni=nn,ss=ee.L;ss&&(ni.I=ss),ni.B&&(Kh(ni),Tp(ni)),ee.g=nn}else Gd(ee);0<B.i.length&&Pl(B)}else"stop"!=Vr[0]&&"close"!=Vr[0]||Ml(B,7);else 3==B.G&&("stop"==Vr[0]||"close"==Vr[0]?"stop"==Vr[0]?Ml(B,7):vu(B):"noop"!=Vr[0]&&B.l&&B.l.ta(Vr),B.v=0)}Ip()}catch{}}zu.prototype.ca=function(g){g=g.target;const P=this.M;P&&3==Xo(g)?P.j():this.Y(g)},zu.prototype.Y=function(g){try{if(g==this.g)e:{const Es=Xo(this.g);var P=this.g.Ba();if(this.g.Z(),!(3>Es)&&(3!=Es||this.g&&(this.h.h||this.g.oa()||My(this.g)))){this.J||4!=Es||7==P||Ip(),Kh(this);var B=this.g.Z();this.X=B;t:if(gy(this)){var ee=My(this.g);g="";var qe=ee.length,ft=4==Xo(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){bl(this),Wu(this);var nn="";break t}this.h.i=new A.TextDecoder}for(P=0;P<qe;P++)this.h.h=!0,g+=this.h.i.decode(ee[P],{stream:!(ft&&P==qe-1)});ee.length=0,this.h.g+=g,this.C=0,nn=this.h.g}else nn=this.g.oa();if(this.o=200==B,function Wh(g,P,B,ee,qe,ft,nn){g.info(function(){return"XMLHTTP RESP ("+ee+") [ attempt "+qe+"]: "+P+"\n"+B+"\n"+ft+" "+nn})}(this.i,this.u,this.A,this.l,this.R,Es,B),this.o){if(this.T&&!this.K){t:{if(this.g){var ni,ss=this.g;if((ni=ss.g?ss.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Rn(ni)){var Vr=ni;break t}}Vr=null}if(!(B=Vr)){this.o=!1,this.s=3,Ro(12),bl(this),Wu(this);break e}Oc(this.i,this.l,B,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Fd(this,B)}if(this.P){let Ja;for(B=!0;!this.J&&this.C<nn.length;){if(Ja=uE(this,nn),Ja==Im){4==Es&&(this.s=4,Ro(14),B=!1),Oc(this.i,this.l,null,"[Incomplete Response]");break}if(Ja==Em){this.s=4,Ro(15),Oc(this.i,this.l,nn,"[Invalid Chunk]"),B=!1;break}Oc(this.i,this.l,Ja,null),Fd(this,Ja)}if(gy(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=Es||0!=nn.length||this.h.h||(this.s=1,Ro(16),B=!1),this.o=this.o&&B,B){if(0<nn.length&&!this.W){this.W=!0;var vs=this.j;vs.g==this&&vs.ba&&!vs.M&&(vs.j.info("Great, no buffering proxy detected. Bytes received: "+nn.length),Nm(vs),vs.M=!0,Ro(11))}}else Oc(this.i,this.l,nn,"[Invalid Chunked Response]"),bl(this),Wu(this)}else Oc(this.i,this.l,nn,null),Fd(this,nn);4==Es&&bl(this),this.o&&!this.J&&(4==Es?Oy(this.j,this):(this.o=!1,Tp(this)))}else(function mE(g){const P={};g=(g.g&&2<=Xo(g)&&g.g.getAllResponseHeaders()||"").split("\r\n");for(let ee=0;ee<g.length;ee++){if(Rn(g[ee]))continue;var B=Ge(g[ee]);const qe=B[0];if("string"!=typeof(B=B[1]))continue;B=B.trim();const ft=P[qe]||[];P[qe]=ft,ft.push(B)}!function xe(g,P){for(const B in g)P.call(void 0,g[B],B,g)}(P,function(ee){return ee.join(", ")})})(this.g),400==B&&0<nn.indexOf("Unknown SID")?(this.s=3,Ro(12)):(this.s=0,Ro(13)),bl(this),Wu(this)}}}catch{}},zu.prototype.cancel=function(){this.J=!0,bl(this)},zu.prototype.ba=function(){this.B=null;const g=Date.now();0<=g-this.S?(function wp(g,P){g.info(function(){return"TIMEOUT: "+P})}(this.i,this.A),2!=this.L&&(Ip(),Ro(17)),bl(this),this.s=2,Wu(this)):my(this,this.S-g)};var Dp=class{constructor(g,P){this.g=g,this.map=P}};function cE(g){this.l=g||10,g=A.PerformanceNavigationTiming?0<(g=A.performance.getEntriesByType("navigation")).length&&("hq"==g[0].nextHopProtocol||"h2"==g[0].nextHopProtocol):!!(A.chrome&&A.chrome.loadTimes&&A.chrome.loadTimes()&&A.chrome.loadTimes().wasFetchedViaSpdy),this.j=g?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function _y(g){return!!g.h||!!g.g&&g.g.size>=g.j}function yy(g){return g.h?1:g.g?g.g.size:0}function qh(g,P){return g.h?g.h==P:!!g.g&&g.g.has(P)}function wm(g,P){g.g?g.g.add(P):g.h=P}function Tm(g,P){g.h&&g.h==P?g.h=null:g.g&&g.g.has(P)&&g.g.delete(P)}function vy(g){if(null!=g.h)return g.i.concat(g.h.D);if(null!=g.g&&0!==g.g.size){let P=g.i;for(const B of g.g.values())P=P.concat(B.D);return P}return jt(g.i)}function Iy(g,P){if(g.forEach&&"function"==typeof g.forEach)g.forEach(P,void 0);else if(S(g)||"string"==typeof g)Array.prototype.forEach.call(g,P,void 0);else for(var B=function Ey(g){if(g.na&&"function"==typeof g.na)return g.na();if(!g.V||"function"!=typeof g.V){if(typeof Map<"u"&&g instanceof Map)return Array.from(g.keys());if(!(typeof Set<"u"&&g instanceof Set)){if(S(g)||"string"==typeof g){var P=[];g=g.length;for(var B=0;B<g;B++)P.push(B);return P}P=[],B=0;for(const ee in g)P[B++]=ee;return P}}}(g),ee=function lE(g){if(g.V&&"function"==typeof g.V)return g.V();if(typeof Map<"u"&&g instanceof Map||typeof Set<"u"&&g instanceof Set)return Array.from(g.values());if("string"==typeof g)return g.split("");if(S(g)){for(var P=[],B=g.length,ee=0;ee<B;ee++)P.push(g[ee]);return P}for(ee in P=[],B=0,g)P[B++]=g[ee];return P}(g),qe=ee.length,ft=0;ft<qe;ft++)P.call(void 0,ee[ft],B&&B[ft],g)}cE.prototype.cancel=function(){if(this.i=vy(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const g of this.g.values())g.cancel();this.g.clear()}};var wy=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ku(g){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,g instanceof Ku){this.h=g.h,Qh(this,g.j),this.o=g.o,this.g=g.g,Ap(this,g.s),this.l=g.l;var P=g.i,B=new Po;B.i=P.i,P.g&&(B.g=new Map(P.g),B.h=P.h),Dm(this,B),this.m=g.m}else g&&(P=String(g).match(wy))?(this.h=!1,Qh(this,P[1]||"",!0),this.o=Fc(P[2]||""),this.g=Fc(P[3]||"",!0),Ap(this,P[4]),this.l=Fc(P[5]||"",!0),Dm(this,P[6]||"",!0),this.m=Fc(P[7]||"")):(this.h=!1,this.i=new Po(null,this.h))}function qu(g){return new Ku(g)}function Qh(g,P,B){g.j=B?Fc(P,!0):P,g.j&&(g.j=g.j.replace(/:$/,""))}function Ap(g,P){if(P){if(P=Number(P),isNaN(P)||0>P)throw Error("Bad port number "+P);g.s=P}else g.s=null}function Dm(g,P,B){P instanceof Po?(g.i=P,function Cm(g,P){P&&!g.j&&(Qu(g),g.i=null,g.g.forEach(function(B,ee){var qe=ee.toLowerCase();ee!=qe&&(Ay(this,ee),Ki(this,qe,B))},g)),g.j=P}(g.i,g.h)):(B||(P=Ud(P,zI)),g.i=new Po(P,g.h))}function Di(g,P,B){g.i.set(P,B)}function Cp(g){return Di(g,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),g}function Fc(g,P){return g?P?decodeURI(g.replace(/%25/g,"%2525")):decodeURIComponent(g):""}function Ud(g,P,B){return"string"==typeof g?(g=encodeURI(g).replace(P,dE),B&&(g=g.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g):null}function dE(g){return"%"+((g=g.charCodeAt(0))>>4&15).toString(16)+(15&g).toString(16)}Ku.prototype.toString=function(){var g=[],P=this.j;P&&g.push(Ud(P,Ty,!0),":");var B=this.g;return(B||"file"==P)&&(g.push("//"),(P=this.o)&&g.push(Ud(P,Ty,!0),"@"),g.push(encodeURIComponent(String(B)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(B=this.s)&&g.push(":",String(B))),(B=this.l)&&(this.g&&"/"!=B.charAt(0)&&g.push("/"),g.push(Ud(B,"/"==B.charAt(0)?Am:hE,!0))),(B=this.i.toString())&&g.push("?",B),(B=this.m)&&g.push("#",Ud(B,Dy)),g.join("")};var Ty=/[#\/\?@]/g,hE=/[#\?:]/g,Am=/[#\?]/g,zI=/[#\?@]/g,Dy=/#/g;function Po(g,P){this.h=this.g=null,this.i=g||null,this.j=!!P}function Qu(g){g.g||(g.g=new Map,g.h=0,g.i&&function Ld(g,P){if(g){g=g.split("&");for(var B=0;B<g.length;B++){var ee=g[B].indexOf("="),qe=null;if(0<=ee){var ft=g[B].substring(0,ee);qe=g[B].substring(ee+1)}else ft=g[B];P(ft,qe?decodeURIComponent(qe.replace(/\+/g," ")):"")}}}(g.i,function(P,B){g.add(decodeURIComponent(P.replace(/\+/g," ")),B)}))}function Ay(g,P){Qu(g),P=Bd(g,P),g.g.has(P)&&(g.i=null,g.h-=g.g.get(P).length,g.g.delete(P))}function fE(g,P){return Qu(g),P=Bd(g,P),g.g.has(P)}function Ki(g,P,B){Ay(g,P),0<B.length&&(g.i=null,g.g.set(Bd(g,P),jt(B)),g.h+=B.length)}function Bd(g,P){return P=String(P),g.j&&(P=P.toLowerCase()),P}function yu(g,P,B,ee,qe){try{qe&&(qe.onload=null,qe.onerror=null,qe.onabort=null,qe.ontimeout=null),ee(B)}catch{}}function Cy(){this.g=new $h}function by(g,P,B){const ee=B||"";try{Iy(g,function(qe,ft){let nn=qe;L(qe)&&(nn=Cl(qe)),P.push(ee+ft+"="+encodeURIComponent(nn))})}catch(qe){throw P.push(ee+"type="+encodeURIComponent("_badmap")),qe}}function jd(g){this.l=g.Ub||null,this.j=g.eb||!1}function bp(g,P){lo.call(this),this.D=g,this.o=P,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Sy(g){g.j.read().then(g.Pa.bind(g)).catch(g.ga.bind(g))}function Ya(g){g.readyState=4,g.l=null,g.j=null,g.v=null,$d(g)}function $d(g){g.onreadystatechange&&g.onreadystatechange.call(g)}function Sp(g){let P="";return hr(g,function(B,ee){P+=ee,P+=":",P+=B,P+="\r\n"}),P}function bm(g,P,B){e:{for(ee in B){var ee=!1;break e}ee=!0}ee||(B=Sp(B),"string"==typeof g?null!=B&&encodeURIComponent(String(B)):Di(g,P,B))}function Mi(g){lo.call(this),this.headers=new Map,this.o=g||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(u=Po.prototype).add=function(g,P){Qu(this),this.i=null,g=Bd(this,g);var B=this.g.get(g);return B||this.g.set(g,B=[]),B.push(P),this.h+=1,this},u.forEach=function(g,P){Qu(this),this.g.forEach(function(B,ee){B.forEach(function(qe){g.call(P,qe,ee,this)},this)},this)},u.na=function(){Qu(this);const g=Array.from(this.g.values()),P=Array.from(this.g.keys()),B=[];for(let ee=0;ee<P.length;ee++){const qe=g[ee];for(let ft=0;ft<qe.length;ft++)B.push(P[ee])}return B},u.V=function(g){Qu(this);let P=[];if("string"==typeof g)fE(this,g)&&(P=P.concat(this.g.get(Bd(this,g))));else{g=Array.from(this.g.values());for(let B=0;B<g.length;B++)P=P.concat(g[B])}return P},u.set=function(g,P){return Qu(this),this.i=null,fE(this,g=Bd(this,g))&&(this.h-=this.g.get(g).length),this.g.set(g,[P]),this.h+=1,this},u.get=function(g,P){return g&&0<(g=this.V(g)).length?String(g[0]):P},u.toString=function(){if(this.i)return this.i;if(!this.g)return"";const g=[],P=Array.from(this.g.keys());for(var B=0;B<P.length;B++){var ee=P[B];const ft=encodeURIComponent(String(ee)),nn=this.V(ee);for(ee=0;ee<nn.length;ee++){var qe=ft;""!==nn[ee]&&(qe+="="+encodeURIComponent(String(nn[ee]))),g.push(qe)}}return this.i=g.join("&")},Rt(jd,gm),jd.prototype.g=function(){return new bp(this.l,this.j)},jd.prototype.i=function(g){return function(){return g}}({}),Rt(bp,lo),(u=bp.prototype).open=function(g,P){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=g,this.A=P,this.readyState=1,$d(this)},u.send=function(g){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const P={headers:this.u,method:this.B,credentials:this.m,cache:void 0};g&&(P.body=g),(this.D||A).fetch(new Request(this.A,P)).then(this.Sa.bind(this),this.ga.bind(this))},u.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ya(this)),this.readyState=0},u.Sa=function(g){if(this.g&&(this.l=g,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=g.headers,this.readyState=2,$d(this)),this.g&&(this.readyState=3,$d(this),this.g)))if("arraybuffer"===this.responseType)g.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof A.ReadableStream<"u"&&"body"in g){if(this.j=g.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Sy(this)}else g.text().then(this.Ra.bind(this),this.ga.bind(this))},u.Pa=function(g){if(this.g){if(this.o&&g.value)this.response.push(g.value);else if(!this.o){var P=g.value?g.value:new Uint8Array(0);(P=this.v.decode(P,{stream:!g.done}))&&(this.response=this.responseText+=P)}g.done?Ya(this):$d(this),3==this.readyState&&Sy(this)}},u.Ra=function(g){this.g&&(this.response=this.responseText=g,Ya(this))},u.Qa=function(g){this.g&&(this.response=g,Ya(this))},u.ga=function(){this.g&&Ya(this)},u.setRequestHeader=function(g,P){this.u.append(g,P)},u.getResponseHeader=function(g){return this.h&&this.h.get(g.toLowerCase())||""},u.getAllResponseHeaders=function(){if(!this.h)return"";const g=[],P=this.h.entries();for(var B=P.next();!B.done;)g.push((B=B.value)[0]+": "+B[1]),B=P.next();return g.join("\r\n")},Object.defineProperty(bp.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(g){this.m=g?"include":"same-origin"}}),Rt(Mi,lo);var Ry=/^https?$/i,Py=["POST","PUT"];function Hd(g,P){g.h=!1,g.g&&(g.j=!0,g.g.abort(),g.j=!1),g.l=P,g.m=5,Rp(g),Sl(g)}function Rp(g){g.A||(g.A=!0,ho(g,"complete"),ho(g,"error"))}function Xu(g){if(g.h&&typeof _<"u"&&(!g.v[1]||4!=Xo(g)||2!=g.Z()))if(g.u&&4==Xo(g))fm(g.Ea,0,g);else if(ho(g,"readystatechange"),4==Xo(g)){g.h=!1;try{const nn=g.Z();e:switch(nn){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var P=!0;break e;default:P=!1}var B;if(!(B=P)){var ee;if(ee=0===nn){var qe=String(g.D).match(wy)[1]||null;!qe&&A.self&&A.self.location&&(qe=A.self.location.protocol.slice(0,-1)),ee=!Ry.test(qe?qe.toLowerCase():"")}B=ee}if(B)ho(g,"complete"),ho(g,"success");else{g.m=6;try{var ft=2<Xo(g)?g.g.statusText:""}catch{ft=""}g.l=ft+" ["+g.Z()+"]",Rp(g)}}finally{Sl(g)}}}function Sl(g,P){if(g.g){Sm(g);const B=g.g,ee=g.v[0]?()=>{}:null;g.g=null,g.v=null,P||ho(g,"ready");try{B.onreadystatechange=ee}catch{}}}function Sm(g){g.I&&(A.clearTimeout(g.I),g.I=null)}function Xo(g){return g.g?g.g.readyState:0}function My(g){try{if(!g.g)return null;if("response"in g.g)return g.g.response;switch(g.H){case"":case"text":return g.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in g.g)return g.g.mozResponseArrayBuffer}return null}catch{return null}}function Rl(g,P,B){return B&&B.internalChannelParams&&B.internalChannelParams[g]||P}function Rm(g){this.Aa=0,this.i=[],this.j=new zh,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Rl("failFast",!1,g),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Rl("baseRetryDelayMs",5e3,g),this.cb=Rl("retryDelaySeedMs",1e4,g),this.Wa=Rl("forwardChannelMaxRetries",2,g),this.wa=Rl("forwardChannelRequestTimeoutMs",2e4,g),this.pa=g&&g.xmlHttpFactory||void 0,this.Xa=g&&g.Tb||void 0,this.Ca=g&&g.useFetchStreams||!1,this.L=void 0,this.J=g&&g.supportsCrossDomainXhr||!1,this.K="",this.h=new cE(g&&g.concurrentRequestLimit),this.Da=new Cy,this.P=g&&g.fastHandshake||!1,this.O=g&&g.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=g&&g.Rb||!1,g&&g.xa&&this.j.xa(),g&&g.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&g&&g.detectBufferingProxy||!1,this.ja=void 0,g&&g.longPollingTimeout&&0<g.longPollingTimeout&&(this.ja=g.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function vu(g){if(_E(g),3==g.G){var P=g.U++,B=qu(g.I);if(Di(B,"SID",g.K),Di(B,"RID",P),Di(B,"TYPE","terminate"),Xh(g,B),(P=new zu(g,g.j,P)).L=2,P.v=Cp(qu(B)),B=!1,A.navigator&&A.navigator.sendBeacon)try{B=A.navigator.sendBeacon(P.v.toString(),"")}catch{}!B&&A.Image&&((new Image).src=P.v,B=!0),B||(P.g=Fy(P.j,null),P.g.ea(P.v)),P.F=Date.now(),Tp(P)}Vy(g)}function Lc(g){g.g&&(Nm(g),g.g.cancel(),g.g=null)}function _E(g){Lc(g),g.u&&(A.clearTimeout(g.u),g.u=null),Pp(g),g.h.cancel(),g.s&&("number"==typeof g.s&&A.clearTimeout(g.s),g.s=null)}function Pl(g){if(!_y(g.h)&&!g.s){g.s=!0;var P=g.Ga;Sd||fp(),Rd||(Sd(),Rd=!0),Pd.add(P,g),g.B=0}}function Pm(g,P){var B;B=P?P.l:g.U++;const ee=qu(g.I);Di(ee,"SID",g.K),Di(ee,"RID",B),Di(ee,"AID",g.T),Xh(g,ee),g.m&&g.o&&bm(ee,g.m,g.o),B=new zu(g,g.j,B,g.B+1),null===g.m&&(B.H=g.o),P&&(g.i=P.D.concat(g.i)),P=Yh(g,B,1e3),B.I=Math.round(.5*g.wa)+Math.round(.5*g.wa*Math.random()),wm(g.h,B),Vd(B,ee,P)}function Xh(g,P){g.H&&hr(g.H,function(B,ee){Di(P,ee,B)}),g.l&&Iy({},function(B,ee){Di(P,ee,B)})}function Yh(g,P,B){B=Math.min(g.i.length,B);var ee=g.l?we(g.l.Na,g.l,g):null;e:{var qe=g.i;let ft=-1;for(;;){const nn=["count="+B];-1==ft?0<B?(ft=qe[0].g,nn.push("ofs="+ft)):ft=0:nn.push("ofs="+ft);let ni=!0;for(let ss=0;ss<B;ss++){let Vr=qe[ss].g;const vs=qe[ss].map;if(Vr-=ft,0>Vr)ft=Math.max(0,qe[ss].g-100),ni=!1;else try{by(vs,nn,"req"+Vr+"_")}catch{ee&&ee(vs)}}if(ni){ee=nn.join("&");break e}}}return g=g.i.splice(0,B),P.D=g,ee}function Gd(g){if(!g.g&&!g.u){g.Y=1;var P=g.Fa;Sd||fp(),Rd||(Sd(),Rd=!0),Pd.add(P,g),g.v=0}}function Mm(g){return!(g.g||g.u||3<=g.v||(g.Y++,g.u=Gh(we(g.Fa,g),ky(g,g.v)),g.v++,0))}function Nm(g){null!=g.A&&(A.clearTimeout(g.A),g.A=null)}function xy(g){g.g=new zu(g,g.j,"rpc",g.Y),null===g.m&&(g.g.H=g.o),g.g.O=0;var P=qu(g.qa);Di(P,"RID","rpc"),Di(P,"SID",g.K),Di(P,"AID",g.T),Di(P,"CI",g.F?"0":"1"),!g.F&&g.ja&&Di(P,"TO",g.ja),Di(P,"TYPE","xmlhttp"),Xh(g,P),g.m&&g.o&&bm(P,g.m,g.o),g.L&&(g.g.I=g.L);var B=g.g;g=g.ia,B.L=1,B.v=Cp(qu(P)),B.m=null,B.P=!0,py(B,g)}function Pp(g){null!=g.C&&(A.clearTimeout(g.C),g.C=null)}function Oy(g,P){var B=null;if(g.g==P){Pp(g),Nm(g),g.g=null;var ee=2}else{if(!qh(g.h,P))return;B=P.D,Tm(g.h,P),ee=1}if(0!=g.G)if(P.o)if(1==ee){B=P.m?P.m.length:0,P=Date.now()-P.F;var qe=g.B;ho(ee=Ep(),new dy(ee,B)),Pl(g)}else Gd(g);else if(3==(qe=P.s)||0==qe&&0<P.X||!(1==ee&&function Ny(g,P){return!(yy(g.h)>=g.h.j-(g.s?1:0)||(g.s?(g.i=P.D.concat(g.i),0):1==g.G||2==g.G||g.B>=(g.Va?0:g.Wa)||(g.s=Gh(we(g.Ga,g,P),ky(g,g.B)),g.B++,0)))}(g,P)||2==ee&&Mm(g)))switch(B&&0<B.length&&(P=g.h,P.i=P.i.concat(B)),qe){case 1:Ml(g,5);break;case 4:Ml(g,10);break;case 3:Ml(g,6);break;default:Ml(g,2)}}function ky(g,P){let B=g.Ta+Math.floor(Math.random()*g.cb);return g.isActive()||(B*=2),B*P}function Ml(g,P){if(g.j.info("Error code "+P),2==P){var B=we(g.fb,g),ee=g.Xa;const qe=!ee;ee=new Ku(ee||"//www.google.com/images/cleardot.gif"),A.location&&"http"==A.location.protocol||Qh(ee,"https"),Cp(ee),qe?function pE(g,P){const B=new zh;if(A.Image){const ee=new Image;ee.onload=Ye(yu,B,"TestLoadImage: loaded",!0,P,ee),ee.onerror=Ye(yu,B,"TestLoadImage: error",!1,P,ee),ee.onabort=Ye(yu,B,"TestLoadImage: abort",!1,P,ee),ee.ontimeout=Ye(yu,B,"TestLoadImage: timeout",!1,P,ee),A.setTimeout(function(){ee.ontimeout&&ee.ontimeout()},1e4),ee.src=g}else P(!1)}(ee.toString(),B):function gE(g,P){new zh;const ee=new AbortController,qe=setTimeout(()=>{ee.abort(),yu(0,0,!1,P)},1e4);fetch(g,{signal:ee.signal}).then(ft=>{clearTimeout(qe),yu(0,0,!!ft.ok,P)}).catch(()=>{clearTimeout(qe),yu(0,0,!1,P)})}(ee.toString(),B)}else Ro(2);g.G=0,g.l&&g.l.sa(P),Vy(g),_E(g)}function Vy(g){if(g.G=0,g.ka=[],g.l){const P=vy(g.h);(0!=P.length||0!=g.i.length)&&(Vt(g.ka,P),Vt(g.ka,g.i),g.h.i.length=0,jt(g.i),g.i.length=0),g.l.ra()}}function Jh(g,P,B){var ee=B instanceof Ku?qu(B):new Ku(B);if(""!=ee.g)P&&(ee.g=P+"."+ee.g),Ap(ee,ee.s);else{var qe=A.location;ee=qe.protocol,P=P?P+"."+qe.hostname:qe.hostname,qe=+qe.port;var ft=new Ku(null);ee&&Qh(ft,ee),P&&(ft.g=P),qe&&Ap(ft,qe),B&&(ft.l=B),ee=ft}return P=g.ya,(B=g.D)&&P&&Di(ee,B,P),Di(ee,"VER",g.la),Xh(g,ee),ee}function Fy(g,P,B){if(P&&!g.J)throw Error("Can't create secondary domain capable XhrIo object.");return(P=new Mi(g.Ca&&!g.pa?new jd({eb:B}):g.pa)).Ha(g.J),P}function Ly(){}function Zh(){}function Mo(g,P){lo.call(this),this.g=new Rm(P),this.l=g,this.h=P&&P.messageUrlParams||null,g=P&&P.messageHeaders||null,P&&P.clientProtocolHeaderRequired&&(g?g["X-Client-Protocol"]="webchannel":g={"X-Client-Protocol":"webchannel"}),this.g.o=g,g=P&&P.initMessageHeaders||null,P&&P.messageContentType&&(g?g["X-WebChannel-Content-Type"]=P.messageContentType:g={"X-WebChannel-Content-Type":P.messageContentType}),P&&P.va&&(g?g["X-WebChannel-Client-Profile"]=P.va:g={"X-WebChannel-Client-Profile":P.va}),this.g.S=g,(g=P&&P.Sb)&&!Rn(g)&&(this.g.m=g),this.v=P&&P.supportsCrossDomainXhr||!1,this.u=P&&P.sendRawJson||!1,(P=P&&P.httpSessionIdParam)&&!Rn(P)&&(this.g.D=P,null!==(g=this.h)&&P in g&&P in(g=this.h)&&delete g[P]),this.j=new zd(this)}function Mp(g){Hh.call(this),g.__headers__&&(this.headers=g.__headers__,this.statusCode=g.__status__,delete g.__headers__,delete g.__status__);var P=g.__sm__;if(P){e:{for(const B in P){g=B;break e}g=void 0}(this.i=g)&&(g=this.i,P=null!==P&&g in P?P[g]:void 0),this.data=P}else this.data=g}function xm(){mm.call(this),this.status=1}function zd(g){this.g=g}(u=Mi.prototype).Ha=function(g){this.J=g},u.ea=function(g,P,B,ee){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+g);P=P?P.toUpperCase():"GET",this.D=g,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():vm.g(),this.v=function ay(g){return g.h||(g.h=g.i())}(this.o?this.o:vm),this.g.onreadystatechange=we(this.Ea,this);try{this.B=!0,this.g.open(P,String(g),!0),this.B=!1}catch(ft){return void Hd(this,ft)}if(g=B||"",B=new Map(this.headers),ee)if(Object.getPrototypeOf(ee)===Object.prototype)for(var qe in ee)B.set(qe,ee[qe]);else{if("function"!=typeof ee.keys||"function"!=typeof ee.get)throw Error("Unknown input type for opt_headers: "+String(ee));for(const ft of ee.keys())B.set(ft,ee.get(ft))}ee=Array.from(B.keys()).find(ft=>"content-type"==ft.toLowerCase()),qe=A.FormData&&g instanceof A.FormData,!(0<=Array.prototype.indexOf.call(Py,P,void 0))||ee||qe||B.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ft,nn]of B)this.g.setRequestHeader(ft,nn);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Sm(this),this.u=!0,this.g.send(g),this.u=!1}catch(ft){Hd(this,ft)}},u.abort=function(g){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=g||7,ho(this,"complete"),ho(this,"abort"),Sl(this))},u.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Sl(this,!0)),Mi.aa.N.call(this)},u.Ea=function(){this.s||(this.B||this.u||this.j?Xu(this):this.bb())},u.bb=function(){Xu(this)},u.isActive=function(){return!!this.g},u.Z=function(){try{return 2<Xo(this)?this.g.status:-1}catch{return-1}},u.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},u.Oa=function(g){if(this.g){var P=this.g.responseText;return g&&0==P.indexOf(g)&&(P=P.substring(g.length)),jh(P)}},u.Ba=function(){return this.m},u.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(u=Rm.prototype).la=8,u.G=1,u.connect=function(g,P,B,ee){Ro(0),this.W=g,this.H=P||{},B&&void 0!==ee&&(this.H.OSID=B,this.H.OAID=ee),this.F=this.X,this.I=Jh(this,null,this.W),Pl(this)},u.Ga=function(g){if(this.s)if(this.s=null,1==this.G){if(!g){this.U=Math.floor(1e5*Math.random()),g=this.U++;const qe=new zu(this,this.j,g);let ft=this.o;if(this.S&&(ft?(ft=_e(ft),Ve(ft,this.S)):ft=this.S),null!==this.m||this.O||(qe.H=ft,ft=null),this.P)e:{for(var P=0,B=0;B<this.i.length;B++){var ee=this.i[B];if(void 0===(ee="__data__"in ee.map&&"string"==typeof(ee=ee.map.__data__)?ee.length:void 0))break;if(4096<(P+=ee)){P=B;break e}if(4096===P||B===this.i.length-1){P=B+1;break e}}P=1e3}else P=1e3;P=Yh(this,qe,P),Di(B=qu(this.I),"RID",g),Di(B,"CVER",22),this.D&&Di(B,"X-HTTP-Session-Id",this.D),Xh(this,B),ft&&(this.O?P="headers="+encodeURIComponent(String(Sp(ft)))+"&"+P:this.m&&bm(B,this.m,ft)),wm(this.h,qe),this.Ua&&Di(B,"TYPE","init"),this.P?(Di(B,"$req",P),Di(B,"SID","null"),qe.T=!0,Vd(qe,B,null)):Vd(qe,B,P),this.G=2}}else 3==this.G&&(g?Pm(this,g):0==this.i.length||_y(this.h)||Pm(this))},u.Fa=function(){if(this.u=null,xy(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var g=2*this.R;this.j.info("BP detection timer enabled: "+g),this.A=Gh(we(this.ab,this),g)}},u.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ro(10),Lc(this),xy(this))},u.Za=function(){null!=this.C&&(this.C=null,Lc(this),Mm(this),Ro(19))},u.fb=function(g){g?(this.j.info("Successfully pinged google.com"),Ro(2)):(this.j.info("Failed to ping google.com"),Ro(1))},u.isActive=function(){return!!this.l&&this.l.isActive(this)},(u=Ly.prototype).ua=function(){},u.ta=function(){},u.sa=function(){},u.ra=function(){},u.isActive=function(){return!0},u.Na=function(){},Zh.prototype.g=function(g,P){return new Mo(g,P)},Rt(Mo,lo),Mo.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Mo.prototype.close=function(){vu(this.g)},Mo.prototype.o=function(g){var P=this.g;if("string"==typeof g){var B={};B.__data__=g,g=B}else this.u&&((B={}).__data__=Cl(g),g=B);P.i.push(new Dp(P.Ya++,g)),3==P.G&&Pl(P)},Mo.prototype.N=function(){this.g.l=null,delete this.j,vu(this.g),delete this.g,Mo.aa.N.call(this)},Rt(Mp,Hh),Rt(xm,mm),Rt(zd,Ly),zd.prototype.ua=function(){ho(this.g,"a")},zd.prototype.ta=function(g){ho(this.g,new Mp(g))},zd.prototype.sa=function(g){ho(this.g,new xm)},zd.prototype.ra=function(){ho(this.g,"b")},Zh.prototype.createWebChannel=Zh.prototype.g,Mo.prototype.send=Mo.prototype.o,Mo.prototype.open=Mo.prototype.m,Mo.prototype.close=Mo.prototype.close,ln=fe.createWebChannelTransport=function(){return new Zh},un=fe.getStatEventTarget=function(){return Ep()},Nt=fe.Event=kd,$t=fe.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},kc.NO_ERROR=0,kc.TIMEOUT=8,kc.HTTP_ERROR=6,qt=fe.ErrorCode=kc,ym.COMPLETE="complete",xt=fe.EventType=ym,uy.EventType=xc,xc.OPEN="a",xc.CLOSE="b",xc.ERROR="c",xc.MESSAGE="d",lo.prototype.listen=lo.prototype.K,Je=fe.WebChannel=uy,fe.FetchXmlHttpFactory=jd,Mi.prototype.listenOnce=Mi.prototype.L,Mi.prototype.getLastError=Mi.prototype.Ka,Mi.prototype.getLastErrorCode=Mi.prototype.Ba,Mi.prototype.getStatus=Mi.prototype.Z,Mi.prototype.getResponseJson=Mi.prototype.Oa,Mi.prototype.getResponseText=Mi.prototype.oa,Mi.prototype.send=Mi.prototype.ea,Mi.prototype.setWithCredentials=Mi.prototype.Ha,Be=fe.XhrIo=Mi}).apply(typeof pe<"u"?pe:typeof self<"u"?self:typeof window<"u"?window:{});const vt="@firebase/firestore";class he{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}he.UNAUTHENTICATED=new he(null),he.GOOGLE_CREDENTIALS=new he("google-credentials-uid"),he.FIRST_PARTY=new he("first-party-uid"),he.MOCK_USER=new he("mock-user");let at="10.14.0";const Dt=new ne.Vy("@firebase/firestore");function ut(){return Dt.logLevel}function Ut(u){Dt.setLogLevel(u)}function be(u,...t){if(Dt.logLevel<=ne.$b.DEBUG){const i=t.map(bn);Dt.debug(`Firestore (${at}): ${u}`,...i)}}function Xe(u,...t){if(Dt.logLevel<=ne.$b.ERROR){const i=t.map(bn);Dt.error(`Firestore (${at}): ${u}`,...i)}}function rn(u,...t){if(Dt.logLevel<=ne.$b.WARN){const i=t.map(bn);Dt.warn(`Firestore (${at}): ${u}`,...i)}}function bn(u){if("string"==typeof u)return u;try{return JSON.stringify(u)}catch{return u}}function wt(u="Unexpected state"){const t=`FIRESTORE (${at}) INTERNAL ASSERTION FAILED: `+u;throw Xe(t),new Error(t)}function Ct(u,t){u||wt()}function Bn(u,t){u||wt()}function Ze(u,t){return u}const Ae={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Pe extends k.g{constructor(t,i){super(t,i),this.code=t,this.message=i,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Jt{constructor(){this.promise=new Promise((t,i)=>{this.resolve=t,this.reject=i})}}class Re{constructor(t,i){this.user=i,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class Me{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,i){t.enqueueRetryable(()=>i(he.UNAUTHENTICATED))}shutdown(){}}class Ne{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,i){this.changeListener=i,t.enqueueRetryable(()=>i(this.token.user))}shutdown(){this.changeListener=null}}class ye{constructor(t){this.t=t,this.currentUser=he.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,i){var o=this;Ct(void 0===this.o);let c=this.i;const f=L=>this.i!==c?(c=this.i,i(L)):Promise.resolve();let _=new Jt;this.o=()=>{this.i++,this.currentUser=this.u(),_.resolve(),_=new Jt,t.enqueueRetryable(()=>f(this.currentUser))};const A=()=>{const L=_;t.enqueueRetryable((0,m.A)(function*(){yield L.promise,yield f(o.currentUser)}))},S=L=>{be("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=L,this.o&&(this.auth.addAuthTokenListener(this.o),A())};this.t.onInit(L=>S(L)),setTimeout(()=>{if(!this.auth){const L=this.t.getImmediate({optional:!0});L?S(L):(be("FirebaseAuthCredentialsProvider","Auth not yet detected"),_.resolve(),_=new Jt)}},0),A()}getToken(){const t=this.i,i=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(i).then(o=>this.i!==t?(be("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(Ct("string"==typeof o.accessToken),new Re(o.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Ct(null===t||"string"==typeof t),new he(t)}}class He{constructor(t,i,o){this.l=t,this.h=i,this.P=o,this.type="FirstParty",this.user=he.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class lt{constructor(t,i,o){this.l=t,this.h=i,this.P=o}getToken(){return Promise.resolve(new He(this.l,this.h,this.P))}start(t,i){t.enqueueRetryable(()=>i(he.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class bt{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class cn{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,i){Ct(void 0===this.o);const o=f=>{null!=f.error&&be("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${f.error.message}`);const _=f.token!==this.R;return this.R=f.token,be("FirebaseAppCheckTokenProvider",`Received ${_?"new":"existing"} token.`),_?i(f.token):Promise.resolve()};this.o=f=>{t.enqueueRetryable(()=>o(f))};const c=f=>{be("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=f,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(f=>c(f)),setTimeout(()=>{if(!this.appCheck){const f=this.A.getImmediate({optional:!0});f?c(f):be("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(i=>i?(Ct("string"==typeof i.token),this.R=i.token,new bt(i.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Wt(u){const t=typeof self<"u"&&(self.crypto||self.msCrypto),i=new Uint8Array(u);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(i);else for(let o=0;o<u;o++)i[o]=Math.floor(256*Math.random());return i}class $e{static newId(){const i=62*Math.floor(256/62);let o="";for(;o.length<20;){const c=Wt(40);for(let f=0;f<c.length;++f)o.length<20&&c[f]<i&&(o+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(c[f]%62))}return o}}function gt(u,t){return u<t?-1:u>t?1:0}function ct(u,t,i){return u.length===t.length&&u.every((o,c)=>i(o,t[c]))}function dt(u){return u+"\0"}class ht{constructor(t,i){if(this.seconds=t,this.nanoseconds=i,i<0)throw new Pe(Ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(i>=1e9)throw new Pe(Ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(t<-62135596800)throw new Pe(Ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Pe(Ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return ht.fromMillis(Date.now())}static fromDate(t){return ht.fromMillis(t.getTime())}static fromMillis(t){const i=Math.floor(t/1e3),o=Math.floor(1e6*(t-1e3*i));return new ht(i,o)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?gt(this.nanoseconds,t.nanoseconds):gt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class ot{constructor(t){this.timestamp=t}static fromTimestamp(t){return new ot(t)}static min(){return new ot(new ht(0,0))}static max(){return new ot(new ht(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Pt{constructor(t,i,o){void 0===i?i=0:i>t.length&&wt(),void 0===o?o=t.length-i:o>t.length-i&&wt(),this.segments=t,this.offset=i,this.len=o}get length(){return this.len}isEqual(t){return 0===Pt.comparator(this,t)}child(t){const i=this.segments.slice(this.offset,this.limit());return t instanceof Pt?t.forEach(o=>{i.push(o)}):i.push(t),this.construct(i)}limit(){return this.offset+this.length}popFirst(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==t.get(i))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==t.get(i))return!1;return!0}forEach(t){for(let i=this.offset,o=this.limit();i<o;i++)t(this.segments[i])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,i){const o=Math.min(t.length,i.length);for(let c=0;c<o;c++){const f=t.get(c),_=i.get(c);if(f<_)return-1;if(f>_)return 1}return t.length<i.length?-1:t.length>i.length?1:0}}class Xt extends Pt{construct(t,i,o){return new Xt(t,i,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const i=[];for(const o of t){if(o.indexOf("//")>=0)throw new Pe(Ae.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);i.push(...o.split("/").filter(c=>c.length>0))}return new Xt(i)}static emptyPath(){return new Xt([])}}const zn=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Dn extends Pt{construct(t,i,o){return new Dn(t,i,o)}static isValidIdentifier(t){return zn.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Dn.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Dn(["__name__"])}static fromServerFormat(t){const i=[];let o="",c=0;const f=()=>{if(0===o.length)throw new Pe(Ae.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);i.push(o),o=""};let _=!1;for(;c<t.length;){const A=t[c];if("\\"===A){if(c+1===t.length)throw new Pe(Ae.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const S=t[c+1];if("\\"!==S&&"."!==S&&"`"!==S)throw new Pe(Ae.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);o+=S,c+=2}else"`"===A?(_=!_,c++):"."!==A||_?(o+=A,c++):(f(),c++)}if(f(),_)throw new Pe(Ae.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Dn(i)}static emptyPath(){return new Dn([])}}class Ot{constructor(t){this.path=t}static fromPath(t){return new Ot(Xt.fromString(t))}static fromName(t){return new Ot(Xt.fromString(t).popFirst(5))}static empty(){return new Ot(Xt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return null!==t&&0===Xt.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,i){return Xt.comparator(t.path,i.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Ot(new Xt(t.slice()))}}class mr{constructor(t,i,o,c){this.indexId=t,this.collectionGroup=i,this.fields=o,this.indexState=c}}function Nn(u){return u.fields.find(t=>2===t.kind)}function an(u){return u.fields.filter(t=>2!==t.kind)}mr.UNKNOWN_ID=-1;class Yn{constructor(t,i){this.fieldPath=t,this.kind=i}}class Jn{constructor(t,i){this.sequenceNumber=t,this.offset=i}static empty(){return new Jn(0,_r.min())}}function gi(u,t){const i=u.toTimestamp().seconds,o=u.toTimestamp().nanoseconds+1,c=ot.fromTimestamp(1e9===o?new ht(i+1,0):new ht(i,o));return new _r(c,Ot.empty(),t)}function Or(u){return new _r(u.readTime,u.key,-1)}class _r{constructor(t,i,o){this.readTime=t,this.documentKey=i,this.largestBatchId=o}static min(){return new _r(ot.min(),Ot.empty(),-1)}static max(){return new _r(ot.max(),Ot.empty(),-1)}}function En(u,t){let i=u.readTime.compareTo(t.readTime);return 0!==i?i:(i=Ot.comparator(u.documentKey,t.documentKey),0!==i?i:gt(u.largestBatchId,t.largestBatchId))}const Kr="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class jn{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}function In(u){return Jr.apply(this,arguments)}function Jr(){return(Jr=(0,m.A)(function*(u){if(u.code!==Ae.FAILED_PRECONDITION||u.message!==Kr)throw u;be("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}class Ie{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(i=>{this.isDone=!0,this.result=i,this.nextCallback&&this.nextCallback(i)},i=>{this.isDone=!0,this.error=i,this.catchCallback&&this.catchCallback(i)})}catch(t){return this.next(void 0,t)}next(t,i){return this.callbackAttached&&wt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(i,this.error):this.wrapSuccess(t,this.result):new Ie((o,c)=>{this.nextCallback=f=>{this.wrapSuccess(t,f).next(o,c)},this.catchCallback=f=>{this.wrapFailure(i,f).next(o,c)}})}toPromise(){return new Promise((t,i)=>{this.next(t,i)})}wrapUserFunction(t){try{const i=t();return i instanceof Ie?i:Ie.resolve(i)}catch(i){return Ie.reject(i)}}wrapSuccess(t,i){return t?this.wrapUserFunction(()=>t(i)):Ie.resolve(i)}wrapFailure(t,i){return t?this.wrapUserFunction(()=>t(i)):Ie.reject(i)}static resolve(t){return new Ie((i,o)=>{i(t)})}static reject(t){return new Ie((i,o)=>{o(t)})}static waitFor(t){return new Ie((i,o)=>{let c=0,f=0,_=!1;t.forEach(A=>{++c,A.next(()=>{++f,_&&f===c&&i()},S=>o(S))}),_=!0,f===c&&i()})}static or(t){let i=Ie.resolve(!1);for(const o of t)i=i.next(c=>c?Ie.resolve(c):o());return i}static forEach(t,i){const o=[];return t.forEach((c,f)=>{o.push(i.call(this,c,f))}),this.waitFor(o)}static mapArray(t,i){return new Ie((o,c)=>{const f=t.length,_=new Array(f);let A=0;for(let S=0;S<f;S++){const L=S;i(t[L]).next(Q=>{_[L]=Q,++A,A===f&&o(_)},Q=>c(Q))}})}static doWhile(t,i){return new Ie((o,c)=>{const f=()=>{!0===t()?i().next(()=>{f()},c):o()};f()})}}class or{constructor(t,i){this.action=t,this.transaction=i,this.aborted=!1,this.V=new Jt,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{i.error?this.V.reject(new G(t,i.error)):this.V.resolve()},this.transaction.onerror=o=>{const c=Ft(o.target.error);this.V.reject(new G(t,c))}}static open(t,i,o,c){try{return new or(i,t.transaction(c,o))}catch(f){throw new G(i,f)}}get m(){return this.V.promise}abort(t){t&&this.V.reject(t),this.aborted||(be("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const t=this.transaction;this.aborted||"function"!=typeof t.commit||t.commit()}store(t){const i=this.transaction.objectStore(t);return new J(i)}}class ri{constructor(t,i,o){this.name=t,this.version=i,this.p=o,12.2===ri.S((0,k.ZQ)())&&Xe("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(t){return be("SimpleDb","Removing database:",t),Ee(window.indexedDB.deleteDatabase(t)).toPromise()}static D(){if(!(0,k.zW)())return!1;if(ri.v())return!0;const t=(0,k.ZQ)(),i=ri.S(t),o=0<i&&i<10,c=mt(t),f=0<c&&c<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||o||f)}static v(){var t;return typeof process<"u"&&"YES"===(null===(t=process.__PRIVATE_env)||void 0===t?void 0:t.C)}static F(t,i){return t.store(i)}static S(t){const i=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),o=i?i[1].split("_").slice(0,2).join("."):"-1";return Number(o)}M(t){var i=this;return(0,m.A)(function*(){return i.db||(be("SimpleDb","Opening database:",i.name),i.db=yield new Promise((o,c)=>{const f=indexedDB.open(i.name,i.version);f.onsuccess=_=>{o(_.target.result)},f.onblocked=()=>{c(new G(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},f.onerror=_=>{const A=_.target.error;c("VersionError"===A.name?new Pe(Ae.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===A.name?new Pe(Ae.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+A):new G(t,A))},f.onupgradeneeded=_=>{be("SimpleDb",'Database "'+i.name+'" requires upgrade from version:',_.oldVersion),i.p.O(_.target.result,f.transaction,_.oldVersion,i.version).next(()=>{be("SimpleDb","Database upgrade to version "+i.version+" complete")})}})),i.N&&(i.db.onversionchange=o=>i.N(o)),i.db})()}L(t){this.N=t,this.db&&(this.db.onversionchange=i=>t(i))}runTransaction(t,i,o,c){var f=this;return(0,m.A)(function*(){const _="readonly"===i;let A=0;for(;;){++A;try{f.db=yield f.M(t);const S=or.open(f.db,t,_?"readonly":"readwrite",o),L=c(S).next(Q=>(S.g(),Q)).catch(Q=>(S.abort(Q),Ie.reject(Q))).toPromise();return L.catch(()=>{}),yield S.m,L}catch(S){const L=S,Q="FirebaseError"!==L.name&&A<3;if(be("SimpleDb","Transaction failed with error:",L.message,"Retrying:",Q),f.close(),!Q)return Promise.reject(L)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}function mt(u){const t=u.match(/Android ([\d.]+)/i),i=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(i)}class Y{constructor(t){this.B=t,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(t){this.B=t}done(){this.k=!0}$(t){this.q=t}delete(){return Ee(this.B.delete())}}class G extends Pe{constructor(t,i){super(Ae.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${i}`),this.name="IndexedDbTransactionError"}}function te(u){return"IndexedDbTransactionError"===u.name}class J{constructor(t){this.store=t}put(t,i){let o;return void 0!==i?(be("SimpleDb","PUT",this.store.name,t,i),o=this.store.put(i,t)):(be("SimpleDb","PUT",this.store.name,"<auto-key>",t),o=this.store.put(t)),Ee(o)}add(t){return be("SimpleDb","ADD",this.store.name,t,t),Ee(this.store.add(t))}get(t){return Ee(this.store.get(t)).next(i=>(void 0===i&&(i=null),be("SimpleDb","GET",this.store.name,t,i),i))}delete(t){return be("SimpleDb","DELETE",this.store.name,t),Ee(this.store.delete(t))}count(){return be("SimpleDb","COUNT",this.store.name),Ee(this.store.count())}U(t,i){const o=this.options(t,i),c=o.index?this.store.index(o.index):this.store;if("function"==typeof c.getAll){const f=c.getAll(o.range);return new Ie((_,A)=>{f.onerror=S=>{A(S.target.error)},f.onsuccess=S=>{_(S.target.result)}})}{const f=this.cursor(o),_=[];return this.W(f,(A,S)=>{_.push(S)}).next(()=>_)}}G(t,i){const o=this.store.getAll(t,null===i?void 0:i);return new Ie((c,f)=>{o.onerror=_=>{f(_.target.error)},o.onsuccess=_=>{c(_.target.result)}})}j(t,i){be("SimpleDb","DELETE ALL",this.store.name);const o=this.options(t,i);o.H=!1;const c=this.cursor(o);return this.W(c,(f,_,A)=>A.delete())}J(t,i){let o;i?o=t:(o={},i=t);const c=this.cursor(o);return this.W(c,i)}Y(t){const i=this.cursor({});return new Ie((o,c)=>{i.onerror=f=>{const _=Ft(f.target.error);c(_)},i.onsuccess=f=>{const _=f.target.result;_?t(_.primaryKey,_.value).next(A=>{A?_.continue():o()}):o()}})}W(t,i){const o=[];return new Ie((c,f)=>{t.onerror=_=>{f(_.target.error)},t.onsuccess=_=>{const A=_.target.result;if(!A)return void c();const S=new Y(A),L=i(A.primaryKey,A.value,S);if(L instanceof Ie){const Q=L.catch(re=>(S.done(),Ie.reject(re)));o.push(Q)}S.isDone?c():null===S.K?A.continue():A.continue(S.K)}}).next(()=>Ie.waitFor(o))}options(t,i){let o;return void 0!==t&&("string"==typeof t?o=t:i=t),{index:o,range:i}}cursor(t){let i="next";if(t.reverse&&(i="prev"),t.index){const o=this.store.index(t.index);return t.H?o.openKeyCursor(t.range,i):o.openCursor(t.range,i)}return this.store.openCursor(t.range,i)}}function Ee(u){return new Ie((t,i)=>{u.onsuccess=o=>{t(o.target.result)},u.onerror=o=>{const c=Ft(o.target.error);i(c)}})}let pt=!1;function Ft(u){const t=ri.S((0,k.ZQ)());if(t>=12.2&&t<13){const i="An internal error was encountered in the Indexed Database server";if(u.message.indexOf(i)>=0){const o=new Pe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${i}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return pt||(pt=!0,setTimeout(()=>{throw o},0)),o}}return u}class ie{constructor(t,i){this.asyncQueue=t,this.Z=i,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}X(t){var i=this;be("IndexBackfiller",`Scheduled in ${t}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",t,(0,m.A)(function*(){i.task=null;try{be("IndexBackfiller",`Documents written: ${yield i.Z.ee()}`)}catch(o){te(o)?be("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",o):yield In(o)}yield i.X(6e4)}))}}class ue{constructor(t,i){this.localStore=t,this.persistence=i}ee(t=50){var i=this;return(0,m.A)(function*(){return i.persistence.runTransaction("Backfill Indexes","readwrite-primary",o=>i.te(o,t))})()}te(t,i){const o=new Set;let c=i,f=!0;return Ie.doWhile(()=>!0===f&&c>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(t).next(_=>{if(null!==_&&!o.has(_))return be("IndexBackfiller",`Processing collection: ${_}`),this.ne(t,_,c).next(A=>{c-=A,o.add(_)});f=!1})).next(()=>i-c)}ne(t,i,o){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(t,i).next(c=>this.localStore.localDocuments.getNextDocuments(t,i,c,o).next(f=>{const _=f.changes;return this.localStore.indexManager.updateIndexEntries(t,_).next(()=>this.re(c,f)).next(A=>(be("IndexBackfiller",`Updating offset: ${A}`),this.localStore.indexManager.updateCollectionGroup(t,i,A))).next(()=>_.size)}))}re(t,i){let o=t;return i.changes.forEach((c,f)=>{const _=Or(f);En(_,o)>0&&(o=_)}),new _r(o.readTime,o.documentKey,Math.max(i.batchId,t.largestBatchId))}}let ge=(()=>{class u{constructor(i,o){this.previousValue=i,o&&(o.sequenceNumberHandler=c=>this.ie(c),this.se=c=>o.writeSequenceNumber(c))}ie(i){return this.previousValue=Math.max(i,this.previousValue),this.previousValue}next(){const i=++this.previousValue;return this.se&&this.se(i),i}}return u.oe=-1,u})();function tt(u){return null==u}function Oe(u){return 0===u&&1/u==-1/0}function zt(u){return"number"==typeof u&&Number.isInteger(u)&&!Oe(u)&&u<=Number.MAX_SAFE_INTEGER&&u>=Number.MIN_SAFE_INTEGER}function Qt(u){let t="";for(let i=0;i<u.length;i++)t.length>0&&(t=qr(t)),t=Dr(u.get(i),t);return qr(t)}function Dr(u,t){let i=t;const o=u.length;for(let c=0;c<o;c++){const f=u.charAt(c);switch(f){case"\0":i+="\x01\x10";break;case"\x01":i+="\x01\x11";break;default:i+=f}}return i}function qr(u){return u+"\x01\x01"}function wn(u){const t=u.length;if(Ct(t>=2),2===t)return Ct("\x01"===u.charAt(0)&&"\x01"===u.charAt(1)),Xt.emptyPath();const i=t-2,o=[];let c="";for(let f=0;f<t;){const _=u.indexOf("\x01",f);switch((_<0||_>i)&&wt(),u.charAt(_+1)){case"\x01":const A=u.substring(f,_);let S;0===c.length?S=A:(c+=A,S=c,c=""),o.push(S);break;case"\x10":c+=u.substring(f,_),c+="\0";break;case"\x11":c+=u.substring(f,_+1);break;default:wt()}f=_+2}return new Xt(o)}const en=["userId","batchId"];function Vn(u,t){return[u,Qt(t)]}function fr(u,t,i){return[u,Qt(t),i]}const Zr={},Ui=["prefixPath","collectionGroup","readTime","documentId"],Ni=["prefixPath","collectionGroup","documentId"],Wn=["collectionGroup","readTime","prefixPath","documentId"],Is=["canonicalId","targetId"],cs=["targetId","path"],Ii=["path","targetId"],Ai=["collectionId","parent"],it=["indexId","uid"],ke=["uid","sequenceNumber"],_t=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],W=["indexId","uid","orderedDocumentKey"],se=["userId","collectionPath","documentId"],ae=["userId","collectionPath","largestBatchId"],Fe=["userId","collectionGroup","largestBatchId"],je=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],St=[...je,"documentOverlays"],kt=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],sn=kt,gn=[...sn,"indexConfiguration","indexState","indexEntries"],yr=gn,ii=[...gn,"globals"];class Kn extends jn{constructor(t,i){super(),this._e=t,this.currentSequenceNumber=i}}function ar(u,t){const i=Ze(u);return ri.F(i._e,t)}function Ci(u){let t=0;for(const i in u)Object.prototype.hasOwnProperty.call(u,i)&&t++;return t}function jr(u,t){for(const i in u)Object.prototype.hasOwnProperty.call(u,i)&&t(i,u[i])}function rr(u){for(const t in u)if(Object.prototype.hasOwnProperty.call(u,t))return!1;return!0}class Sn{constructor(t,i){this.comparator=t,this.root=i||An.EMPTY}insert(t,i){return new Sn(this.comparator,this.root.insert(t,i,this.comparator).copy(null,null,An.BLACK,null,null))}remove(t){return new Sn(this.comparator,this.root.remove(t,this.comparator).copy(null,null,An.BLACK,null,null))}get(t){let i=this.root;for(;!i.isEmpty();){const o=this.comparator(t,i.key);if(0===o)return i.value;o<0?i=i.left:o>0&&(i=i.right)}return null}indexOf(t){let i=0,o=this.root;for(;!o.isEmpty();){const c=this.comparator(t,o.key);if(0===c)return i+o.left.size;c<0?o=o.left:(i+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((i,o)=>(t(i,o),!1))}toString(){const t=[];return this.inorderTraversal((i,o)=>(t.push(`${i}:${o}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Cn(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Cn(this.root,t,this.comparator,!1)}getReverseIterator(){return new Cn(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Cn(this.root,t,this.comparator,!0)}}class Cn{constructor(t,i,o,c){this.isReverse=c,this.nodeStack=[];let f=1;for(;!t.isEmpty();)if(f=i?o(t.key,i):1,i&&c&&(f*=-1),f<0)t=this.isReverse?t.left:t.right;else{if(0===f){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const i={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return i}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class An{constructor(t,i,o,c,f){this.key=t,this.value=i,this.color=o??An.RED,this.left=c??An.EMPTY,this.right=f??An.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,i,o,c,f){return new An(t??this.key,i??this.value,o??this.color,c??this.left,f??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,i,o){let c=this;const f=o(t,c.key);return c=f<0?c.copy(null,null,null,c.left.insert(t,i,o),null):0===f?c.copy(null,i,null,null,null):c.copy(null,null,null,null,c.right.insert(t,i,o)),c.fixUp()}removeMin(){if(this.left.isEmpty())return An.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,i){let o,c=this;if(i(t,c.key)<0)c.left.isEmpty()||c.left.isRed()||c.left.left.isRed()||(c=c.moveRedLeft()),c=c.copy(null,null,null,c.left.remove(t,i),null);else{if(c.left.isRed()&&(c=c.rotateRight()),c.right.isEmpty()||c.right.isRed()||c.right.left.isRed()||(c=c.moveRedRight()),0===i(t,c.key)){if(c.right.isEmpty())return An.EMPTY;o=c.right.min(),c=c.copy(o.key,o.value,null,null,c.right.removeMin())}c=c.copy(null,null,null,null,c.right.remove(t,i))}return c.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,An.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,An.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,i)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw wt();const t=this.left.check();if(t!==this.right.check())throw wt();return t+(this.isRed()?0:1)}}An.EMPTY=null,An.RED=!0,An.BLACK=!1,An.EMPTY=new class{constructor(){this.size=0}get key(){throw wt()}get value(){throw wt()}get color(){throw wt()}get left(){throw wt()}get right(){throw wt()}copy(t,i,o,c,f){return this}insert(t,i,o){return new An(t,i)}remove(t,i){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class xn{constructor(t){this.comparator=t,this.data=new Sn(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((i,o)=>(t(i),!1))}forEachInRange(t,i){const o=this.data.getIteratorFrom(t[0]);for(;o.hasNext();){const c=o.getNext();if(this.comparator(c.key,t[1])>=0)return;i(c.key)}}forEachWhile(t,i){let o;for(o=void 0!==i?this.data.getIteratorFrom(i):this.data.getIterator();o.hasNext();)if(!t(o.getNext().key))return}firstAfterOrEqual(t){const i=this.data.getIteratorFrom(t);return i.hasNext()?i.getNext().key:null}getIterator(){return new Fr(this.data.getIterator())}getIteratorFrom(t){return new Fr(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let i=this;return i.size<t.size&&(i=t,t=this),t.forEach(o=>{i=i.add(o)}),i}isEqual(t){if(!(t instanceof xn)||this.size!==t.size)return!1;const i=this.data.getIterator(),o=t.data.getIterator();for(;i.hasNext();){const c=i.getNext().key,f=o.getNext().key;if(0!==this.comparator(c,f))return!1}return!0}toArray(){const t=[];return this.forEach(i=>{t.push(i)}),t}toString(){const t=[];return this.forEach(i=>t.push(i)),"SortedSet("+t.toString()+")"}copy(t){const i=new xn(this.comparator);return i.data=t,i}}class Fr{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function pr(u){return u.hasNext()?u.getNext():void 0}class dn{constructor(t){this.fields=t,t.sort(Dn.comparator)}static empty(){return new dn([])}unionWith(t){let i=new xn(Dn.comparator);for(const o of this.fields)i=i.add(o);for(const o of t)i=i.add(o);return new dn(i.toArray())}covers(t){for(const i of this.fields)if(i.isPrefixOf(t))return!0;return!1}isEqual(t){return ct(this.fields,t.fields,(i,o)=>i.isEqual(o))}}class Qn extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}function wa(){return typeof atob<"u"}class cr{constructor(t){this.binaryString=t}static fromBase64String(t){const i=function(c){try{return atob(c)}catch(f){throw typeof DOMException<"u"&&f instanceof DOMException?new Qn("Invalid base64 string: "+f):f}}(t);return new cr(i)}static fromUint8Array(t){const i=function(c){let f="";for(let _=0;_<c.length;++_)f+=String.fromCharCode(c[_]);return f}(t);return new cr(i)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(i){const o=new Uint8Array(i.length);for(let c=0;c<i.length;c++)o[c]=i.charCodeAt(c);return o}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return gt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}cr.EMPTY_BYTE_STRING=new cr("");const Ta=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ls(u){if(Ct(!!u),"string"==typeof u){let t=0;const i=Ta.exec(u);if(Ct(!!i),i[1]){let c=i[1];c=(c+"000000000").substr(0,9),t=Number(c)}const o=new Date(u);return{seconds:Math.floor(o.getTime()/1e3),nanos:t}}return{seconds:Lr(u.seconds),nanos:Lr(u.nanos)}}function Lr(u){return"number"==typeof u?u:"string"==typeof u?Number(u):0}function Bi(u){return"string"==typeof u?cr.fromBase64String(u):cr.fromUint8Array(u)}function Xn(u){var t,i;return"server_timestamp"===(null===(i=((null===(t=u?.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===i?void 0:i.stringValue)}function qi(u){const t=u.mapValue.fields.__previous_value__;return Xn(t)?qi(t):t}function Ys(u){const t=ls(u.mapValue.fields.__local_write_time__.timestampValue);return new ht(t.seconds,t.nanos)}class mi{constructor(t,i,o,c,f,_,A,S,L){this.databaseId=t,this.appId=i,this.persistenceKey=o,this.host=c,this.ssl=f,this.forceLongPolling=_,this.autoDetectLongPolling=A,this.longPollingOptions=S,this.useFetchStreams=L}}class ws{constructor(t,i){this.projectId=t,this.database=i||"(default)"}static empty(){return new ws("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(t){return t instanceof ws&&t.projectId===this.projectId&&t.database===this.database}}const Hs={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Da={nullValue:"NULL_VALUE"};function wi(u){return"nullValue"in u?0:"booleanValue"in u?1:"integerValue"in u||"doubleValue"in u?2:"timestampValue"in u?3:"stringValue"in u?5:"bytesValue"in u?6:"referenceValue"in u?7:"geoPointValue"in u?8:"arrayValue"in u?9:"mapValue"in u?Xn(u)?4:Zo(u)?9007199254740991:Js(u)?10:11:wt()}function bi(u,t){if(u===t)return!0;const i=wi(u);if(i!==wi(t))return!1;switch(i){case 0:case 9007199254740991:return!0;case 1:return u.booleanValue===t.booleanValue;case 4:return Ys(u).isEqual(Ys(t));case 3:return function(c,f){if("string"==typeof c.timestampValue&&"string"==typeof f.timestampValue&&c.timestampValue.length===f.timestampValue.length)return c.timestampValue===f.timestampValue;const _=ls(c.timestampValue),A=ls(f.timestampValue);return _.seconds===A.seconds&&_.nanos===A.nanos}(u,t);case 5:return u.stringValue===t.stringValue;case 6:return f=t,Bi(u.bytesValue).isEqual(Bi(f.bytesValue));case 7:return u.referenceValue===t.referenceValue;case 8:return function(c,f){return Lr(c.geoPointValue.latitude)===Lr(f.geoPointValue.latitude)&&Lr(c.geoPointValue.longitude)===Lr(f.geoPointValue.longitude)}(u,t);case 2:return function(c,f){if("integerValue"in c&&"integerValue"in f)return Lr(c.integerValue)===Lr(f.integerValue);if("doubleValue"in c&&"doubleValue"in f){const _=Lr(c.doubleValue),A=Lr(f.doubleValue);return _===A?Oe(_)===Oe(A):isNaN(_)&&isNaN(A)}return!1}(u,t);case 9:return ct(u.arrayValue.values||[],t.arrayValue.values||[],bi);case 10:case 11:return function(c,f){const _=c.mapValue.fields||{},A=f.mapValue.fields||{};if(Ci(_)!==Ci(A))return!1;for(const S in _)if(_.hasOwnProperty(S)&&(void 0===A[S]||!bi(_[S],A[S])))return!1;return!0}(u,t);default:return wt()}var f}function ji(u,t){return void 0!==(u.values||[]).find(i=>bi(i,t))}function Ts(u,t){if(u===t)return 0;const i=wi(u),o=wi(t);if(i!==o)return gt(i,o);switch(i){case 0:case 9007199254740991:return 0;case 1:return gt(u.booleanValue,t.booleanValue);case 2:return function(f,_){const A=Lr(f.integerValue||f.doubleValue),S=Lr(_.integerValue||_.doubleValue);return A<S?-1:A>S?1:A===S?0:isNaN(A)?isNaN(S)?0:-1:1}(u,t);case 3:return Jo(u.timestampValue,t.timestampValue);case 4:return Jo(Ys(u),Ys(t));case 5:return gt(u.stringValue,t.stringValue);case 6:return function(f,_){const A=Bi(f),S=Bi(_);return A.compareTo(S)}(u.bytesValue,t.bytesValue);case 7:return function(f,_){const A=f.split("/"),S=_.split("/");for(let L=0;L<A.length&&L<S.length;L++){const Q=gt(A[L],S[L]);if(0!==Q)return Q}return gt(A.length,S.length)}(u.referenceValue,t.referenceValue);case 8:return function(f,_){const A=gt(Lr(f.latitude),Lr(_.latitude));return 0!==A?A:gt(Lr(f.longitude),Lr(_.longitude))}(u.geoPointValue,t.geoPointValue);case 9:return ds(u.arrayValue,t.arrayValue);case 10:return function(f,_){var A,S,L,Q;const Ye=null===(A=(f.fields||{}).value)||void 0===A?void 0:A.arrayValue,Rt=null===(S=(_.fields||{}).value)||void 0===S?void 0:S.arrayValue,jt=gt((null===(L=Ye?.values)||void 0===L?void 0:L.length)||0,(null===(Q=Rt?.values)||void 0===Q?void 0:Q.length)||0);return 0!==jt?jt:ds(Ye,Rt)}(u.mapValue,t.mapValue);case 11:return function(f,_){if(f===Hs.mapValue&&_===Hs.mapValue)return 0;if(f===Hs.mapValue)return 1;if(_===Hs.mapValue)return-1;const A=f.fields||{},S=Object.keys(A),L=_.fields||{},Q=Object.keys(L);S.sort(),Q.sort();for(let re=0;re<S.length&&re<Q.length;++re){const we=gt(S[re],Q[re]);if(0!==we)return we;const Ye=Ts(A[S[re]],L[Q[re]]);if(0!==Ye)return Ye}return gt(S.length,Q.length)}(u.mapValue,t.mapValue);default:throw wt()}}function Jo(u,t){if("string"==typeof u&&"string"==typeof t&&u.length===t.length)return gt(u,t);const i=ls(u),o=ls(t),c=gt(i.seconds,o.seconds);return 0!==c?c:gt(i.nanos,o.nanos)}function ds(u,t){const i=u.values||[],o=t.values||[];for(let c=0;c<i.length&&c<o.length;++c){const f=Ts(i[c],o[c]);if(f)return f}return gt(i.length,o.length)}function hs(u){return $i(u)}function $i(u){return"nullValue"in u?"null":"booleanValue"in u?""+u.booleanValue:"integerValue"in u?""+u.integerValue:"doubleValue"in u?""+u.doubleValue:"timestampValue"in u?function(i){const o=ls(i);return`time(${o.seconds},${o.nanos})`}(u.timestampValue):"stringValue"in u?u.stringValue:"bytesValue"in u?Bi(u.bytesValue).toBase64():"referenceValue"in u?Ot.fromName(u.referenceValue).toString():"geoPointValue"in u?function(i){return`geo(${i.latitude},${i.longitude})`}(u.geoPointValue):"arrayValue"in u?function(i){let o="[",c=!0;for(const f of i.values||[])c?c=!1:o+=",",o+=$i(f);return o+"]"}(u.arrayValue):"mapValue"in u?function(i){const o=Object.keys(i.fields||{}).sort();let c="{",f=!0;for(const _ of o)f?f=!1:c+=",",c+=`${_}:${$i(i.fields[_])}`;return c+"}"}(u.mapValue):wt()}function Pr(u,t){return{referenceValue:`projects/${u.projectId}/databases/${u.database}/documents/${t.path.canonicalString()}`}}function fs(u){return!!u&&"integerValue"in u}function $r(u){return!!u&&"arrayValue"in u}function As(u){return!!u&&"nullValue"in u}function Pn(u){return!!u&&"doubleValue"in u&&isNaN(Number(u.doubleValue))}function Si(u){return!!u&&"mapValue"in u}function Js(u){var t,i;return"__vector__"===(null===(i=((null===(t=u?.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===i?void 0:i.stringValue)}function xi(u){if(u.geoPointValue)return{geoPointValue:Object.assign({},u.geoPointValue)};if(u.timestampValue&&"object"==typeof u.timestampValue)return{timestampValue:Object.assign({},u.timestampValue)};if(u.mapValue){const t={mapValue:{fields:{}}};return jr(u.mapValue.fields,(i,o)=>t.mapValue.fields[i]=xi(o)),t}if(u.arrayValue){const t={arrayValue:{values:[]}};for(let i=0;i<(u.arrayValue.values||[]).length;++i)t.arrayValue.values[i]=xi(u.arrayValue.values[i]);return t}return Object.assign({},u)}function Zo(u){return"__max__"===(((u.mapValue||{}).fields||{}).__type__||{}).stringValue}const Cs={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function Zs(u){return"nullValue"in u?Da:"booleanValue"in u?{booleanValue:!1}:"integerValue"in u||"doubleValue"in u?{doubleValue:NaN}:"timestampValue"in u?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in u?{stringValue:""}:"bytesValue"in u?{bytesValue:""}:"referenceValue"in u?Pr(ws.empty(),Ot.empty()):"geoPointValue"in u?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in u?{arrayValue:{}}:"mapValue"in u?Js(u)?Cs:{mapValue:{}}:wt()}function Xi(u){return"nullValue"in u?{booleanValue:!1}:"booleanValue"in u?{doubleValue:NaN}:"integerValue"in u||"doubleValue"in u?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in u?{stringValue:""}:"stringValue"in u?{bytesValue:""}:"bytesValue"in u?Pr(ws.empty(),Ot.empty()):"referenceValue"in u?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in u?{arrayValue:{}}:"arrayValue"in u?Cs:"mapValue"in u?Js(u)?{mapValue:{}}:Hs:wt()}function ps(u,t){const i=Ts(u.value,t.value);return 0!==i?i:u.inclusive&&!t.inclusive?-1:!u.inclusive&&t.inclusive?1:0}function Aa(u,t){const i=Ts(u.value,t.value);return 0!==i?i:u.inclusive&&!t.inclusive?1:!u.inclusive&&t.inclusive?-1:0}class vr{constructor(t){this.value=t}static empty(){return new vr({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let i=this.value;for(let o=0;o<t.length-1;++o)if(i=(i.mapValue.fields||{})[t.get(o)],!Si(i))return null;return i=(i.mapValue.fields||{})[t.lastSegment()],i||null}}set(t,i){this.getFieldsMap(t.popLast())[t.lastSegment()]=xi(i)}setAll(t){let i=Dn.emptyPath(),o={},c=[];t.forEach((_,A)=>{if(!i.isImmediateParentOf(A)){const S=this.getFieldsMap(i);this.applyChanges(S,o,c),o={},c=[],i=A.popLast()}_?o[A.lastSegment()]=xi(_):c.push(A.lastSegment())});const f=this.getFieldsMap(i);this.applyChanges(f,o,c)}delete(t){const i=this.field(t.popLast());Si(i)&&i.mapValue.fields&&delete i.mapValue.fields[t.lastSegment()]}isEqual(t){return bi(this.value,t.value)}getFieldsMap(t){let i=this.value;i.mapValue.fields||(i.mapValue={fields:{}});for(let o=0;o<t.length;++o){let c=i.mapValue.fields[t.get(o)];Si(c)&&c.mapValue.fields||(c={mapValue:{fields:{}}},i.mapValue.fields[t.get(o)]=c),i=c}return i.mapValue.fields}applyChanges(t,i,o){jr(i,(c,f)=>t[c]=f);for(const c of o)delete t[c]}clone(){return new vr(xi(this.value))}}function No(u){const t=[];return jr(u.fields,(i,o)=>{const c=new Dn([i]);if(Si(o)){const f=No(o.mapValue).fields;if(0===f.length)t.push(c);else for(const _ of f)t.push(c.child(_))}else t.push(c)}),new dn(t)}class ir{constructor(t,i,o,c,f,_,A){this.key=t,this.documentType=i,this.version=o,this.readTime=c,this.createTime=f,this.data=_,this.documentState=A}static newInvalidDocument(t){return new ir(t,0,ot.min(),ot.min(),ot.min(),vr.empty(),0)}static newFoundDocument(t,i,o,c){return new ir(t,1,i,ot.min(),o,c,0)}static newNoDocument(t,i){return new ir(t,2,i,ot.min(),ot.min(),vr.empty(),0)}static newUnknownDocument(t,i){return new ir(t,3,i,ot.min(),ot.min(),vr.empty(),2)}convertToFoundDocument(t,i){return!this.createTime.isEqual(ot.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=t),this.version=t,this.documentType=1,this.data=i,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=vr.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=vr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ot.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof ir&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new ir(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class gs{constructor(t,i){this.position=t,this.inclusive=i}}function hi(u,t,i){let o=0;for(let c=0;c<u.position.length;c++){const f=t[c],_=u.position[c];if(o=f.field.isKeyField()?Ot.comparator(Ot.fromName(_.referenceValue),i.key):Ts(_,i.data.field(f.field)),"desc"===f.dir&&(o*=-1),0!==o)break}return o}function _i(u,t){if(null===u)return null===t;if(null===t||u.inclusive!==t.inclusive||u.position.length!==t.position.length)return!1;for(let i=0;i<u.position.length;i++)if(!bi(u.position[i],t.position[i]))return!1;return!0}class Gs{constructor(t,i="asc"){this.field=t,this.dir=i}}function xo(u,t){return u.dir===t.dir&&u.field.isEqual(t.field)}class bs{}class $n extends bs{constructor(t,i,o){super(),this.field=t,this.op=i,this.value=o}static create(t,i,o){return t.isKeyField()?"in"===i||"not-in"===i?this.createKeyFieldInFilter(t,i,o):new ur(t,i,o):"array-contains"===i?new ms(t,o):"in"===i?new Hi(t,o):"not-in"===i?new Yi(t,o):"array-contains-any"===i?new Gi(t,o):new $n(t,i,o)}static createKeyFieldInFilter(t,i,o){return"in"===i?new go(t,o):new ba(t,o)}matches(t){const i=t.data.field(this.field);return"!="===this.op?null!==i&&this.matchesComparison(Ts(i,this.value)):null!==i&&wi(this.value)===wi(i)&&this.matchesComparison(Ts(i,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return wt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class tr extends bs{constructor(t,i){super(),this.filters=t,this.op=i,this.ae=null}static create(t,i){return new tr(t,i)}matches(t){return fo(this)?void 0===this.filters.find(i=>!i.matches(t)):void 0!==this.filters.find(i=>i.matches(t))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((t,i)=>t.concat(i.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function fo(u){return"and"===u.op}function po(u){return"or"===u.op}function ei(u){return Ca(u)&&fo(u)}function Ca(u){for(const t of u.filters)if(t instanceof tr)return!1;return!0}function Oi(u){if(u instanceof $n)return u.field.canonicalString()+u.op.toString()+hs(u.value);if(ei(u))return u.filters.map(t=>Oi(t)).join(",");{const t=u.filters.map(i=>Oi(i)).join(",");return`${u.op}(${t})`}}function Ss(u,t){return u instanceof $n?(o=u,(c=t)instanceof $n&&o.op===c.op&&o.field.isEqual(c.field)&&bi(o.value,c.value)):u instanceof tr?function(o,c){return c instanceof tr&&o.op===c.op&&o.filters.length===c.filters.length&&o.filters.reduce((f,_,A)=>f&&Ss(_,c.filters[A]),!0)}(u,t):void wt();var o,c}function eo(u,t){const i=u.filters.concat(t);return tr.create(i,u.op)}function Ri(u){return u instanceof $n?`${(i=u).field.canonicalString()} ${i.op} ${hs(i.value)}`:u instanceof tr?function(i){return i.op.toString()+" {"+i.getFilters().map(Ri).join(" ,")+"}"}(u):"Filter";var i}class ur extends $n{constructor(t,i,o){super(t,i,o),this.key=Ot.fromName(o.referenceValue)}matches(t){const i=Ot.comparator(t.key,this.key);return this.matchesComparison(i)}}class go extends $n{constructor(t,i){super(t,"in",i),this.keys=Sa(0,i)}matches(t){return this.keys.some(i=>i.isEqual(t.key))}}class ba extends $n{constructor(t,i){super(t,"not-in",i),this.keys=Sa(0,i)}matches(t){return!this.keys.some(i=>i.isEqual(t.key))}}function Sa(u,t){var i;return((null===(i=t.arrayValue)||void 0===i?void 0:i.values)||[]).map(o=>Ot.fromName(o.referenceValue))}class ms extends $n{constructor(t,i){super(t,"array-contains",i)}matches(t){const i=t.data.field(this.field);return $r(i)&&ji(i.arrayValue,this.value)}}class Hi extends $n{constructor(t,i){super(t,"in",i)}matches(t){const i=t.data.field(this.field);return null!==i&&ji(this.value.arrayValue,i)}}class Yi extends $n{constructor(t,i){super(t,"not-in",i)}matches(t){if(ji(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const i=t.data.field(this.field);return null!==i&&!ji(this.value.arrayValue,i)}}class Gi extends $n{constructor(t,i){super(t,"array-contains-any",i)}matches(t){const i=t.data.field(this.field);return!(!$r(i)||!i.arrayValue.values)&&i.arrayValue.values.some(o=>ji(this.value.arrayValue,o))}}class Zu{constructor(t,i=null,o=[],c=[],f=null,_=null,A=null){this.path=t,this.collectionGroup=i,this.orderBy=o,this.filters=c,this.limit=f,this.startAt=_,this.endAt=A,this.ue=null}}function mo(u,t=null,i=[],o=[],c=null,f=null,_=null){return new Zu(u,t,i,o,c,f,_)}function si(u){const t=Ze(u);if(null===t.ue){let i=t.path.canonicalString();null!==t.collectionGroup&&(i+="|cg:"+t.collectionGroup),i+="|f:",i+=t.filters.map(o=>Oi(o)).join(","),i+="|ob:",i+=t.orderBy.map(o=>{return(f=o).field.canonicalString()+f.dir;var f}).join(","),tt(t.limit)||(i+="|l:",i+=t.limit),t.startAt&&(i+="|lb:",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(o=>hs(o)).join(",")),t.endAt&&(i+="|ub:",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(o=>hs(o)).join(",")),t.ue=i}return t.ue}function to(u,t){if(u.limit!==t.limit||u.orderBy.length!==t.orderBy.length)return!1;for(let i=0;i<u.orderBy.length;i++)if(!xo(u.orderBy[i],t.orderBy[i]))return!1;if(u.filters.length!==t.filters.length)return!1;for(let i=0;i<u.filters.length;i++)if(!Ss(u.filters[i],t.filters[i]))return!1;return u.collectionGroup===t.collectionGroup&&!!u.path.isEqual(t.path)&&!!_i(u.startAt,t.startAt)&&_i(u.endAt,t.endAt)}function Rs(u){return Ot.isDocumentKey(u.path)&&null===u.collectionGroup&&0===u.filters.length}function _o(u,t){return u.filters.filter(i=>i instanceof $n&&i.field.isEqual(t))}function Oo(u,t,i){let o=Da,c=!0;for(const f of _o(u,t)){let _=Da,A=!0;switch(f.op){case"<":case"<=":_=Zs(f.value);break;case"==":case"in":case">=":_=f.value;break;case">":_=f.value,A=!1;break;case"!=":case"not-in":_=Da}ps({value:o,inclusive:c},{value:_,inclusive:A})<0&&(o=_,c=A)}if(null!==i)for(let f=0;f<u.orderBy.length;++f)if(u.orderBy[f].field.isEqual(t)){const _=i.position[f];ps({value:o,inclusive:c},{value:_,inclusive:i.inclusive})<0&&(o=_,c=i.inclusive);break}return{value:o,inclusive:c}}function zs(u,t,i){let o=Hs,c=!0;for(const f of _o(u,t)){let _=Hs,A=!0;switch(f.op){case">=":case">":_=Xi(f.value),A=!1;break;case"==":case"in":case"<=":_=f.value;break;case"<":_=f.value,A=!1;break;case"!=":case"not-in":_=Hs}Aa({value:o,inclusive:c},{value:_,inclusive:A})>0&&(o=_,c=A)}if(null!==i)for(let f=0;f<u.orderBy.length;++f)if(u.orderBy[f].field.isEqual(t)){const _=i.position[f];Aa({value:o,inclusive:c},{value:_,inclusive:i.inclusive})>0&&(o=_,c=i.inclusive);break}return{value:o,inclusive:c}}class Pi{constructor(t,i=null,o=[],c=[],f=null,_="F",A=null,S=null){this.path=t,this.collectionGroup=i,this.explicitOrderBy=o,this.filters=c,this.limit=f,this.limitType=_,this.startAt=A,this.endAt=S,this.ce=null,this.le=null,this.he=null}}function U(u,t,i,o,c,f,_,A){return new Pi(u,t,i,o,c,f,_,A)}function j(u){return new Pi(u)}function R(u){return 0===u.filters.length&&null===u.limit&&null==u.startAt&&null==u.endAt&&(0===u.explicitOrderBy.length||1===u.explicitOrderBy.length&&u.explicitOrderBy[0].field.isKeyField())}function X(u){return null!==u.collectionGroup}function ve(u){const t=Ze(u);if(null===t.ce){t.ce=[];const i=new Set;for(const f of t.explicitOrderBy)t.ce.push(f),i.add(f.field.canonicalString());const o=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(_){let A=new xn(Dn.comparator);return _.filters.forEach(S=>{S.getFlattenedFilters().forEach(L=>{L.isInequality()&&(A=A.add(L.field))})}),A})(t).forEach(f=>{i.has(f.canonicalString())||f.isKeyField()||t.ce.push(new Gs(f,o))}),i.has(Dn.keyField().canonicalString())||t.ce.push(new Gs(Dn.keyField(),o))}return t.ce}function Gt(u){const t=Ze(u);return t.le||(t.le=function Hn(u,t){if("F"===u.limitType)return mo(u.path,u.collectionGroup,t,u.filters,u.limit,u.startAt,u.endAt);{t=t.map(c=>new Gs(c.field,"desc"===c.dir?"asc":"desc"));const i=u.endAt?new gs(u.endAt.position,u.endAt.inclusive):null,o=u.startAt?new gs(u.startAt.position,u.startAt.inclusive):null;return mo(u.path,u.collectionGroup,t,u.filters,u.limit,i,o)}}(t,ve(u))),t.le}function Ps(u,t){const i=u.filters.concat([t]);return new Pi(u.path,u.collectionGroup,u.explicitOrderBy.slice(),i,u.limit,u.limitType,u.startAt,u.endAt)}function Ji(u,t,i){return new Pi(u.path,u.collectionGroup,u.explicitOrderBy.slice(),u.filters.slice(),t,i,u.startAt,u.endAt)}function Zi(u,t){return to(Gt(u),Gt(t))&&u.limitType===t.limitType}function Ws(u){return`${si(Gt(u))}|lt:${u.limitType}`}function es(u){return`Query(target=${function(i){let o=i.path.canonicalString();return null!==i.collectionGroup&&(o+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(o+=`, filters: [${i.filters.map(c=>Ri(c)).join(", ")}]`),tt(i.limit)||(o+=", limit: "+i.limit),i.orderBy.length>0&&(o+=`, orderBy: [${i.orderBy.map(c=>{return`${(_=c).field.canonicalString()} (${_.dir})`;var _}).join(", ")}]`),i.startAt&&(o+=", startAt: ",o+=i.startAt.inclusive?"b:":"a:",o+=i.startAt.position.map(c=>hs(c)).join(",")),i.endAt&&(o+=", endAt: ",o+=i.endAt.inclusive?"a:":"b:",o+=i.endAt.position.map(c=>hs(c)).join(",")),`Target(${o})`}(Gt(u))}; limitType=${u.limitType})`}function ko(u,t){return t.isFoundDocument()&&function(o,c){const f=c.key.path;return null!==o.collectionGroup?c.key.hasCollectionId(o.collectionGroup)&&o.path.isPrefixOf(f):Ot.isDocumentKey(o.path)?o.path.isEqual(f):o.path.isImmediateParentOf(f)}(u,t)&&function(o,c){for(const f of ve(o))if(!f.field.isKeyField()&&null===c.data.field(f.field))return!1;return!0}(u,t)&&function(o,c){for(const f of o.filters)if(!f.matches(c))return!1;return!0}(u,t)&&(c=t,!((o=u).startAt&&!function(_,A,S){const L=hi(_,A,S);return _.inclusive?L<=0:L<0}(o.startAt,ve(o),c)||o.endAt&&!function(_,A,S){const L=hi(_,A,S);return _.inclusive?L>=0:L>0}(o.endAt,ve(o),c)));var o,c}function ec(u){return u.collectionGroup||(u.path.length%2==1?u.path.lastSegment():u.path.get(u.path.length-2))}function eu(u){return(t,i)=>{let o=!1;for(const c of ve(u)){const f=tc(c,t,i);if(0!==f)return f;o=o||c.field.isKeyField()}return 0}}function tc(u,t,i){const o=u.field.isKeyField()?Ot.comparator(t.key,i.key):function(f,_,A){const S=_.data.field(f),L=A.data.field(f);return null!==S&&null!==L?Ts(S,L):wt()}(u.field,t,i);switch(u.dir){case"asc":return o;case"desc":return-1*o;default:return wt()}}class Ms{constructor(t,i){this.mapKeyFn=t,this.equalsFn=i,this.inner={},this.innerSize=0}get(t){const i=this.mapKeyFn(t),o=this.inner[i];if(void 0!==o)for(const[c,f]of o)if(this.equalsFn(c,t))return f}has(t){return void 0!==this.get(t)}set(t,i){const o=this.mapKeyFn(t),c=this.inner[o];if(void 0===c)return this.inner[o]=[[t,i]],void this.innerSize++;for(let f=0;f<c.length;f++)if(this.equalsFn(c[f][0],t))return void(c[f]=[t,i]);c.push([t,i]),this.innerSize++}delete(t){const i=this.mapKeyFn(t),o=this.inner[i];if(void 0===o)return!1;for(let c=0;c<o.length;c++)if(this.equalsFn(o[c][0],t))return 1===o.length?delete this.inner[i]:o.splice(c,1),this.innerSize--,!0;return!1}forEach(t){jr(this.inner,(i,o)=>{for(const[c,f]of o)t(c,f)})}isEmpty(){return rr(this.inner)}size(){return this.innerSize}}const $c=new Sn(Ot.comparator);function Ti(){return $c}const Ln=new Sn(Ot.comparator);function Hr(...u){let t=Ln;for(const i of u)t=t.insert(i.key,i);return t}function ti(u){let t=Ln;return u.forEach((i,o)=>t=t.insert(i,o.overlayedDocument)),t}function Qr(){return no()}function fi(){return no()}function no(){return new Ms(u=>u.toString(),(u,t)=>u.isEqual(t))}const yo=new Sn(Ot.comparator),ea=new xn(Ot.comparator);function Zn(...u){let t=ea;for(const i of u)t=t.add(i);return t}const nc=new xn(gt);function ta(){return nc}function vo(u,t){if(u.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Oe(t)?"-0":t}}function na(u){return{integerValue:""+u}}function Vo(u,t){return zt(t)?na(t):vo(u,t)}class ra{constructor(){this._=void 0}}function rc(u,t,i){return u instanceof Fo?function(c,f){const _={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:c.seconds,nanos:c.nanoseconds}}}};return f&&Xn(f)&&(f=qi(f)),f&&(_.fields.__previous_value__=f),{mapValue:_}}(i,t):u instanceof Lo?Uo(u,t):u instanceof ts?sc(u,t):function(c,f){const _=Iu(c,f),A=tu(_)+tu(c.Pe);return fs(_)&&fs(c.Pe)?na(A):vo(c.serializer,A)}(u,t)}function ic(u,t,i){return u instanceof Lo?Uo(u,t):u instanceof ts?sc(u,t):i}function Iu(u,t){return u instanceof Ks?fs(o=t)||(f=o)&&"doubleValue"in f?t:{integerValue:0}:null;var o,f}class Fo extends ra{}class Lo extends ra{constructor(t){super(),this.elements=t}}function Uo(u,t){const i=nu(t);for(const o of u.elements)i.some(c=>bi(c,o))||i.push(o);return{arrayValue:{values:i}}}class ts extends ra{constructor(t){super(),this.elements=t}}function sc(u,t){let i=nu(t);for(const o of u.elements)i=i.filter(c=>!bi(c,o));return{arrayValue:{values:i}}}class Ks extends ra{constructor(t,i){super(),this.serializer=t,this.Pe=i}}function tu(u){return Lr(u.integerValue||u.doubleValue)}function nu(u){return $r(u)&&u.arrayValue.values?u.arrayValue.values.slice():[]}class ia{constructor(t,i){this.field=t,this.transform=i}}class Ns{constructor(t,i){this.version=t,this.transformResults=i}}class Er{constructor(t,i){this.updateTime=t,this.exists=i}static none(){return new Er}static exists(t){return new Er(void 0,t)}static updateTime(t){return new Er(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function ru(u,t){return void 0!==u.updateTime?t.isFoundDocument()&&t.version.isEqual(u.updateTime):void 0===u.exists||u.exists===t.isFoundDocument()}class Ra{}function Hc(u,t){if(!u.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return u.isNoDocument()?new D(u.key,Er.none()):new Pa(u.key,u.data,Er.none());{const i=u.data,o=vr.empty();let c=new xn(Dn.comparator);for(let f of t.fields)if(!c.has(f)){let _=i.field(f);null===_&&f.length>1&&(f=f.popLast(),_=i.field(f)),null===_?o.delete(f):o.set(f,_),c=c.add(f)}return new xs(u.key,o,new dn(c.toArray()),Er.none())}}function wu(u,t,i){u instanceof Pa?function(c,f,_){const A=c.value.clone(),S=Du(c.fieldTransforms,f,_.transformResults);A.setAll(S),f.convertToFoundDocument(_.version,A).setHasCommittedMutations()}(u,t,i):u instanceof xs?function(c,f,_){if(!ru(c.precondition,f))return void f.convertToUnknownDocument(_.version);const A=Du(c.fieldTransforms,f,_.transformResults),S=f.data;S.setAll(Os(c)),S.setAll(A),f.convertToFoundDocument(_.version,S).setHasCommittedMutations()}(u,t,i):t.convertToNoDocument(i.version).setHasCommittedMutations()}function ro(u,t,i,o){return u instanceof Pa?function(f,_,A,S){if(!ru(f.precondition,_))return A;const L=f.value.clone(),Q=io(f.fieldTransforms,S,_);return L.setAll(Q),_.convertToFoundDocument(_.version,L).setHasLocalMutations(),null}(u,t,i,o):u instanceof xs?function(f,_,A,S){if(!ru(f.precondition,_))return A;const L=io(f.fieldTransforms,S,_),Q=_.data;return Q.setAll(Os(f)),Q.setAll(L),_.convertToFoundDocument(_.version,Q).setHasLocalMutations(),null===A?null:A.unionWith(f.fieldMask.fields).unionWith(f.fieldTransforms.map(re=>re.field))}(u,t,i,o):(A=i,ru(u.precondition,_=t)?(_.convertToNoDocument(_.version).setHasLocalMutations(),null):A);var _,A}function Tu(u,t){let i=null;for(const o of u.fieldTransforms){const c=t.data.field(o.field),f=Iu(o.transform,c||null);null!=f&&(null===i&&(i=vr.empty()),i.set(o.field,f))}return i||null}function Gc(u,t){return u.type===t.type&&!!u.key.isEqual(t.key)&&!!u.precondition.isEqual(t.precondition)&&(c=t.fieldTransforms,!!(void 0===(o=u.fieldTransforms)&&void 0===c||o&&c&&ct(o,c,(f,_)=>function sa(u,t){return u.field.isEqual(t.field)&&(c=t.transform,(o=u.transform)instanceof Lo&&c instanceof Lo||o instanceof ts&&c instanceof ts?ct(o.elements,c.elements,bi):o instanceof Ks&&c instanceof Ks?bi(o.Pe,c.Pe):o instanceof Fo&&c instanceof Fo);var o,c}(f,_))))&&(0===u.type?u.value.isEqual(t.value):1!==u.type||u.data.isEqual(t.data)&&u.fieldMask.isEqual(t.fieldMask));var o,c}class Pa extends Ra{constructor(t,i,o,c=[]){super(),this.key=t,this.value=i,this.precondition=o,this.fieldTransforms=c,this.type=0}getFieldMask(){return null}}class xs extends Ra{constructor(t,i,o,c,f=[]){super(),this.key=t,this.data=i,this.fieldMask=o,this.precondition=c,this.fieldTransforms=f,this.type=1}getFieldMask(){return this.fieldMask}}function Os(u){const t=new Map;return u.fieldMask.fields.forEach(i=>{if(!i.isEmpty()){const o=u.data.field(i);t.set(i,o)}}),t}function Du(u,t,i){const o=new Map;Ct(u.length===i.length);for(let c=0;c<i.length;c++){const f=u[c],_=f.transform,A=t.data.field(f.field);o.set(f.field,ic(_,A,i[c]))}return o}function io(u,t,i){const o=new Map;for(const c of u){const f=c.transform,_=i.data.field(c.field);o.set(c.field,rc(f,_,t))}return o}class D extends Ra{constructor(t,i){super(),this.key=t,this.precondition=i,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class z extends Ra{constructor(t,i){super(),this.key=t,this.precondition=i,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class M{constructor(t,i,o,c){this.batchId=t,this.localWriteTime=i,this.baseMutations=o,this.mutations=c}applyToRemoteDocument(t,i){const o=i.mutationResults;for(let c=0;c<this.mutations.length;c++){const f=this.mutations[c];f.key.isEqual(t.key)&&wu(f,t,o[c])}}applyToLocalView(t,i){for(const o of this.baseMutations)o.key.isEqual(t.key)&&(i=ro(o,t,i,this.localWriteTime));for(const o of this.mutations)o.key.isEqual(t.key)&&(i=ro(o,t,i,this.localWriteTime));return i}applyToLocalDocumentSet(t,i){const o=fi();return this.mutations.forEach(c=>{const f=t.get(c.key),_=f.overlayedDocument;let A=this.applyToLocalView(_,f.mutatedFields);A=i.has(c.key)?null:A;const S=Hc(_,A);null!==S&&o.set(c.key,S),_.isValidDocument()||_.convertToNoDocument(ot.min())}),o}keys(){return this.mutations.reduce((t,i)=>t.add(i.key),Zn())}isEqual(t){return this.batchId===t.batchId&&ct(this.mutations,t.mutations,(i,o)=>Gc(i,o))&&ct(this.baseMutations,t.baseMutations,(i,o)=>Gc(i,o))}}class F{constructor(t,i,o,c){this.batch=t,this.commitVersion=i,this.mutationResults=o,this.docVersions=c}static from(t,i,o){Ct(t.mutations.length===o.length);let c=function(){return yo}();const f=t.mutations;for(let _=0;_<f.length;_++)c=c.insert(f[_].key,o[_].version);return new F(t,i,o,c)}}class ce{constructor(t,i){this.largestBatchId=t,this.mutation=i}getKey(){return this.mutation.key}isEqual(t){return null!==t&&this.mutation===t.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Tt{constructor(t,i){this.count=t,this.unchangedNames=i}}var Kt,yn;function Ir(u){switch(u){default:return wt();case Ae.CANCELLED:case Ae.UNKNOWN:case Ae.DEADLINE_EXCEEDED:case Ae.RESOURCE_EXHAUSTED:case Ae.INTERNAL:case Ae.UNAVAILABLE:case Ae.UNAUTHENTICATED:return!1;case Ae.INVALID_ARGUMENT:case Ae.NOT_FOUND:case Ae.ALREADY_EXISTS:case Ae.PERMISSION_DENIED:case Ae.FAILED_PRECONDITION:case Ae.ABORTED:case Ae.OUT_OF_RANGE:case Ae.UNIMPLEMENTED:case Ae.DATA_LOSS:return!0}}function Mr(u){if(void 0===u)return Xe("GRPC error has no .code"),Ae.UNKNOWN;switch(u){case Kt.OK:return Ae.OK;case Kt.CANCELLED:return Ae.CANCELLED;case Kt.UNKNOWN:return Ae.UNKNOWN;case Kt.DEADLINE_EXCEEDED:return Ae.DEADLINE_EXCEEDED;case Kt.RESOURCE_EXHAUSTED:return Ae.RESOURCE_EXHAUSTED;case Kt.INTERNAL:return Ae.INTERNAL;case Kt.UNAVAILABLE:return Ae.UNAVAILABLE;case Kt.UNAUTHENTICATED:return Ae.UNAUTHENTICATED;case Kt.INVALID_ARGUMENT:return Ae.INVALID_ARGUMENT;case Kt.NOT_FOUND:return Ae.NOT_FOUND;case Kt.ALREADY_EXISTS:return Ae.ALREADY_EXISTS;case Kt.PERMISSION_DENIED:return Ae.PERMISSION_DENIED;case Kt.FAILED_PRECONDITION:return Ae.FAILED_PRECONDITION;case Kt.ABORTED:return Ae.ABORTED;case Kt.OUT_OF_RANGE:return Ae.OUT_OF_RANGE;case Kt.UNIMPLEMENTED:return Ae.UNIMPLEMENTED;case Kt.DATA_LOSS:return Ae.DATA_LOSS;default:return wt()}}(yn=Kt||(Kt={}))[yn.OK=0]="OK",yn[yn.CANCELLED=1]="CANCELLED",yn[yn.UNKNOWN=2]="UNKNOWN",yn[yn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",yn[yn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",yn[yn.NOT_FOUND=5]="NOT_FOUND",yn[yn.ALREADY_EXISTS=6]="ALREADY_EXISTS",yn[yn.PERMISSION_DENIED=7]="PERMISSION_DENIED",yn[yn.UNAUTHENTICATED=16]="UNAUTHENTICATED",yn[yn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",yn[yn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",yn[yn.ABORTED=10]="ABORTED",yn[yn.OUT_OF_RANGE=11]="OUT_OF_RANGE",yn[yn.UNIMPLEMENTED=12]="UNIMPLEMENTED",yn[yn.INTERNAL=13]="INTERNAL",yn[yn.UNAVAILABLE=14]="UNAVAILABLE",yn[yn.DATA_LOSS=15]="DATA_LOSS";function Gr(){return new TextEncoder}const Ar=new Qe([4294967295,4294967295],0);function ci(u){const t=Gr().encode(u),i=new We;return i.update(t),new Uint8Array(i.digest())}function wr(u){const t=new DataView(u.buffer),i=t.getUint32(0,!0),o=t.getUint32(4,!0),c=t.getUint32(8,!0),f=t.getUint32(12,!0);return[new Qe([i,o],0),new Qe([c,f],0)]}class Lt{constructor(t,i,o){if(this.bitmap=t,this.padding=i,this.hashCount=o,i<0||i>=8)throw new pn(`Invalid padding: ${i}`);if(o<0)throw new pn(`Invalid hash count: ${o}`);if(t.length>0&&0===this.hashCount)throw new pn(`Invalid hash count: ${o}`);if(0===t.length&&0!==i)throw new pn(`Invalid padding when bitmap length is 0: ${i}`);this.Ie=8*t.length-i,this.Te=Qe.fromNumber(this.Ie)}Ee(t,i,o){let c=t.add(i.multiply(Qe.fromNumber(o)));return 1===c.compare(Ar)&&(c=new Qe([c.getBits(0),c.getBits(1)],0)),c.modulo(this.Te).toNumber()}de(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(0===this.Ie)return!1;const i=ci(t),[o,c]=wr(i);for(let f=0;f<this.hashCount;f++){const _=this.Ee(o,c,f);if(!this.de(_))return!1}return!0}static create(t,i,o){const c=t%8==0?0:8-t%8,f=new Uint8Array(Math.ceil(t/8)),_=new Lt(f,c,i);return o.forEach(A=>_.insert(A)),_}insert(t){if(0===this.Ie)return;const i=ci(t),[o,c]=wr(i);for(let f=0;f<this.hashCount;f++){const _=this.Ee(o,c,f);this.Ae(_)}}Ae(t){const i=Math.floor(t/8);this.bitmap[i]|=1<<t%8}}class pn extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class dr{constructor(t,i,o,c,f){this.snapshotVersion=t,this.targetChanges=i,this.targetMismatches=o,this.documentUpdates=c,this.resolvedLimboDocuments=f}static createSynthesizedRemoteEventForCurrentChange(t,i,o){const c=new Map;return c.set(t,Tr.createSynthesizedTargetChangeForCurrentChange(t,i,o)),new dr(ot.min(),c,new Sn(gt),Ti(),Zn())}}class Tr{constructor(t,i,o,c,f){this.resumeToken=t,this.current=i,this.addedDocuments=o,this.modifiedDocuments=c,this.removedDocuments=f}static createSynthesizedTargetChangeForCurrentChange(t,i,o){return new Tr(o,i,Zn(),Zn(),Zn())}}class Cr{constructor(t,i,o,c){this.Re=t,this.removedTargetIds=i,this.key=o,this.Ve=c}}class yi{constructor(t,i){this.targetId=t,this.me=i}}class so{constructor(t,i,o=cr.EMPTY_BYTE_STRING,c=null){this.state=t,this.targetIds=i,this.resumeToken=o,this.cause=c}}class zr{constructor(){this.fe=0,this.ge=On(),this.pe=cr.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}ve(){let t=Zn(),i=Zn(),o=Zn();return this.ge.forEach((c,f)=>{switch(f){case 0:t=t.add(c);break;case 2:i=i.add(c);break;case 1:o=o.add(c);break;default:wt()}}),new Tr(this.pe,this.ye,t,i,o)}Ce(){this.we=!1,this.ge=On()}Fe(t,i){this.we=!0,this.ge=this.ge.insert(t,i)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,Ct(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Nr{constructor(t){this.Le=t,this.Be=new Map,this.ke=Ti(),this.qe=qs(),this.Qe=new Sn(gt)}Ke(t){for(const i of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.$e(i,t.Ve):this.Ue(i,t.key,t.Ve);for(const i of t.removedTargetIds)this.Ue(i,t.key,t.Ve)}We(t){this.forEachTarget(t,i=>{const o=this.Ge(i);switch(t.state){case 0:this.ze(i)&&o.De(t.resumeToken);break;case 1:o.Oe(),o.Se||o.Ce(),o.De(t.resumeToken);break;case 2:o.Oe(),o.Se||this.removeTarget(i);break;case 3:this.ze(i)&&(o.Ne(),o.De(t.resumeToken));break;case 4:this.ze(i)&&(this.je(i),o.De(t.resumeToken));break;default:wt()}})}forEachTarget(t,i){t.targetIds.length>0?t.targetIds.forEach(i):this.Be.forEach((o,c)=>{this.ze(c)&&i(c)})}He(t){const i=t.targetId,o=t.me.count,c=this.Je(i);if(c){const f=c.target;if(Rs(f))if(0===o){const _=new Ot(f.path);this.Ue(i,_,ir.newNoDocument(_,ot.min()))}else Ct(1===o);else{const _=this.Ye(i);if(_!==o){const A=this.Ze(t),S=A?this.Xe(A,t,_):1;0!==S&&(this.je(i),this.Qe=this.Qe.insert(i,2===S?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Ze(t){const i=t.me.unchangedNames;if(!i||!i.bits)return null;const{bits:{bitmap:o="",padding:c=0},hashCount:f=0}=i;let _,A;try{_=Bi(o).toUint8Array()}catch(S){if(S instanceof Qn)return rn("Decoding the base64 bloom filter in existence filter failed ("+S.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw S}try{A=new Lt(_,c,f)}catch(S){return rn(S instanceof pn?"BloomFilter error: ":"Applying bloom filter failed: ",S),null}return 0===A.Ie?null:A}Xe(t,i,o){return i.me.count===o-this.nt(t,i.targetId)?0:2}nt(t,i){const o=this.Le.getRemoteKeysForTarget(i);let c=0;return o.forEach(f=>{const _=this.Le.tt(),A=`projects/${_.projectId}/databases/${_.database}/documents/${f.path.canonicalString()}`;t.mightContain(A)||(this.Ue(i,f,null),c++)}),c}rt(t){const i=new Map;this.Be.forEach((f,_)=>{const A=this.Je(_);if(A){if(f.current&&Rs(A.target)){const S=new Ot(A.target.path);null!==this.ke.get(S)||this.it(_,S)||this.Ue(_,S,ir.newNoDocument(S,t))}f.be&&(i.set(_,f.ve()),f.Ce())}});let o=Zn();this.qe.forEach((f,_)=>{let A=!0;_.forEachWhile(S=>{const L=this.Je(S);return!L||"TargetPurposeLimboResolution"===L.purpose||(A=!1,!1)}),A&&(o=o.add(f))}),this.ke.forEach((f,_)=>_.setReadTime(t));const c=new dr(t,i,this.Qe,this.ke,o);return this.ke=Ti(),this.qe=qs(),this.Qe=new Sn(gt),c}$e(t,i){if(!this.ze(t))return;const o=this.it(t,i.key)?2:0;this.Ge(t).Fe(i.key,o),this.ke=this.ke.insert(i.key,i),this.qe=this.qe.insert(i.key,this.st(i.key).add(t))}Ue(t,i,o){if(!this.ze(t))return;const c=this.Ge(t);this.it(t,i)?c.Fe(i,1):c.Me(i),this.qe=this.qe.insert(i,this.st(i).delete(t)),o&&(this.ke=this.ke.insert(i,o))}removeTarget(t){this.Be.delete(t)}Ye(t){const i=this.Ge(t).ve();return this.Le.getRemoteKeysForTarget(t).size+i.addedDocuments.size-i.removedDocuments.size}xe(t){this.Ge(t).xe()}Ge(t){let i=this.Be.get(t);return i||(i=new zr,this.Be.set(t,i)),i}st(t){let i=this.qe.get(t);return i||(i=new xn(gt),this.qe=this.qe.insert(t,i)),i}ze(t){const i=null!==this.Je(t);return i||be("WatchChangeAggregator","Detected inactive target",t),i}Je(t){const i=this.Be.get(t);return i&&i.Se?null:this.Le.ot(t)}je(t){this.Be.set(t,new zr),this.Le.getRemoteKeysForTarget(t).forEach(i=>{this.Ue(t,i,null)})}it(t,i){return this.Le.getRemoteKeysForTarget(t).has(i)}}function qs(){return new Sn(Ot.comparator)}function On(){return new Sn(Ot.comparator)}const Eo={asc:"ASCENDING",desc:"DESCENDING"},oc={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},iu={and:"AND",or:"OR"};class Wr{constructor(t,i){this.databaseId=t,this.useProto3Json=i}}function Ma(u,t){return u.useProto3Json||tt(t)?t:{value:t}}function Io(u,t){return u.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function wo(u,t){return u.useProto3Json?t.toBase64():t.toUint8Array()}function su(u,t){return Io(u,t.toTimestamp())}function Xr(u){return Ct(!!u),ot.fromTimestamp(function(i){const o=ls(i);return new ht(o.seconds,o.nanos)}(u))}function oa(u,t){return _s(u,t).canonicalString()}function _s(u,t){const i=(c=u,new Xt(["projects",c.projectId,"databases",c.database])).child("documents");var c;return void 0===t?i:i.child(t)}function zi(u){const t=Xt.fromString(u);return Ct(xa(t)),t}function kn(u,t){return oa(u.databaseId,t.path)}function ns(u,t){const i=zi(t);if(i.get(1)!==u.databaseId.projectId)throw new Pe(Ae.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+i.get(1)+" vs "+u.databaseId.projectId);if(i.get(3)!==u.databaseId.database)throw new Pe(Ae.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+i.get(3)+" vs "+u.databaseId.database);return new Ot(To(i))}function Au(u,t){return oa(u.databaseId,t)}function kr(u){const t=zi(u);return 4===t.length?Xt.emptyPath():To(t)}function Na(u){return new Xt(["projects",u.databaseId.projectId,"databases",u.databaseId.database]).canonicalString()}function To(u){return Ct(u.length>4&&"documents"===u.get(4)),u.popFirst(5)}function oi(u,t,i){return{name:kn(u,t),fields:i.value.mapValue.fields}}function ou(u,t,i){const o=ns(u,t.name),c=Xr(t.updateTime),f=t.createTime?Xr(t.createTime):ot.min(),_=new vr({mapValue:{fields:t.fields}}),A=ir.newFoundDocument(o,c,f,_);return i&&A.setHasCommittedMutations(),i?A.setHasCommittedMutations():A}function Bo(u,t){let i;if(t instanceof Pa)i={update:oi(u,t.key,t.value)};else if(t instanceof D)i={delete:kn(u,t.key)};else if(t instanceof xs)i={update:oi(u,t.key,t.data),updateMask:sg(t.fieldMask)};else{if(!(t instanceof z))return wt();i={verify:kn(u,t.key)}}return t.fieldTransforms.length>0&&(i.updateTransforms=t.fieldTransforms.map(o=>function(f,_){const A=_.transform;if(A instanceof Fo)return{fieldPath:_.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(A instanceof Lo)return{fieldPath:_.field.canonicalString(),appendMissingElements:{values:A.elements}};if(A instanceof ts)return{fieldPath:_.field.canonicalString(),removeAllFromArray:{values:A.elements}};if(A instanceof Ks)return{fieldPath:_.field.canonicalString(),increment:A.Pe};throw wt()}(0,o))),t.precondition.isNone||(i.currentDocument=void 0!==(f=t.precondition).updateTime?{updateTime:su(u,f.updateTime)}:void 0!==f.exists?{exists:f.exists}:wt()),i;var f}function jo(u,t){const i=t.currentDocument?void 0!==(f=t.currentDocument).updateTime?Er.updateTime(Xr(f.updateTime)):void 0!==f.exists?Er.exists(f.exists):Er.none():Er.none(),o=t.updateTransforms?t.updateTransforms.map(c=>function(_,A){let S=null;"setToServerValue"in A?(Ct("REQUEST_TIME"===A.setToServerValue),S=new Fo):"appendMissingElements"in A?S=new Lo(A.appendMissingElements.values||[]):"removeAllFromArray"in A?S=new ts(A.removeAllFromArray.values||[]):"increment"in A?S=new Ks(_,A.increment):wt();const L=Dn.fromServerFormat(A.fieldPath);return new ia(L,S)}(u,c)):[];var f;if(t.update){const c=ns(u,t.update.name),f=new vr({mapValue:{fields:t.update.fields}});if(t.updateMask){const _=new dn((t.updateMask.fieldPaths||[]).map(Q=>Dn.fromServerFormat(Q)));return new xs(c,f,_,i,o)}return new Pa(c,f,i,o)}if(t.delete){const c=ns(u,t.delete);return new D(c,i)}if(t.verify){const c=ns(u,t.verify);return new z(c,i)}return wt()}function Qs(u,t){return{documents:[Au(u,t.path)]}}function $o(u,t){const i={structuredQuery:{}},o=t.path;let c;null!==t.collectionGroup?(c=o,i.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(c=o.popLast(),i.structuredQuery.from=[{collectionId:o.lastSegment()}]),i.parent=Au(u,c);const f=function(L){if(0!==L.length)return Yd(tr.create(L,"and"))}(t.filters);f&&(i.structuredQuery.where=f);const _=function(L){if(0!==L.length)return L.map(Q=>{return{field:aa((we=Q).field),direction:zc(we.dir)};var we})}(t.orderBy);_&&(i.structuredQuery.orderBy=_);const A=Ma(u,t.limit);return null!==A&&(i.structuredQuery.limit=A),t.startAt&&(i.structuredQuery.startAt={before:(L=t.startAt).inclusive,values:L.position}),t.endAt&&(i.structuredQuery.endAt=function(L){return{before:!L.inclusive,values:L.position}}(t.endAt)),{_t:i,parent:c};var L}function Nl(u){let t=kr(u.parent);const i=u.structuredQuery,o=i.from?i.from.length:0;let c=null;if(o>0){Ct(1===o);const Q=i.from[0];Q.allDescendants?c=Q.collectionId:t=t.child(Q.collectionId)}let f=[];i.where&&(f=function(re){const we=bu(re);return we instanceof tr&&ei(we)?we.getFilters():[we]}(i.where));let _=[];i.orderBy&&(_=i.orderBy.map(we=>{return new Gs(Su((Rt=we).field),function(Vt){switch(Vt){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(Rt.direction));var Rt}));let A=null;i.limit&&(A=function(re){let we;return we="object"==typeof re?re.value:re,tt(we)?null:we}(i.limit));let S=null;var re;i.startAt&&(S=new gs((re=i.startAt).values||[],!!re.before));let L=null;return i.endAt&&(L=function(re){return new gs(re.values||[],!re.before)}(i.endAt)),U(t,c,_,f,A,"F",S,L)}function bu(u){return void 0!==u.unaryFilter?function(i){switch(i.unaryFilter.op){case"IS_NAN":const o=Su(i.unaryFilter.field);return $n.create(o,"==",{doubleValue:NaN});case"IS_NULL":const c=Su(i.unaryFilter.field);return $n.create(c,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const f=Su(i.unaryFilter.field);return $n.create(f,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const _=Su(i.unaryFilter.field);return $n.create(_,"!=",{nullValue:"NULL_VALUE"});default:return wt()}}(u):void 0!==u.fieldFilter?$n.create(Su((i=u).fieldFilter.field),function(c){switch(c){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return wt()}}(i.fieldFilter.op),i.fieldFilter.value):void 0!==u.compositeFilter?function(i){return tr.create(i.compositeFilter.filters.map(o=>bu(o)),function(c){switch(c){case"AND":return"and";case"OR":return"or";default:return wt()}}(i.compositeFilter.op))}(u):wt();var i}function zc(u){return Eo[u]}function Wc(u){return oc[u]}function xl(u){return iu[u]}function aa(u){return{fieldPath:u.canonicalString()}}function Su(u){return Dn.fromServerFormat(u.fieldPath)}function Yd(u){return u instanceof $n?function(i){if("=="===i.op){if(Pn(i.value))return{unaryFilter:{field:aa(i.field),op:"IS_NAN"}};if(As(i.value))return{unaryFilter:{field:aa(i.field),op:"IS_NULL"}}}else if("!="===i.op){if(Pn(i.value))return{unaryFilter:{field:aa(i.field),op:"IS_NOT_NAN"}};if(As(i.value))return{unaryFilter:{field:aa(i.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:aa(i.field),op:Wc(i.op),value:i.value}}}(u):u instanceof tr?function(i){const o=i.getFilters().map(c=>Yd(c));return 1===o.length?o[0]:{compositeFilter:{op:xl(i.op),filters:o}}}(u):wt()}function sg(u){const t=[];return u.fields.forEach(i=>t.push(i.canonicalString())),{fieldPaths:t}}function xa(u){return u.length>=4&&"projects"===u.get(0)&&"databases"===u.get(2)}class ua{constructor(t,i,o,c,f=ot.min(),_=ot.min(),A=cr.EMPTY_BYTE_STRING,S=null){this.target=t,this.targetId=i,this.purpose=o,this.sequenceNumber=c,this.snapshotVersion=f,this.lastLimboFreeSnapshotVersion=_,this.resumeToken=A,this.expectedCount=S}withSequenceNumber(t){return new ua(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,i){return new ua(this.target,this.targetId,this.purpose,this.sequenceNumber,i,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new ua(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new ua(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}class uf{constructor(t){this.ct=t}}function cf(u,t){const i=t.key,o={prefixPath:i.getCollectionPath().popLast().toArray(),collectionGroup:i.collectionGroup,documentId:i.path.lastSegment(),readTime:Ol(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())o.document={name:kn(f=u.ct,(_=t).key),fields:_.data.value.mapValue.fields,updateTime:Io(f,_.version.toTimestamp()),createTime:Io(f,_.createTime.toTimestamp())};else if(t.isNoDocument())o.noDocument={path:i.path.toArray(),readTime:ca(t.version)};else{if(!t.isUnknownDocument())return wt();o.unknownDocument={path:i.path.toArray(),version:ca(t.version)}}var f,_;return o}function Ol(u){const t=u.toTimestamp();return[t.seconds,t.nanoseconds]}function ca(u){const t=u.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Oa(u){const t=new ht(u.seconds,u.nanoseconds);return ot.fromTimestamp(t)}function E(u,t){const i=(t.baseMutations||[]).map(f=>jo(u.ct,f));for(let f=0;f<t.mutations.length-1;++f)f+1<t.mutations.length&&void 0!==t.mutations[f+1].transform&&(t.mutations[f].updateTransforms=t.mutations[f+1].transform.fieldTransforms,t.mutations.splice(f+1,1),++f);const o=t.mutations.map(f=>jo(u.ct,f)),c=ht.fromMillis(t.localWriteTimeMs);return new M(t.batchId,c,i,o)}function C(u){const t=Oa(u.readTime),i=void 0!==u.lastLimboFreeSnapshotVersion?Oa(u.lastLimboFreeSnapshotVersion):ot.min();let o;return o=void 0!==u.query.documents?(Ct(1===(f=u.query).documents.length),Gt(j(kr(f.documents[0])))):function(f){return Gt(Nl(f))}(u.query),new ua(o,u.targetId,"TargetPurposeListen",u.lastListenSequenceNumber,t,i,cr.fromBase64String(u.resumeToken));var f}function w(u,t){const i=ca(t.snapshotVersion),o=ca(t.lastLimboFreeSnapshotVersion);let c;c=Rs(t.target)?Qs(u.ct,t.target):$o(u.ct,t.target)._t;const f=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:si(t.target),readTime:i,resumeToken:f,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:o,query:c}}function b(u){const t=Nl({parent:u.parent,structuredQuery:u.structuredQuery});return"LAST"===u.limitType?Ji(t,t.limit,"L"):t}function O(u,t){return new ce(t.largestBatchId,jo(u.ct,t.overlayMutation))}function q(u,t){const i=t.path.lastSegment();return[u,Qt(t.path.popLast()),i]}function de(u,t,i,o){return{indexId:u,uid:t,sequenceNumber:i,readTime:ca(o.readTime),documentKey:Qt(o.documentKey.path),largestBatchId:o.largestBatchId}}class et{getBundleMetadata(t,i){return ze(t).get(i).next(o=>{if(o)return{id:(f=o).bundleId,createTime:Oa(f.createTime),version:f.version};var f})}saveBundleMetadata(t,i){return ze(t).put({bundleId:(c=i).id,createTime:ca(Xr(c.createTime)),version:c.version});var c}getNamedQuery(t,i){return tn(t).get(i).next(o=>{if(o)return{name:(f=o).name,query:b(f.bundledQuery),readTime:Oa(f.readTime)};var f})}saveNamedQuery(t,i){return tn(t).put({name:(c=i).name,readTime:ca(Xr(c.readTime)),bundledQuery:c.bundledQuery});var c}}function ze(u){return ar(u,"bundles")}function tn(u){return ar(u,"namedQueries")}class Un{constructor(t,i){this.serializer=t,this.userId=i}static lt(t,i){return new Un(t,i.uid||"")}getOverlay(t,i){return Fn(t).get(q(this.userId,i)).next(o=>o?O(this.serializer,o):null)}getOverlays(t,i){const o=Qr();return Ie.forEach(i,c=>this.getOverlay(t,c).next(f=>{null!==f&&o.set(c,f)})).next(()=>o)}saveOverlays(t,i,o){const c=[];return o.forEach((f,_)=>{const A=new ce(i,_);c.push(this.ht(t,A))}),Ie.waitFor(c)}removeOverlaysForBatchId(t,i,o){const c=new Set;i.forEach(_=>c.add(Qt(_.getCollectionPath())));const f=[];return c.forEach(_=>{const A=IDBKeyRange.bound([this.userId,_,o],[this.userId,_,o+1],!1,!0);f.push(Fn(t).j("collectionPathOverlayIndex",A))}),Ie.waitFor(f)}getOverlaysForCollection(t,i,o){const c=Qr(),f=Qt(i),_=IDBKeyRange.bound([this.userId,f,o],[this.userId,f,Number.POSITIVE_INFINITY],!0);return Fn(t).U("collectionPathOverlayIndex",_).next(A=>{for(const S of A){const L=O(this.serializer,S);c.set(L.getKey(),L)}return c})}getOverlaysForCollectionGroup(t,i,o,c){const f=Qr();let _;const A=IDBKeyRange.bound([this.userId,i,o],[this.userId,i,Number.POSITIVE_INFINITY],!0);return Fn(t).J({index:"collectionGroupOverlayIndex",range:A},(S,L,Q)=>{const re=O(this.serializer,L);f.size()<c||re.largestBatchId===_?(f.set(re.getKey(),re),_=re.largestBatchId):Q.done()}).next(()=>f)}ht(t,i){return Fn(t).put(function(c,f,_){const[A,S,L]=q(f,_.mutation.key);return{userId:f,collectionPath:S,documentId:L,collectionGroup:_.mutation.key.getCollectionGroup(),largestBatchId:_.largestBatchId,overlayMutation:Bo(c.ct,_.mutation)}}(this.serializer,this.userId,i))}}function Fn(u){return ar(u,"documentOverlays")}class vi{Pt(t){return ar(t,"globals")}getSessionToken(t){return this.Pt(t).get("sessionToken").next(i=>{const o=i?.value;return o?cr.fromUint8Array(o):cr.EMPTY_BYTE_STRING})}setSessionToken(t,i){return this.Pt(t).put({name:"sessionToken",value:i.toUint8Array()})}}class ks{constructor(){}It(t,i){this.Tt(t,i),i.Et()}Tt(t,i){if("nullValue"in t)this.dt(i,5);else if("booleanValue"in t)this.dt(i,10),i.At(t.booleanValue?1:0);else if("integerValue"in t)this.dt(i,15),i.At(Lr(t.integerValue));else if("doubleValue"in t){const o=Lr(t.doubleValue);isNaN(o)?this.dt(i,13):(this.dt(i,15),Oe(o)?i.At(0):i.At(o))}else if("timestampValue"in t){let o=t.timestampValue;this.dt(i,20),"string"==typeof o&&(o=ls(o)),i.Rt(`${o.seconds||""}`),i.At(o.nanos||0)}else if("stringValue"in t)this.Vt(t.stringValue,i),this.ft(i);else if("bytesValue"in t)this.dt(i,30),i.gt(Bi(t.bytesValue)),this.ft(i);else if("referenceValue"in t)this.yt(t.referenceValue,i);else if("geoPointValue"in t){const o=t.geoPointValue;this.dt(i,45),i.At(o.latitude||0),i.At(o.longitude||0)}else"mapValue"in t?Zo(t)?this.dt(i,Number.MAX_SAFE_INTEGER):Js(t)?this.wt(t.mapValue,i):(this.St(t.mapValue,i),this.ft(i)):"arrayValue"in t?(this.bt(t.arrayValue,i),this.ft(i)):wt()}Vt(t,i){this.dt(i,25),this.Dt(t,i)}Dt(t,i){i.Rt(t)}St(t,i){const o=t.fields||{};this.dt(i,55);for(const c of Object.keys(o))this.Vt(c,i),this.Tt(o[c],i)}wt(t,i){var o,c;const f=t.fields||{};this.dt(i,53);const _="value",A=(null===(c=null===(o=f[_].arrayValue)||void 0===o?void 0:o.values)||void 0===c?void 0:c.length)||0;this.dt(i,15),i.At(Lr(A)),this.Vt(_,i),this.Tt(f[_],i)}bt(t,i){const o=t.values||[];this.dt(i,50);for(const c of o)this.Tt(c,i)}yt(t,i){this.dt(i,37),Ot.fromName(t).path.forEach(o=>{this.dt(i,60),this.Dt(o,i)})}dt(t,i){t.At(i)}ft(t){t.At(2)}}function ka(u){if(0===u)return 8;let t=0;return!(u>>4)&&(t+=4,u<<=4),!(u>>6)&&(t+=2,u<<=2),!(u>>7)&&(t+=1),t}function la(u){const t=64-function(o){let c=0;for(let f=0;f<8;++f){const _=ka(255&o[f]);if(c+=_,8!==_)break}return c}(u);return Math.ceil(t/8)}ks.vt=new ks;class Xs{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(t){const i=t[Symbol.iterator]();let o=i.next();for(;!o.done;)this.Ft(o.value),o=i.next();this.Mt()}xt(t){const i=t[Symbol.iterator]();let o=i.next();for(;!o.done;)this.Ot(o.value),o=i.next();this.Nt()}Lt(t){for(const i of t){const o=i.charCodeAt(0);if(o<128)this.Ft(o);else if(o<2048)this.Ft(960|o>>>6),this.Ft(128|63&o);else if(i<"\ud800"||"\udbff"<i)this.Ft(480|o>>>12),this.Ft(128|63&o>>>6),this.Ft(128|63&o);else{const c=i.codePointAt(0);this.Ft(240|c>>>18),this.Ft(128|63&c>>>12),this.Ft(128|63&c>>>6),this.Ft(128|63&c)}}this.Mt()}Bt(t){for(const i of t){const o=i.charCodeAt(0);if(o<128)this.Ot(o);else if(o<2048)this.Ot(960|o>>>6),this.Ot(128|63&o);else if(i<"\ud800"||"\udbff"<i)this.Ot(480|o>>>12),this.Ot(128|63&o>>>6),this.Ot(128|63&o);else{const c=i.codePointAt(0);this.Ot(240|c>>>18),this.Ot(128|63&c>>>12),this.Ot(128|63&c>>>6),this.Ot(128|63&c)}}this.Nt()}kt(t){const i=this.qt(t),o=la(i);this.Qt(1+o),this.buffer[this.position++]=255&o;for(let c=i.length-o;c<i.length;++c)this.buffer[this.position++]=255&i[c]}Kt(t){const i=this.qt(t),o=la(i);this.Qt(1+o),this.buffer[this.position++]=~(255&o);for(let c=i.length-o;c<i.length;++c)this.buffer[this.position++]=~(255&i[c])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(t){this.Qt(t.length),this.buffer.set(t,this.position),this.position+=t.length}zt(){return this.buffer.slice(0,this.position)}qt(t){const i=function(f){const _=new DataView(new ArrayBuffer(8));return _.setFloat64(0,f,!1),new Uint8Array(_.buffer)}(t),o=!!(128&i[0]);i[0]^=o?255:128;for(let c=1;c<i.length;++c)i[c]^=o?255:0;return i}Ft(t){const i=255&t;0===i?(this.Ut(0),this.Ut(255)):255===i?(this.Ut(255),this.Ut(0)):this.Ut(i)}Ot(t){const i=255&t;0===i?(this.Gt(0),this.Gt(255)):255===i?(this.Gt(255),this.Gt(0)):this.Gt(t)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(t){this.Qt(1),this.buffer[this.position++]=t}Gt(t){this.Qt(1),this.buffer[this.position++]=~t}Qt(t){const i=t+this.position;if(i<=this.buffer.length)return;let o=2*this.buffer.length;o<i&&(o=i);const c=new Uint8Array(o);c.set(this.buffer),this.buffer=c}}class Do{constructor(t){this.jt=t}gt(t){this.jt.Ct(t)}Rt(t){this.jt.Lt(t)}At(t){this.jt.kt(t)}Et(){this.jt.$t()}}class Kc{constructor(t){this.jt=t}gt(t){this.jt.xt(t)}Rt(t){this.jt.Bt(t)}At(t){this.jt.Kt(t)}Et(){this.jt.Wt()}}class uu{constructor(){this.jt=new Xs,this.Ht=new Do(this.jt),this.Jt=new Kc(this.jt)}seed(t){this.jt.seed(t)}Yt(t){return 0===t?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}class Ru{constructor(t,i,o,c){this.indexId=t,this.documentKey=i,this.arrayValue=o,this.directionalValue=c}Zt(){const t=this.directionalValue.length,i=0===t||255===this.directionalValue[t-1]?t+1:t,o=new Uint8Array(i);return o.set(this.directionalValue,0),i!==t?o.set([0],this.directionalValue.length):++o[o.length-1],new Ru(this.indexId,this.documentKey,this.arrayValue,o)}}function Va(u,t){let i=u.indexId-t.indexId;return 0!==i?i:(i=br(u.arrayValue,t.arrayValue),0!==i?i:(i=br(u.directionalValue,t.directionalValue),0!==i?i:Ot.comparator(u.documentKey,t.documentKey)))}function br(u,t){for(let i=0;i<u.length&&i<t.length;++i){const o=u[i]-t[i];if(0!==o)return o}return u.length-t.length}class da{constructor(t){this.Xt=new xn((i,o)=>Dn.comparator(i.field,o.field)),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.en=t.orderBy,this.tn=[];for(const i of t.filters){const o=i;o.isInequality()?this.Xt=this.Xt.add(o):this.tn.push(o)}}get nn(){return this.Xt.size>1}rn(t){if(Ct(t.collectionGroup===this.collectionId),this.nn)return!1;const i=Nn(t);if(void 0!==i&&!this.sn(i))return!1;const o=an(t);let c=new Set,f=0,_=0;for(;f<o.length&&this.sn(o[f]);++f)c=c.add(o[f].fieldPath.canonicalString());if(f===o.length)return!0;if(this.Xt.size>0){const A=this.Xt.getIterator().getNext();if(!c.has(A.field.canonicalString())){const S=o[f];if(!this.on(A,S)||!this._n(this.en[_++],S))return!1}++f}for(;f<o.length;++f)if(_>=this.en.length||!this._n(this.en[_++],o[f]))return!1;return!0}an(){if(this.nn)return null;let t=new xn(Dn.comparator);const i=[];for(const o of this.tn)if(!o.field.isKeyField())if("array-contains"===o.op||"array-contains-any"===o.op)i.push(new Yn(o.field,2));else{if(t.has(o.field))continue;t=t.add(o.field),i.push(new Yn(o.field,0))}for(const o of this.en)o.field.isKeyField()||t.has(o.field)||(t=t.add(o.field),i.push(new Yn(o.field,"asc"===o.dir?0:1)));return new mr(mr.UNKNOWN_ID,this.collectionId,i,Jn.empty())}sn(t){for(const i of this.tn)if(this.on(i,t))return!0;return!1}on(t,i){return!(void 0===t||!t.field.isEqual(i.fieldPath))&&2===i.kind==("array-contains"===t.op||"array-contains-any"===t.op)}_n(t,i){return!!t.field.isEqual(i.fieldPath)&&(0===i.kind&&"asc"===t.dir||1===i.kind&&"desc"===t.dir)}}function cu(u){var t,i;if(Ct(u instanceof $n||u instanceof tr),u instanceof $n){if(u instanceof Hi){const c=(null===(i=null===(t=u.value.arrayValue)||void 0===t?void 0:t.values)||void 0===i?void 0:i.map(f=>$n.create(u.field,"==",f)))||[];return tr.create(c,"or")}return u}const o=u.filters.map(c=>cu(c));return tr.create(o,u.op)}function Vs(u){if(0===u.getFilters().length)return[];const t=ys(cu(u));return Ct(Fa(t)),Jd(t)||Pu(t)?[t]:t.getFilters()}function Jd(u){return u instanceof $n}function Pu(u){return u instanceof tr&&ei(u)}function Fa(u){return Jd(u)||Pu(u)||function(i){if(i instanceof tr&&po(i)){for(const o of i.getFilters())if(!Jd(o)&&!Pu(o))return!1;return!0}return!1}(u)}function ys(u){if(Ct(u instanceof $n||u instanceof tr),u instanceof $n)return u;if(1===u.filters.length)return ys(u.filters[0]);const t=u.filters.map(o=>ys(o));let i=tr.create(t,u.op);return i=uc(i),Fa(i)?i:(Ct(i instanceof tr),Ct(fo(i)),Ct(i.filters.length>1),i.filters.reduce((o,c)=>Zd(o,c)))}function Zd(u,t){let i;return Ct(u instanceof $n||u instanceof tr),Ct(t instanceof $n||t instanceof tr),i=u instanceof $n?t instanceof $n?tr.create([u,t],"and"):kl(u,t):t instanceof $n?kl(t,u):function(c,f){if(Ct(c.filters.length>0&&f.filters.length>0),fo(c)&&fo(f))return eo(c,f.getFilters());const _=po(c)?c:f,A=po(c)?f:c,S=_.filters.map(L=>Zd(L,A));return tr.create(S,"or")}(u,t),uc(i)}function kl(u,t){if(fo(t))return eo(t,u.getFilters());{const i=t.filters.map(o=>Zd(u,o));return tr.create(i,"or")}}function uc(u){if(Ct(u instanceof $n||u instanceof tr),u instanceof $n)return u;const t=u.getFilters();if(1===t.length)return uc(t[0]);if(Ca(u))return u;const i=t.map(c=>uc(c)),o=[];return i.forEach(c=>{c instanceof $n?o.push(c):c instanceof tr&&(c.op===u.op?o.push(...c.filters):o.push(c))}),1===o.length?o[0]:tr.create(o,u.op)}class ha{constructor(){this.un=new cc}addToCollectionParentIndex(t,i){return this.un.add(i),Ie.resolve()}getCollectionParents(t,i){return Ie.resolve(this.un.getEntries(i))}addFieldIndex(t,i){return Ie.resolve()}deleteFieldIndex(t,i){return Ie.resolve()}deleteAllFieldIndexes(t){return Ie.resolve()}createTargetIndexes(t,i){return Ie.resolve()}getDocumentsMatchingTarget(t,i){return Ie.resolve(null)}getIndexType(t,i){return Ie.resolve(0)}getFieldIndexes(t,i){return Ie.resolve([])}getNextCollectionGroupToUpdate(t){return Ie.resolve(null)}getMinOffset(t,i){return Ie.resolve(_r.min())}getMinOffsetFromCollectionGroup(t,i){return Ie.resolve(_r.min())}updateCollectionGroup(t,i,o){return Ie.resolve()}updateIndexEntries(t,i){return Ie.resolve()}}class cc{constructor(){this.index={}}add(t){const i=t.lastSegment(),o=t.popLast(),c=this.index[i]||new xn(Xt.comparator),f=!c.has(o);return this.index[i]=c.add(o),f}has(t){const i=t.lastSegment(),o=t.popLast(),c=this.index[i];return c&&c.has(o)}getEntries(t){return(this.index[t]||new xn(Xt.comparator)).toArray()}}const Vl=new Uint8Array(0);class Fl{constructor(t,i){this.databaseId=i,this.cn=new cc,this.ln=new Ms(o=>si(o),(o,c)=>to(o,c)),this.uid=t.uid||""}addToCollectionParentIndex(t,i){if(!this.cn.has(i)){const o=i.lastSegment(),c=i.popLast();t.addOnCommittedListener(()=>{this.cn.add(i)});const f={collectionId:o,parent:Qt(c)};return lc(t).put(f)}return Ie.resolve()}getCollectionParents(t,i){const o=[],c=IDBKeyRange.bound([i,""],[dt(i),""],!1,!0);return lc(t).U(c).next(f=>{for(const _ of f){if(_.collectionId!==i)break;o.push(wn(_.parent))}return o})}addFieldIndex(t,i){const o=oo(t),c={indexId:(A=i).indexId,collectionGroup:A.collectionGroup,fields:A.fields.map(S=>[S.fieldPath.canonicalString(),S.kind])};var A;delete c.indexId;const f=o.add(c);if(i.indexState){const _=La(t);return f.next(A=>{_.put(de(A,this.uid,i.indexState.sequenceNumber,i.indexState.offset))})}return f.next()}deleteFieldIndex(t,i){const o=oo(t),c=La(t),f=lu(t);return o.delete(i.indexId).next(()=>c.delete(IDBKeyRange.bound([i.indexId],[i.indexId+1],!1,!0))).next(()=>f.delete(IDBKeyRange.bound([i.indexId],[i.indexId+1],!1,!0)))}deleteAllFieldIndexes(t){const i=oo(t),o=lu(t),c=La(t);return i.j().next(()=>o.j()).next(()=>c.j())}createTargetIndexes(t,i){return Ie.forEach(this.hn(i),o=>this.getIndexType(t,o).next(c=>{if(0===c||1===c){const f=new da(o).an();if(null!=f)return this.addFieldIndex(t,f)}}))}getDocumentsMatchingTarget(t,i){const o=lu(t);let c=!0;const f=new Map;return Ie.forEach(this.hn(i),_=>this.Pn(t,_).next(A=>{c&&(c=!!A),f.set(_,A)})).next(()=>{if(c){let _=Zn();const A=[];return Ie.forEach(f,(S,L)=>{var Tn;be("IndexedDbIndexManager",`Using index ${Tn=S,`id=${Tn.indexId}|cg=${Tn.collectionGroup}|f=${Tn.fields.map(nr=>`${nr.fieldPath}:${nr.kind}`).join(",")}`} to execute ${si(i)}`);const Q=function(Tn,nr){const Ur=Nn(nr);if(void 0===Ur)return null;for(const hr of _o(Tn,Ur.fieldPath))switch(hr.op){case"array-contains-any":return hr.value.arrayValue.values||[];case"array-contains":return[hr.value]}return null}(L,S),re=function(Tn,nr){const Ur=new Map;for(const hr of an(nr))for(const xe of _o(Tn,hr.fieldPath))switch(xe.op){case"==":case"in":Ur.set(hr.fieldPath.canonicalString(),xe.value);break;case"not-in":case"!=":return Ur.set(hr.fieldPath.canonicalString(),xe.value),Array.from(Ur.values())}return null}(L,S),we=function(Tn,nr){const Ur=[];let hr=!0;for(const xe of an(nr)){const _e=0===xe.kind?Oo(Tn,xe.fieldPath,Tn.startAt):zs(Tn,xe.fieldPath,Tn.startAt);Ur.push(_e.value),hr&&(hr=_e.inclusive)}return new gs(Ur,hr)}(L,S),Ye=function(Tn,nr){const Ur=[];let hr=!0;for(const xe of an(nr)){const _e=0===xe.kind?zs(Tn,xe.fieldPath,Tn.endAt):Oo(Tn,xe.fieldPath,Tn.endAt);Ur.push(_e.value),hr&&(hr=_e.inclusive)}return new gs(Ur,hr)}(L,S),Rt=this.In(S,L,we),jt=this.In(S,L,Ye),Vt=this.Tn(S,L,re),vn=this.En(S.indexId,Q,Rt,we.inclusive,jt,Ye.inclusive,Vt);return Ie.forEach(vn,Rn=>o.G(Rn,i.limit).next(Tn=>{Tn.forEach(nr=>{const Ur=Ot.fromSegments(nr.documentKey);_.has(Ur)||(_=_.add(Ur),A.push(Ur))})}))}).next(()=>A)}return Ie.resolve(null)})}hn(t){let i=this.ln.get(t);return i||(i=0===t.filters.length?[t]:Vs(tr.create(t.filters,"and")).map(o=>mo(t.path,t.collectionGroup,t.orderBy,o.getFilters(),t.limit,t.startAt,t.endAt)),this.ln.set(t,i),i)}En(t,i,o,c,f,_,A){const S=(null!=i?i.length:1)*Math.max(o.length,f.length),L=S/(null!=i?i.length:1),Q=[];for(let re=0;re<S;++re){const we=i?this.dn(i[re/L]):Vl,Ye=this.An(t,we,o[re%L],c),Rt=this.Rn(t,we,f[re%L],_),jt=A.map(Vt=>this.An(t,we,Vt,!0));Q.push(...this.createRange(Ye,Rt,jt))}return Q}An(t,i,o,c){const f=new Ru(t,Ot.empty(),i,o);return c?f:f.Zt()}Rn(t,i,o,c){const f=new Ru(t,Ot.empty(),i,o);return c?f.Zt():f}Pn(t,i){const o=new da(i),c=null!=i.collectionGroup?i.collectionGroup:i.path.lastSegment();return this.getFieldIndexes(t,c).next(f=>{let _=null;for(const A of f)o.rn(A)&&(!_||A.fields.length>_.fields.length)&&(_=A);return _})}getIndexType(t,i){let o=2;const c=this.hn(i);return Ie.forEach(c,f=>this.Pn(t,f).next(_=>{_?0!==o&&_.fields.length<function(S){let L=new xn(Dn.comparator),Q=!1;for(const re of S.filters)for(const we of re.getFlattenedFilters())we.field.isKeyField()||("array-contains"===we.op||"array-contains-any"===we.op?Q=!0:L=L.add(we.field));for(const re of S.orderBy)re.field.isKeyField()||(L=L.add(re.field));return L.size+(Q?1:0)}(f)&&(o=1):o=0})).next(()=>null!==i.limit&&c.length>1&&2===o?1:o)}Vn(t,i){const o=new uu;for(const c of an(t)){const f=i.data.field(c.fieldPath);if(null==f)return null;const _=o.Yt(c.kind);ks.vt.It(f,_)}return o.zt()}dn(t){const i=new uu;return ks.vt.It(t,i.Yt(0)),i.zt()}mn(t,i){const o=new uu;return ks.vt.It(Pr(this.databaseId,i),o.Yt(function(f){const _=an(f);return 0===_.length?0:_[_.length-1].kind}(t))),o.zt()}Tn(t,i,o){if(null===o)return[];let c=[];c.push(new uu);let f=0;for(const _ of an(t)){const A=o[f++];for(const S of c)if(this.fn(i,_.fieldPath)&&$r(A))c=this.gn(c,_,A);else{const L=S.Yt(_.kind);ks.vt.It(A,L)}}return this.pn(c)}In(t,i,o){return this.Tn(t,i,o.position)}pn(t){const i=[];for(let o=0;o<t.length;++o)i[o]=t[o].zt();return i}gn(t,i,o){const c=[...t],f=[];for(const _ of o.arrayValue.values||[])for(const A of c){const S=new uu;S.seed(A.zt()),ks.vt.It(_,S.Yt(i.kind)),f.push(S)}return f}fn(t,i){return!!t.filters.find(o=>o instanceof $n&&o.field.isEqual(i)&&("in"===o.op||"not-in"===o.op))}getFieldIndexes(t,i){const o=oo(t),c=La(t);return(i?o.U("collectionGroupIndex",IDBKeyRange.bound(i,i)):o.U()).next(f=>{const _=[];return Ie.forEach(f,A=>c.get([A.indexId,this.uid]).next(S=>{_.push(function(Q,re){const we=re?new Jn(re.sequenceNumber,new _r(Oa(re.readTime),new Ot(wn(re.documentKey)),re.largestBatchId)):Jn.empty(),Ye=Q.fields.map(([Rt,jt])=>new Yn(Dn.fromServerFormat(Rt),jt));return new mr(Q.indexId,Q.collectionGroup,Ye,we)}(A,S))})).next(()=>_)})}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next(i=>0===i.length?null:(i.sort((o,c)=>{const f=o.indexState.sequenceNumber-c.indexState.sequenceNumber;return 0!==f?f:gt(o.collectionGroup,c.collectionGroup)}),i[0].collectionGroup))}updateCollectionGroup(t,i,o){const c=oo(t),f=La(t);return this.yn(t).next(_=>c.U("collectionGroupIndex",IDBKeyRange.bound(i,i)).next(A=>Ie.forEach(A,S=>f.put(de(S.indexId,this.uid,_,o)))))}updateIndexEntries(t,i){const o=new Map;return Ie.forEach(i,(c,f)=>{const _=o.get(c.collectionGroup);return(_?Ie.resolve(_):this.getFieldIndexes(t,c.collectionGroup)).next(A=>(o.set(c.collectionGroup,A),Ie.forEach(A,S=>this.wn(t,c,S).next(L=>{const Q=this.Sn(f,S);return L.isEqual(Q)?Ie.resolve():this.bn(t,f,S,L,Q)}))))})}Dn(t,i,o,c){return lu(t).put({indexId:c.indexId,uid:this.uid,arrayValue:c.arrayValue,directionalValue:c.directionalValue,orderedDocumentKey:this.mn(o,i.key),documentKey:i.key.path.toArray()})}vn(t,i,o,c){return lu(t).delete([c.indexId,this.uid,c.arrayValue,c.directionalValue,this.mn(o,i.key),i.key.path.toArray()])}wn(t,i,o){const c=lu(t);let f=new xn(Va);return c.J({index:"documentKeyIndex",range:IDBKeyRange.only([o.indexId,this.uid,this.mn(o,i)])},(_,A)=>{f=f.add(new Ru(o.indexId,i,A.arrayValue,A.directionalValue))}).next(()=>f)}Sn(t,i){let o=new xn(Va);const c=this.Vn(i,t);if(null==c)return o;const f=Nn(i);if(null!=f){const _=t.data.field(f.fieldPath);if($r(_))for(const A of _.arrayValue.values||[])o=o.add(new Ru(i.indexId,t.key,this.dn(A),c))}else o=o.add(new Ru(i.indexId,t.key,Vl,c));return o}bn(t,i,o,c,f){be("IndexedDbIndexManager","Updating index entries for document '%s'",i.key);const _=[];return function(S,L,Q,re,we){const Ye=S.getIterator(),Rt=L.getIterator();let jt=pr(Ye),Vt=pr(Rt);for(;jt||Vt;){let vn=!1,Rn=!1;if(jt&&Vt){const Tn=Q(jt,Vt);Tn<0?Rn=!0:Tn>0&&(vn=!0)}else null!=jt?Rn=!0:vn=!0;vn?(re(Vt),Vt=pr(Rt)):Rn?(we(jt),jt=pr(Ye)):(jt=pr(Ye),Vt=pr(Rt))}}(c,f,Va,A=>{_.push(this.Dn(t,i,o,A))},A=>{_.push(this.vn(t,i,o,A))}),Ie.waitFor(_)}yn(t){let i=1;return La(t).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(o,c,f)=>{f.done(),i=c.sequenceNumber+1}).next(()=>i)}createRange(t,i,o){o=o.sort((_,A)=>Va(_,A)).filter((_,A,S)=>!A||0!==Va(_,S[A-1]));const c=[];c.push(t);for(const _ of o){const A=Va(_,t),S=Va(_,i);if(0===A)c[0]=t.Zt();else if(A>0&&S<0)c.push(_),c.push(_.Zt());else if(S>0)break}c.push(i);const f=[];for(let _=0;_<c.length;_+=2){if(this.Cn(c[_],c[_+1]))return[];f.push(IDBKeyRange.bound([c[_].indexId,this.uid,c[_].arrayValue,c[_].directionalValue,Vl,[]],[c[_+1].indexId,this.uid,c[_+1].arrayValue,c[_+1].directionalValue,Vl,[]]))}return f}Cn(t,i){return Va(t,i)>0}getMinOffsetFromCollectionGroup(t,i){return this.getFieldIndexes(t,i).next(Ll)}getMinOffset(t,i){return Ie.mapArray(this.hn(i),o=>this.Pn(t,o).next(c=>c||wt())).next(Ll)}}function lc(u){return ar(u,"collectionParents")}function lu(u){return ar(u,"indexEntries")}function oo(u){return ar(u,"indexConfiguration")}function La(u){return ar(u,"indexState")}function Ll(u){Ct(0!==u.length);let t=u[0].indexState.offset,i=t.largestBatchId;for(let o=1;o<u.length;o++){const c=u[o].indexState.offset;En(c,t)<0&&(t=c),i<c.largestBatchId&&(i=c.largestBatchId)}return new _r(t.readTime,t.documentKey,i)}const fa={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class _n{constructor(t,i,o){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=i,this.maximumSequenceNumbersToCollect=o}static withCacheSize(t){return new _n(t,_n.DEFAULT_COLLECTION_PERCENTILE,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function qc(u,t,i){const o=u.store("mutations"),c=u.store("documentMutations"),f=[],_=IDBKeyRange.only(i.batchId);let A=0;const S=o.J({range:_},(Q,re,we)=>(A++,we.delete()));f.push(S.next(()=>{Ct(1===A)}));const L=[];for(const Q of i.mutations){const re=fr(t,Q.key.path,i.batchId);f.push(c.delete(re)),L.push(Q.key)}return Ie.waitFor(f).next(()=>L)}function eh(u){if(!u)return 0;let t;if(u.document)t=u.document;else if(u.unknownDocument)t=u.unknownDocument;else{if(!u.noDocument)throw wt();t=u.noDocument}return JSON.stringify(t).length}_n.DEFAULT_COLLECTION_PERCENTILE=10,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,_n.DEFAULT=new _n(41943040,_n.DEFAULT_COLLECTION_PERCENTILE,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),_n.DISABLED=new _n(-1,0,0);class dc{constructor(t,i,o,c){this.userId=t,this.serializer=i,this.indexManager=o,this.referenceDelegate=c,this.Fn={}}static lt(t,i,o,c){Ct(""!==t.uid);const f=t.isAuthenticated()?t.uid:"";return new dc(f,i,o,c)}checkEmpty(t){let i=!0;const o=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ua(t).J({index:"userMutationsIndex",range:o},(c,f,_)=>{i=!1,_.done()}).next(()=>i)}addMutationBatch(t,i,o,c){const f=Mu(t),_=Ua(t);return _.add({}).next(A=>{Ct("number"==typeof A);const S=new M(A,i,o,c),L=function(Ye,Rt,jt){const Vt=jt.baseMutations.map(Rn=>Bo(Ye.ct,Rn)),vn=jt.mutations.map(Rn=>Bo(Ye.ct,Rn));return{userId:Rt,batchId:jt.batchId,localWriteTimeMs:jt.localWriteTime.toMillis(),baseMutations:Vt,mutations:vn}}(this.serializer,this.userId,S),Q=[];let re=new xn((we,Ye)=>gt(we.canonicalString(),Ye.canonicalString()));for(const we of c){const Ye=fr(this.userId,we.key.path,A);re=re.add(we.key.path.popLast()),Q.push(_.put(L)),Q.push(f.put(Ye,Zr))}return re.forEach(we=>{Q.push(this.indexManager.addToCollectionParentIndex(t,we))}),t.addOnCommittedListener(()=>{this.Fn[A]=S.keys()}),Ie.waitFor(Q).next(()=>S)})}lookupMutationBatch(t,i){return Ua(t).get(i).next(o=>o?(Ct(o.userId===this.userId),E(this.serializer,o)):null)}Mn(t,i){return this.Fn[i]?Ie.resolve(this.Fn[i]):this.lookupMutationBatch(t,i).next(o=>{if(o){const c=o.keys();return this.Fn[i]=c,c}return null})}getNextMutationBatchAfterBatchId(t,i){const o=i+1,c=IDBKeyRange.lowerBound([this.userId,o]);let f=null;return Ua(t).J({index:"userMutationsIndex",range:c},(_,A,S)=>{A.userId===this.userId&&(Ct(A.batchId>=o),f=E(this.serializer,A)),S.done()}).next(()=>f)}getHighestUnacknowledgedBatchId(t){const i=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let o=-1;return Ua(t).J({index:"userMutationsIndex",range:i,reverse:!0},(c,f,_)=>{o=f.batchId,_.done()}).next(()=>o)}getAllMutationBatches(t){const i=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ua(t).U("userMutationsIndex",i).next(o=>o.map(c=>E(this.serializer,c)))}getAllMutationBatchesAffectingDocumentKey(t,i){const o=Vn(this.userId,i.path),c=IDBKeyRange.lowerBound(o),f=[];return Mu(t).J({range:c},(_,A,S)=>{const[L,Q,re]=_,we=wn(Q);if(L===this.userId&&i.path.isEqual(we))return Ua(t).get(re).next(Ye=>{if(!Ye)throw wt();Ct(Ye.userId===this.userId),f.push(E(this.serializer,Ye))});S.done()}).next(()=>f)}getAllMutationBatchesAffectingDocumentKeys(t,i){let o=new xn(gt);const c=[];return i.forEach(f=>{const _=Vn(this.userId,f.path),A=IDBKeyRange.lowerBound(_),S=Mu(t).J({range:A},(L,Q,re)=>{const[we,Ye,Rt]=L,jt=wn(Ye);we===this.userId&&f.path.isEqual(jt)?o=o.add(Rt):re.done()});c.push(S)}),Ie.waitFor(c).next(()=>this.xn(t,o))}getAllMutationBatchesAffectingQuery(t,i){const o=i.path,c=o.length+1,f=Vn(this.userId,o),_=IDBKeyRange.lowerBound(f);let A=new xn(gt);return Mu(t).J({range:_},(S,L,Q)=>{const[re,we,Ye]=S,Rt=wn(we);re===this.userId&&o.isPrefixOf(Rt)?Rt.length===c&&(A=A.add(Ye)):Q.done()}).next(()=>this.xn(t,A))}xn(t,i){const o=[],c=[];return i.forEach(f=>{c.push(Ua(t).get(f).next(_=>{if(null===_)throw wt();Ct(_.userId===this.userId),o.push(E(this.serializer,_))}))}),Ie.waitFor(c).next(()=>o)}removeMutationBatch(t,i){return qc(t._e,this.userId,i).next(o=>(t.addOnCommittedListener(()=>{this.On(i.batchId)}),Ie.forEach(o,c=>this.referenceDelegate.markPotentiallyOrphaned(t,c))))}On(t){delete this.Fn[t]}performConsistencyCheck(t){return this.checkEmpty(t).next(i=>{if(!i)return Ie.resolve();const o=IDBKeyRange.lowerBound(function(_){return[_]}(this.userId)),c=[];return Mu(t).J({range:o},(f,_,A)=>{if(f[0]===this.userId){const S=wn(f[1]);c.push(S)}else A.done()}).next(()=>{Ct(0===c.length)})})}containsKey(t,i){return th(t,this.userId,i)}Nn(t){return Nu(t).get(this.userId).next(i=>i||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function th(u,t,i){const o=Vn(t,i.path),c=o[1],f=IDBKeyRange.lowerBound(o);let _=!1;return Mu(u).J({range:f,H:!0},(A,S,L)=>{const[Q,re,we]=A;Q===t&&re===c&&(_=!0),L.done()}).next(()=>_)}function Ua(u){return ar(u,"mutations")}function Mu(u){return ar(u,"documentMutations")}function Nu(u){return ar(u,"mutationQueues")}class Ba{constructor(t){this.Ln=t}next(){return this.Ln+=2,this.Ln}static Bn(){return new Ba(0)}static kn(){return new Ba(-1)}}class ag{constructor(t,i){this.referenceDelegate=t,this.serializer=i}allocateTargetId(t){return this.qn(t).next(i=>{const o=new Ba(i.highestTargetId);return i.highestTargetId=o.next(),this.Qn(t,i).next(()=>i.highestTargetId)})}getLastRemoteSnapshotVersion(t){return this.qn(t).next(i=>ot.fromTimestamp(new ht(i.lastRemoteSnapshotVersion.seconds,i.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(t){return this.qn(t).next(i=>i.highestListenSequenceNumber)}setTargetsMetadata(t,i,o){return this.qn(t).next(c=>(c.highestListenSequenceNumber=i,o&&(c.lastRemoteSnapshotVersion=o.toTimestamp()),i>c.highestListenSequenceNumber&&(c.highestListenSequenceNumber=i),this.Qn(t,c)))}addTargetData(t,i){return this.Kn(t,i).next(()=>this.qn(t).next(o=>(o.targetCount+=1,this.$n(i,o),this.Qn(t,o))))}updateTargetData(t,i){return this.Kn(t,i)}removeTargetData(t,i){return this.removeMatchingKeysForTargetId(t,i.targetId).next(()=>hc(t).delete(i.targetId)).next(()=>this.qn(t)).next(o=>(Ct(o.targetCount>0),o.targetCount-=1,this.Qn(t,o)))}removeTargets(t,i,o){let c=0;const f=[];return hc(t).J((_,A)=>{const S=C(A);S.sequenceNumber<=i&&null===o.get(S.targetId)&&(c++,f.push(this.removeTargetData(t,S)))}).next(()=>Ie.waitFor(f)).next(()=>c)}forEachTarget(t,i){return hc(t).J((o,c)=>{const f=C(c);i(f)})}qn(t){return Ul(t).get("targetGlobalKey").next(i=>(Ct(null!==i),i))}Qn(t,i){return Ul(t).put("targetGlobalKey",i)}Kn(t,i){return hc(t).put(w(this.serializer,i))}$n(t,i){let o=!1;return t.targetId>i.highestTargetId&&(i.highestTargetId=t.targetId,o=!0),t.sequenceNumber>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t.sequenceNumber,o=!0),o}getTargetCount(t){return this.qn(t).next(i=>i.targetCount)}getTargetData(t,i){const o=si(i),c=IDBKeyRange.bound([o,Number.NEGATIVE_INFINITY],[o,Number.POSITIVE_INFINITY]);let f=null;return hc(t).J({range:c,index:"queryTargetsIndex"},(_,A,S)=>{const L=C(A);to(i,L.target)&&(f=L,S.done())}).next(()=>f)}addMatchingKeys(t,i,o){const c=[],f=du(t);return i.forEach(_=>{const A=Qt(_.path);c.push(f.put({targetId:o,path:A})),c.push(this.referenceDelegate.addReference(t,o,_))}),Ie.waitFor(c)}removeMatchingKeys(t,i,o){const c=du(t);return Ie.forEach(i,f=>{const _=Qt(f.path);return Ie.waitFor([c.delete([o,_]),this.referenceDelegate.removeReference(t,o,f)])})}removeMatchingKeysForTargetId(t,i){const o=du(t),c=IDBKeyRange.bound([i],[i+1],!1,!0);return o.delete(c)}getMatchingKeysForTargetId(t,i){const o=IDBKeyRange.bound([i],[i+1],!1,!0),c=du(t);let f=Zn();return c.J({range:o,H:!0},(_,A,S)=>{const L=wn(_[1]),Q=new Ot(L);f=f.add(Q)}).next(()=>f)}containsKey(t,i){const o=Qt(i.path),c=IDBKeyRange.bound([o],[dt(o)],!1,!0);let f=0;return du(t).J({index:"documentTargetsIndex",H:!0,range:c},([_,A],S,L)=>{0!==_&&(f++,L.done())}).next(()=>f>0)}ot(t,i){return hc(t).get(i).next(o=>o?C(o):null)}}function hc(u){return ar(u,"targets")}function Ul(u){return ar(u,"targetGlobal")}function du(u){return ar(u,"targetDocuments")}function yt([u,t],[i,o]){const c=gt(u,i);return 0===c?gt(t,o):c}class lr{constructor(t){this.Un=t,this.buffer=new xn(yt),this.Wn=0}Gn(){return++this.Wn}zn(t){const i=[t,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(i);else{const o=this.buffer.last();yt(i,o)<0&&(this.buffer=this.buffer.delete(o).add(i))}}get maxValue(){return this.buffer.last()[0]}}class nh{constructor(t,i,o){this.garbageCollector=t,this.asyncQueue=i,this.localStore=o,this.jn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return null!==this.jn}Hn(t){var i=this;be("LruGarbageCollector",`Garbage collection scheduled in ${t}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(0,m.A)(function*(){i.jn=null;try{yield i.localStore.collectGarbage(i.garbageCollector)}catch(o){te(o)?be("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):yield In(o)}yield i.Hn(3e5)}))}}class Bl{constructor(t,i){this.Jn=t,this.params=i}calculateTargetCount(t,i){return this.Jn.Yn(t).next(o=>Math.floor(i/100*o))}nthSequenceNumber(t,i){if(0===i)return Ie.resolve(ge.oe);const o=new lr(i);return this.Jn.forEachTarget(t,c=>o.zn(c.sequenceNumber)).next(()=>this.Jn.Zn(t,c=>o.zn(c))).next(()=>o.maxValue)}removeTargets(t,i,o){return this.Jn.removeTargets(t,i,o)}removeOrphanedDocuments(t,i){return this.Jn.removeOrphanedDocuments(t,i)}collect(t,i){return-1===this.params.cacheSizeCollectionThreshold?(be("LruGarbageCollector","Garbage collection skipped; disabled"),Ie.resolve(fa)):this.getCacheSize(t).next(o=>o<this.params.cacheSizeCollectionThreshold?(be("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),fa):this.Xn(t,i))}getCacheSize(t){return this.Jn.getCacheSize(t)}Xn(t,i){let o,c,f,_,A,S,L;const Q=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(re=>(re>this.params.maximumSequenceNumbersToCollect?(be("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${re}`),c=this.params.maximumSequenceNumbersToCollect):c=re,_=Date.now(),this.nthSequenceNumber(t,c))).next(re=>(o=re,A=Date.now(),this.removeTargets(t,o,i))).next(re=>(f=re,S=Date.now(),this.removeOrphanedDocuments(t,o))).next(re=>(L=Date.now(),ut()<=ne.$b.DEBUG&&be("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${_-Q}ms\n\tDetermined least recently used ${c} in `+(A-_)+`ms\n\tRemoved ${f} targets in `+(S-A)+`ms\n\tRemoved ${re} documents in `+(L-S)+`ms\nTotal Duration: ${L-Q}ms`),Ie.resolve({didRun:!0,sequenceNumbersCollected:c,targetsRemoved:f,documentsRemoved:re})))}}class jl{constructor(t,i){this.db=t,this.garbageCollector=function Sr(u,t){return new Bl(u,t)}(this,i)}Yn(t){const i=this.er(t);return this.db.getTargetCache().getTargetCount(t).next(o=>i.next(c=>o+c))}er(t){let i=0;return this.Zn(t,o=>{i++}).next(()=>i)}forEachTarget(t,i){return this.db.getTargetCache().forEachTarget(t,i)}Zn(t,i){return this.tr(t,(o,c)=>i(c))}addReference(t,i,o){return ja(t,o)}removeReference(t,i,o){return ja(t,o)}removeTargets(t,i,o){return this.db.getTargetCache().removeTargets(t,i,o)}markPotentiallyOrphaned(t,i){return ja(t,i)}nr(t,i){return function(c,f){let _=!1;return Nu(c).Y(A=>th(c,A,f).next(S=>(S&&(_=!0),Ie.resolve(!S)))).next(()=>_)}(t,i)}removeOrphanedDocuments(t,i){const o=this.db.getRemoteDocumentCache().newChangeBuffer(),c=[];let f=0;return this.tr(t,(_,A)=>{if(A<=i){const S=this.nr(t,_).next(L=>{if(!L)return f++,o.getEntry(t,_).next(()=>(o.removeEntry(_,ot.min()),du(t).delete([0,Qt(_.path)])))});c.push(S)}}).next(()=>Ie.waitFor(c)).next(()=>o.apply(t)).next(()=>f)}removeTarget(t,i){const o=i.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,o)}updateLimboDocument(t,i){return ja(t,i)}tr(t,i){const o=du(t);let c,f=ge.oe;return o.J({index:"documentTargetsIndex"},([_,A],{path:S,sequenceNumber:L})=>{0===_?(f!==ge.oe&&i(new Ot(wn(c)),f),f=L,c=S):f=ge.oe}).next(()=>{f!==ge.oe&&i(new Ot(wn(c)),f)})}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}}function ja(u,t){return du(u).put((c=u.currentSequenceNumber,{targetId:0,path:Qt(t.path),sequenceNumber:c}));var c}class ao{constructor(){this.changes=new Ms(t=>t.toString(),(t,i)=>t.isEqual(i)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,i){this.assertNotApplied(),this.changes.set(t,ir.newInvalidDocument(t).setReadTime(i))}getEntry(t,i){this.assertNotApplied();const o=this.changes.get(i);return void 0!==o?Ie.resolve(o):this.getFromCache(t,i)}getEntries(t,i){return this.getAllFromCache(t,i)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class rh{constructor(t){this.serializer=t}setIndexManager(t){this.indexManager=t}addEntry(t,i,o){return hu(t).put(o)}removeEntry(t,i,o){return hu(t).delete(function(f,_){const A=f.path.toArray();return[A.slice(0,A.length-2),A[A.length-2],Ol(_),A[A.length-1]]}(i,o))}updateMetadata(t,i){return this.getMetadata(t).next(o=>(o.byteSize+=i,this.rr(t,o)))}getEntry(t,i){let o=ir.newInvalidDocument(i);return hu(t).J({index:"documentKeyIndex",range:IDBKeyRange.only(ki(i))},(c,f)=>{o=this.ir(i,f)}).next(()=>o)}sr(t,i){let o={size:0,document:ir.newInvalidDocument(i)};return hu(t).J({index:"documentKeyIndex",range:IDBKeyRange.only(ki(i))},(c,f)=>{o={document:this.ir(i,f),size:eh(f)}}).next(()=>o)}getEntries(t,i){let o=Ti();return this._r(t,i,(c,f)=>{const _=this.ir(c,f);o=o.insert(c,_)}).next(()=>o)}ar(t,i){let o=Ti(),c=new Sn(Ot.comparator);return this._r(t,i,(f,_)=>{const A=this.ir(f,_);o=o.insert(f,A),c=c.insert(f,eh(_))}).next(()=>({documents:o,ur:c}))}_r(t,i,o){if(i.isEmpty())return Ie.resolve();let c=new xn(ih);i.forEach(S=>c=c.add(S));const f=IDBKeyRange.bound(ki(c.first()),ki(c.last())),_=c.getIterator();let A=_.getNext();return hu(t).J({index:"documentKeyIndex",range:f},(S,L,Q)=>{const re=Ot.fromSegments([...L.prefixPath,L.collectionGroup,L.documentId]);for(;A&&ih(A,re)<0;)o(A,null),A=_.getNext();A&&A.isEqual(re)&&(o(A,L),A=_.hasNext()?_.getNext():null),A?Q.$(ki(A)):Q.done()}).next(()=>{for(;A;)o(A,null),A=_.hasNext()?_.getNext():null})}getDocumentsMatchingQuery(t,i,o,c,f){const _=i.path,A=[_.popLast().toArray(),_.lastSegment(),Ol(o.readTime),o.documentKey.path.isEmpty()?"":o.documentKey.path.lastSegment()],S=[_.popLast().toArray(),_.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return hu(t).U(IDBKeyRange.bound(A,S,!0)).next(L=>{f?.incrementDocumentReadCount(L.length);let Q=Ti();for(const re of L){const we=this.ir(Ot.fromSegments(re.prefixPath.concat(re.collectionGroup,re.documentId)),re);we.isFoundDocument()&&(ko(i,we)||c.has(we.key))&&(Q=Q.insert(we.key,we))}return Q})}getAllFromCollectionGroup(t,i,o,c){let f=Ti();const _=Ao(i,o),A=Ao(i,_r.max());return hu(t).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(_,A,!0)},(S,L,Q)=>{const re=this.ir(Ot.fromSegments(L.prefixPath.concat(L.collectionGroup,L.documentId)),L);f=f.insert(re.key,re),f.size===c&&Q.done()}).next(()=>f)}newChangeBuffer(t){return new lf(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next(i=>i.byteSize)}getMetadata(t){return df(t).get("remoteDocumentGlobalKey").next(i=>(Ct(!!i),i))}rr(t,i){return df(t).put("remoteDocumentGlobalKey",i)}ir(t,i){if(i){const o=function og(u,t){let i;if(t.document)i=ou(u.ct,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const o=Ot.fromSegments(t.noDocument.path),c=Oa(t.noDocument.readTime);i=ir.newNoDocument(o,c),t.hasCommittedMutations&&i.setHasCommittedMutations()}else{if(!t.unknownDocument)return wt();{const o=Ot.fromSegments(t.unknownDocument.path),c=Oa(t.unknownDocument.version);i=ir.newUnknownDocument(o,c)}}return t.readTime&&i.setReadTime(function(c){const f=new ht(c[0],c[1]);return ot.fromTimestamp(f)}(t.readTime)),i}(this.serializer,i);if(!o.isNoDocument()||!o.version.isEqual(ot.min()))return o}return ir.newInvalidDocument(t)}}function Qc(u){return new rh(u)}class lf extends ao{constructor(t,i){super(),this.cr=t,this.trackRemovals=i,this.lr=new Ms(o=>o.toString(),(o,c)=>o.isEqual(c))}applyChanges(t){const i=[];let o=0,c=new xn((f,_)=>gt(f.canonicalString(),_.canonicalString()));return this.changes.forEach((f,_)=>{const A=this.lr.get(f);if(i.push(this.cr.removeEntry(t,f,A.readTime)),_.isValidDocument()){const S=cf(this.cr.serializer,_);c=c.add(f.path.popLast());const L=eh(S);o+=L-A.size,i.push(this.cr.addEntry(t,f,S))}else if(o-=A.size,this.trackRemovals){const S=cf(this.cr.serializer,_.convertToNoDocument(ot.min()));i.push(this.cr.addEntry(t,f,S))}}),c.forEach(f=>{i.push(this.cr.indexManager.addToCollectionParentIndex(t,f))}),i.push(this.cr.updateMetadata(t,o)),Ie.waitFor(i)}getFromCache(t,i){return this.cr.sr(t,i).next(o=>(this.lr.set(i,{size:o.size,readTime:o.document.readTime}),o.document))}getAllFromCache(t,i){return this.cr.ar(t,i).next(({documents:o,ur:c})=>(c.forEach((f,_)=>{this.lr.set(f,{size:_,readTime:o.get(f).readTime})}),o))}}function df(u){return ar(u,"remoteDocumentGlobal")}function hu(u){return ar(u,"remoteDocumentsV14")}function ki(u){const t=u.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function Ao(u,t){const i=t.documentKey.path.toArray();return[u,Ol(t.readTime),i.slice(0,i.length-2),i.length>0?i[i.length-1]:""]}function ih(u,t){const i=u.path.toArray(),o=t.path.toArray();let c=0;for(let f=0;f<i.length-2&&f<o.length-2;++f)if(c=gt(i[f],o[f]),c)return c;return c=gt(i.length,o.length),c||(c=gt(i[i.length-2],o[o.length-2]),c||gt(i[i.length-1],o[o.length-1]))}class Ho{constructor(t,i){this.overlayedDocument=t,this.mutatedFields=i}}class pa{constructor(t,i,o,c){this.remoteDocumentCache=t,this.mutationQueue=i,this.documentOverlayCache=o,this.indexManager=c}getDocument(t,i){let o=null;return this.documentOverlayCache.getOverlay(t,i).next(c=>(o=c,this.remoteDocumentCache.getEntry(t,i))).next(c=>(null!==o&&ro(o.mutation,c,dn.empty(),ht.now()),c))}getDocuments(t,i){return this.remoteDocumentCache.getEntries(t,i).next(o=>this.getLocalViewOfDocuments(t,o,Zn()).next(()=>o))}getLocalViewOfDocuments(t,i,o=Zn()){const c=Qr();return this.populateOverlays(t,c,i).next(()=>this.computeViews(t,i,c,o).next(f=>{let _=Hr();return f.forEach((A,S)=>{_=_.insert(A,S.overlayedDocument)}),_}))}getOverlayedDocuments(t,i){const o=Qr();return this.populateOverlays(t,o,i).next(()=>this.computeViews(t,i,o,Zn()))}populateOverlays(t,i,o){const c=[];return o.forEach(f=>{i.has(f)||c.push(f)}),this.documentOverlayCache.getOverlays(t,c).next(f=>{f.forEach((_,A)=>{i.set(_,A)})})}computeViews(t,i,o,c){let f=Ti();const _=no(),A=no();return i.forEach((S,L)=>{const Q=o.get(L.key);c.has(L.key)&&(void 0===Q||Q.mutation instanceof xs)?f=f.insert(L.key,L):void 0!==Q?(_.set(L.key,Q.mutation.getFieldMask()),ro(Q.mutation,L,Q.mutation.getFieldMask(),ht.now())):_.set(L.key,dn.empty())}),this.recalculateAndSaveOverlays(t,f).next(S=>(S.forEach((L,Q)=>_.set(L,Q)),i.forEach((L,Q)=>{var re;return A.set(L,new Ho(Q,null!==(re=_.get(L))&&void 0!==re?re:null))}),A))}recalculateAndSaveOverlays(t,i){const o=no();let c=new Sn((_,A)=>_-A),f=Zn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,i).next(_=>{for(const A of _)A.keys().forEach(S=>{const L=i.get(S);if(null===L)return;let Q=o.get(S)||dn.empty();Q=A.applyToLocalView(L,Q),o.set(S,Q);const re=(c.get(A.batchId)||Zn()).add(S);c=c.insert(A.batchId,re)})}).next(()=>{const _=[],A=c.getReverseIterator();for(;A.hasNext();){const S=A.getNext(),L=S.key,Q=S.value,re=fi();Q.forEach(we=>{if(!f.has(we)){const Ye=Hc(i.get(we),o.get(we));null!==Ye&&re.set(we,Ye),f=f.add(we)}}),_.push(this.documentOverlayCache.saveOverlays(t,L,re))}return Ie.waitFor(_)}).next(()=>o)}recalculateAndSaveOverlaysForDocumentKeys(t,i){return this.remoteDocumentCache.getEntries(t,i).next(o=>this.recalculateAndSaveOverlays(t,o))}getDocumentsMatchingQuery(t,i,o,c){return Ot.isDocumentKey((_=i).path)&&null===_.collectionGroup&&0===_.filters.length?this.getDocumentsMatchingDocumentQuery(t,i.path):X(i)?this.getDocumentsMatchingCollectionGroupQuery(t,i,o,c):this.getDocumentsMatchingCollectionQuery(t,i,o,c);var _}getNextDocuments(t,i,o,c){return this.remoteDocumentCache.getAllFromCollectionGroup(t,i,o,c).next(f=>{const _=c-f.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,i,o.largestBatchId,c-f.size):Ie.resolve(Qr());let A=-1,S=f;return _.next(L=>Ie.forEach(L,(Q,re)=>(A<re.largestBatchId&&(A=re.largestBatchId),f.get(Q)?Ie.resolve():this.remoteDocumentCache.getEntry(t,Q).next(we=>{S=S.insert(Q,we)}))).next(()=>this.populateOverlays(t,L,f)).next(()=>this.computeViews(t,S,L,Zn())).next(Q=>({batchId:A,changes:ti(Q)})))})}getDocumentsMatchingDocumentQuery(t,i){return this.getDocument(t,new Ot(i)).next(o=>{let c=Hr();return o.isFoundDocument()&&(c=c.insert(o.key,o)),c})}getDocumentsMatchingCollectionGroupQuery(t,i,o,c){const f=i.collectionGroup;let _=Hr();return this.indexManager.getCollectionParents(t,f).next(A=>Ie.forEach(A,S=>{const L=(re=i,we=S.child(f),new Pi(we,null,re.explicitOrderBy.slice(),re.filters.slice(),re.limit,re.limitType,re.startAt,re.endAt));var re,we;return this.getDocumentsMatchingCollectionQuery(t,L,o,c).next(Q=>{Q.forEach((re,we)=>{_=_.insert(re,we)})})}).next(()=>_))}getDocumentsMatchingCollectionQuery(t,i,o,c){let f;return this.documentOverlayCache.getOverlaysForCollection(t,i.path,o.largestBatchId).next(_=>(f=_,this.remoteDocumentCache.getDocumentsMatchingQuery(t,i,o,f,c))).next(_=>{f.forEach((S,L)=>{const Q=L.getKey();null===_.get(Q)&&(_=_.insert(Q,ir.newInvalidDocument(Q)))});let A=Hr();return _.forEach((S,L)=>{const Q=f.get(S);void 0!==Q&&ro(Q.mutation,L,dn.empty(),ht.now()),ko(i,L)&&(A=A.insert(S,L))}),A})}}class sh{constructor(t){this.serializer=t,this.hr=new Map,this.Pr=new Map}getBundleMetadata(t,i){return Ie.resolve(this.hr.get(i))}saveBundleMetadata(t,i){return this.hr.set(i.id,{id:(c=i).id,version:c.version,createTime:Xr(c.createTime)}),Ie.resolve();var c}getNamedQuery(t,i){return Ie.resolve(this.Pr.get(i))}saveNamedQuery(t,i){return this.Pr.set(i.name,{name:(c=i).name,query:b(c.bundledQuery),readTime:Xr(c.readTime)}),Ie.resolve();var c}}class hf{constructor(){this.overlays=new Sn(Ot.comparator),this.Ir=new Map}getOverlay(t,i){return Ie.resolve(this.overlays.get(i))}getOverlays(t,i){const o=Qr();return Ie.forEach(i,c=>this.getOverlay(t,c).next(f=>{null!==f&&o.set(c,f)})).next(()=>o)}saveOverlays(t,i,o){return o.forEach((c,f)=>{this.ht(t,i,f)}),Ie.resolve()}removeOverlaysForBatchId(t,i,o){const c=this.Ir.get(o);return void 0!==c&&(c.forEach(f=>this.overlays=this.overlays.remove(f)),this.Ir.delete(o)),Ie.resolve()}getOverlaysForCollection(t,i,o){const c=Qr(),f=i.length+1,_=new Ot(i.child("")),A=this.overlays.getIteratorFrom(_);for(;A.hasNext();){const S=A.getNext().value,L=S.getKey();if(!i.isPrefixOf(L.path))break;L.path.length===f&&S.largestBatchId>o&&c.set(S.getKey(),S)}return Ie.resolve(c)}getOverlaysForCollectionGroup(t,i,o,c){let f=new Sn((L,Q)=>L-Q);const _=this.overlays.getIterator();for(;_.hasNext();){const L=_.getNext().value;if(L.getKey().getCollectionGroup()===i&&L.largestBatchId>o){let Q=f.get(L.largestBatchId);null===Q&&(Q=Qr(),f=f.insert(L.largestBatchId,Q)),Q.set(L.getKey(),L)}}const A=Qr(),S=f.getIterator();for(;S.hasNext()&&(S.getNext().value.forEach((L,Q)=>A.set(L,Q)),!(A.size()>=c)););return Ie.resolve(A)}ht(t,i,o){const c=this.overlays.get(o.key);if(null!==c){const _=this.Ir.get(c.largestBatchId).delete(o.key);this.Ir.set(c.largestBatchId,_)}this.overlays=this.overlays.insert(o.key,new ce(i,o));let f=this.Ir.get(i);void 0===f&&(f=Zn(),this.Ir.set(i,f)),this.Ir.set(i,f.add(o.key))}}class ug{constructor(){this.sessionToken=cr.EMPTY_BYTE_STRING}getSessionToken(t){return Ie.resolve(this.sessionToken)}setSessionToken(t,i){return this.sessionToken=i,Ie.resolve()}}class $l{constructor(){this.Tr=new xn(Vi.Er),this.dr=new xn(Vi.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(t,i){const o=new Vi(t,i);this.Tr=this.Tr.add(o),this.dr=this.dr.add(o)}Rr(t,i){t.forEach(o=>this.addReference(o,i))}removeReference(t,i){this.Vr(new Vi(t,i))}mr(t,i){t.forEach(o=>this.removeReference(o,i))}gr(t){const i=new Ot(new Xt([])),o=new Vi(i,t),c=new Vi(i,t+1),f=[];return this.dr.forEachInRange([o,c],_=>{this.Vr(_),f.push(_.key)}),f}pr(){this.Tr.forEach(t=>this.Vr(t))}Vr(t){this.Tr=this.Tr.delete(t),this.dr=this.dr.delete(t)}yr(t){const i=new Ot(new Xt([])),o=new Vi(i,t),c=new Vi(i,t+1);let f=Zn();return this.dr.forEachInRange([o,c],_=>{f=f.add(_.key)}),f}containsKey(t){const i=new Vi(t,0),o=this.Tr.firstAfterOrEqual(i);return null!==o&&t.isEqual(o.key)}}class Vi{constructor(t,i){this.key=t,this.wr=i}static Er(t,i){return Ot.comparator(t.key,i.key)||gt(t.wr,i.wr)}static Ar(t,i){return gt(t.wr,i.wr)||Ot.comparator(t.key,i.key)}}class fc{constructor(t,i){this.indexManager=t,this.referenceDelegate=i,this.mutationQueue=[],this.Sr=1,this.br=new xn(Vi.Er)}checkEmpty(t){return Ie.resolve(0===this.mutationQueue.length)}addMutationBatch(t,i,o,c){const f=this.Sr;this.Sr++;const _=new M(f,i,o,c);this.mutationQueue.push(_);for(const A of c)this.br=this.br.add(new Vi(A.key,f)),this.indexManager.addToCollectionParentIndex(t,A.key.path.popLast());return Ie.resolve(_)}lookupMutationBatch(t,i){return Ie.resolve(this.Dr(i))}getNextMutationBatchAfterBatchId(t,i){const c=this.vr(i+1),f=c<0?0:c;return Ie.resolve(this.mutationQueue.length>f?this.mutationQueue[f]:null)}getHighestUnacknowledgedBatchId(){return Ie.resolve(0===this.mutationQueue.length?-1:this.Sr-1)}getAllMutationBatches(t){return Ie.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,i){const o=new Vi(i,0),c=new Vi(i,Number.POSITIVE_INFINITY),f=[];return this.br.forEachInRange([o,c],_=>{const A=this.Dr(_.wr);f.push(A)}),Ie.resolve(f)}getAllMutationBatchesAffectingDocumentKeys(t,i){let o=new xn(gt);return i.forEach(c=>{const f=new Vi(c,0),_=new Vi(c,Number.POSITIVE_INFINITY);this.br.forEachInRange([f,_],A=>{o=o.add(A.wr)})}),Ie.resolve(this.Cr(o))}getAllMutationBatchesAffectingQuery(t,i){const o=i.path,c=o.length+1;let f=o;Ot.isDocumentKey(f)||(f=f.child(""));const _=new Vi(new Ot(f),0);let A=new xn(gt);return this.br.forEachWhile(S=>{const L=S.key.path;return!!o.isPrefixOf(L)&&(L.length===c&&(A=A.add(S.wr)),!0)},_),Ie.resolve(this.Cr(A))}Cr(t){const i=[];return t.forEach(o=>{const c=this.Dr(o);null!==c&&i.push(c)}),i}removeMutationBatch(t,i){Ct(0===this.Fr(i.batchId,"removed")),this.mutationQueue.shift();let o=this.br;return Ie.forEach(i.mutations,c=>{const f=new Vi(c.key,i.batchId);return o=o.delete(f),this.referenceDelegate.markPotentiallyOrphaned(t,c.key)}).next(()=>{this.br=o})}On(t){}containsKey(t,i){const o=new Vi(i,0),c=this.br.firstAfterOrEqual(o);return Ie.resolve(i.isEqual(c&&c.key))}performConsistencyCheck(t){return Ie.resolve()}Fr(t,i){return this.vr(t)}vr(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId}Dr(t){const i=this.vr(t);return i<0||i>=this.mutationQueue.length?null:this.mutationQueue[i]}}class oh{constructor(t){this.Mr=t,this.docs=new Sn(Ot.comparator),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,i){const o=i.key,c=this.docs.get(o),f=c?c.size:0,_=this.Mr(i);return this.docs=this.docs.insert(o,{document:i.mutableCopy(),size:_}),this.size+=_-f,this.indexManager.addToCollectionParentIndex(t,o.path.popLast())}removeEntry(t){const i=this.docs.get(t);i&&(this.docs=this.docs.remove(t),this.size-=i.size)}getEntry(t,i){const o=this.docs.get(i);return Ie.resolve(o?o.document.mutableCopy():ir.newInvalidDocument(i))}getEntries(t,i){let o=Ti();return i.forEach(c=>{const f=this.docs.get(c);o=o.insert(c,f?f.document.mutableCopy():ir.newInvalidDocument(c))}),Ie.resolve(o)}getDocumentsMatchingQuery(t,i,o,c){let f=Ti();const _=i.path,A=new Ot(_.child("")),S=this.docs.getIteratorFrom(A);for(;S.hasNext();){const{key:L,value:{document:Q}}=S.getNext();if(!_.isPrefixOf(L.path))break;L.path.length>_.length+1||En(Or(Q),o)<=0||(c.has(Q.key)||ko(i,Q))&&(f=f.insert(Q.key,Q.mutableCopy()))}return Ie.resolve(f)}getAllFromCollectionGroup(t,i,o,c){wt()}Or(t,i){return Ie.forEach(this.docs,o=>i(o))}newChangeBuffer(t){return new Hl(this)}getSize(t){return Ie.resolve(this.size)}}class Hl extends ao{constructor(t){super(),this.cr=t}applyChanges(t){const i=[];return this.changes.forEach((o,c)=>{c.isValidDocument()?i.push(this.cr.addEntry(t,c)):this.cr.removeEntry(o)}),Ie.waitFor(i)}getFromCache(t,i){return this.cr.getEntry(t,i)}getAllFromCache(t,i){return this.cr.getEntries(t,i)}}class cg{constructor(t){this.persistence=t,this.Nr=new Ms(i=>si(i),to),this.lastRemoteSnapshotVersion=ot.min(),this.highestTargetId=0,this.Lr=0,this.Br=new $l,this.targetCount=0,this.kr=Ba.Bn()}forEachTarget(t,i){return this.Nr.forEach((o,c)=>i(c)),Ie.resolve()}getLastRemoteSnapshotVersion(t){return Ie.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Ie.resolve(this.Lr)}allocateTargetId(t){return this.highestTargetId=this.kr.next(),Ie.resolve(this.highestTargetId)}setTargetsMetadata(t,i,o){return o&&(this.lastRemoteSnapshotVersion=o),i>this.Lr&&(this.Lr=i),Ie.resolve()}Kn(t){this.Nr.set(t.target,t);const i=t.targetId;i>this.highestTargetId&&(this.kr=new Ba(i),this.highestTargetId=i),t.sequenceNumber>this.Lr&&(this.Lr=t.sequenceNumber)}addTargetData(t,i){return this.Kn(i),this.targetCount+=1,Ie.resolve()}updateTargetData(t,i){return this.Kn(i),Ie.resolve()}removeTargetData(t,i){return this.Nr.delete(i.target),this.Br.gr(i.targetId),this.targetCount-=1,Ie.resolve()}removeTargets(t,i,o){let c=0;const f=[];return this.Nr.forEach((_,A)=>{A.sequenceNumber<=i&&null===o.get(A.targetId)&&(this.Nr.delete(_),f.push(this.removeMatchingKeysForTargetId(t,A.targetId)),c++)}),Ie.waitFor(f).next(()=>c)}getTargetCount(t){return Ie.resolve(this.targetCount)}getTargetData(t,i){const o=this.Nr.get(i)||null;return Ie.resolve(o)}addMatchingKeys(t,i,o){return this.Br.Rr(i,o),Ie.resolve()}removeMatchingKeys(t,i,o){this.Br.mr(i,o);const c=this.persistence.referenceDelegate,f=[];return c&&i.forEach(_=>{f.push(c.markPotentiallyOrphaned(t,_))}),Ie.waitFor(f)}removeMatchingKeysForTargetId(t,i){return this.Br.gr(i),Ie.resolve()}getMatchingKeysForTargetId(t,i){const o=this.Br.yr(i);return Ie.resolve(o)}containsKey(t,i){return Ie.resolve(this.Br.containsKey(i))}}class Gl{constructor(t,i){this.qr={},this.overlays={},this.Qr=new ge(0),this.Kr=!1,this.Kr=!0,this.$r=new ug,this.referenceDelegate=t(this),this.Ur=new cg(this),this.indexManager=new ha,this.remoteDocumentCache=new oh(o=>this.referenceDelegate.Wr(o)),this.serializer=new uf(i),this.Gr=new sh(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let i=this.overlays[t.toKey()];return i||(i=new hf,this.overlays[t.toKey()]=i),i}getMutationQueue(t,i){let o=this.qr[t.toKey()];return o||(o=new fc(i,this.referenceDelegate),this.qr[t.toKey()]=o),o}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(t,i,o){be("MemoryPersistence","Starting transaction:",t);const c=new ah(this.Qr.next());return this.referenceDelegate.zr(),o(c).next(f=>this.referenceDelegate.jr(c).next(()=>f)).toPromise().then(f=>(c.raiseOnCommittedEvent(),f))}Hr(t,i){return Ie.or(Object.values(this.qr).map(o=>()=>o.containsKey(t,i)))}}class ah extends jn{constructor(t){super(),this.currentSequenceNumber=t}}class Xc{constructor(t){this.persistence=t,this.Jr=new $l,this.Yr=null}static Zr(t){return new Xc(t)}get Xr(){if(this.Yr)return this.Yr;throw wt()}addReference(t,i,o){return this.Jr.addReference(o,i),this.Xr.delete(o.toString()),Ie.resolve()}removeReference(t,i,o){return this.Jr.removeReference(o,i),this.Xr.add(o.toString()),Ie.resolve()}markPotentiallyOrphaned(t,i){return this.Xr.add(i.toString()),Ie.resolve()}removeTarget(t,i){this.Jr.gr(i.targetId).forEach(c=>this.Xr.add(c.toString()));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(t,i.targetId).next(c=>{c.forEach(f=>this.Xr.add(f.toString()))}).next(()=>o.removeTargetData(t,i))}zr(){this.Yr=new Set}jr(t){const i=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ie.forEach(this.Xr,o=>{const c=Ot.fromPath(o);return this.ei(t,c).next(f=>{f||i.removeEntry(c,ot.min())})}).next(()=>(this.Yr=null,i.apply(t)))}updateLimboDocument(t,i){return this.ei(t,i).next(o=>{o?this.Xr.delete(i.toString()):this.Xr.add(i.toString())})}Wr(t){return 0}ei(t,i){return Ie.or([()=>Ie.resolve(this.Jr.containsKey(i)),()=>this.persistence.getTargetCache().containsKey(t,i),()=>this.persistence.Hr(t,i)])}}class ff{constructor(t){this.serializer=t}O(t,i,o,c){const f=new or("createOrUpgrade",i);var S;o<1&&c>=1&&(t.createObjectStore("owner"),(S=t).createObjectStore("mutationQueues",{keyPath:"userId"}),S.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",en,{unique:!0}),S.createObjectStore("documentMutations"),Jc(t),function(S){S.createObjectStore("remoteDocuments")}(t));let _=Ie.resolve();return o<3&&c>=3&&(0!==o&&(function(S){S.deleteObjectStore("targetDocuments"),S.deleteObjectStore("targets"),S.deleteObjectStore("targetGlobal")}(t),Jc(t)),_=_.next(()=>function(S){const L=S.store("targetGlobal"),Q={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ot.min().toTimestamp(),targetCount:0};return L.put("targetGlobalKey",Q)}(f))),o<4&&c>=4&&(0!==o&&(_=_.next(()=>function(S,L){return L.store("mutations").U().next(Q=>{S.deleteObjectStore("mutations"),S.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",en,{unique:!0});const re=L.store("mutations"),we=Q.map(Ye=>re.put(Ye));return Ie.waitFor(we)})}(t,f))),_=_.next(()=>{!function(S){S.createObjectStore("clientMetadata",{keyPath:"clientId"})}(t)})),o<5&&c>=5&&(_=_.next(()=>this.ni(f))),o<6&&c>=6&&(_=_.next(()=>(function(S){S.createObjectStore("remoteDocumentGlobal")}(t),this.ri(f)))),o<7&&c>=7&&(_=_.next(()=>this.ii(f))),o<8&&c>=8&&(_=_.next(()=>this.si(t,f))),o<9&&c>=9&&(_=_.next(()=>{!function(S){S.objectStoreNames.contains("remoteDocumentChanges")&&S.deleteObjectStore("remoteDocumentChanges")}(t)})),o<10&&c>=10&&(_=_.next(()=>this.oi(f))),o<11&&c>=11&&(_=_.next(()=>{(function(S){S.createObjectStore("bundles",{keyPath:"bundleId"})})(t),function(S){S.createObjectStore("namedQueries",{keyPath:"name"})}(t)})),o<12&&c>=12&&(_=_.next(()=>{!function(S){const L=S.createObjectStore("documentOverlays",{keyPath:se});L.createIndex("collectionPathOverlayIndex",ae,{unique:!1}),L.createIndex("collectionGroupOverlayIndex",Fe,{unique:!1})}(t)})),o<13&&c>=13&&(_=_.next(()=>function(S){const L=S.createObjectStore("remoteDocumentsV14",{keyPath:Ui});L.createIndex("documentKeyIndex",Ni),L.createIndex("collectionGroupIndex",Wn)}(t)).next(()=>this._i(t,f)).next(()=>t.deleteObjectStore("remoteDocuments"))),o<14&&c>=14&&(_=_.next(()=>this.ai(t,f))),o<15&&c>=15&&(_=_.next(()=>function(S){S.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),S.createObjectStore("indexState",{keyPath:it}).createIndex("sequenceNumberIndex",ke,{unique:!1}),S.createObjectStore("indexEntries",{keyPath:_t}).createIndex("documentKeyIndex",W,{unique:!1})}(t))),o<16&&c>=16&&(_=_.next(()=>{i.objectStore("indexState").clear()}).next(()=>{i.objectStore("indexEntries").clear()})),o<17&&c>=17&&(_=_.next(()=>{!function(S){S.createObjectStore("globals",{keyPath:"name"})}(t)})),_}ri(t){let i=0;return t.store("remoteDocuments").J((o,c)=>{i+=eh(c)}).next(()=>{const o={byteSize:i};return t.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",o)})}ni(t){const i=t.store("mutationQueues"),o=t.store("mutations");return i.U().next(c=>Ie.forEach(c,f=>{const _=IDBKeyRange.bound([f.userId,-1],[f.userId,f.lastAcknowledgedBatchId]);return o.U("userMutationsIndex",_).next(A=>Ie.forEach(A,S=>{Ct(S.userId===f.userId);const L=E(this.serializer,S);return qc(t,f.userId,L).next(()=>{})}))}))}ii(t){const i=t.store("targetDocuments"),o=t.store("remoteDocuments");return t.store("targetGlobal").get("targetGlobalKey").next(c=>{const f=[];return o.J((_,A)=>{const S=new Xt(_),L=[0,Qt(S)];f.push(i.get(L).next(Q=>Q?Ie.resolve():i.put({targetId:0,path:Qt(S),sequenceNumber:c.highestListenSequenceNumber})))}).next(()=>Ie.waitFor(f))})}si(t,i){t.createObjectStore("collectionParents",{keyPath:Ai});const o=i.store("collectionParents"),c=new cc,f=_=>{if(c.add(_)){const A=_.lastSegment(),S=_.popLast();return o.put({collectionId:A,parent:Qt(S)})}};return i.store("remoteDocuments").J({H:!0},(_,A)=>{const S=new Xt(_);return f(S.popLast())}).next(()=>i.store("documentMutations").J({H:!0},([_,A,S],L)=>{const Q=wn(A);return f(Q.popLast())}))}oi(t){const i=t.store("targets");return i.J((o,c)=>{const f=C(c),_=w(this.serializer,f);return i.put(_)})}_i(t,i){const o=i.store("remoteDocuments"),c=[];return o.J((f,_)=>{const A=i.store("remoteDocumentsV14"),S=(re=_,re.document?new Ot(Xt.fromString(re.document.name).popFirst(5)):re.noDocument?Ot.fromSegments(re.noDocument.path):re.unknownDocument?Ot.fromSegments(re.unknownDocument.path):wt()).path.toArray(),L={prefixPath:S.slice(0,S.length-2),collectionGroup:S[S.length-2],documentId:S[S.length-1],readTime:_.readTime||[0,0],unknownDocument:_.unknownDocument,noDocument:_.noDocument,document:_.document,hasCommittedMutations:!!_.hasCommittedMutations};var re;c.push(A.put(L))}).next(()=>Ie.waitFor(c))}ai(t,i){const o=i.store("mutations"),c=Qc(this.serializer),f=new Gl(Xc.Zr,this.serializer.ct);return o.U().next(_=>{const A=new Map;return _.forEach(S=>{var L;let Q=null!==(L=A.get(S.userId))&&void 0!==L?L:Zn();E(this.serializer,S).keys().forEach(re=>Q=Q.add(re)),A.set(S.userId,Q)}),Ie.forEach(A,(S,L)=>{const Q=new he(L),re=Un.lt(this.serializer,Q),we=f.getIndexManager(Q),Ye=dc.lt(Q,this.serializer,we,f.referenceDelegate);return new pa(c,Ye,re,we).recalculateAndSaveOverlaysForDocumentKeys(new Kn(i,ge.oe),S).next()})})}}function Jc(u){u.createObjectStore("targetDocuments",{keyPath:cs}).createIndex("documentTargetsIndex",Ii,{unique:!0}),u.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Is,{unique:!0}),u.createObjectStore("targetGlobal")}const Zc="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class uh{constructor(t,i,o,c,f,_,A,S,L,Q,re=17){if(this.allowTabSynchronization=t,this.persistenceKey=i,this.clientId=o,this.ui=f,this.window=_,this.document=A,this.ci=L,this.li=Q,this.hi=re,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=we=>Promise.resolve(),!uh.D())throw new Pe(Ae.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new jl(this,c),this.Ai=i+"main",this.serializer=new uf(S),this.Ri=new ri(this.Ai,this.hi,new ff(this.serializer)),this.$r=new vi,this.Ur=new ag(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Qc(this.serializer),this.Gr=new et,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,!1===Q&&Xe("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Pe(Ae.FAILED_PRECONDITION,Zc);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",t=>this.Ur.getHighestSequenceNumber(t))}).then(t=>{this.Qr=new ge(t,this.ci)}).then(()=>{this.Kr=!0}).catch(t=>(this.Ri&&this.Ri.close(),Promise.reject(t)))}yi(t){var i=this;return this.di=function(){var o=(0,m.A)(function*(c){if(i.started)return t(c)});return function(c){return o.apply(this,arguments)}}(),t(this.isPrimary)}setDatabaseDeletedListener(t){this.Ri.L(function(){var i=(0,m.A)(function*(o){null===o.newVersion&&(yield t())});return function(o){return i.apply(this,arguments)}}())}setNetworkEnabled(t){var i=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.ui.enqueueAndForget((0,m.A)(function*(){i.started&&(yield i.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",t=>ga(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(t).next(i=>{i||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(t)).next(i=>this.isPrimary&&!i?this.bi(t).next(()=>!1):!!i&&this.Di(t).next(()=>!0))).catch(t=>{if(te(t))return be("IndexedDbPersistence","Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return be("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(t=>{this.isPrimary!==t&&this.ui.enqueueRetryable(()=>this.di(t)),this.isPrimary=t})}wi(t){return Fi(t).get("owner").next(i=>Ie.resolve(this.vi(i)))}Ci(t){return ga(t).delete(this.clientId)}Fi(){var t=this;return(0,m.A)(function*(){if(t.isPrimary&&!t.Mi(t.Ei,18e5)){t.Ei=Date.now();const i=yield t.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",o=>{const c=ar(o,"clientMetadata");return c.U().next(f=>{const _=t.xi(f,18e5),A=f.filter(S=>-1===_.indexOf(S));return Ie.forEach(A,S=>c.delete(S.clientId)).next(()=>A)})}).catch(()=>[]);if(t.Vi)for(const o of i)t.Vi.removeItem(t.Oi(o.clientId))}})()}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(t){return!!t&&t.ownerId===this.clientId}Si(t){return this.li?Ie.resolve(!0):Fi(t).get("owner").next(i=>{if(null!==i&&this.Mi(i.leaseTimestampMs,5e3)&&!this.Ni(i.ownerId)){if(this.vi(i)&&this.networkEnabled)return!0;if(!this.vi(i)){if(!i.allowTabSynchronization)throw new Pe(Ae.FAILED_PRECONDITION,Zc);return!1}}return!(!this.networkEnabled||!this.inForeground)||ga(t).U().next(o=>void 0===this.xi(o,5e3).find(c=>!(this.clientId===c.clientId||!(!this.networkEnabled&&c.networkEnabled||!this.inForeground&&c.inForeground&&this.networkEnabled===c.networkEnabled))))}).next(i=>(this.isPrimary!==i&&be("IndexedDbPersistence",`Client ${i?"is":"is not"} eligible for a primary lease.`),i))}shutdown(){var t=this;return(0,m.A)(function*(){t.Kr=!1,t.Li(),t.Ti&&(t.Ti.cancel(),t.Ti=null),t.Bi(),t.ki(),yield t.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],i=>{const o=new Kn(i,ge.oe);return t.bi(o).next(()=>t.Ci(o))}),t.Ri.close(),t.qi()})()}xi(t,i){return t.filter(o=>this.Mi(o.updateTimeMs,i)&&!this.Ni(o.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",t=>ga(t).U().next(i=>this.xi(i,18e5).map(o=>o.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(t,i){return dc.lt(t,this.serializer,i,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(t){return new Fl(t,this.serializer.ct.databaseId)}getDocumentOverlayCache(t){return Un.lt(this.serializer,t)}getBundleCache(){return this.Gr}runTransaction(t,i,o){be("IndexedDbPersistence","Starting transaction:",t);const c="readonly"===i?"readonly":"readwrite",f=17===(S=this.hi)?ii:16===S?yr:15===S?gn:14===S?sn:13===S?kt:12===S?St:11===S?je:void wt();var S;let _;return this.Ri.runTransaction(t,c,f,A=>(_=new Kn(A,this.Qr?this.Qr.next():ge.oe),"readwrite-primary"===i?this.wi(_).next(S=>!!S||this.Si(_)).next(S=>{if(!S)throw Xe(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new Pe(Ae.FAILED_PRECONDITION,Kr);return o(_)}).next(S=>this.Di(_).next(()=>S)):this.Ki(_).next(()=>o(_)))).then(A=>(_.raiseOnCommittedEvent(),A))}Ki(t){return Fi(t).get("owner").next(i=>{if(null!==i&&this.Mi(i.leaseTimestampMs,5e3)&&!this.Ni(i.ownerId)&&!this.vi(i)&&!(this.li||this.allowTabSynchronization&&i.allowTabSynchronization))throw new Pe(Ae.FAILED_PRECONDITION,Zc)})}Di(t){const i={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Fi(t).put("owner",i)}static D(){return ri.D()}bi(t){const i=Fi(t);return i.get("owner").next(o=>this.vi(o)?(be("IndexedDbPersistence","Releasing primary lease."),i.delete("owner")):Ie.resolve())}Mi(t,i){const o=Date.now();return!(t<o-i||t>o&&(Xe(`Detected an update time that is in the future: ${t} > ${o}`),1))}fi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground="visible"===this.document.visibilityState)}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var t;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Pi=()=>{this.Li();const i=/(?:Version|Mobile)\/1[456]/;(0,k.nr)()&&(navigator.appVersion.match(i)||navigator.userAgent.match(i))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(t){var i;try{const o=null!==(null===(i=this.Vi)||void 0===i?void 0:i.getItem(this.Oi(t)));return be("IndexedDbPersistence",`Client '${t}' ${o?"is":"is not"} zombied in LocalStorage`),o}catch(o){return Xe("IndexedDbPersistence","Failed to get zombied client id.",o),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(t){Xe("Failed to set zombie client id.",t)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(t){return`firestore_zombie_${this.persistenceKey}_${t}`}}function Fi(u){return ar(u,"owner")}function ga(u){return ar(u,"clientMetadata")}function Yr(u,t){let i=u.projectId;return u.isDefaultDatabase||(i+="."+u.database),"firestore/"+t+"/"+i+"/"}class zl{constructor(t,i,o,c){this.targetId=t,this.fromCache=i,this.$i=o,this.Ui=c}static Wi(t,i){let o=Zn(),c=Zn();for(const f of i.docChanges)switch(f.type){case 0:o=o.add(f.doc.key);break;case 1:c=c.add(f.doc.key)}return new zl(t,i.fromCache,o,c)}}class lg{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}class pf{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(0,k.nr)()?8:mt((0,k.ZQ)())>0?6:4}initialize(t,i){this.Ji=t,this.indexManager=i,this.Gi=!0}getDocumentsMatchingQuery(t,i,o,c){const f={result:null};return this.Yi(t,i).next(_=>{f.result=_}).next(()=>{if(!f.result)return this.Zi(t,i,c,o).next(_=>{f.result=_})}).next(()=>{if(f.result)return;const _=new lg;return this.Xi(t,i,_).next(A=>{if(f.result=A,this.zi)return this.es(t,i,_,A.size)})}).next(()=>f.result)}es(t,i,o,c){return o.documentReadCount<this.ji?(ut()<=ne.$b.DEBUG&&be("QueryEngine","SDK will not create cache indexes for query:",es(i),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Ie.resolve()):(ut()<=ne.$b.DEBUG&&be("QueryEngine","Query:",es(i),"scans",o.documentReadCount,"local documents and returns",c,"documents as results."),o.documentReadCount>this.Hi*c?(ut()<=ne.$b.DEBUG&&be("QueryEngine","The SDK decides to create cache indexes for query:",es(i),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Gt(i))):Ie.resolve())}Yi(t,i){if(R(i))return Ie.resolve(null);let o=Gt(i);return this.indexManager.getIndexType(t,o).next(c=>0===c?null:(null!==i.limit&&1===c&&(i=Ji(i,null,"F"),o=Gt(i)),this.indexManager.getDocumentsMatchingTarget(t,o).next(f=>{const _=Zn(...f);return this.Ji.getDocuments(t,_).next(A=>this.indexManager.getMinOffset(t,o).next(S=>{const L=this.ts(i,A);return this.ns(i,L,_,S.readTime)?this.Yi(t,Ji(i,null,"F")):this.rs(t,L,i,S)}))})))}Zi(t,i,o,c){return R(i)||c.isEqual(ot.min())?Ie.resolve(null):this.Ji.getDocuments(t,o).next(f=>{const _=this.ts(i,f);return this.ns(i,_,o,c)?Ie.resolve(null):(ut()<=ne.$b.DEBUG&&be("QueryEngine","Re-using previous result from %s to execute query: %s",c.toString(),es(i)),this.rs(t,_,i,gi(c,-1)).next(A=>A))})}ts(t,i){let o=new xn(eu(t));return i.forEach((c,f)=>{ko(t,f)&&(o=o.add(f))}),o}ns(t,i,o,c){if(null===t.limit)return!1;if(o.size!==i.size)return!0;const f="F"===t.limitType?i.last():i.first();return!!f&&(f.hasPendingWrites||f.version.compareTo(c)>0)}Xi(t,i,o){return ut()<=ne.$b.DEBUG&&be("QueryEngine","Using full collection scan to execute query:",es(i)),this.Ji.getDocumentsMatchingQuery(t,i,_r.min(),o)}rs(t,i,o,c){return this.Ji.getDocumentsMatchingQuery(t,o,c).next(f=>(i.forEach(_=>{f=f.insert(_.key,_)}),f))}}class dg{constructor(t,i,o,c){this.persistence=t,this.ss=i,this.serializer=c,this.os=new Sn(gt),this._s=new Ms(f=>si(f),to),this.us=new Map,this.cs=t.getRemoteDocumentCache(),this.Ur=t.getTargetCache(),this.Gr=t.getBundleCache(),this.ls(o)}ls(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new pa(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",i=>t.collect(i,this.os))}}function ch(u,t,i,o){return new dg(u,t,i,o)}function lh(u,t){return $a.apply(this,arguments)}function $a(){return($a=(0,m.A)(function*(u,t){const i=Ze(u);return yield i.persistence.runTransaction("Handle user change","readonly",o=>{let c;return i.mutationQueue.getAllMutationBatches(o).next(f=>(c=f,i.ls(t),i.mutationQueue.getAllMutationBatches(o))).next(f=>{const _=[],A=[];let S=Zn();for(const L of c){_.push(L.batchId);for(const Q of L.mutations)S=S.add(Q.key)}for(const L of f){A.push(L.batchId);for(const Q of L.mutations)S=S.add(Q.key)}return i.localDocuments.getDocuments(o,S).next(L=>({hs:L,removedBatchIds:_,addedBatchIds:A}))})})})).apply(this,arguments)}function gf(u){const t=Ze(u);return t.persistence.runTransaction("Get last remote snapshot version","readonly",i=>t.Ur.getLastRemoteSnapshotVersion(i))}function el(u,t,i){let o=Zn(),c=Zn();return i.forEach(f=>o=o.add(f)),t.getEntries(u,o).next(f=>{let _=Ti();return i.forEach((A,S)=>{const L=f.get(A);S.isFoundDocument()!==L.isFoundDocument()&&(c=c.add(A)),S.isNoDocument()&&S.version.isEqual(ot.min())?(t.removeEntry(A,S.readTime),_=_.insert(A,S)):!L.isValidDocument()||S.version.compareTo(L.version)>0||0===S.version.compareTo(L.version)&&L.hasPendingWrites?(t.addEntry(S),_=_.insert(A,S)):be("LocalStore","Ignoring outdated watch update for ",A,". Current version:",L.version," Watch version:",S.version)}),{Ps:_,Is:c}})}function tl(u,t){const i=Ze(u);return i.persistence.runTransaction("Get next mutation batch","readonly",o=>(void 0===t&&(t=-1),i.mutationQueue.getNextMutationBatchAfterBatchId(o,t)))}function Ha(u,t){const i=Ze(u);return i.persistence.runTransaction("Allocate target","readwrite",o=>{let c;return i.Ur.getTargetData(o,t).next(f=>f?(c=f,Ie.resolve(c)):i.Ur.allocateTargetId(o).next(_=>(c=new ua(t,_,"TargetPurposeListen",o.currentSequenceNumber),i.Ur.addTargetData(o,c).next(()=>c))))}).then(o=>{const c=i.os.get(o.targetId);return(null===c||o.snapshotVersion.compareTo(c.snapshotVersion)>0)&&(i.os=i.os.insert(o.targetId,o),i._s.set(t,o.targetId)),o})}function Ga(u,t,i){return Wl.apply(this,arguments)}function Wl(){return(Wl=(0,m.A)(function*(u,t,i){const o=Ze(u),c=o.os.get(t),f=i?"readwrite":"readwrite-primary";try{i||(yield o.persistence.runTransaction("Release target",f,_=>o.persistence.referenceDelegate.removeTarget(_,c)))}catch(_){if(!te(_))throw _;be("LocalStore",`Failed to update sequence numbers for target ${t}: ${_}`)}o.os=o.os.remove(t),o._s.delete(c.target)})).apply(this,arguments)}function dh(u,t,i){const o=Ze(u);let c=ot.min(),f=Zn();return o.persistence.runTransaction("Execute query","readwrite",_=>function(S,L,Q){const re=Ze(S),we=re._s.get(Q);return void 0!==we?Ie.resolve(re.os.get(we)):re.Ur.getTargetData(L,Q)}(o,_,Gt(t)).next(A=>{if(A)return c=A.lastLimboFreeSnapshotVersion,o.Ur.getMatchingKeysForTargetId(_,A.targetId).next(S=>{f=S})}).next(()=>o.ss.getDocumentsMatchingQuery(_,t,i?c:ot.min(),i?f:Zn())).next(A=>(nl(o,ec(t),A),{documents:A,Ts:f})))}function za(u,t){const i=Ze(u),o=Ze(i.Ur),c=i.os.get(t);return c?Promise.resolve(c.target):i.persistence.runTransaction("Get target data","readonly",f=>o.ot(f,t).next(_=>_?_.target:null))}function xu(u,t){const i=Ze(u),o=i.us.get(t)||ot.min();return i.persistence.runTransaction("Get new document changes","readonly",c=>i.cs.getAllFromCollectionGroup(c,t,gi(o,-1),Number.MAX_SAFE_INTEGER)).then(c=>(nl(i,t,c),c))}function nl(u,t,i){let o=u.us.get(t)||ot.min();i.forEach((c,f)=>{f.readTime.compareTo(o)>0&&(o=f.readTime)}),u.us.set(t,o)}function ql(){return(ql=(0,m.A)(function*(u,t,i,o){const c=Ze(u);let f=Zn(),_=Ti();for(const L of i){const Q=t.Es(L.metadata.name);L.document&&(f=f.add(Q));const re=t.ds(L);re.setReadTime(t.As(L.metadata.readTime)),_=_.insert(Q,re)}const A=c.cs.newChangeBuffer({trackRemovals:!0}),S=yield Ha(c,(Q=o,Gt(j(Xt.fromString(`__bundle__/docs/${Q}`)))));var Q;return c.persistence.runTransaction("Apply bundle documents","readwrite",L=>el(L,A,_).next(Q=>(A.apply(L),Q)).next(Q=>c.Ur.removeMatchingKeysForTargetId(L,S.targetId).next(()=>c.Ur.addMatchingKeys(L,f,S.targetId)).next(()=>c.localDocuments.getLocalViewOfDocuments(L,Q.Ps,Q.Is)).next(()=>Q.Ps)))})).apply(this,arguments)}function hg(u,t){return hh.apply(this,arguments)}function hh(){return(hh=(0,m.A)(function*(u,t,i=Zn()){const o=yield Ha(u,Gt(b(t.bundledQuery))),c=Ze(u);return c.persistence.runTransaction("Save named query","readwrite",f=>{const _=Xr(t.readTime);if(o.snapshotVersion.compareTo(_)>=0)return c.Gr.saveNamedQuery(f,t);const A=o.withResumeToken(cr.EMPTY_BYTE_STRING,_);return c.os=c.os.insert(A.targetId,A),c.Ur.updateTargetData(f,A).next(()=>c.Ur.removeMatchingKeysForTargetId(f,o.targetId)).next(()=>c.Ur.addMatchingKeys(f,i,o.targetId)).next(()=>c.Gr.saveNamedQuery(f,t))})})).apply(this,arguments)}function fg(u,t){return`firestore_clients_${u}_${t}`}function pg(u,t,i){let o=`firestore_mutations_${u}_${i}`;return t.isAuthenticated()&&(o+=`_${t.uid}`),o}function rl(u,t){return`firestore_targets_${u}_${t}`}class Wa{constructor(t,i,o,c){this.user=t,this.batchId=i,this.state=o,this.error=c}static Rs(t,i,o){const c=JSON.parse(o);let f,_="object"==typeof c&&-1!==["pending","acknowledged","rejected"].indexOf(c.state)&&(void 0===c.error||"object"==typeof c.error);return _&&c.error&&(_="string"==typeof c.error.message&&"string"==typeof c.error.code,_&&(f=new Pe(c.error.code,c.error.message))),_?new Wa(t,i,c.state,f):(Xe("SharedClientState",`Failed to parse mutation state for ID '${i}': ${o}`),null)}Vs(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class il{constructor(t,i,o){this.targetId=t,this.state=i,this.error=o}static Rs(t,i){const o=JSON.parse(i);let c,f="object"==typeof o&&-1!==["not-current","current","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return f&&o.error&&(f="string"==typeof o.error.message&&"string"==typeof o.error.code,f&&(c=new Pe(o.error.code,o.error.message))),f?new il(t,o.state,c):(Xe("SharedClientState",`Failed to parse target state for ID '${t}': ${i}`),null)}Vs(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class Ou{constructor(t,i){this.clientId=t,this.activeTargetIds=i}static Rs(t,i){const o=JSON.parse(i);let c="object"==typeof o&&o.activeTargetIds instanceof Array,f=ta();for(let _=0;c&&_<o.activeTargetIds.length;++_)c=zt(o.activeTargetIds[_]),f=f.add(o.activeTargetIds[_]);return c?new Ou(t,f):(Xe("SharedClientState",`Failed to parse client data for instance '${t}': ${i}`),null)}}class sl{constructor(t,i){this.clientId=t,this.onlineState=i}static Rs(t){const i=JSON.parse(t);return"object"==typeof i&&-1!==["Unknown","Online","Offline"].indexOf(i.onlineState)&&"string"==typeof i.clientId?new sl(i.clientId,i.onlineState):(Xe("SharedClientState",`Failed to parse online state: ${t}`),null)}}class bo{constructor(){this.activeTargetIds=ta()}fs(t){this.activeTargetIds=this.activeTargetIds.add(t)}gs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Vs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class mf{constructor(t,i,o,c,f){this.window=t,this.ui=i,this.persistenceKey=o,this.ps=c,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new Sn(gt),this.started=!1,this.bs=[];const _=o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=f,this.Ds=fg(this.persistenceKey,this.ps),this.vs=`firestore_sequence_number_${this.persistenceKey}`,this.Ss=this.Ss.insert(this.ps,new bo),this.Cs=new RegExp(`^firestore_clients_${_}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${_}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${_}_(\\d+)$`),this.xs=`firestore_online_state_${this.persistenceKey}`,this.Os=function(S){return`firestore_bundle_loaded_v2_${S}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(t){return!(!t||!t.localStorage)}start(){var t=this;return(0,m.A)(function*(){const i=yield t.syncEngine.Qi();for(const c of i){if(c===t.ps)continue;const f=t.getItem(fg(t.persistenceKey,c));if(f){const _=Ou.Rs(c,f);_&&(t.Ss=t.Ss.insert(_.clientId,_))}}t.Ns();const o=t.storage.getItem(t.xs);if(o){const c=t.Ls(o);c&&t.Bs(c)}for(const c of t.bs)t.ws(c);t.bs=[],t.window.addEventListener("pagehide",()=>t.shutdown()),t.started=!0})()}writeSequenceNumber(t){this.setItem(this.vs,JSON.stringify(t))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(t){let i=!1;return this.Ss.forEach((o,c)=>{c.activeTargetIds.has(t)&&(i=!0)}),i}addPendingMutation(t){this.qs(t,"pending")}updateMutationState(t,i,o){this.qs(t,i,o),this.Qs(t)}addLocalQueryTarget(t,i=!0){let o="not-current";if(this.isActiveQueryTarget(t)){const c=this.storage.getItem(rl(this.persistenceKey,t));if(c){const f=il.Rs(t,c);f&&(o=f.state)}}return i&&this.Ks.fs(t),this.Ns(),o}removeLocalQueryTarget(t){this.Ks.gs(t),this.Ns()}isLocalQueryTarget(t){return this.Ks.activeTargetIds.has(t)}clearQueryState(t){this.removeItem(rl(this.persistenceKey,t))}updateQueryState(t,i,o){this.$s(t,i,o)}handleUserChange(t,i,o){i.forEach(c=>{this.Qs(c)}),this.currentUser=t,o.forEach(c=>{this.addPendingMutation(c)})}setOnlineState(t){this.Us(t)}notifyBundleLoaded(t){this.Ws(t)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(t){const i=this.storage.getItem(t);return be("SharedClientState","READ",t,i),i}setItem(t,i){be("SharedClientState","SET",t,i),this.storage.setItem(t,i)}removeItem(t){be("SharedClientState","REMOVE",t),this.storage.removeItem(t)}ws(t){var i=this;const o=t;if(o.storageArea===this.storage){if(be("SharedClientState","EVENT",o.key,o.newValue),o.key===this.Ds)return void Xe("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable((0,m.A)(function*(){if(i.started){if(null!==o.key)if(i.Cs.test(o.key)){if(null==o.newValue){const c=i.Gs(o.key);return i.zs(c,null)}{const c=i.js(o.key,o.newValue);if(c)return i.zs(c.clientId,c)}}else if(i.Fs.test(o.key)){if(null!==o.newValue){const c=i.Hs(o.key,o.newValue);if(c)return i.Js(c)}}else if(i.Ms.test(o.key)){if(null!==o.newValue){const c=i.Ys(o.key,o.newValue);if(c)return i.Zs(c)}}else if(o.key===i.xs){if(null!==o.newValue){const c=i.Ls(o.newValue);if(c)return i.Bs(c)}}else if(o.key===i.vs){const c=function(_){let A=ge.oe;if(null!=_)try{const S=JSON.parse(_);Ct("number"==typeof S),A=S}catch(S){Xe("SharedClientState","Failed to read sequence number from WebStorage",S)}return A}(o.newValue);c!==ge.oe&&i.sequenceNumberHandler(c)}else if(o.key===i.Os){const c=i.Xs(o.newValue);yield Promise.all(c.map(f=>i.syncEngine.eo(f)))}}else i.bs.push(o)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(t,i,o){const c=new Wa(this.currentUser,t,i,o),f=pg(this.persistenceKey,this.currentUser,t);this.setItem(f,c.Vs())}Qs(t){const i=pg(this.persistenceKey,this.currentUser,t);this.removeItem(i)}Us(t){this.storage.setItem(this.xs,JSON.stringify({clientId:this.ps,onlineState:t}))}$s(t,i,o){const c=rl(this.persistenceKey,t),f=new il(t,i,o);this.setItem(c,f.Vs())}Ws(t){const i=JSON.stringify(Array.from(t));this.setItem(this.Os,i)}Gs(t){const i=this.Cs.exec(t);return i?i[1]:null}js(t,i){const o=this.Gs(t);return Ou.Rs(o,i)}Hs(t,i){const o=this.Fs.exec(t),c=Number(o[1]);return Wa.Rs(new he(void 0!==o[2]?o[2]:null),c,i)}Ys(t,i){const o=this.Ms.exec(t),c=Number(o[1]);return il.Rs(c,i)}Ls(t){return sl.Rs(t)}Xs(t){return JSON.parse(t)}Js(t){var i=this;return(0,m.A)(function*(){if(t.user.uid===i.currentUser.uid)return i.syncEngine.no(t.batchId,t.state,t.error);be("SharedClientState",`Ignoring mutation for non-active user ${t.user.uid}`)})()}Zs(t){return this.syncEngine.ro(t.targetId,t.state,t.error)}zs(t,i){const o=i?this.Ss.insert(t,i):this.Ss.remove(t),c=this.ks(this.Ss),f=this.ks(o),_=[],A=[];return f.forEach(S=>{c.has(S)||_.push(S)}),c.forEach(S=>{f.has(S)||A.push(S)}),this.syncEngine.io(_,A).then(()=>{this.Ss=o})}Bs(t){this.Ss.get(t.clientId)&&this.onlineStateHandler(t.onlineState)}ks(t){let i=ta();return t.forEach((o,c)=>{i=i.unionWith(c.activeTargetIds)}),i}}class fh{constructor(){this.so=new bo,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,i,o){}addLocalQueryTarget(t,i=!0){return i&&this.so.fs(t),this.oo[t]||"not-current"}updateQueryState(t,i,o){this.oo[t]=i}removeLocalQueryTarget(t){this.so.gs(t)}isLocalQueryTarget(t){return this.so.activeTargetIds.has(t)}clearQueryState(t){delete this.oo[t]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(t){return this.so.activeTargetIds.has(t)}start(){return this.so=new bo,Promise.resolve()}handleUserChange(t,i,o){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class Ql{_o(t){}shutdown(){}}class _f{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(t){this.ho.push(t)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){be("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.ho)t(0)}lo(){be("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.ho)t(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Fs=null;function ph(){return null===Fs?Fs=268435456+Math.round(2147483648*Math.random()):Fs++,"0x"+Fs.toString(16)}const Xl={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class ol{constructor(t){this.Io=t.Io,this.To=t.To}Eo(t){this.Ao=t}Ro(t){this.Vo=t}mo(t){this.fo=t}onMessage(t){this.po=t}close(){this.To()}send(t){this.Io(t)}yo(){this.Ao()}wo(){this.Vo()}So(t){this.fo(t)}bo(t){this.po(t)}}const is="WebChannelConnection";class Yl extends class{constructor(i){this.databaseInfo=i,this.databaseId=i.databaseId;const o=i.ssl?"https":"http",c=encodeURIComponent(this.databaseId.projectId),f=encodeURIComponent(this.databaseId.database);this.Do=o+"://"+i.host,this.vo=`projects/${c}/databases/${f}`,this.Co="(default)"===this.databaseId.database?`project_id=${c}`:`project_id=${c}&database_id=${f}`}get Fo(){return!1}Mo(i,o,c,f,_){const A=ph(),S=this.xo(i,o.toUriEncodedString());be("RestConnection",`Sending RPC '${i}' ${A}:`,S,c);const L={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(L,f,_),this.No(i,S,L,c).then(Q=>(be("RestConnection",`Received RPC '${i}' ${A}: `,Q),Q),Q=>{throw rn("RestConnection",`RPC '${i}' ${A} failed with error: `,Q,"url: ",S,"request:",c),Q})}Lo(i,o,c,f,_,A){return this.Mo(i,o,c,f,_)}Oo(i,o,c){i["X-Goog-Api-Client"]="gl-js/ fire/"+at,i["Content-Type"]="text/plain",this.databaseInfo.appId&&(i["X-Firebase-GMPID"]=this.databaseInfo.appId),o&&o.headers.forEach((f,_)=>i[_]=f),c&&c.headers.forEach((f,_)=>i[_]=f)}xo(i,o){return`${this.Do}/v1/${o}:${Xl[i]}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}No(t,i,o,c){const f=ph();return new Promise((_,A)=>{const S=new Be;S.setWithCredentials(!0),S.listenOnce(xt.COMPLETE,()=>{try{switch(S.getLastErrorCode()){case qt.NO_ERROR:const Q=S.getResponseJson();be(is,`XHR for RPC '${t}' ${f} received:`,JSON.stringify(Q)),_(Q);break;case qt.TIMEOUT:be(is,`RPC '${t}' ${f} timed out`),A(new Pe(Ae.DEADLINE_EXCEEDED,"Request time out"));break;case qt.HTTP_ERROR:const re=S.getStatus();if(be(is,`RPC '${t}' ${f} failed with status:`,re,"response text:",S.getResponseText()),re>0){let we=S.getResponseJson();Array.isArray(we)&&(we=we[0]);const Ye=we?.error;if(Ye&&Ye.status&&Ye.message){const Rt=function(Vt){const vn=Vt.toLowerCase().replace(/_/g,"-");return Object.values(Ae).indexOf(vn)>=0?vn:Ae.UNKNOWN}(Ye.status);A(new Pe(Rt,Ye.message))}else A(new Pe(Ae.UNKNOWN,"Server responded with status "+S.getStatus()))}else A(new Pe(Ae.UNAVAILABLE,"Connection failed."));break;default:wt()}}finally{be(is,`RPC '${t}' ${f} completed.`)}});const L=JSON.stringify(c);be(is,`RPC '${t}' ${f} sending request:`,c),S.send(i,"POST",L,o,15)})}Bo(t,i,o){const c=ph(),f=[this.Do,"/","google.firestore.v1.Firestore","/",t,"/channel"],_=ln(),A=un(),S={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},L=this.longPollingOptions.timeoutSeconds;void 0!==L&&(S.longPollingTimeout=Math.round(1e3*L)),this.useFetchStreams&&(S.useFetchStreams=!0),this.Oo(S.initMessageHeaders,i,o),S.encodeInitMessageHeaders=!0;const Q=f.join("");be(is,`Creating RPC '${t}' stream ${c}: ${Q}`,S);const re=_.createWebChannel(Q,S);let we=!1,Ye=!1;const Rt=new ol({Io:Vt=>{Ye?be(is,`Not sending because RPC '${t}' stream ${c} is closed:`,Vt):(we||(be(is,`Opening RPC '${t}' stream ${c} transport.`),re.open(),we=!0),be(is,`RPC '${t}' stream ${c} sending:`,Vt),re.send(Vt))},To:()=>re.close()}),jt=(Vt,vn,Rn)=>{Vt.listen(vn,Tn=>{try{Rn(Tn)}catch(nr){setTimeout(()=>{throw nr},0)}})};return jt(re,Je.EventType.OPEN,()=>{Ye||(be(is,`RPC '${t}' stream ${c} transport opened.`),Rt.yo())}),jt(re,Je.EventType.CLOSE,()=>{Ye||(Ye=!0,be(is,`RPC '${t}' stream ${c} transport closed`),Rt.So())}),jt(re,Je.EventType.ERROR,Vt=>{Ye||(Ye=!0,rn(is,`RPC '${t}' stream ${c} transport errored:`,Vt),Rt.So(new Pe(Ae.UNAVAILABLE,"The operation could not be completed")))}),jt(re,Je.EventType.MESSAGE,Vt=>{var vn;if(!Ye){const Rn=Vt.data[0];Ct(!!Rn);const nr=Rn.error||(null===(vn=Rn[0])||void 0===vn?void 0:vn.error);if(nr){be(is,`RPC '${t}' stream ${c} received error:`,nr);const Ur=nr.status;let hr=function(Ce){const Ve=Kt[Ce];if(void 0!==Ve)return Mr(Ve)}(Ur),xe=nr.message;void 0===hr&&(hr=Ae.INTERNAL,xe="Unknown error status: "+Ur+" with message "+nr.message),Ye=!0,Rt.So(new Pe(hr,xe)),re.close()}else be(is,`RPC '${t}' stream ${c} received:`,Rn),Rt.bo(Rn)}}),jt(A,Nt.STAT_EVENT,Vt=>{Vt.stat===$t.PROXY?be(is,`RPC '${t}' stream ${c} detected buffering proxy`):Vt.stat===$t.NOPROXY&&be(is,`RPC '${t}' stream ${c} detected no buffering proxy`)}),setTimeout(()=>{Rt.wo()},0),Rt}}function gc(){return typeof window<"u"?window:null}function Jl(){return typeof document<"u"?document:null}function mc(u){return new Wr(u,!0)}class Zl{constructor(t,i,o=1e3,c=1.5,f=6e4){this.ui=t,this.timerId=i,this.ko=o,this.qo=c,this.Qo=f,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(t){this.cancel();const i=Math.floor(this.Ko+this.zo()),o=Math.max(0,Date.now()-this.Uo),c=Math.max(0,i-o);c>0&&be("ExponentialBackoff",`Backing off for ${c} ms (base delay: ${this.Ko} ms, delay with jitter: ${i} ms, last attempt: ${o} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,c,()=>(this.Uo=Date.now(),t())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){null!==this.$o&&(this.$o.skipDelay(),this.$o=null)}cancel(){null!==this.$o&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}class gh{constructor(t,i,o,c,f,_,A,S){this.ui=t,this.Ho=o,this.Jo=c,this.connection=f,this.authCredentialsProvider=_,this.appCheckCredentialsProvider=A,this.listener=S,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Zl(t,i)}n_(){return 1===this.state||5===this.state||this.r_()}r_(){return 2===this.state||3===this.state}start(){this.e_=0,4!==this.state?this.auth():this.i_()}stop(){var t=this;return(0,m.A)(function*(){t.n_()&&(yield t.close(0))})()}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&null===this.Zo&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(t){this.u_(),this.stream.send(t)}__(){var t=this;return(0,m.A)(function*(){if(t.r_())return t.close(0)})()}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(t,i){var o=this;return(0,m.A)(function*(){o.u_(),o.c_(),o.t_.cancel(),o.Yo++,4!==t?o.t_.reset():i&&i.code===Ae.RESOURCE_EXHAUSTED?(Xe(i.toString()),Xe("Using maximum backoff delay to prevent overloading the backend."),o.t_.Wo()):i&&i.code===Ae.UNAUTHENTICATED&&3!==o.state&&(o.authCredentialsProvider.invalidateToken(),o.appCheckCredentialsProvider.invalidateToken()),null!==o.stream&&(o.l_(),o.stream.close(),o.stream=null),o.state=t,yield o.listener.mo(i)})()}l_(){}auth(){this.state=1;const t=this.h_(this.Yo),i=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([o,c])=>{this.Yo===i&&this.P_(o,c)},o=>{t(()=>{const c=new Pe(Ae.UNKNOWN,"Fetching auth token failed: "+o.message);return this.I_(c)})})}P_(t,i){const o=this.h_(this.Yo);this.stream=this.T_(t,i),this.stream.Eo(()=>{o(()=>this.listener.Eo())}),this.stream.Ro(()=>{o(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(c=>{o(()=>this.I_(c))}),this.stream.onMessage(c=>{o(()=>1==++this.e_?this.E_(c):this.onNext(c))})}i_(){var t=this;this.state=5,this.t_.Go((0,m.A)(function*(){t.state=0,t.start()}))}I_(t){return be("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}h_(t){return i=>{this.ui.enqueueAndForget(()=>this.Yo===t?i():(be("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class yf extends gh{constructor(t,i,o,c,f,_){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",i,o,c,_),this.serializer=f}T_(t,i){return this.connection.Bo("Listen",t,i)}E_(t){return this.onNext(t)}onNext(t){this.t_.reset();const i=function rs(u,t){let i;if("targetChange"in t){const o="NO_CHANGE"===(L=t.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===L?1:"REMOVE"===L?2:"CURRENT"===L?3:"RESET"===L?4:wt(),c=t.targetChange.targetIds||[],f=function(L,Q){return L.useProto3Json?(Ct(void 0===Q||"string"==typeof Q),cr.fromBase64String(Q||"")):(Ct(void 0===Q||Q instanceof Buffer||Q instanceof Uint8Array),cr.fromUint8Array(Q||new Uint8Array))}(u,t.targetChange.resumeToken),_=t.targetChange.cause,A=_&&function(L){const Q=void 0===L.code?Ae.UNKNOWN:Mr(L.code);return new Pe(Q,L.message||"")}(_);i=new so(o,c,f,A||null)}else if("documentChange"in t){const o=t.documentChange,c=ns(u,o.document.name),f=Xr(o.document.updateTime),_=o.document.createTime?Xr(o.document.createTime):ot.min(),A=new vr({mapValue:{fields:o.document.fields}}),S=ir.newFoundDocument(c,f,_,A);i=new Cr(o.targetIds||[],o.removedTargetIds||[],S.key,S)}else if("documentDelete"in t){const o=t.documentDelete,c=ns(u,o.document),f=o.readTime?Xr(o.readTime):ot.min(),_=ir.newNoDocument(c,f);i=new Cr([],o.removedTargetIds||[],_.key,_)}else if("documentRemove"in t){const o=t.documentRemove,c=ns(u,o.document);i=new Cr([],o.removedTargetIds||[],c,null)}else{if(!("filter"in t))return wt();{const o=t.filter,{count:c=0,unchangedNames:f}=o,_=new Tt(c,f);i=new yi(o.targetId,_)}}var L;return i}(this.serializer,t),o=function(f){if(!("targetChange"in f))return ot.min();const _=f.targetChange;return _.targetIds&&_.targetIds.length?ot.min():_.readTime?Xr(_.readTime):ot.min()}(t);return this.listener.d_(i,o)}A_(t){const i={};i.database=Na(this.serializer),i.addTarget=function(f,_){let A;const S=_.target;if(A=Rs(S)?{documents:Qs(f,S)}:{query:$o(f,S)._t},A.targetId=_.targetId,_.resumeToken.approximateByteSize()>0){A.resumeToken=wo(f,_.resumeToken);const L=Ma(f,_.expectedCount);null!==L&&(A.expectedCount=L)}else if(_.snapshotVersion.compareTo(ot.min())>0){A.readTime=Io(f,_.snapshotVersion.toTimestamp());const L=Ma(f,_.expectedCount);null!==L&&(A.expectedCount=L)}return A}(this.serializer,t);const o=function ac(u,t){const i=function(c){switch(c){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return wt()}}(t.purpose);return null==i?null:{"goog-listen-tags":i}}(0,t);o&&(i.labels=o),this.a_(i)}R_(t){const i={};i.database=Na(this.serializer),i.removeTarget=t,this.a_(i)}}class vf extends gh{constructor(t,i,o,c,f,_){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",i,o,c,_),this.serializer=f}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(t,i){return this.connection.Bo("Write",t,i)}E_(t){return Ct(!!t.streamToken),this.lastStreamToken=t.streamToken,Ct(!t.writeResults||0===t.writeResults.length),this.listener.f_()}onNext(t){Ct(!!t.streamToken),this.lastStreamToken=t.streamToken,this.t_.reset();const i=function au(u,t){return u&&u.length>0?(Ct(void 0!==t),u.map(i=>function(c,f){let _=Xr(c.updateTime?c.updateTime:f);return _.isEqual(ot.min())&&(_=Xr(f)),new Ns(_,c.transformResults||[])}(i,t))):[]}(t.writeResults,t.commitTime),o=Xr(t.commitTime);return this.listener.g_(o,i)}p_(){const t={};t.database=Na(this.serializer),this.a_(t)}m_(t){const i={streamToken:this.lastStreamToken,writes:t.map(o=>Bo(this.serializer,o))};this.a_(i)}}class _c extends class{}{constructor(t,i,o,c){super(),this.authCredentials=t,this.appCheckCredentials=i,this.connection=o,this.serializer=c,this.y_=!1}w_(){if(this.y_)throw new Pe(Ae.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(t,i,o,c){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([f,_])=>this.connection.Mo(t,_s(i,o),c,f,_)).catch(f=>{throw"FirebaseError"===f.name?(f.code===Ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new Pe(Ae.UNKNOWN,f.toString())})}Lo(t,i,o,c,f){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([_,A])=>this.connection.Lo(t,_s(i,o),c,_,A,f)).catch(_=>{throw"FirebaseError"===_.name?(_.code===Ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),_):new Pe(Ae.UNKNOWN,_.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class ku{constructor(t,i){this.asyncQueue=t,this.onlineStateHandler=i,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){0===this.S_&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(t){"Online"===this.state?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.C_("Offline")))}set(t){this.x_(),this.S_=0,"Online"===t&&(this.D_=!1),this.C_(t)}C_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}F_(t){const i=`Could not reach Cloud Firestore backend. ${t}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Xe(i),this.D_=!1):be("OnlineStateTracker",i)}x_(){null!==this.b_&&(this.b_.cancel(),this.b_=null)}}class gg{constructor(t,i,o,c,f){var _=this;this.localStore=t,this.datastore=i,this.asyncQueue=o,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=f,this.k_._o(A=>{o.enqueueAndForget((0,m.A)(function*(){var S;zo(_)&&(be("RemoteStore","Restarting streams for network reachability change."),yield(S=(0,m.A)(function*(Q){const re=Ze(Q);re.L_.add(4),yield Go(re),re.q_.set("Unknown"),re.L_.delete(4),yield fu(re)}),function L(Q){return S.apply(this,arguments)})(_))}))}),this.q_=new ku(o,c)}}function fu(u){return yc.apply(this,arguments)}function yc(){return(yc=(0,m.A)(function*(u){if(zo(u))for(const t of u.B_)yield t(!0)})).apply(this,arguments)}function Go(u){return pu.apply(this,arguments)}function pu(){return(pu=(0,m.A)(function*(u){for(const t of u.B_)yield t(!1)})).apply(this,arguments)}function li(u,t){const i=Ze(u);i.N_.has(t.targetId)||(i.N_.set(t.targetId,t),rd(i)?nd(i):Ic(i).r_()&&ed(i,t))}function vc(u,t){const i=Ze(u),o=Ic(i);i.N_.delete(t),o.r_()&&td(i,t),0===i.N_.size&&(o.r_()?o.o_():zo(i)&&i.q_.set("Unknown"))}function ed(u,t){if(u.Q_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(ot.min())>0){const i=u.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(i)}Ic(u).A_(t)}function td(u,t){u.Q_.xe(t),Ic(u).R_(t)}function nd(u){u.Q_=new Nr({getRemoteKeysForTarget:t=>u.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>u.N_.get(t)||null,tt:()=>u.datastore.serializer.databaseId}),Ic(u).start(),u.q_.v_()}function rd(u){return zo(u)&&!Ic(u).n_()&&u.N_.size>0}function zo(u){return 0===Ze(u).L_.size}function Ef(u){u.Q_=void 0}function If(u){return Ka.apply(this,arguments)}function Ka(){return(Ka=(0,m.A)(function*(u){u.q_.set("Online")})).apply(this,arguments)}function id(u){return al.apply(this,arguments)}function al(){return(al=(0,m.A)(function*(u){u.N_.forEach((t,i)=>{ed(u,t)})})).apply(this,arguments)}function mg(u,t){return mh.apply(this,arguments)}function mh(){return(mh=(0,m.A)(function*(u,t){Ef(u),rd(u)?(u.q_.M_(t),nd(u)):u.q_.set("Unknown")})).apply(this,arguments)}function _g(u,t,i){return sd.apply(this,arguments)}function sd(){return sd=(0,m.A)(function*(u,t,i){if(u.q_.set("Online"),t instanceof so&&2===t.state&&t.cause)try{yield(o=(0,m.A)(function*(f,_){const A=_.cause;for(const S of _.targetIds)f.N_.has(S)&&(yield f.remoteSyncer.rejectListen(S,A),f.N_.delete(S),f.Q_.removeTarget(S))}),function c(f,_){return o.apply(this,arguments)})(u,t)}catch(o){be("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),o),yield ul(u,o)}else if(t instanceof Cr?u.Q_.Ke(t):t instanceof yi?u.Q_.He(t):u.Q_.We(t),!i.isEqual(ot.min()))try{const o=yield gf(u.localStore);i.compareTo(o)>=0&&(yield function(f,_){const A=f.Q_.rt(_);return A.targetChanges.forEach((S,L)=>{if(S.resumeToken.approximateByteSize()>0){const Q=f.N_.get(L);Q&&f.N_.set(L,Q.withResumeToken(S.resumeToken,_))}}),A.targetMismatches.forEach((S,L)=>{const Q=f.N_.get(S);if(!Q)return;f.N_.set(S,Q.withResumeToken(cr.EMPTY_BYTE_STRING,Q.snapshotVersion)),td(f,S);const re=new ua(Q.target,S,L,Q.sequenceNumber);ed(f,re)}),f.remoteSyncer.applyRemoteEvent(A)}(u,i))}catch(o){be("RemoteStore","Failed to raise snapshot:",o),yield ul(u,o)}var o}),sd.apply(this,arguments)}function ul(u,t,i){return Ec.apply(this,arguments)}function Ec(){return(Ec=(0,m.A)(function*(u,t,i){if(!te(t))throw t;u.L_.add(1),yield Go(u),u.q_.set("Offline"),i||(i=()=>gf(u.localStore)),u.asyncQueue.enqueueRetryable((0,m.A)(function*(){be("RemoteStore","Retrying IndexedDB access"),yield i(),u.L_.delete(1),yield fu(u)}))})).apply(this,arguments)}function od(u,t){return t().catch(i=>ul(u,i,t))}function Vu(u){return wf.apply(this,arguments)}function wf(){return(wf=(0,m.A)(function*(u){const t=Ze(u),i=Li(t);let o=t.O_.length>0?t.O_[t.O_.length-1].batchId:-1;for(;ad(t);)try{const c=yield tl(t.localStore,o);if(null===c){0===t.O_.length&&i.o_();break}o=c.batchId,Tf(t,c)}catch(c){yield ul(t,c)}ai(t)&&cl(t)})).apply(this,arguments)}function ad(u){return zo(u)&&u.O_.length<10}function Tf(u,t){u.O_.push(t);const i=Li(u);i.r_()&&i.V_&&i.m_(t.mutations)}function ai(u){return zo(u)&&!Li(u).n_()&&u.O_.length>0}function cl(u){Li(u).start()}function _h(u){return Df.apply(this,arguments)}function Df(){return(Df=(0,m.A)(function*(u){Li(u).p_()})).apply(this,arguments)}function ll(u){return uo.apply(this,arguments)}function uo(){return(uo=(0,m.A)(function*(u){const t=Li(u);for(const i of u.O_)t.m_(i.mutations)})).apply(this,arguments)}function Af(u,t,i){return qa.apply(this,arguments)}function qa(){return(qa=(0,m.A)(function*(u,t,i){const o=u.O_.shift(),c=F.from(o,t,i);yield od(u,()=>u.remoteSyncer.applySuccessfulWrite(c)),yield Vu(u)})).apply(this,arguments)}function yg(u,t){return ma.apply(this,arguments)}function ma(){return ma=(0,m.A)(function*(u,t){var i;t&&Li(u).V_&&(yield(i=(0,m.A)(function*(c,f){if(Ir(A=f.code)&&A!==Ae.ABORTED){const _=c.O_.shift();Li(c).s_(),yield od(c,()=>c.remoteSyncer.rejectFailedWrite(_.batchId,f)),yield Vu(c)}var A}),function o(c,f){return i.apply(this,arguments)})(u,t)),ai(u)&&cl(u)}),ma.apply(this,arguments)}function ud(u,t){return Cf.apply(this,arguments)}function Cf(){return(Cf=(0,m.A)(function*(u,t){const i=Ze(u);i.asyncQueue.verifyOperationInProgress(),be("RemoteStore","RemoteStore received new credentials");const o=zo(i);i.L_.add(3),yield Go(i),o&&i.q_.set("Unknown"),yield i.remoteSyncer.handleCredentialChange(t),i.L_.delete(3),yield fu(i)})).apply(this,arguments)}function bf(u,t){return Sf.apply(this,arguments)}function Sf(){return(Sf=(0,m.A)(function*(u,t){const i=Ze(u);t?(i.L_.delete(2),yield fu(i)):t||(i.L_.add(2),yield Go(i),i.q_.set("Unknown"))})).apply(this,arguments)}function Ic(u){return u.K_||(u.K_=function(i,o,c){const f=Ze(i);return f.w_(),new yf(o,f.connection,f.authCredentials,f.appCheckCredentials,f.serializer,c)}(u.datastore,u.asyncQueue,{Eo:If.bind(null,u),Ro:id.bind(null,u),mo:mg.bind(null,u),d_:_g.bind(null,u)}),u.B_.push(function(){var t=(0,m.A)(function*(i){i?(u.K_.s_(),rd(u)?nd(u):u.q_.set("Unknown")):(yield u.K_.stop(),Ef(u))});return function(i){return t.apply(this,arguments)}}())),u.K_}function Li(u){return u.U_||(u.U_=function(i,o,c){const f=Ze(i);return f.w_(),new vf(o,f.connection,f.authCredentials,f.appCheckCredentials,f.serializer,c)}(u.datastore,u.asyncQueue,{Eo:()=>Promise.resolve(),Ro:_h.bind(null,u),mo:yg.bind(null,u),f_:ll.bind(null,u),g_:Af.bind(null,u)}),u.B_.push(function(){var t=(0,m.A)(function*(i){i?(u.U_.s_(),yield Vu(u)):(yield u.U_.stop(),u.O_.length>0&&(be("RemoteStore",`Stopping write stream with ${u.O_.length} pending writes`),u.O_=[]))});return function(i){return t.apply(this,arguments)}}())),u.U_}class dl{constructor(t,i,o,c,f){this.asyncQueue=t,this.timerId=i,this.targetTimeMs=o,this.op=c,this.removalCallback=f,this.deferred=new Jt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(_=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,i,o,c,f){const _=Date.now()+o,A=new dl(t,i,_,c,f);return A.start(o),A}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Pe(Ae.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function co(u,t){if(Xe("AsyncQueue",`${t}: ${u}`),te(u))return new Pe(Ae.UNAVAILABLE,`${t}: ${u}`);throw u}class _a{constructor(t){this.comparator=t?(i,o)=>t(i,o)||Ot.comparator(i.key,o.key):(i,o)=>Ot.comparator(i.key,o.key),this.keyedMap=Hr(),this.sortedSet=new Sn(this.comparator)}static emptySet(t){return new _a(t.comparator)}has(t){return null!=this.keyedMap.get(t)}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const i=this.keyedMap.get(t);return i?this.sortedSet.indexOf(i):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((i,o)=>(t(i),!1))}add(t){const i=this.delete(t.key);return i.copy(i.keyedMap.insert(t.key,t),i.sortedSet.insert(t,null))}delete(t){const i=this.get(t);return i?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(i)):this}isEqual(t){if(!(t instanceof _a)||this.size!==t.size)return!1;const i=this.sortedSet.getIterator(),o=t.sortedSet.getIterator();for(;i.hasNext();){const c=i.getNext().key,f=o.getNext().key;if(!c.isEqual(f))return!1}return!0}toString(){const t=[];return this.forEach(i=>{t.push(i.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"}copy(t,i){const o=new _a;return o.comparator=this.comparator,o.keyedMap=t,o.sortedSet=i,o}}class Wo{constructor(){this.W_=new Sn(Ot.comparator)}track(t){const i=t.doc.key,o=this.W_.get(i);o?0!==t.type&&3===o.type?this.W_=this.W_.insert(i,t):3===t.type&&1!==o.type?this.W_=this.W_.insert(i,{type:o.type,doc:t.doc}):2===t.type&&2===o.type?this.W_=this.W_.insert(i,{type:2,doc:t.doc}):2===t.type&&0===o.type?this.W_=this.W_.insert(i,{type:0,doc:t.doc}):1===t.type&&0===o.type?this.W_=this.W_.remove(i):1===t.type&&2===o.type?this.W_=this.W_.insert(i,{type:1,doc:o.doc}):0===t.type&&1===o.type?this.W_=this.W_.insert(i,{type:2,doc:t.doc}):wt():this.W_=this.W_.insert(i,t)}G_(){const t=[];return this.W_.inorderTraversal((i,o)=>{t.push(o)}),t}}class ya{constructor(t,i,o,c,f,_,A,S,L){this.query=t,this.docs=i,this.oldDocs=o,this.docChanges=c,this.mutatedKeys=f,this.fromCache=_,this.syncStateChanged=A,this.excludesMetadataChanges=S,this.hasCachedResults=L}static fromInitialDocuments(t,i,o,c,f){const _=[];return i.forEach(A=>{_.push({type:0,doc:A})}),new ya(t,i,_a.emptySet(i),_,o,c,!0,!1,f)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Zi(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const i=this.docChanges,o=t.docChanges;if(i.length!==o.length)return!1;for(let c=0;c<i.length;c++)if(i[c].type!==o[c].type||!i[c].doc.isEqual(o[c].doc))return!1;return!0}}class cd{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(t=>t.J_())}}class Ko{constructor(){this.queries=Rf(),this.onlineState="Unknown",this.Y_=new Set}terminate(){!function(i,o){const c=Ze(i),f=c.queries;c.queries=Rf(),f.forEach((_,A)=>{for(const S of A.j_)S.onError(o)})}(this,new Pe(Ae.ABORTED,"Firestore shutting down"))}}function Rf(){return new Ms(u=>Ws(u),Zi)}function Fu(u,t){return Lu.apply(this,arguments)}function Lu(){return(Lu=(0,m.A)(function*(u,t){const i=Ze(u);let o=3;const c=t.query;let f=i.queries.get(c);f?!f.H_()&&t.J_()&&(o=2):(f=new cd,o=t.J_()?0:1);try{switch(o){case 0:f.z_=yield i.onListen(c,!0);break;case 1:f.z_=yield i.onListen(c,!1);break;case 2:yield i.onFirstRemoteStoreListen(c)}}catch(_){const A=co(_,`Initialization of query '${es(t.query)}' failed`);return void t.onError(A)}i.queries.set(c,f),f.j_.push(t),t.Z_(i.onlineState),f.z_&&t.X_(f.z_)&&d(i)})).apply(this,arguments)}function yh(u,t){return ld.apply(this,arguments)}function ld(){return(ld=(0,m.A)(function*(u,t){const i=Ze(u),o=t.query;let c=3;const f=i.queries.get(o);if(f){const _=f.j_.indexOf(t);_>=0&&(f.j_.splice(_,1),0===f.j_.length?c=t.J_()?0:1:!f.H_()&&t.J_()&&(c=2))}switch(c){case 0:return i.queries.delete(o),i.onUnlisten(o,!0);case 1:return i.queries.delete(o),i.onUnlisten(o,!1);case 2:return i.onLastRemoteStoreUnlisten(o);default:return}})).apply(this,arguments)}function Pf(u,t){const i=Ze(u);let o=!1;for(const c of t){const _=i.queries.get(c.query);if(_){for(const A of _.j_)A.X_(c)&&(o=!0);_.z_=c}}o&&d(i)}function y(u,t,i){const o=Ze(u),c=o.queries.get(t);if(c)for(const f of c.j_)f.onError(i);o.queries.delete(t)}function d(u){u.Y_.forEach(t=>{t.next()})}var h,I;(I=h||(h={})).ea="default",I.Cache="cache";class N{constructor(t,i,o){this.query=t,this.ta=i,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=o||{}}X_(t){if(!this.options.includeMetadataChanges){const o=[];for(const c of t.docChanges)3!==c.type&&o.push(c);t=new ya(t.query,t.docs,t.oldDocs,o,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let i=!1;return this.na?this.ia(t)&&(this.ta.next(t),i=!0):this.sa(t,this.onlineState)&&(this.oa(t),i=!0),this.ra=t,i}onError(t){this.ta.error(t)}Z_(t){this.onlineState=t;let i=!1;return this.ra&&!this.na&&this.sa(this.ra,t)&&(this.oa(this.ra),i=!0),i}sa(t,i){return!t.fromCache||!this.J_()||(!this.options._a||!("Offline"!==i))&&(!t.docs.isEmpty()||t.hasCachedResults||"Offline"===i)}ia(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.ra&&this.ra.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges}oa(t){t=ya.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.na=!0,this.ta.next(t)}J_(){return this.options.source!==h.Cache}}class K{constructor(t,i){this.aa=t,this.byteLength=i}ua(){return"metadata"in this.aa}}class me{constructor(t){this.serializer=t}Es(t){return ns(this.serializer,t)}ds(t){return t.metadata.exists?ou(this.serializer,t.document,!1):ir.newNoDocument(this.Es(t.metadata.name),this.As(t.metadata.readTime))}As(t){return Xr(t)}}class Le{constructor(t,i,o){this.ca=t,this.localStore=i,this.serializer=o,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Et(t)}la(t){this.progress.bytesLoaded+=t.byteLength;let i=this.progress.documentsLoaded;if(t.aa.namedQuery)this.queries.push(t.aa.namedQuery);else if(t.aa.documentMetadata){this.documents.push({metadata:t.aa.documentMetadata}),t.aa.documentMetadata.exists||++i;const o=Xt.fromString(t.aa.documentMetadata.name);this.collectionGroups.add(o.get(o.length-2))}else t.aa.document&&(this.documents[this.documents.length-1].document=t.aa.document,++i);return i!==this.progress.documentsLoaded?(this.progress.documentsLoaded=i,Object.assign({},this.progress)):null}ha(t){const i=new Map,o=new me(this.serializer);for(const c of t)if(c.metadata.queries){const f=o.Es(c.metadata.name);for(const _ of c.metadata.queries){const A=(i.get(_)||Zn()).add(f);i.set(_,A)}}return i}complete(){var t=this;return(0,m.A)(function*(){const i=yield function Kl(u,t,i,o){return ql.apply(this,arguments)}(t.localStore,new me(t.serializer),t.documents,t.ca.id),o=t.ha(t.documents);for(const c of t.queries)yield hg(t.localStore,c,o.get(c.name));return t.progress.taskState="Success",{progress:t.progress,Pa:t.collectionGroups,Ia:i}})()}}function Et(u){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:u.totalDocuments,totalBytes:u.totalBytes}}class Bt{constructor(t){this.key=t}}class hn{constructor(t){this.key=t}}class fn{constructor(t,i){this.query=t,this.Ta=i,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Zn(),this.mutatedKeys=Zn(),this.Aa=eu(t),this.Ra=new _a(this.Aa)}get Va(){return this.Ta}ma(t,i){const o=i?i.fa:new Wo,c=i?i.Ra:this.Ra;let f=i?i.mutatedKeys:this.mutatedKeys,_=c,A=!1;const S="F"===this.query.limitType&&c.size===this.query.limit?c.last():null,L="L"===this.query.limitType&&c.size===this.query.limit?c.first():null;if(t.inorderTraversal((Q,re)=>{const we=c.get(Q),Ye=ko(this.query,re)?re:null,Rt=!!we&&this.mutatedKeys.has(we.key),jt=!!Ye&&(Ye.hasLocalMutations||this.mutatedKeys.has(Ye.key)&&Ye.hasCommittedMutations);let Vt=!1;we&&Ye?we.data.isEqual(Ye.data)?Rt!==jt&&(o.track({type:3,doc:Ye}),Vt=!0):this.ga(we,Ye)||(o.track({type:2,doc:Ye}),Vt=!0,(S&&this.Aa(Ye,S)>0||L&&this.Aa(Ye,L)<0)&&(A=!0)):!we&&Ye?(o.track({type:0,doc:Ye}),Vt=!0):we&&!Ye&&(o.track({type:1,doc:we}),Vt=!0,(S||L)&&(A=!0)),Vt&&(Ye?(_=_.add(Ye),f=jt?f.add(Q):f.delete(Q)):(_=_.delete(Q),f=f.delete(Q)))}),null!==this.query.limit)for(;_.size>this.query.limit;){const Q="F"===this.query.limitType?_.last():_.first();_=_.delete(Q.key),f=f.delete(Q.key),o.track({type:1,doc:Q})}return{Ra:_,fa:o,ns:A,mutatedKeys:f}}ga(t,i){return t.hasLocalMutations&&i.hasCommittedMutations&&!i.hasLocalMutations}applyChanges(t,i,o,c){const f=this.Ra;this.Ra=t.Ra,this.mutatedKeys=t.mutatedKeys;const _=t.fa.G_();_.sort((Q,re)=>function(Ye,Rt){const jt=Vt=>{switch(Vt){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return wt()}};return jt(Ye)-jt(Rt)}(Q.type,re.type)||this.Aa(Q.doc,re.doc)),this.pa(o),c=null!=c&&c;const A=i&&!c?this.ya():[],S=0===this.da.size&&this.current&&!c?1:0,L=S!==this.Ea;return this.Ea=S,0!==_.length||L?{snapshot:new ya(this.query,t.Ra,f,_,t.mutatedKeys,0===S,L,!1,!!o&&o.resumeToken.approximateByteSize()>0),wa:A}:{wa:A}}Z_(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Wo,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(t){return!this.Ta.has(t)&&!!this.Ra.has(t)&&!this.Ra.get(t).hasLocalMutations}pa(t){t&&(t.addedDocuments.forEach(i=>this.Ta=this.Ta.add(i)),t.modifiedDocuments.forEach(i=>{}),t.removedDocuments.forEach(i=>this.Ta=this.Ta.delete(i)),this.current=t.current)}ya(){if(!this.current)return[];const t=this.da;this.da=Zn(),this.Ra.forEach(o=>{this.Sa(o.key)&&(this.da=this.da.add(o.key))});const i=[];return t.forEach(o=>{this.da.has(o)||i.push(new hn(o))}),this.da.forEach(o=>{t.has(o)||i.push(new Bt(o))}),i}ba(t){this.Ta=t.Ts,this.da=Zn();const i=this.ma(t.documents);return this.applyChanges(i,!0)}Da(){return ya.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,0===this.Ea,this.hasCachedResults)}}class di{constructor(t,i,o){this.query=t,this.targetId=i,this.view=o}}class ui{constructor(t){this.key=t,this.va=!1}}class gu{constructor(t,i,o,c,f,_){this.localStore=t,this.remoteStore=i,this.eventManager=o,this.sharedClientState=c,this.currentUser=f,this.maxConcurrentLimboResolutions=_,this.Ca={},this.Fa=new Ms(A=>Ws(A),Zi),this.Ma=new Map,this.xa=new Set,this.Oa=new Sn(Ot.comparator),this.Na=new Map,this.La=new $l,this.Ba={},this.ka=new Map,this.qa=Ba.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return!0===this.Qa}}function vh(u,t){return wc.apply(this,arguments)}function wc(){return(wc=(0,m.A)(function*(u,t,i=!0){const o=Cc(u);let c;const f=o.Fa.get(t);return f?(o.sharedClientState.addLocalQueryTarget(f.targetId),c=f.view.Da()):c=yield dd(o,t,i,!0),c})).apply(this,arguments)}function Mf(u,t){return hl.apply(this,arguments)}function hl(){return(hl=(0,m.A)(function*(u,t){const i=Cc(u);yield dd(i,t,!0,!1)})).apply(this,arguments)}function dd(u,t,i,o){return fl.apply(this,arguments)}function fl(){return(fl=(0,m.A)(function*(u,t,i,o){const c=yield Ha(u.localStore,Gt(t)),f=c.targetId,_=u.sharedClientState.addLocalQueryTarget(f,i);let A;return o&&(A=yield hd(u,t,f,"current"===_,c.resumeToken)),u.isPrimaryClient&&i&&li(u.remoteStore,c),A})).apply(this,arguments)}function hd(u,t,i,o,c){return Tc.apply(this,arguments)}function Tc(){return Tc=(0,m.A)(function*(u,t,i,o,c){u.Ka=(re,we,Ye)=>{return(Rt=(0,m.A)(function*(Vt,vn,Rn,Tn){let nr=vn.view.ma(Rn);nr.ns&&(nr=yield dh(Vt.localStore,vn.query,!1).then(({documents:_e})=>vn.view.ma(_e,nr)));const Ur=Tn&&Tn.targetChanges.get(vn.targetId),hr=Tn&&null!=Tn.targetMismatches.get(vn.targetId),xe=vn.view.applyChanges(nr,Vt.isPrimaryClient,Ur,hr);return s_(Vt,vn.targetId,xe.wa),xe.snapshot}),function jt(Vt,vn,Rn,Tn){return Rt.apply(this,arguments)})(u,re,we,Ye);var Rt};const f=yield dh(u.localStore,t,!0),_=new fn(t,f.Ts),A=_.ma(f.documents),S=Tr.createSynthesizedTargetChangeForCurrentChange(i,o&&"Offline"!==u.onlineState,c),L=_.applyChanges(A,u.isPrimaryClient,S);s_(u,i,L.wa);const Q=new di(t,i,_);return u.Fa.set(t,Q),u.Ma.has(i)?u.Ma.get(i).push(t):u.Ma.set(i,[t]),L.snapshot}),Tc.apply(this,arguments)}function Nf(u,t,i){return Eh.apply(this,arguments)}function Eh(){return(Eh=(0,m.A)(function*(u,t,i){const o=Ze(u),c=o.Fa.get(t),f=o.Ma.get(c.targetId);if(f.length>1)return o.Ma.set(c.targetId,f.filter(_=>!Zi(_,t))),void o.Fa.delete(t);o.isPrimaryClient?(o.sharedClientState.removeLocalQueryTarget(c.targetId),o.sharedClientState.isActiveQueryTarget(c.targetId)||(yield Ga(o.localStore,c.targetId,!1).then(()=>{o.sharedClientState.clearQueryState(c.targetId),i&&vc(o.remoteStore,c.targetId),pd(o,c.targetId)}).catch(In))):(pd(o,c.targetId),yield Ga(o.localStore,c.targetId,!0))})).apply(this,arguments)}function Ih(u,t){return wh.apply(this,arguments)}function wh(){return(wh=(0,m.A)(function*(u,t){const i=Ze(u),o=i.Fa.get(t),c=i.Ma.get(o.targetId);i.isPrimaryClient&&1===c.length&&(i.sharedClientState.removeLocalQueryTarget(o.targetId),vc(i.remoteStore,o.targetId))})).apply(this,arguments)}function xf(){return(xf=(0,m.A)(function*(u,t,i){const o=md(u);try{const c=yield function(_,A){const S=Ze(_),L=ht.now(),Q=A.reduce((Ye,Rt)=>Ye.add(Rt.key),Zn());let re,we;return S.persistence.runTransaction("Locally write mutations","readwrite",Ye=>{let Rt=Ti(),jt=Zn();return S.cs.getEntries(Ye,Q).next(Vt=>{Rt=Vt,Rt.forEach((vn,Rn)=>{Rn.isValidDocument()||(jt=jt.add(vn))})}).next(()=>S.localDocuments.getOverlayedDocuments(Ye,Rt)).next(Vt=>{re=Vt;const vn=[];for(const Rn of A){const Tn=Tu(Rn,re.get(Rn.key).overlayedDocument);null!=Tn&&vn.push(new xs(Rn.key,Tn,No(Tn.value.mapValue),Er.exists(!0)))}return S.mutationQueue.addMutationBatch(Ye,L,vn,A)}).next(Vt=>{we=Vt;const vn=Vt.applyToLocalDocumentSet(re,jt);return S.documentOverlayCache.saveOverlays(Ye,Vt.batchId,vn)})}).then(()=>({batchId:we.batchId,changes:ti(re)}))}(o.localStore,t);o.sharedClientState.addPendingMutation(c.batchId),function(_,A,S){let L=_.Ba[_.currentUser.toKey()];L||(L=new Sn(gt)),L=L.insert(A,S),_.Ba[_.currentUser.toKey()]=L}(o,c.batchId,i),yield Qa(o,c.changes),yield Vu(o.remoteStore)}catch(c){const f=co(c,"Failed to persist write");i.reject(f)}})).apply(this,arguments)}function vg(u,t){return fd.apply(this,arguments)}function fd(){return(fd=(0,m.A)(function*(u,t){const i=Ze(u);try{const o=yield function pc(u,t){const i=Ze(u),o=t.snapshotVersion;let c=i.os;return i.persistence.runTransaction("Apply remote event","readwrite-primary",f=>{const _=i.cs.newChangeBuffer({trackRemovals:!0});c=i.os;const A=[];t.targetChanges.forEach((Q,re)=>{const we=c.get(re);if(!we)return;A.push(i.Ur.removeMatchingKeys(f,Q.removedDocuments,re).next(()=>i.Ur.addMatchingKeys(f,Q.addedDocuments,re)));let Ye=we.withSequenceNumber(f.currentSequenceNumber);var jt,Vt,vn;null!==t.targetMismatches.get(re)?Ye=Ye.withResumeToken(cr.EMPTY_BYTE_STRING,ot.min()).withLastLimboFreeSnapshotVersion(ot.min()):Q.resumeToken.approximateByteSize()>0&&(Ye=Ye.withResumeToken(Q.resumeToken,o)),c=c.insert(re,Ye),Vt=Ye,vn=Q,(0===(jt=we).resumeToken.approximateByteSize()||Vt.snapshotVersion.toMicroseconds()-jt.snapshotVersion.toMicroseconds()>=3e8||vn.addedDocuments.size+vn.modifiedDocuments.size+vn.removedDocuments.size>0)&&A.push(i.Ur.updateTargetData(f,Ye))});let S=Ti(),L=Zn();if(t.documentUpdates.forEach(Q=>{t.resolvedLimboDocuments.has(Q)&&A.push(i.persistence.referenceDelegate.updateLimboDocument(f,Q))}),A.push(el(f,_,t.documentUpdates).next(Q=>{S=Q.Ps,L=Q.Is})),!o.isEqual(ot.min())){const Q=i.Ur.getLastRemoteSnapshotVersion(f).next(re=>i.Ur.setTargetsMetadata(f,f.currentSequenceNumber,o));A.push(Q)}return Ie.waitFor(A).next(()=>_.apply(f)).next(()=>i.localDocuments.getLocalViewOfDocuments(f,S,L)).next(()=>S)}).then(f=>(i.os=c,f))}(i.localStore,t);t.targetChanges.forEach((c,f)=>{const _=i.Na.get(f);_&&(Ct(c.addedDocuments.size+c.modifiedDocuments.size+c.removedDocuments.size<=1),c.addedDocuments.size>0?_.va=!0:c.modifiedDocuments.size>0?Ct(_.va):c.removedDocuments.size>0&&(Ct(_.va),_.va=!1))}),yield Qa(i,o,t)}catch(o){yield In(o)}})).apply(this,arguments)}function Eg(u,t,i){const o=Ze(u);if(o.isPrimaryClient&&0===i||!o.isPrimaryClient&&1===i){const c=[];o.Fa.forEach((f,_)=>{const A=_.view.Z_(t);A.snapshot&&c.push(A.snapshot)}),function(_,A){const S=Ze(_);S.onlineState=A;let L=!1;S.queries.forEach((Q,re)=>{for(const we of re.j_)we.Z_(A)&&(L=!0)}),L&&d(S)}(o.eventManager,t),c.length&&o.Ca.d_(c),o.onlineState=t,o.isPrimaryClient&&o.sharedClientState.setOnlineState(t)}}function t_(u,t,i){return Of.apply(this,arguments)}function Of(){return(Of=(0,m.A)(function*(u,t,i){const o=Ze(u);o.sharedClientState.updateQueryState(t,"rejected",i);const c=o.Na.get(t),f=c&&c.key;if(f){let _=new Sn(Ot.comparator);_=_.insert(f,ir.newNoDocument(f,ot.min()));const A=Zn().add(f),S=new dr(ot.min(),new Map,new Sn(gt),_,A);yield vg(o,S),o.Oa=o.Oa.remove(f),o.Na.delete(t),Ff(o)}else yield Ga(o.localStore,t,!1).then(()=>pd(o,t,i)).catch(In)})).apply(this,arguments)}function n_(u,t){return Ig.apply(this,arguments)}function Ig(){return(Ig=(0,m.A)(function*(u,t){const i=Ze(u),o=t.batch.batchId;try{const c=yield function Co(u,t){const i=Ze(u);return i.persistence.runTransaction("Acknowledge batch","readwrite-primary",o=>{const c=t.batch.keys(),f=i.cs.newChangeBuffer({trackRemovals:!0});return function(A,S,L,Q){const re=L.batch,we=re.keys();let Ye=Ie.resolve();return we.forEach(Rt=>{Ye=Ye.next(()=>Q.getEntry(S,Rt)).next(jt=>{const Vt=L.docVersions.get(Rt);Ct(null!==Vt),jt.version.compareTo(Vt)<0&&(re.applyToRemoteDocument(jt,L),jt.isValidDocument()&&(jt.setReadTime(L.commitVersion),Q.addEntry(jt)))})}),Ye.next(()=>A.mutationQueue.removeMutationBatch(S,re))}(i,o,t,f).next(()=>f.apply(o)).next(()=>i.mutationQueue.performConsistencyCheck(o)).next(()=>i.documentOverlayCache.removeOverlaysForBatchId(o,c,t.batch.batchId)).next(()=>i.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(o,function(A){let S=Zn();for(let L=0;L<A.mutationResults.length;++L)A.mutationResults[L].transformResults.length>0&&(S=S.add(A.batch.mutations[L].key));return S}(t))).next(()=>i.localDocuments.getDocuments(o,c))})}(i.localStore,t);Vf(i,o,null),r_(i,o),i.sharedClientState.updateMutationState(o,"acknowledged"),yield Qa(i,c)}catch(c){yield In(c)}})).apply(this,arguments)}function _v(u,t,i){return wg.apply(this,arguments)}function wg(){return(wg=(0,m.A)(function*(u,t,i){const o=Ze(u);try{const c=yield function(_,A){const S=Ze(_);return S.persistence.runTransaction("Reject batch","readwrite-primary",L=>{let Q;return S.mutationQueue.lookupMutationBatch(L,A).next(re=>(Ct(null!==re),Q=re.keys(),S.mutationQueue.removeMutationBatch(L,re))).next(()=>S.mutationQueue.performConsistencyCheck(L)).next(()=>S.documentOverlayCache.removeOverlaysForBatchId(L,Q,A)).next(()=>S.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(L,Q)).next(()=>S.localDocuments.getDocuments(L,Q))})}(o.localStore,t);Vf(o,t,i),r_(o,t),o.sharedClientState.updateMutationState(t,"rejected",i),yield Qa(o,c)}catch(c){yield In(c)}})).apply(this,arguments)}function kf(){return(kf=(0,m.A)(function*(u,t){const i=Ze(u);zo(i.remoteStore)||be("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const o=yield function(_){const A=Ze(_);return A.persistence.runTransaction("Get highest unacknowledged batch id","readonly",S=>A.mutationQueue.getHighestUnacknowledgedBatchId(S))}(i.localStore);if(-1===o)return void t.resolve();const c=i.ka.get(o)||[];c.push(t),i.ka.set(o,c)}catch(o){const c=co(o,"Initialization of waitForPendingWrites() operation failed");t.reject(c)}})).apply(this,arguments)}function r_(u,t){(u.ka.get(t)||[]).forEach(i=>{i.resolve()}),u.ka.delete(t)}function Vf(u,t,i){const o=Ze(u);let c=o.Ba[o.currentUser.toKey()];if(c){const f=c.get(t);f&&(i?f.reject(i):f.resolve(),c=c.remove(t)),o.Ba[o.currentUser.toKey()]=c}}function pd(u,t,i=null){u.sharedClientState.removeLocalQueryTarget(t);for(const o of u.Ma.get(t))u.Fa.delete(o),i&&u.Ca.$a(o,i);u.Ma.delete(t),u.isPrimaryClient&&u.La.gr(t).forEach(o=>{u.La.containsKey(o)||i_(u,o)})}function i_(u,t){u.xa.delete(t.path.canonicalString());const i=u.Oa.get(t);null!==i&&(vc(u.remoteStore,i),u.Oa=u.Oa.remove(t),u.Na.delete(i),Ff(u))}function s_(u,t,i){for(const o of i)o instanceof Bt?(u.La.addReference(o.key,t),vv(u,o)):o instanceof hn?(be("SyncEngine","Document no longer in limbo: "+o.key),u.La.removeReference(o.key,t),u.La.containsKey(o.key)||i_(u,o.key)):wt()}function vv(u,t){const i=t.key,o=i.path.canonicalString();u.Oa.get(i)||u.xa.has(o)||(be("SyncEngine","New document in limbo: "+i),u.xa.add(o),Ff(u))}function Ff(u){for(;u.xa.size>0&&u.Oa.size<u.maxConcurrentLimboResolutions;){const t=u.xa.values().next().value;u.xa.delete(t);const i=new Ot(Xt.fromString(t)),o=u.qa.next();u.Na.set(o,new ui(i)),u.Oa=u.Oa.insert(i,o),li(u.remoteStore,new ua(Gt(j(i.path)),o,"TargetPurposeLimboResolution",ge.oe))}}function Qa(u,t,i){return Tg.apply(this,arguments)}function Tg(){return Tg=(0,m.A)(function*(u,t,i){const o=Ze(u),c=[],f=[],_=[];var A;o.Fa.isEmpty()||(o.Fa.forEach((A,S)=>{_.push(o.Ka(S,t,i).then(L=>{var Q;if((L||i)&&o.isPrimaryClient){const re=L?!L.fromCache:null===(Q=i?.targetChanges.get(S.targetId))||void 0===Q?void 0:Q.current;o.sharedClientState.updateQueryState(S.targetId,re?"current":"not-current")}if(L){c.push(L);const re=zl.Wi(S.targetId,L);f.push(re)}}))}),yield Promise.all(_),o.Ca.d_(c),yield(A=(0,m.A)(function*(L,Q){const re=Ze(L);try{yield re.persistence.runTransaction("notifyLocalViewChanges","readwrite",we=>Ie.forEach(Q,Ye=>Ie.forEach(Ye.$i,Rt=>re.persistence.referenceDelegate.addReference(we,Ye.targetId,Rt)).next(()=>Ie.forEach(Ye.Ui,Rt=>re.persistence.referenceDelegate.removeReference(we,Ye.targetId,Rt)))))}catch(we){if(!te(we))throw we;be("LocalStore","Failed to update sequence numbers: "+we)}for(const we of Q){const Ye=we.targetId;if(!we.fromCache){const Rt=re.os.get(Ye),Vt=Rt.withLastLimboFreeSnapshotVersion(Rt.snapshotVersion);re.os=re.os.insert(Ye,Vt)}}}),function S(L,Q){return A.apply(this,arguments)})(o.localStore,f))}),Tg.apply(this,arguments)}function Dc(u,t){return Lf.apply(this,arguments)}function Lf(){return(Lf=(0,m.A)(function*(u,t){const i=Ze(u);if(!i.currentUser.isEqual(t)){be("SyncEngine","User change. New user:",t.toKey());const o=yield lh(i.localStore,t);i.currentUser=t,(f=i).ka.forEach(A=>{A.forEach(S=>{S.reject(new Pe(Ae.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),f.ka.clear(),i.sharedClientState.handleUserChange(t,o.removedBatchIds,o.addedBatchIds),yield Qa(i,o.hs)}var f})).apply(this,arguments)}function Ev(u,t){const i=Ze(u),o=i.Na.get(t);if(o&&o.va)return Zn().add(o.key);{let c=Zn();const f=i.Ma.get(t);if(!f)return c;for(const _ of f){const A=i.Fa.get(_);c=c.unionWith(A.view.Va)}return c}}function o_(u,t){return Th.apply(this,arguments)}function Th(){return(Th=(0,m.A)(function*(u,t){const i=Ze(u),o=yield dh(i.localStore,t.query,!0),c=t.view.ba(o);return i.isPrimaryClient&&s_(i,t.targetId,c.wa),c})).apply(this,arguments)}function RI(u,t){return a_.apply(this,arguments)}function a_(){return(a_=(0,m.A)(function*(u,t){const i=Ze(u);return xu(i.localStore,t).then(o=>Qa(i,o))})).apply(this,arguments)}function Iv(u,t,i,o){return Dg.apply(this,arguments)}function Dg(){return(Dg=(0,m.A)(function*(u,t,i,o){const c=Ze(u),f=yield function(A,S){const L=Ze(A),Q=Ze(L.mutationQueue);return L.persistence.runTransaction("Lookup mutation documents","readonly",re=>Q.Mn(re,S).next(we=>we?L.localDocuments.getDocuments(re,we):Ie.resolve(null)))}(c.localStore,t);var S;null!==f?("pending"===i?yield Vu(c.remoteStore):"acknowledged"===i||"rejected"===i?(Vf(c,t,o||null),r_(c,t),S=t,Ze(Ze(c.localStore).mutationQueue).On(S)):wt(),yield Qa(c,f)):be("SyncEngine","Cannot apply mutation batch with id: "+t)})).apply(this,arguments)}function u_(){return(u_=(0,m.A)(function*(u,t){const i=Ze(u);if(Cc(i),md(i),!0===t&&!0!==i.Qa){const o=i.sharedClientState.getAllActiveQueryTargets(),c=yield Tv(i,o.toArray());i.Qa=!0,yield bf(i.remoteStore,!0);for(const f of c)li(i.remoteStore,f)}else if(!1===t&&!1!==i.Qa){const o=[];let c=Promise.resolve();i.Ma.forEach((f,_)=>{i.sharedClientState.isLocalQueryTarget(_)?o.push(_):c=c.then(()=>(pd(i,_),Ga(i.localStore,_,!0))),vc(i.remoteStore,_)}),yield c,yield Tv(i,o),function(_){const A=Ze(_);A.Na.forEach((S,L)=>{vc(A.remoteStore,L)}),A.La.pr(),A.Na=new Map,A.Oa=new Sn(Ot.comparator)}(i),i.Qa=!1,yield bf(i.remoteStore,!1)}})).apply(this,arguments)}function Tv(u,t,i){return gd.apply(this,arguments)}function gd(){return(gd=(0,m.A)(function*(u,t,i){const o=Ze(u),c=[],f=[];for(const _ of t){let A;const S=o.Ma.get(_);if(S&&0!==S.length){A=yield Ha(o.localStore,Gt(S[0]));for(const L of S){const Q=o.Fa.get(L),re=yield o_(o,Q);re.snapshot&&f.push(re.snapshot)}}else{const L=yield za(o.localStore,_);A=yield Ha(o.localStore,L),yield hd(o,c_(L),_,!1,A.resumeToken)}c.push(A)}return o.Ca.d_(f),c})).apply(this,arguments)}function c_(u){return U(u.path,u.collectionGroup,u.orderBy,u.filters,u.limit,"F",u.startAt,u.endAt)}function Ag(u){return i=Ze(u).localStore,Ze(Ze(i).persistence).Qi();var i}function Cg(u,t,i,o){return Ac.apply(this,arguments)}function Ac(){return(Ac=(0,m.A)(function*(u,t,i,o){const c=Ze(u);if(c.Qa)return void be("SyncEngine","Ignoring unexpected query state notification.");const f=c.Ma.get(t);if(f&&f.length>0)switch(i){case"current":case"not-current":{const _=yield xu(c.localStore,ec(f[0])),A=dr.createSynthesizedRemoteEventForCurrentChange(t,"current"===i,cr.EMPTY_BYTE_STRING);yield Qa(c,_,A);break}case"rejected":yield Ga(c.localStore,t,!0),pd(c,t,o);break;default:wt()}})).apply(this,arguments)}function bg(u,t,i){return Dh.apply(this,arguments)}function Dh(){return(Dh=(0,m.A)(function*(u,t,i){const o=Cc(u);if(o.Qa){for(const c of t){if(o.Ma.has(c)&&o.sharedClientState.isActiveQueryTarget(c)){be("SyncEngine","Adding an already active target "+c);continue}const f=yield za(o.localStore,c),_=yield Ha(o.localStore,f);yield hd(o,c_(f),_.targetId,!1,_.resumeToken),li(o.remoteStore,_)}for(const c of i)o.Ma.has(c)&&(yield Ga(o.localStore,c,!1).then(()=>{vc(o.remoteStore,c),pd(o,c)}).catch(In))}})).apply(this,arguments)}function Cc(u){const t=Ze(u);return t.remoteStore.remoteSyncer.applyRemoteEvent=vg.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Ev.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=t_.bind(null,t),t.Ca.d_=Pf.bind(null,t.eventManager),t.Ca.$a=y.bind(null,t.eventManager),t}function md(u){const t=Ze(u);return t.remoteStore.remoteSyncer.applySuccessfulWrite=n_.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=_v.bind(null,t),t}let bc=(()=>{class u{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(i){var o=this;return(0,m.A)(function*(){o.serializer=mc(i.databaseInfo.databaseId),o.sharedClientState=o.Wa(i),o.persistence=o.Ga(i),yield o.persistence.start(),o.localStore=o.za(i),o.gcScheduler=o.ja(i,o.localStore),o.indexBackfillerScheduler=o.Ha(i,o.localStore)})()}ja(i,o){return null}Ha(i,o){return null}za(i){return ch(this.persistence,new pf,i.initialUser,this.serializer)}Ga(i){return new Gl(Xc.Zr,this.serializer)}Wa(i){return new fh}terminate(){var i=this;return(0,m.A)(function*(){var o,c;null===(o=i.gcScheduler)||void 0===o||o.stop(),null===(c=i.indexBackfillerScheduler)||void 0===c||c.stop(),i.sharedClientState.shutdown(),yield i.persistence.shutdown()})()}}return u.provider={build:()=>new u},u})();class yd extends bc{constructor(t,i,o){super(),this.Ja=t,this.cacheSizeBytes=i,this.forceOwnership=o,this.kind="persistent",this.synchronizeTabs=!1}initialize(t){var i=()=>super.initialize,o=this;return(0,m.A)(function*(){yield i().call(o,t),yield o.Ja.initialize(o,t),yield md(o.Ja.syncEngine),yield Vu(o.Ja.remoteStore),yield o.persistence.yi(()=>(o.gcScheduler&&!o.gcScheduler.started&&o.gcScheduler.start(),o.indexBackfillerScheduler&&!o.indexBackfillerScheduler.started&&o.indexBackfillerScheduler.start(),Promise.resolve()))})()}za(t){return ch(this.persistence,new pf,t.initialUser,this.serializer)}ja(t,i){return new nh(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue,i)}Ha(t,i){const o=new ue(i,this.persistence);return new ie(t.asyncQueue,o)}Ga(t){const i=Yr(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),o=void 0!==this.cacheSizeBytes?_n.withCacheSize(this.cacheSizeBytes):_n.DEFAULT;return new uh(this.synchronizeTabs,i,t.clientId,o,t.asyncQueue,gc(),Jl(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(t){return new fh}}class Dv extends yd{constructor(t,i){super(t,i,!1),this.Ja=t,this.cacheSizeBytes=i,this.synchronizeTabs=!0}initialize(t){var i=()=>super.initialize,o=this;return(0,m.A)(function*(){yield i().call(o,t);const c=o.Ja.syncEngine;o.sharedClientState instanceof mf&&(o.sharedClientState.syncEngine={no:Iv.bind(null,c),ro:Cg.bind(null,c),io:bg.bind(null,c),Qi:Ag.bind(null,c),eo:RI.bind(null,c)},yield o.sharedClientState.start()),yield o.persistence.yi(function(){var f=(0,m.A)(function*(_){yield function wv(u,t){return u_.apply(this,arguments)}(o.Ja.syncEngine,_),o.gcScheduler&&(_&&!o.gcScheduler.started?o.gcScheduler.start():_||o.gcScheduler.stop()),o.indexBackfillerScheduler&&(_&&!o.indexBackfillerScheduler.started?o.indexBackfillerScheduler.start():_||o.indexBackfillerScheduler.stop())});return function(_){return f.apply(this,arguments)}}())})()}Wa(t){const i=gc();if(!mf.D(i))throw new Pe(Ae.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const o=Yr(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new mf(i,t.asyncQueue,o,t.clientId,t.initialUser)}}let Sc=(()=>{class u{initialize(i,o){var c=this;return(0,m.A)(function*(){c.localStore||(c.localStore=i.localStore,c.sharedClientState=i.sharedClientState,c.datastore=c.createDatastore(o),c.remoteStore=c.createRemoteStore(o),c.eventManager=c.createEventManager(o),c.syncEngine=c.createSyncEngine(o,!i.synchronizeTabs),c.sharedClientState.onlineStateHandler=f=>Eg(c.syncEngine,f,1),c.remoteStore.remoteSyncer.handleCredentialChange=Dc.bind(null,c.syncEngine),yield bf(c.remoteStore,c.syncEngine.isPrimaryClient))})()}createEventManager(i){return new Ko}createDatastore(i){const o=mc(i.databaseInfo.databaseId),c=new Yl(i.databaseInfo);return new _c(i.authCredentials,i.appCheckCredentials,c,o)}createRemoteStore(i){return c=this.localStore,f=this.datastore,_=i.asyncQueue,A=o=>Eg(this.syncEngine,o,0),S=_f.D()?new _f:new Ql,new gg(c,f,_,A,S);var c,f,_,A,S}createSyncEngine(i,o){return function(f,_,A,S,L,Q,re){const we=new gu(f,_,A,S,L,Q);return re&&(we.Qa=!0),we}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,i.initialUser,i.maxConcurrentLimboResolutions,o)}terminate(){var i=this;return(0,m.A)(function*(){var o,c,f;yield(f=(0,m.A)(function*(A){const S=Ze(A);be("RemoteStore","RemoteStore shutting down."),S.L_.add(5),yield Go(S),S.k_.shutdown(),S.q_.set("Unknown")}),function _(A){return f.apply(this,arguments)})(i.remoteStore),null===(o=i.datastore)||void 0===o||o.terminate(),null===(c=i.eventManager)||void 0===c||c.terminate()})()}}return u.provider={build:()=>new u},u})();function vd(u,t=10240){let i=0;return{read:()=>(0,m.A)(function*(){if(i<u.byteLength){const o={value:u.slice(i,i+t),done:!1};return i+=t,o}return{done:!0}})(),cancel:()=>(0,m.A)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class Uf{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ya(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ya(this.observer.error,t):Xe("Uncaught Error in snapshot listener:",t.toString()))}Za(){this.muted=!0}Ya(t,i){setTimeout(()=>{this.muted||t(i)},0)}}class l_{constructor(t,i){this.Xa=t,this.serializer=i,this.metadata=new Jt,this.buffer=new Uint8Array,this.eu=new TextDecoder("utf-8"),this.tu().then(o=>{o&&o.ua()?this.metadata.resolve(o.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(o?.aa)}`))},o=>this.metadata.reject(o))}close(){return this.Xa.cancel()}getMetadata(){var t=this;return(0,m.A)(function*(){return t.metadata.promise})()}Ua(){var t=this;return(0,m.A)(function*(){return yield t.getMetadata(),t.tu()})()}tu(){var t=this;return(0,m.A)(function*(){const i=yield t.nu();if(null===i)return null;const o=t.eu.decode(i),c=Number(o);isNaN(c)&&t.ru(`length string (${o}) is not valid number`);const f=yield t.iu(c);return new K(JSON.parse(f),i.length+c)})()}su(){return this.buffer.findIndex(t=>123===t)}nu(){var t=this;return(0,m.A)(function*(){for(;t.su()<0&&!(yield t.ou()););if(0===t.buffer.length)return null;const i=t.su();i<0&&t.ru("Reached the end of bundle when a length string is expected.");const o=t.buffer.slice(0,i);return t.buffer=t.buffer.slice(i),o})()}iu(t){var i=this;return(0,m.A)(function*(){for(;i.buffer.length<t;)(yield i.ou())&&i.ru("Reached the end of bundle when more is expected.");const o=i.eu.decode(i.buffer.slice(0,t));return i.buffer=i.buffer.slice(t),o})()}ru(t){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${t}`)}ou(){var t=this;return(0,m.A)(function*(){const i=yield t.Xa.read();if(!i.done){const o=new Uint8Array(t.buffer.length+i.value.length);o.set(t.buffer),o.set(i.value,t.buffer.length),t.buffer=o}return i.done})()}}class Av{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(t){var i=this;return(0,m.A)(function*(){if(i.ensureCommitNotCalled(),i.mutations.length>0)throw i.lastTransactionError=new Pe(Ae.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),i.lastTransactionError;const o=yield(c=(0,m.A)(function*(_,A){const S=Ze(_),L={documents:A.map(Ye=>kn(S.serializer,Ye))},Q=yield S.Lo("BatchGetDocuments",S.serializer.databaseId,Xt.emptyPath(),L,A.length),re=new Map;Q.forEach(Ye=>{const Rt=function Qi(u,t){return"found"in t?function(o,c){Ct(!!c.found);const f=ns(o,c.found.name),_=Xr(c.found.updateTime),A=c.found.createTime?Xr(c.found.createTime):ot.min(),S=new vr({mapValue:{fields:c.found.fields}});return ir.newFoundDocument(f,_,A,S)}(u,t):"missing"in t?function(o,c){Ct(!!c.missing),Ct(!!c.readTime);const f=ns(o,c.missing),_=Xr(c.readTime);return ir.newNoDocument(f,_)}(u,t):wt()}(S.serializer,Ye);re.set(Rt.key.toString(),Rt)});const we=[];return A.forEach(Ye=>{const Rt=re.get(Ye.toString());Ct(!!Rt),we.push(Rt)}),we}),function f(_,A){return c.apply(this,arguments)})(i.datastore,t);var c;return o.forEach(c=>i.recordVersion(c)),o})()}set(t,i){this.write(i.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,i){try{this.write(i.toMutation(t,this.preconditionForUpdate(t)))}catch(o){this.lastTransactionError=o}this.writtenDocs.add(t.toString())}delete(t){this.write(new D(t,this.precondition(t))),this.writtenDocs.add(t.toString())}commit(){var t=this;return(0,m.A)(function*(){if(t.ensureCommitNotCalled(),t.lastTransactionError)throw t.lastTransactionError;const i=t.readVersions;var o;t.mutations.forEach(o=>{i.delete(o.key.toString())}),i.forEach((o,c)=>{const f=Ot.fromPath(c);t.mutations.push(new z(f,t.precondition(f)))}),yield(o=(0,m.A)(function*(f,_){const A=Ze(f),S={writes:_.map(L=>Bo(A.serializer,L))};yield A.Mo("Commit",A.serializer.databaseId,Xt.emptyPath(),S)}),function c(f,_){return o.apply(this,arguments)})(t.datastore,t.mutations),t.committed=!0})()}recordVersion(t){let i;if(t.isFoundDocument())i=t.version;else{if(!t.isNoDocument())throw wt();i=ot.min()}const o=this.readVersions.get(t.key.toString());if(o){if(!i.isEqual(o))throw new Pe(Ae.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),i)}precondition(t){const i=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&i?i.isEqual(ot.min())?Er.exists(!1):Er.updateTime(i):Er.none()}preconditionForUpdate(t){const i=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&i){if(i.isEqual(ot.min()))throw new Pe(Ae.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Er.updateTime(i)}return Er.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}class Cv{constructor(t,i,o,c,f){this.asyncQueue=t,this.datastore=i,this.options=o,this.updateFunction=c,this.deferred=f,this._u=o.maxAttempts,this.t_=new Zl(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){var t=this;this.t_.Go((0,m.A)(function*(){const i=new Av(t.datastore),o=t.cu(i);o&&o.then(c=>{t.asyncQueue.enqueueAndForget(()=>i.commit().then(()=>{t.deferred.resolve(c)}).catch(f=>{t.lu(f)}))}).catch(c=>{t.lu(c)})}))}cu(t){try{const i=this.updateFunction(t);return!tt(i)&&i.catch&&i.then?i:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(i){return this.deferred.reject(i),null}}lu(t){this._u>0&&this.hu(t)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(t)}hu(t){if("FirebaseError"===t.name){const i=t.code;return"aborted"===i||"failed-precondition"===i||"already-exists"===i||!Ir(i)}return!1}}class Rg{constructor(t,i,o,c,f){var _=this;this.authCredentials=t,this.appCheckCredentials=i,this.asyncQueue=o,this.databaseInfo=c,this.user=he.UNAUTHENTICATED,this.clientId=$e.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=f,this.authCredentials.start(o,function(){var A=(0,m.A)(function*(S){be("FirestoreClient","Received user=",S.uid),yield _.authCredentialListener(S),_.user=S});return function(S){return A.apply(this,arguments)}}()),this.appCheckCredentials.start(o,A=>(be("FirestoreClient","Received new app check token=",A),this.appCheckCredentialListener(A,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){var t=this;this.asyncQueue.enterRestrictedMode();const i=new Jt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,m.A)(function*(){try{t._onlineComponents&&(yield t._onlineComponents.terminate()),t._offlineComponents&&(yield t._offlineComponents.terminate()),t.authCredentials.shutdown(),t.appCheckCredentials.shutdown(),i.resolve()}catch(o){const c=co(o,"Failed to shutdown persistence");i.reject(c)}})),i.promise}}function Bf(u,t){return Pg.apply(this,arguments)}function Pg(){return Pg=(0,m.A)(function*(u,t){u.asyncQueue.verifyOperationInProgress(),be("FirestoreClient","Initializing OfflineComponentProvider");const i=u.configuration;yield t.initialize(i);let o=i.initialUser;u.setCredentialChangeListener(function(){var c=(0,m.A)(function*(f){o.isEqual(f)||(yield lh(t.localStore,f),o=f)});return function(f){return c.apply(this,arguments)}}()),t.persistence.setDatabaseDeletedListener(()=>u.terminate()),u._offlineComponents=t}),Pg.apply(this,arguments)}function d_(u,t){return pl.apply(this,arguments)}function pl(){return(pl=(0,m.A)(function*(u,t){u.asyncQueue.verifyOperationInProgress();const i=yield jf(u);be("FirestoreClient","Initializing OnlineComponentProvider"),yield t.initialize(i,u.configuration),u.setCredentialChangeListener(o=>ud(t.remoteStore,o)),u.setAppCheckTokenChangeListener((o,c)=>ud(t.remoteStore,c)),u._onlineComponents=t})).apply(this,arguments)}function jf(u){return Ah.apply(this,arguments)}function Ah(){return(Ah=(0,m.A)(function*(u){if(!u._offlineComponents)if(u._uninitializedComponentsProvider){be("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Bf(u,u._uninitializedComponentsProvider._offline)}catch(t){if(!("FirebaseError"===(c=t).name?c.code===Ae.FAILED_PRECONDITION||c.code===Ae.UNIMPLEMENTED:!(typeof DOMException<"u"&&c instanceof DOMException)||22===c.code||20===c.code||11===c.code))throw t;rn("Error using user provided cache. Falling back to memory cache: "+t),yield Bf(u,new bc)}}else be("FirestoreClient","Using default OfflineComponentProvider"),yield Bf(u,new bc);var c;return u._offlineComponents})).apply(this,arguments)}function $f(u){return h_.apply(this,arguments)}function h_(){return(h_=(0,m.A)(function*(u){return u._onlineComponents||(u._uninitializedComponentsProvider?(be("FirestoreClient","Using user provided OnlineComponentProvider"),yield d_(u,u._uninitializedComponentsProvider._online)):(be("FirestoreClient","Using default OnlineComponentProvider"),yield d_(u,new Sc))),u._onlineComponents})).apply(this,arguments)}function bv(u){return jf(u).then(t=>t.persistence)}function mu(u){return jf(u).then(t=>t.localStore)}function f_(u){return $f(u).then(t=>t.remoteStore)}function Ed(u){return $f(u).then(t=>t.syncEngine)}function Id(u){return Gf.apply(this,arguments)}function Gf(){return(Gf=(0,m.A)(function*(u){const t=yield $f(u),i=t.eventManager;return i.onListen=vh.bind(null,t.syncEngine),i.onUnlisten=Nf.bind(null,t.syncEngine),i.onFirstRemoteStoreListen=Mf.bind(null,t.syncEngine),i.onLastRemoteStoreUnlisten=Ih.bind(null,t.syncEngine),i})).apply(this,arguments)}function Ng(u,t,i={}){const o=new Jt;return u.asyncQueue.enqueueAndForget((0,m.A)(function*(){return function(f,_,A,S,L){const Q=new Uf({next:we=>{Q.Za(),_.enqueueAndForget(()=>yh(f,re));const Ye=we.docs.has(A);!Ye&&we.fromCache?L.reject(new Pe(Ae.UNAVAILABLE,"Failed to get document because the client is offline.")):Ye&&we.fromCache&&S&&"server"===S.source?L.reject(new Pe(Ae.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):L.resolve(we)},error:we=>L.reject(we)}),re=new N(j(A.path),Q,{includeMetadataChanges:!0,_a:!0});return Fu(f,re)}(yield Id(u),u.asyncQueue,t,i,o)})),o.promise}function xg(u,t,i={}){const o=new Jt;return u.asyncQueue.enqueueAndForget((0,m.A)(function*(){return function(f,_,A,S,L){const Q=new Uf({next:we=>{Q.Za(),_.enqueueAndForget(()=>yh(f,re)),we.fromCache&&"server"===S.source?L.reject(new Pe(Ae.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):L.resolve(we)},error:we=>L.reject(we)}),re=new N(A,Q,{includeMetadataChanges:!0,_a:!0});return Fu(f,re)}(yield Id(u),u.asyncQueue,t,i,o)})),o.promise}function Qf(u){const t={};return void 0!==u.timeoutSeconds&&(t.timeoutSeconds=u.timeoutSeconds),t}const kg=new Map;function Xf(u,t,i){if(!i)throw new Pe(Ae.INVALID_ARGUMENT,`Function ${u}() cannot be called with an empty ${t}.`)}function Vg(u,t,i,o){if(!0===t&&!0===o)throw new Pe(Ae.INVALID_ARGUMENT,`${u} and ${i} cannot be used together.`)}function Fg(u){if(!Ot.isDocumentKey(u))throw new Pe(Ae.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${u} has ${u.length}.`)}function g_(u){if(Ot.isDocumentKey(u))throw new Pe(Ae.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${u} has ${u.length}.`)}function Yf(u){if(void 0===u)return"undefined";if(null===u)return"null";if("string"==typeof u)return u.length>20&&(u=`${u.substring(0,20)}...`),JSON.stringify(u);if("number"==typeof u||"boolean"==typeof u)return""+u;if("object"==typeof u){if(u instanceof Array)return"an array";{const t=(o=u).constructor?o.constructor.name:null;return t?`a custom ${t} object`:"an object"}}var o;return"function"==typeof u?"a function":wt()}function gr(u,t){if("_delegate"in u&&(u=u._delegate),!(u instanceof t)){if(t.name===u.constructor.name)throw new Pe(Ae.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const i=Yf(u);throw new Pe(Ae.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${i}`)}}return u}function m_(u,t){if(t<=0)throw new Pe(Ae.INVALID_ARGUMENT,`Function ${u}() requires a positive number, but it was: ${t}.`)}class __{constructor(t){var i,o;if(void 0===t.host){if(void 0!==t.ssl)throw new Pe(Ae.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(i=t.ssl)||void 0===i||i;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Pe(Ae.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}Vg("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==t.experimentalAutoDetectLongPolling&&!t.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=Qf(null!==(o=t.experimentalLongPollingOptions)&&void 0!==o?o:{}),function(f){if(void 0!==f.timeoutSeconds){if(isNaN(f.timeoutSeconds))throw new Pe(Ae.INVALID_ARGUMENT,`invalid long polling timeout: ${f.timeoutSeconds} (must not be NaN)`);if(f.timeoutSeconds<5)throw new Pe(Ae.INVALID_ARGUMENT,`invalid long polling timeout: ${f.timeoutSeconds} (minimum allowed value is 5)`);if(f.timeoutSeconds>30)throw new Pe(Ae.INVALID_ARGUMENT,`invalid long polling timeout: ${f.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===t.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class va{constructor(t,i,o,c){this._authCredentials=t,this._appCheckCredentials=i,this._databaseId=o,this._app=c,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new __({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Pe(Ae.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new Pe(Ae.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new __(t),void 0!==t.credentials&&(this._authCredentials=function(o){if(!o)return new Me;switch(o.type){case"firstParty":return new lt(o.sessionIndex||"0",o.iamToken||null,o.authTokenFactory||null);case"provider":return o.client;default:throw new Pe(Ae.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){var t=this;return(0,m.A)(function*(){"notTerminated"===t._terminateTask?yield t._terminate():t._terminateTask="notTerminated"})()}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(i){const o=kg.get(i);o&&(be("ComponentProvider","Removing Datastore"),kg.delete(i),o.terminate())}(this),Promise.resolve()}}function Td(u,t,i,o={}){var c;const f=(u=gr(u,va))._getSettings(),_=`${t}:${i}`;if("firestore.googleapis.com"!==f.host&&f.host!==_&&rn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),u._setSettings(Object.assign(Object.assign({},f),{host:_,ssl:!1})),o.mockUserToken){let A,S;if("string"==typeof o.mockUserToken)A=o.mockUserToken,S=he.MOCK_USER;else{A=(0,k.Fy)(o.mockUserToken,null===(c=u._app)||void 0===c?void 0:c.options.projectId);const L=o.mockUserToken.sub||o.mockUserToken.user_id;if(!L)throw new Pe(Ae.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");S=new he(L)}u._authCredentials=new Ne(new Re(A,S))}}class Ls{constructor(t,i,o){this.converter=i,this._query=o,this.type="query",this.firestore=t}withConverter(t){return new Ls(this.firestore,t,this._query)}}class Wi{constructor(t,i,o){this.converter=i,this._key=o,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Uu(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Wi(this.firestore,t,this._key)}}class Uu extends Ls{constructor(t,i,o){super(t,i,j(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Wi(this.firestore,null,new Ot(t))}withConverter(t){return new Uu(this.firestore,t,this._path)}}function MI(u,t,...i){if(u=(0,k.Ku)(u),Xf("collection","path",t),u instanceof va){const o=Xt.fromString(t,...i);return g_(o),new Uu(u,null,o)}{if(!(u instanceof Wi||u instanceof Uu))throw new Pe(Ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=u._path.child(Xt.fromString(t,...i));return g_(o),new Uu(u.firestore,null,o)}}function NI(u,t){if(u=gr(u,va),Xf("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Pe(Ae.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ls(u,null,(o=t,new Pi(Xt.emptyPath(),o)));var o}function Pv(u,t,...i){if(u=(0,k.Ku)(u),1===arguments.length&&(t=$e.newId()),Xf("doc","path",t),u instanceof va){const o=Xt.fromString(t,...i);return Fg(o),new Wi(u,null,new Ot(o))}{if(!(u instanceof Wi||u instanceof Uu))throw new Pe(Ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=u._path.child(Xt.fromString(t,...i));return Fg(o),new Wi(u.firestore,u instanceof Uu?u.converter:null,new Ot(o))}}function y_(u,t){return u=(0,k.Ku)(u),t=(0,k.Ku)(t),(u instanceof Wi||u instanceof Uu)&&(t instanceof Wi||t instanceof Uu)&&u.firestore===t.firestore&&u.path===t.path&&u.converter===t.converter}function Lg(u,t){return u=(0,k.Ku)(u),t=(0,k.Ku)(t),u instanceof Ls&&t instanceof Ls&&u.firestore===t.firestore&&Zi(u._query,t._query)&&u.converter===t.converter}class v_{constructor(t=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Zl(this,"async_queue_retry"),this.Vu=()=>{const o=Jl();o&&be("AsyncQueue","Visibility state changed to "+o.visibilityState),this.t_.jo()},this.mu=t;const i=Jl();i&&"function"==typeof i.addEventListener&&i.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.fu(),this.gu(t)}enterRestrictedMode(t){if(!this.Iu){this.Iu=!0,this.Au=t||!1;const i=Jl();i&&"function"==typeof i.removeEventListener&&i.removeEventListener("visibilitychange",this.Vu)}}enqueue(t){if(this.fu(),this.Iu)return new Promise(()=>{});const i=new Jt;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(t().then(i.resolve,i.reject),i.promise)).then(()=>i.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Pu.push(t),this.pu()))}pu(){var t=this;return(0,m.A)(function*(){if(0!==t.Pu.length){try{yield t.Pu[0](),t.Pu.shift(),t.t_.reset()}catch(i){if(!te(i))throw i;be("AsyncQueue","Operation failed with retryable error: "+i)}t.Pu.length>0&&t.t_.Go(()=>t.pu())}})()}gu(t){const i=this.mu.then(()=>(this.du=!0,t().catch(o=>{throw this.Eu=o,this.du=!1,Xe("INTERNAL UNHANDLED ERROR: ",function(_){let A=_.message||"";return _.stack&&(A=_.stack.includes(_.message)?_.stack:_.message+"\n"+_.stack),A}(o)),o}).then(o=>(this.du=!1,o))));return this.mu=i,i}enqueueAfterDelay(t,i,o){this.fu(),this.Ru.indexOf(t)>-1&&(i=0);const c=dl.createAndSchedule(this,t,i,o,f=>this.yu(f));return this.Tu.push(c),c}fu(){this.Eu&&wt()}verifyOperationInProgress(){}wu(){var t=this;return(0,m.A)(function*(){let i;do{i=t.mu,yield i}while(i!==t.mu)})()}Su(t){for(const i of this.Tu)if(i.timerId===t)return!0;return!1}bu(t){return this.wu().then(()=>{this.Tu.sort((i,o)=>i.targetTimeMs-o.targetTimeMs);for(const i of this.Tu)if(i.skipDelay(),"all"!==t&&i.timerId===t)break;return this.wu()})}Du(t){this.Ru.push(t)}yu(t){const i=this.Tu.indexOf(t);this.Tu.splice(i,1)}}function Ug(u){return function(i,o){if("object"!=typeof i||null===i)return!1;const c=i;for(const f of["next","error","complete"])if(f in c&&"function"==typeof c[f])return!0;return!1}(u)}class Mv{constructor(){this._progressObserver={},this._taskCompletionResolver=new Jt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(t,i,o){this._progressObserver={next:t,error:i,complete:o}}catch(t){return this._taskCompletionResolver.promise.catch(t)}then(t,i){return this._taskCompletionResolver.promise.then(t,i)}_completeWith(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)}_failWith(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)}_updateProgress(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}const Bg=-1;class Rr extends va{constructor(t,i,o,c){super(t,i,o,c),this.type="firestore",this._queue=new v_,this._persistenceKey=c?.name||"[DEFAULT]"}_terminate(){var t=this;return(0,m.A)(function*(){if(t._firestoreClient){const i=t._firestoreClient.terminate();t._queue=new v_(i),t._firestoreClient=void 0,yield i}})()}}function E_(u,t){const i="object"==typeof u?u:(0,V.getApp)(),o="string"==typeof u?u:t||"(default)",c=(0,V._getProvider)(i,"firestore").getImmediate({identifier:o});if(!c._initialized){const f=(0,k.yU)("firestore");f&&Td(c,...f)}return c}function Ei(u){if(u._terminated)throw new Pe(Ae.FAILED_PRECONDITION,"The client has already been terminated.");return u._firestoreClient||jg(u),u._firestoreClient}function jg(u){var t,i,o;const c=u._freezeSettings(),f=(S=(null===(t=u._app)||void 0===t?void 0:t.options.appId)||"",new mi(u._databaseId,S,u._persistenceKey,(Q=c).host,Q.ssl,Q.experimentalForceLongPolling,Q.experimentalAutoDetectLongPolling,Qf(Q.experimentalLongPollingOptions),Q.useFetchStreams));var S,Q;u._componentsProvider||!(null===(i=c.localCache)||void 0===i)&&i._offlineComponentProvider&&!(null===(o=c.localCache)||void 0===o)&&o._onlineComponentProvider&&(u._componentsProvider={_offline:c.localCache._offlineComponentProvider,_online:c.localCache._onlineComponentProvider}),u._firestoreClient=new Rg(u._authCredentials,u._appCheckCredentials,u._queue,f,u._componentsProvider&&function(A){const S=A?._online.build();return{_offline:A?._offline.build(S),_online:S}}(u._componentsProvider))}function xI(u,t){rn("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const i=u._freezeSettings();return Zf(u,Sc.provider,{build:o=>new yd(o,i.cacheSizeBytes,t?.forceOwnership)}),Promise.resolve()}function OI(u){return I_.apply(this,arguments)}function I_(){return(I_=(0,m.A)(function*(u){rn("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=u._freezeSettings();Zf(u,Sc.provider,{build:i=>new Dv(i,t.cacheSizeBytes)})})).apply(this,arguments)}function Zf(u,t,i){if((u=gr(u,Rr))._firestoreClient||u._terminated)throw new Pe(Ae.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(u._componentsProvider||u._getSettings().localCache)throw new Pe(Ae.FAILED_PRECONDITION,"SDK cache is already specified.");u._componentsProvider={_online:t,_offline:i},jg(u)}function $g(u){if(u._initialized&&!u._terminated)throw new Pe(Ae.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new Jt;return u._queue.enqueueAndForgetEvenWhileRestricted((0,m.A)(function*(){try{yield(i=(0,m.A)(function*(c){if(!ri.D())return Promise.resolve();const f=c+"main";yield ri.delete(f)}),function o(c){return i.apply(this,arguments)})(Yr(u._databaseId,u._persistenceKey)),t.resolve()}catch(i){t.reject(i)}var i})),t.promise}function kI(u){return function(i){const o=new Jt;return i.asyncQueue.enqueueAndForget((0,m.A)(function*(){return function yv(u,t){return kf.apply(this,arguments)}(yield Ed(i),o)})),o.promise}(Ei(u=gr(u,Rr)))}function VI(u){return function Mg(u){return u.asyncQueue.enqueue((0,m.A)(function*(){const t=yield bv(u),i=yield f_(u);return t.setNetworkEnabled(!0),function(c){const f=Ze(c);return f.L_.delete(0),fu(f)}(i)}))}(Ei(u=gr(u,Rr)))}function w_(u){return function zf(u){return u.asyncQueue.enqueue((0,m.A)(function*(){const t=yield bv(u),i=yield f_(u);return t.setNetworkEnabled(!1),(o=(0,m.A)(function*(f){const _=Ze(f);_.L_.add(0),yield Go(_),_.q_.set("Offline")}),function c(f){return o.apply(this,arguments)})(i);var o}))}(Ei(u=gr(u,Rr)))}function Nv(u,t){const i=Ei(u=gr(u,Rr)),o=new Mv;return function wd(u,t,i,o){const c=function(_,A){let S;return S="string"==typeof _?Gr().encode(_):_,Q=function(Q,re){if(Q instanceof Uint8Array)return vd(Q,void 0);if(Q instanceof ArrayBuffer)return vd(new Uint8Array(Q),void 0);if(Q instanceof ReadableStream)return Q.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(S),new l_(Q,A);var Q}(i,mc(t));u.asyncQueue.enqueueAndForget((0,m.A)(function*(){!function _d(u,t,i){const o=Ze(u);var c;(c=(0,m.A)(function*(_,A,S){try{const L=yield A.getMetadata();if(yield function(Rt,jt){const Vt=Ze(Rt),vn=Xr(jt.createTime);return Vt.persistence.runTransaction("hasNewerBundle","readonly",Rn=>Vt.Gr.getBundleMetadata(Rn,jt.id)).then(Rn=>!!Rn&&Rn.createTime.compareTo(vn)>=0)}(_.localStore,L))return yield A.close(),S._completeWith({taskState:"Success",documentsLoaded:(Rt=L).totalDocuments,bytesLoaded:Rt.totalBytes,totalDocuments:Rt.totalDocuments,totalBytes:Rt.totalBytes}),Promise.resolve(new Set);S._updateProgress(Et(L));const Q=new Le(L,_.localStore,A.serializer);let re=yield A.Ua();for(;re;){const Ye=yield Q.la(re);Ye&&S._updateProgress(Ye),re=yield A.Ua()}const we=yield Q.complete();return yield Qa(_,we.Ia,void 0),yield function(Rt,jt){const Vt=Ze(Rt);return Vt.persistence.runTransaction("Save bundle","readwrite",vn=>Vt.Gr.saveBundleMetadata(vn,jt))}(_.localStore,L),S._completeWith(we.progress),Promise.resolve(we.Pa)}catch(L){return rn("SyncEngine",`Loading bundle failed with ${L}`),S._failWith(L),Promise.resolve(new Set)}var Rt}),function f(_,A,S){return c.apply(this,arguments)})(o,t,i).then(c=>{o.sharedClientState.notifyBundleLoaded(c)})}(yield Ed(u),c,o)}))}(i,u._databaseId,t,o),o}function xv(u,t){return function Sv(u,t){return u.asyncQueue.enqueue((0,m.A)(function*(){return function(o,c){const f=Ze(o);return f.persistence.runTransaction("Get named query","readonly",_=>f.Gr.getNamedQuery(_,c))}(yield mu(u),t)}))}(Ei(u=gr(u,Rr)),t).then(i=>i?new Ls(u,null,i.query):null)}class Bu{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Bu(cr.fromBase64String(t))}catch(i){throw new Pe(Ae.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+i)}}static fromUint8Array(t){return new Bu(cr.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}class ju{constructor(...t){for(let i=0;i<t.length;++i)if(0===t[i].length)throw new Pe(Ae.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Dn(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class gl{constructor(t){this._methodName=t}}class bh{constructor(t,i){if(!isFinite(t)||t<-90||t>90)throw new Pe(Ae.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(i)||i<-180||i>180)throw new Pe(Ae.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+i);this._lat=t,this._long=i}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return gt(this._lat,t._lat)||gt(this._long,t._long)}}class ml{constructor(t){this._values=(t||[]).map(i=>i)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(o,c){if(o.length!==c.length)return!1;for(let f=0;f<o.length;++f)if(o[f]!==c[f])return!1;return!0}(this._values,t._values)}}const kv=/^__.*__$/;class Hg{constructor(t,i,o){this.data=t,this.fieldMask=i,this.fieldTransforms=o}toMutation(t,i){return null!==this.fieldMask?new xs(t,this.data,this.fieldMask,i,this.fieldTransforms):new Pa(t,this.data,i,this.fieldTransforms)}}class T_{constructor(t,i,o){this.data=t,this.fieldMask=i,this.fieldTransforms=o}toMutation(t,i){return new xs(t,this.data,this.fieldMask,i,this.fieldTransforms)}}function _l(u){switch(u){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw wt()}}class ep{constructor(t,i,o,c,f,_){this.settings=t,this.databaseId=i,this.serializer=o,this.ignoreUndefinedProperties=c,void 0===f&&this.vu(),this.fieldTransforms=f||[],this.fieldMask=_||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(t){return new ep(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(t){var i;const o=null===(i=this.path)||void 0===i?void 0:i.child(t),c=this.Fu({path:o,xu:!1});return c.Ou(t),c}Nu(t){var i;const o=null===(i=this.path)||void 0===i?void 0:i.child(t),c=this.Fu({path:o,xu:!1});return c.vu(),c}Lu(t){return this.Fu({path:void 0,xu:!0})}Bu(t){return rp(t,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(t){return void 0!==this.fieldMask.find(i=>t.isPrefixOf(i))||void 0!==this.fieldTransforms.find(i=>t.isPrefixOf(i.field))}vu(){if(this.path)for(let t=0;t<this.path.length;t++)this.Ou(this.path.get(t))}Ou(t){if(0===t.length)throw this.Bu("Document fields must not be empty");if(_l(this.Cu)&&kv.test(t))throw this.Bu('Document fields cannot begin and end with "__"')}}class Vv{constructor(t,i,o){this.databaseId=t,this.ignoreUndefinedProperties=i,this.serializer=o||mc(t)}Qu(t,i,o,c=!1){return new ep({Cu:t,methodName:i,qu:o,path:Dn.emptyPath(),xu:!1,ku:c},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Rc(u){const t=u._freezeSettings(),i=mc(u._databaseId);return new Vv(u._databaseId,!!t.ignoreUndefinedProperties,i)}function Sh(u,t,i,o,c,f={}){const _=u.Qu(f.merge||f.mergeFields?2:0,t,i,c);Kg("Data must be an object, but it was:",_,o);const A=S_(o,_);let S,L;if(f.merge)S=new dn(_.fieldMask),L=_.fieldTransforms;else if(f.mergeFields){const Q=[];for(const re of f.mergeFields){const we=Ph(t,re,i);if(!_.contains(we))throw new Pe(Ae.INVALID_ARGUMENT,`Field '${we}' is specified in your field mask but missing from your input data.`);R_(Q,we)||Q.push(we)}S=new dn(Q),L=_.fieldTransforms.filter(re=>S.covers(re.field))}else S=null,L=_.fieldTransforms;return new Hg(new vr(A),S,L)}class Rh extends gl{_toFieldTransform(t){if(2!==t.Cu)throw t.Bu(1===t.Cu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Rh}}function D_(u,t,i){return new ep({Cu:3,qu:t.settings.qu,methodName:u._methodName,xu:i},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class Gg extends gl{_toFieldTransform(t){return new ia(t.path,new Fo)}isEqual(t){return t instanceof Gg}}class zg extends gl{constructor(t,i){super(t),this.Ku=i}_toFieldTransform(t){const i=D_(this,t,!0),o=this.Ku.map(f=>vl(f,i)),c=new Lo(o);return new ia(t.path,c)}isEqual(t){return t instanceof zg&&(0,k.bD)(this.Ku,t.Ku)}}class tp extends gl{constructor(t,i){super(t),this.Ku=i}_toFieldTransform(t){const i=D_(this,t,!0),o=this.Ku.map(f=>vl(f,i)),c=new ts(o);return new ia(t.path,c)}isEqual(t){return t instanceof tp&&(0,k.bD)(this.Ku,t.Ku)}}class A_ extends gl{constructor(t,i){super(t),this.$u=i}_toFieldTransform(t){const i=new Ks(t.serializer,Vo(t.serializer,this.$u));return new ia(t.path,i)}isEqual(t){return t instanceof A_&&this.$u===t.$u}}function C_(u,t,i,o){const c=u.Qu(1,t,i);Kg("Data must be an object, but it was:",c,o);const f=[],_=vr.empty();jr(o,(S,L)=>{const Q=np(t,S,i);L=(0,k.Ku)(L);const re=c.Nu(Q);if(L instanceof Rh)f.push(Q);else{const we=vl(L,re);null!=we&&(f.push(Q),_.set(Q,we))}});const A=new dn(f);return new T_(_,A,c.fieldTransforms)}function yl(u,t,i,o,c,f){const _=u.Qu(1,t,i),A=[Ph(t,o,i)],S=[c];if(f.length%2!=0)throw new Pe(Ae.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let we=0;we<f.length;we+=2)A.push(Ph(t,f[we])),S.push(f[we+1]);const L=[],Q=vr.empty();for(let we=A.length-1;we>=0;--we)if(!R_(L,A[we])){const Ye=A[we];let Rt=S[we];Rt=(0,k.Ku)(Rt);const jt=_.Nu(Ye);if(Rt instanceof Rh)L.push(Ye);else{const Vt=vl(Rt,jt);null!=Vt&&(L.push(Ye),Q.set(Ye,Vt))}}const re=new dn(L);return new T_(Q,re,_.fieldTransforms)}function b_(u,t,i,o=!1){return vl(i,u.Qu(o?4:3,t))}function vl(u,t){if(Wg(u=(0,k.Ku)(u)))return Kg("Unsupported field value:",t,u),S_(u,t);if(u instanceof gl)return function(o,c){if(!_l(c.Cu))throw c.Bu(`${o._methodName}() can only be used with update() and set()`);if(!c.path)throw c.Bu(`${o._methodName}() is not currently supported inside arrays`);const f=o._toFieldTransform(c);f&&c.fieldTransforms.push(f)}(u,t),null;if(void 0===u&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),u instanceof Array){if(t.settings.xu&&4!==t.Cu)throw t.Bu("Nested arrays are not supported");return function(o,c){const f=[];let _=0;for(const A of o){let S=vl(A,c.Lu(_));null==S&&(S={nullValue:"NULL_VALUE"}),f.push(S),_++}return{arrayValue:{values:f}}}(u,t)}return function(o,c){if(null===(o=(0,k.Ku)(o)))return{nullValue:"NULL_VALUE"};if("number"==typeof o)return Vo(c.serializer,o);if("boolean"==typeof o)return{booleanValue:o};if("string"==typeof o)return{stringValue:o};if(o instanceof Date){const f=ht.fromDate(o);return{timestampValue:Io(c.serializer,f)}}if(o instanceof ht){const f=new ht(o.seconds,1e3*Math.floor(o.nanoseconds/1e3));return{timestampValue:Io(c.serializer,f)}}if(o instanceof bh)return{geoPointValue:{latitude:o.latitude,longitude:o.longitude}};if(o instanceof Bu)return{bytesValue:wo(c.serializer,o._byteString)};if(o instanceof Wi){const f=c.databaseId,_=o.firestore._databaseId;if(!_.isEqual(f))throw c.Bu(`Document reference is for database ${_.projectId}/${_.database} but should be for database ${f.projectId}/${f.database}`);return{referenceValue:oa(o.firestore._databaseId||c.databaseId,o._key.path)}}if(o instanceof ml)return A=c,{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(S=>{if("number"!=typeof S)throw A.Bu("VectorValues must only contain numeric values.");return vo(A.serializer,S)})}}}}};var A;throw c.Bu(`Unsupported field value: ${Yf(o)}`)}(u,t)}function S_(u,t){const i={};return rr(u)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):jr(u,(o,c)=>{const f=vl(c,t.Mu(o));null!=f&&(i[o]=f)}),{mapValue:{fields:i}}}function Wg(u){return!("object"!=typeof u||null===u||u instanceof Array||u instanceof Date||u instanceof ht||u instanceof bh||u instanceof Bu||u instanceof Wi||u instanceof gl||u instanceof ml)}function Kg(u,t,i){if(!Wg(i)||"object"!=typeof(c=i)||null===c||Object.getPrototypeOf(c)!==Object.prototype&&null!==Object.getPrototypeOf(c)){const o=Yf(i);throw t.Bu("an object"===o?u+" a custom object":u+" "+o)}var c}function Ph(u,t,i){if((t=(0,k.Ku)(t))instanceof ju)return t._internalPath;if("string"==typeof t)return np(u,t);throw rp("Field path arguments must be of type string or ",u,!1,void 0,i)}const Fv=new RegExp("[~\\*/\\[\\]]");function np(u,t,i){if(t.search(Fv)>=0)throw rp(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,u,!1,void 0,i);try{return new ju(...t.split("."))._internalPath}catch{throw rp(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,u,!1,void 0,i)}}function rp(u,t,i,o,c){const f=o&&!o.isEmpty(),_=void 0!==c;let A=`Function ${t}() called with invalid data`;i&&(A+=" (via `toFirestore()`)"),A+=". ";let S="";return(f||_)&&(S+=" (found",f&&(S+=` in field ${o}`),_&&(S+=` in document ${c}`),S+=")"),new Pe(Ae.INVALID_ARGUMENT,A+u+S)}function R_(u,t){return u.some(i=>i.isEqual(t))}class El{constructor(t,i,o,c,f){this._firestore=t,this._userDataWriter=i,this._key=o,this._document=c,this._converter=f}get id(){return this._key.path.lastSegment()}get ref(){return new Wi(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const t=new UI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const i=this._document.data.field(qg("DocumentSnapshot.get",t));if(null!==i)return this._userDataWriter.convertValue(i)}}}class UI extends El{data(){return super.data()}}function qg(u,t){return"string"==typeof t?np(u,t):t instanceof ju?t._internalPath:t._delegate._internalPath}function ip(u){if("L"===u.limitType&&0===u.explicitOrderBy.length)throw new Pe(Ae.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class P_{}class sp extends P_{}function BI(u,t,...i){let o=[];t instanceof P_&&o.push(t),o=o.concat(i),function(f){const _=f.filter(S=>S instanceof Dd).length,A=f.filter(S=>S instanceof op).length;if(_>1||_>0&&A>0)throw new Pe(Ae.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(o);for(const c of o)u=c._apply(u);return u}class op extends sp{constructor(t,i,o){super(),this._field=t,this._op=i,this._value=o,this.type="where"}static _create(t,i,o){return new op(t,i,o)}_apply(t){const i=this._parse(t);return Yg(t._query,i),new Ls(t.firestore,t.converter,Ps(t._query,i))}_parse(t){const i=Rc(t.firestore);return function(f,_,A,S,L,Q,re){let we;if(L.isKeyField()){if("array-contains"===Q||"array-contains-any"===Q)throw new Pe(Ae.INVALID_ARGUMENT,`Invalid Query. You can't perform '${Q}' queries on documentId().`);if("in"===Q||"not-in"===Q){Bv(re,Q);const Ye=[];for(const Rt of re)Ye.push(Uv(S,f,Rt));we={arrayValue:{values:Ye}}}else we=Uv(S,f,re)}else"in"!==Q&&"not-in"!==Q&&"array-contains-any"!==Q||Bv(re,Q),we=b_(A,"where",re,"in"===Q||"not-in"===Q);return $n.create(L,Q,we)}(t._query,0,i,t.firestore._databaseId,this._field,this._op,this._value)}}function jI(u,t,i){const o=t,c=qg("where",u);return op._create(c,o,i)}class Dd extends P_{constructor(t,i){super(),this.type=t,this._queryConstraints=i}static _create(t,i){return new Dd(t,i)}_parse(t){const i=this._queryConstraints.map(o=>o._parse(t)).filter(o=>o.getFilters().length>0);return 1===i.length?i[0]:tr.create(i,this._getOperator())}_apply(t){const i=this._parse(t);return 0===i.getFilters().length?t:(function(c,f){let _=c;const A=f.getFlattenedFilters();for(const S of A)Yg(_,S),_=Ps(_,S)}(t._query,i),new Ls(t.firestore,t.converter,Ps(t._query,i)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Mh extends sp{constructor(t,i){super(),this._field=t,this._direction=i,this.type="orderBy"}static _create(t,i){return new Mh(t,i)}_apply(t){const i=function(c,f,_){if(null!==c.startAt)throw new Pe(Ae.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==c.endAt)throw new Pe(Ae.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Gs(f,_)}(t._query,this._field,this._direction);return new Ls(t.firestore,t.converter,function(c,f){const _=c.explicitOrderBy.concat([f]);return new Pi(c.path,c.collectionGroup,_,c.filters.slice(),c.limit,c.limitType,c.startAt,c.endAt)}(t._query,i))}}function M_(u,t="asc"){const i=t,o=qg("orderBy",u);return Mh._create(o,i)}class Nh extends sp{constructor(t,i,o){super(),this.type=t,this._limit=i,this._limitType=o}static _create(t,i,o){return new Nh(t,i,o)}_apply(t){return new Ls(t.firestore,t.converter,Ji(t._query,this._limit,this._limitType))}}function N_(u){return m_("limit",u),Nh._create("limit",u,"F")}function Lv(u){return m_("limitToLast",u),Nh._create("limitToLast",u,"L")}class xh extends sp{constructor(t,i,o){super(),this.type=t,this._docOrFields=i,this._inclusive=o}static _create(t,i,o){return new xh(t,i,o)}_apply(t){const i=O_(t,this.type,this._docOrFields,this._inclusive);return new Ls(t.firestore,t.converter,(f=i,new Pi((c=t._query).path,c.collectionGroup,c.explicitOrderBy.slice(),c.filters.slice(),c.limit,c.limitType,f,c.endAt)));var c,f}}function Ad(...u){return xh._create("startAt",u,!0)}function qo(...u){return xh._create("startAfter",u,!1)}class So extends sp{constructor(t,i,o){super(),this.type=t,this._docOrFields=i,this._inclusive=o}static _create(t,i,o){return new So(t,i,o)}_apply(t){const i=O_(t,this.type,this._docOrFields,this._inclusive);return new Ls(t.firestore,t.converter,(f=i,new Pi((c=t._query).path,c.collectionGroup,c.explicitOrderBy.slice(),c.filters.slice(),c.limit,c.limitType,c.startAt,f)));var c,f}}function x_(...u){return So._create("endBefore",u,!1)}function $I(...u){return So._create("endAt",u,!0)}function O_(u,t,i,o){if(i[0]=(0,k.Ku)(i[0]),i[0]instanceof El)return function(f,_,A,S,L){if(!S)throw new Pe(Ae.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${A}().`);const Q=[];for(const re of ve(f))if(re.field.isKeyField())Q.push(Pr(_,S.key));else{const we=S.data.field(re.field);if(Xn(we))throw new Pe(Ae.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+re.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===we){const Ye=re.field.canonicalString();throw new Pe(Ae.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${Ye}' (used as the orderBy) does not exist.`)}Q.push(we)}return new gs(Q,L)}(u._query,u.firestore._databaseId,t,i[0]._document,o);{const c=Rc(u.firestore);return function(_,A,S,L,Q,re){const we=_.explicitOrderBy;if(Q.length>we.length)throw new Pe(Ae.INVALID_ARGUMENT,`Too many arguments provided to ${L}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const Ye=[];for(let Rt=0;Rt<Q.length;Rt++){const jt=Q[Rt];if(we[Rt].field.isKeyField()){if("string"!=typeof jt)throw new Pe(Ae.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${L}(), but got a ${typeof jt}`);if(!X(_)&&-1!==jt.indexOf("/"))throw new Pe(Ae.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${L}() must be a plain document ID, but '${jt}' contains a slash.`);const Vt=_.path.child(Xt.fromString(jt));if(!Ot.isDocumentKey(Vt))throw new Pe(Ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${L}() must result in a valid document path, but '${Vt}' is not because it contains an odd number of segments.`);const vn=new Ot(Vt);Ye.push(Pr(A,vn))}else{const Vt=b_(S,L,jt);Ye.push(Vt)}}return new gs(Ye,re)}(u._query,u.firestore._databaseId,c,t,i,o)}}function Uv(u,t,i){if("string"==typeof(i=(0,k.Ku)(i))){if(""===i)throw new Pe(Ae.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!X(t)&&-1!==i.indexOf("/"))throw new Pe(Ae.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${i}' contains a '/' character.`);const o=t.path.child(Xt.fromString(i));if(!Ot.isDocumentKey(o))throw new Pe(Ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${o}' is not because it has an odd number of segments (${o.length}).`);return Pr(u,new Ot(o))}if(i instanceof Wi)return Pr(u,i._key);throw new Pe(Ae.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Yf(i)}.`)}function Bv(u,t){if(!Array.isArray(u)||0===u.length)throw new Pe(Ae.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function Yg(u,t){const i=function(c,f){for(const _ of c)for(const A of _.getFlattenedFilters())if(f.indexOf(A.op)>=0)return A.op;return null}(u.filters,function(c){switch(c){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw new Pe(Ae.INVALID_ARGUMENT,i===t.op?`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`:`Invalid query. You cannot use '${t.op.toString()}' filters with '${i.toString()}' filters.`)}class k_{convertValue(t,i="none"){switch(wi(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Lr(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,i);case 5:return t.stringValue;case 6:return this.convertBytes(Bi(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,i);case 11:return this.convertObject(t.mapValue,i);case 10:return this.convertVectorValue(t.mapValue);default:throw wt()}}convertObject(t,i){return this.convertObjectMap(t.fields,i)}convertObjectMap(t,i="none"){const o={};return jr(t,(c,f)=>{o[c]=this.convertValue(f,i)}),o}convertVectorValue(t){var i,o,c;const f=null===(c=null===(o=null===(i=t.fields)||void 0===i?void 0:i.value.arrayValue)||void 0===o?void 0:o.values)||void 0===c?void 0:c.map(_=>Lr(_.doubleValue));return new ml(f)}convertGeoPoint(t){return new bh(Lr(t.latitude),Lr(t.longitude))}convertArray(t,i){return(t.values||[]).map(o=>this.convertValue(o,i))}convertServerTimestamp(t,i){switch(i){case"previous":const o=qi(t);return null==o?null:this.convertValue(o,i);case"estimate":return this.convertTimestamp(Ys(t));default:return null}}convertTimestamp(t){const i=ls(t);return new ht(i.seconds,i.nanos)}convertDocumentKey(t,i){const o=Xt.fromString(t);Ct(xa(o));const c=new ws(o.get(1),o.get(3)),f=new Ot(o.popFirst(5));return c.isEqual(i)||Xe(`Document ${f} contains a document reference within a different database (${c.projectId}/${c.database}) which is not supported. It will be treated as a reference in the current database (${i.projectId}/${i.database}) instead.`),f}}function Il(u,t,i){let o;return o=u?i&&(i.merge||i.mergeFields)?u.toFirestore(t,i):u.toFirestore(t):t,o}class Zg extends k_{constructor(t){super(),this.firestore=t}convertBytes(t){return new Bu(t)}convertReference(t){const i=this.convertDocumentKey(t,this.firestore._databaseId);return new Wi(this.firestore,null,i)}}class $u{constructor(t,i){this.hasPendingWrites=t,this.fromCache=i}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class _u extends El{constructor(t,i,o,c,f,_){super(t,i,o,c,_),this._firestore=t,this._firestoreImpl=t,this.metadata=f}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const i=new Oh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(i,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,i={}){if(this._document){const o=this._document.data.field(qg("DocumentSnapshot.get",t));if(null!==o)return this._userDataWriter.convertValue(o,i.serverTimestamps)}}}class Oh extends _u{data(t={}){return super.data(t)}}class wl{constructor(t,i,o,c){this._firestore=t,this._userDataWriter=i,this._snapshot=c,this.metadata=new $u(c.hasPendingWrites,c.fromCache),this.query=o}get docs(){const t=[];return this.forEach(i=>t.push(i)),t}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(t,i){this._snapshot.docs.forEach(o=>{t.call(i,new Oh(this._firestore,this._userDataWriter,o.key,o,new $u(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const i=!!t.includeMetadataChanges;if(i&&this._snapshot.excludesMetadataChanges)throw new Pe(Ae.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===i||(this._cachedChanges=function(c,f){if(c._snapshot.oldDocs.isEmpty()){let _=0;return c._snapshot.docChanges.map(A=>({type:"added",doc:new Oh(c._firestore,c._userDataWriter,A.doc.key,A.doc,new $u(c._snapshot.mutatedKeys.has(A.doc.key),c._snapshot.fromCache),c.query.converter),oldIndex:-1,newIndex:_++}))}{let _=c._snapshot.oldDocs;return c._snapshot.docChanges.filter(A=>f||3!==A.type).map(A=>{const S=new Oh(c._firestore,c._userDataWriter,A.doc.key,A.doc,new $u(c._snapshot.mutatedKeys.has(A.doc.key),c._snapshot.fromCache),c.query.converter);let L=-1,Q=-1;return 0!==A.type&&(L=_.indexOf(A.doc.key),_=_.delete(A.doc.key)),1!==A.type&&(_=_.add(A.doc),Q=_.indexOf(A.doc.key)),{type:L_(A.type),doc:S,oldIndex:L,newIndex:Q}})}}(this,i),this._cachedChangesIncludeMetadataChanges=i),this._cachedChanges}}function L_(u){switch(u){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return wt()}}function $v(u,t){return u instanceof _u&&t instanceof _u?u._firestore===t._firestore&&u._key.isEqual(t._key)&&(null===u._document?null===t._document:u._document.isEqual(t._document))&&u._converter===t._converter:u instanceof wl&&t instanceof wl&&u._firestore===t._firestore&&Lg(u.query,t.query)&&u.metadata.isEqual(t.metadata)&&u._snapshot.isEqual(t._snapshot)}function Hv(u){u=gr(u,Wi);const t=gr(u.firestore,Rr);return Ng(Ei(t),u._key).then(i=>H_(t,u,i))}class Pc extends k_{constructor(t){super(),this.firestore=t}convertBytes(t){return new Bu(t)}convertReference(t){const i=this.convertDocumentKey(t,this.firestore._databaseId);return new Wi(this.firestore,null,i)}}function U_(u){u=gr(u,Wi);const t=gr(u.firestore,Rr),i=Ei(t),o=new Pc(t);return function Wf(u,t){const i=new Jt;return u.asyncQueue.enqueueAndForget((0,m.A)(function*(){return(o=(0,m.A)(function*(f,_,A){try{const S=yield function(Q,re){const we=Ze(Q);return we.persistence.runTransaction("read document","readonly",Ye=>we.localDocuments.getDocument(Ye,re))}(f,_);S.isFoundDocument()?A.resolve(S):S.isNoDocument()?A.resolve(null):A.reject(new Pe(Ae.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(S){const L=co(S,`Failed to get document '${_} from cache`);A.reject(L)}}),function c(f,_,A){return o.apply(this,arguments)})(yield mu(u),t,i);var o})),i.promise}(i,u._key).then(c=>new _u(t,o,u._key,c,new $u(null!==c&&c.hasLocalMutations,!0),u.converter))}function kh(u){u=gr(u,Wi);const t=gr(u.firestore,Rr);return Ng(Ei(t),u._key,{source:"server"}).then(i=>H_(t,u,i))}function ap(u){u=gr(u,Ls);const t=gr(u.firestore,Rr),i=Ei(t),o=new Pc(t);return ip(u._query),xg(i,u._query).then(c=>new wl(t,o,u,c))}function em(u){u=gr(u,Ls);const t=gr(u.firestore,Rr),i=Ei(t),o=new Pc(t);return function p_(u,t){const i=new Jt;return u.asyncQueue.enqueueAndForget((0,m.A)(function*(){return(o=(0,m.A)(function*(f,_,A){try{const S=yield dh(f,_,!0),L=new fn(_,S.Ts),Q=L.ma(S.documents),re=L.applyChanges(Q,!1);A.resolve(re.snapshot)}catch(S){const L=co(S,`Failed to execute query '${_} against cache`);A.reject(L)}}),function c(f,_,A){return o.apply(this,arguments)})(yield mu(u),t,i);var o})),i.promise}(i,u._query).then(c=>new wl(t,o,u,c))}function Gv(u){u=gr(u,Ls);const t=gr(u.firestore,Rr),i=Ei(t),o=new Pc(t);return xg(i,u._query,{source:"server"}).then(c=>new wl(t,o,u,c))}function zv(u,t,i){u=gr(u,Wi);const o=gr(u.firestore,Rr),c=Il(u.converter,t,i);return bd(o,[Sh(Rc(o),"setDoc",u._key,c,null!==u.converter,i).toMutation(u._key,Er.none())])}function tm(u,t,i,...o){u=gr(u,Wi);const c=gr(u.firestore,Rr),f=Rc(c);let _;return _="string"==typeof(t=(0,k.Ku)(t))||t instanceof ju?yl(f,"updateDoc",u._key,t,i,o):C_(f,"updateDoc",u._key,t),bd(c,[_.toMutation(u._key,Er.exists(!0))])}function B_(u){return bd(gr(u.firestore,Rr),[new D(u._key,Er.none())])}function Tl(u,t){const i=gr(u.firestore,Rr),o=Pv(u),c=Il(u.converter,t);return bd(i,[Sh(Rc(u.firestore),"addDoc",o._key,c,null!==u.converter,{}).toMutation(o._key,Er.exists(!1))]).then(()=>o)}function j_(u,...t){var i,o,c;u=(0,k.Ku)(u);let f={includeMetadataChanges:!1,source:"default"},_=0;"object"!=typeof t[_]||Ug(t[_])||(f=t[_],_++);const A={includeMetadataChanges:f.includeMetadataChanges,source:f.source};if(Ug(t[_])){const re=t[_];t[_]=null===(i=re.next)||void 0===i?void 0:i.bind(re),t[_+1]=null===(o=re.error)||void 0===o?void 0:o.bind(re),t[_+2]=null===(c=re.complete)||void 0===c?void 0:c.bind(re)}let S,L,Q;if(u instanceof Wi)L=gr(u.firestore,Rr),Q=j(u._key.path),S={next:re=>{t[_]&&t[_](H_(L,u,re))},error:t[_+1],complete:t[_+2]};else{const re=gr(u,Ls);L=gr(re.firestore,Rr),Q=re._query;const we=new Pc(L);S={next:Ye=>{t[_]&&t[_](new wl(L,we,re,Ye))},error:t[_+1],complete:t[_+2]},ip(u._query)}return function(we,Ye,Rt,jt){const Vt=new Uf(jt),vn=new N(Ye,Vt,Rt);return we.asyncQueue.enqueueAndForget((0,m.A)(function*(){return Fu(yield Id(we),vn)})),()=>{Vt.Za(),we.asyncQueue.enqueueAndForget((0,m.A)(function*(){return yh(yield Id(we),vn)}))}}(Ei(L),Q,A,S)}function $_(u,t){return function Og(u,t){const i=new Uf(t);return u.asyncQueue.enqueueAndForget((0,m.A)(function*(){return c=yield Id(u),f=i,Ze(c).Y_.add(f),void f.next();var c,f})),()=>{i.Za(),u.asyncQueue.enqueueAndForget((0,m.A)(function*(){return c=yield Id(u),f=i,void Ze(c).Y_.delete(f);var c,f}))}}(Ei(u=gr(u,Rr)),Ug(t)?t:{next:t})}function bd(u,t){return function(o,c){const f=new Jt;return o.asyncQueue.enqueueAndForget((0,m.A)(function*(){return function e_(u,t,i){return xf.apply(this,arguments)}(yield Ed(o),c,f)})),f.promise}(Ei(u),t)}function H_(u,t,i){const o=i.docs.get(t._key),c=new Pc(u);return new _u(u,c,t._key,o,new $u(i.hasPendingWrites,i.fromCache),t.converter)}const cp={maxAttempts:5};class Q_{constructor(t,i){this._firestore=t,this._commitHandler=i,this._mutations=[],this._committed=!1,this._dataReader=Rc(t)}set(t,i,o){this._verifyNotCommitted();const c=Hu(t,this._firestore),f=Il(c.converter,i,o),_=Sh(this._dataReader,"WriteBatch.set",c._key,f,null!==c.converter,o);return this._mutations.push(_.toMutation(c._key,Er.none())),this}update(t,i,o,...c){this._verifyNotCommitted();const f=Hu(t,this._firestore);let _;return _="string"==typeof(i=(0,k.Ku)(i))||i instanceof ju?yl(this._dataReader,"WriteBatch.update",f._key,i,o,c):C_(this._dataReader,"WriteBatch.update",f._key,i),this._mutations.push(_.toMutation(f._key,Er.exists(!0))),this}delete(t){this._verifyNotCommitted();const i=Hu(t,this._firestore);return this._mutations=this._mutations.concat(new D(i._key,Er.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Pe(Ae.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Hu(u,t){if((u=(0,k.Ku)(u)).firestore!==t)throw new Pe(Ae.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return u}class Qv extends class{constructor(i,o){this._firestore=i,this._transaction=o,this._dataReader=Rc(i)}get(i){const o=Hu(i,this._firestore),c=new Zg(this._firestore);return this._transaction.lookup([o._key]).then(f=>{if(!f||1!==f.length)return wt();const _=f[0];if(_.isFoundDocument())return new El(this._firestore,c,_.key,_,o.converter);if(_.isNoDocument())return new El(this._firestore,c,o._key,null,o.converter);throw wt()})}set(i,o,c){const f=Hu(i,this._firestore),_=Il(f.converter,o,c),A=Sh(this._dataReader,"Transaction.set",f._key,_,null!==f.converter,c);return this._transaction.set(f._key,A),this}update(i,o,c,...f){const _=Hu(i,this._firestore);let A;return A="string"==typeof(o=(0,k.Ku)(o))||o instanceof ju?yl(this._dataReader,"Transaction.update",_._key,o,c,f):C_(this._dataReader,"Transaction.update",_._key,o),this._transaction.update(_._key,A),this}delete(i){const o=Hu(i,this._firestore);return this._transaction.delete(o._key),this}}{constructor(t,i){super(t,i),this._firestore=t}get(t){const i=Hu(t,this._firestore),o=new Pc(this._firestore);return super.get(t).then(c=>new _u(this._firestore,o,i._key,c._document,new $u(!1,!1),i.converter))}}function Xv(u,t,i){u=gr(u,Rr);const o=Object.assign(Object.assign({},cp),i);return function(f){if(f.maxAttempts<1)throw new Pe(Ae.INVALID_ARGUMENT,"Max attempts must be at least 1")}(o),function(f,_,A){const S=new Jt;return f.asyncQueue.enqueueAndForget((0,m.A)(function*(){const L=yield function Hf(u){return $f(u).then(t=>t.datastore)}(f);new Cv(f.asyncQueue,L,A,_,S).au()})),S.promise}(Ei(u),c=>t(new Qv(u,c)),o)}function Yv(){return new Rh("deleteField")}function X_(){return new Gg("serverTimestamp")}function Y_(...u){return new zg("arrayUnion",u)}function sr(...u){return new tp("arrayRemove",u)}function J_(u){return new A_("increment",u)}!function(t,i=!0){at=V.SDK_VERSION,(0,V._registerComponent)(new oe.uA("firestore",(o,{instanceIdentifier:c,options:f})=>{const _=o.getProvider("app").getImmediate(),A=new Rr(new ye(o.getProvider("auth-internal")),new cn(o.getProvider("app-check-internal")),function(L,Q){if(!Object.prototype.hasOwnProperty.apply(L.options,["projectId"]))throw new Pe(Ae.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ws(L.options.projectId,Q)}(_,c),_);return f=Object.assign({useFetchStreams:i},f),A._setSettings(f),A},"PUBLIC").setMultipleInstances(!0)),(0,V.registerVersion)(vt,"4.7.3",t),(0,V.registerVersion)(vt,"4.7.3","esm2017")}()},1076:(on,rt,$)=>{$.d(rt,{Am:()=>Nn,Bd:()=>Xe,FA:()=>lt,Fy:()=>Dt,I9:()=>an,Im:()=>Xt,Ku:()=>Ft,Ll:()=>be,T9:()=>vt,Uj:()=>We,XA:()=>he,ZQ:()=>ut,bD:()=>Dn,c1:()=>bn,cY:()=>at,eX:()=>Me,g:()=>He,gR:()=>ot,hp:()=>mn,jZ:()=>Ut,lT:()=>Ze,lV:()=>Ct,mS:()=>Je,nr:()=>Jt,p7:()=>rn,sr:()=>wt,tD:()=>xr,u:()=>pe,yU:()=>ln,zW:()=>Re,zw:()=>Be});const ne=function(ie){const ue=[];let ge=0;for(let tt=0;tt<ie.length;tt++){let Oe=ie.charCodeAt(tt);Oe<128?ue[ge++]=Oe:Oe<2048?(ue[ge++]=Oe>>6|192,ue[ge++]=63&Oe|128):55296==(64512&Oe)&&tt+1<ie.length&&56320==(64512&ie.charCodeAt(tt+1))?(Oe=65536+((1023&Oe)<<10)+(1023&ie.charCodeAt(++tt)),ue[ge++]=Oe>>18|240,ue[ge++]=Oe>>12&63|128,ue[ge++]=Oe>>6&63|128,ue[ge++]=63&Oe|128):(ue[ge++]=Oe>>12|224,ue[ge++]=Oe>>6&63|128,ue[ge++]=63&Oe|128)}return ue},Ue={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(ie,ue){if(!Array.isArray(ie))throw Error("encodeByteArray takes an array as a parameter");this.init_();const ge=ue?this.byteToCharMapWebSafe_:this.byteToCharMap_,tt=[];for(let Oe=0;Oe<ie.length;Oe+=3){const zt=ie[Oe],Qt=Oe+1<ie.length,Dr=Qt?ie[Oe+1]:0,qr=Oe+2<ie.length,wn=qr?ie[Oe+2]:0;let fr=(15&Dr)<<2|wn>>6,Zr=63&wn;qr||(Zr=64,Qt||(fr=64)),tt.push(ge[zt>>2],ge[(3&zt)<<4|Dr>>4],ge[fr],ge[Zr])}return tt.join("")},encodeString(ie,ue){return this.HAS_NATIVE_SUPPORT&&!ue?btoa(ie):this.encodeByteArray(ne(ie),ue)},decodeString(ie,ue){return this.HAS_NATIVE_SUPPORT&&!ue?atob(ie):function(ie){const ue=[];let ge=0,tt=0;for(;ge<ie.length;){const Oe=ie[ge++];if(Oe<128)ue[tt++]=String.fromCharCode(Oe);else if(Oe>191&&Oe<224){const zt=ie[ge++];ue[tt++]=String.fromCharCode((31&Oe)<<6|63&zt)}else if(Oe>239&&Oe<365){const qr=((7&Oe)<<18|(63&ie[ge++])<<12|(63&ie[ge++])<<6|63&ie[ge++])-65536;ue[tt++]=String.fromCharCode(55296+(qr>>10)),ue[tt++]=String.fromCharCode(56320+(1023&qr))}else{const zt=ie[ge++],Qt=ie[ge++];ue[tt++]=String.fromCharCode((15&Oe)<<12|(63&zt)<<6|63&Qt)}}return ue.join("")}(this.decodeStringToByteArray(ie,ue))},decodeStringToByteArray(ie,ue){this.init_();const ge=ue?this.charToByteMapWebSafe_:this.charToByteMap_,tt=[];for(let Oe=0;Oe<ie.length;){const zt=ge[ie.charAt(Oe++)],Dr=Oe<ie.length?ge[ie.charAt(Oe)]:0;++Oe;const wn=Oe<ie.length?ge[ie.charAt(Oe)]:64;++Oe;const Vn=Oe<ie.length?ge[ie.charAt(Oe)]:64;if(++Oe,null==zt||null==Dr||null==wn||null==Vn)throw new le;tt.push(zt<<2|Dr>>4),64!==wn&&(tt.push(Dr<<4&240|wn>>2),64!==Vn&&tt.push(wn<<6&192|Vn))}return tt},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let ie=0;ie<this.ENCODED_VALS.length;ie++)this.byteToCharMap_[ie]=this.ENCODED_VALS.charAt(ie),this.charToByteMap_[this.byteToCharMap_[ie]]=ie,this.byteToCharMapWebSafe_[ie]=this.ENCODED_VALS_WEBSAFE.charAt(ie),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[ie]]=ie,ie>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(ie)]=ie,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(ie)]=ie)}}};class le extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const We=function(ie){return function(ie){const ue=ne(ie);return Ue.encodeByteArray(ue,!0)}(ie).replace(/\./g,"")},pe=function(ie){try{return Ue.decodeString(ie,!0)}catch(ue){console.error("base64Decode failed: ",ue)}return null};function Be(ie,ue){if(!(ue instanceof Object))return ue;switch(ue.constructor){case Date:return new Date(ue.getTime());case Object:void 0===ie&&(ie={});break;case Array:ie=[];break;default:return ue}for(const ge in ue)!ue.hasOwnProperty(ge)||!At(ge)||(ie[ge]=Be(ie[ge],ue[ge]));return ie}function At(ie){return"__proto__"!==ie}function Je(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const Nt=()=>{try{return Je().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const ie=process.env.__FIREBASE_DEFAULTS__;return ie?JSON.parse(ie):void 0})()||(()=>{if(typeof document>"u")return;let ie;try{ie=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const ue=ie&&pe(ie[1]);return ue&&JSON.parse(ue)})()}catch(ie){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${ie}`)}},ln=ie=>{const ue=(ie=>{var ue,ge;return null===(ge=null===(ue=Nt())||void 0===ue?void 0:ue.emulatorHosts)||void 0===ge?void 0:ge[ie]})(ie);if(!ue)return;const ge=ue.lastIndexOf(":");if(ge<=0||ge+1===ue.length)throw new Error(`Invalid host ${ue} with no separate hostname and port!`);const tt=parseInt(ue.substring(ge+1),10);return"["===ue[0]?[ue.substring(1,ge-1),tt]:[ue.substring(0,ge),tt]},vt=()=>{var ie;return null===(ie=Nt())||void 0===ie?void 0:ie.config},he=ie=>{var ue;return null===(ue=Nt())||void 0===ue?void 0:ue[`_${ie}`]};class at{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((ue,ge)=>{this.resolve=ue,this.reject=ge})}wrapCallback(ue){return(ge,tt)=>{ge?this.reject(ge):this.resolve(tt),"function"==typeof ue&&(this.promise.catch(()=>{}),1===ue.length?ue(ge):ue(ge,tt))}}}function Dt(ie,ue){if(ie.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const tt=ue||"demo-project",Oe=ie.iat||0,zt=ie.sub||ie.user_id;if(!zt)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Qt=Object.assign({iss:`https://securetoken.google.com/${tt}`,aud:tt,iat:Oe,exp:Oe+3600,auth_time:Oe,sub:zt,user_id:zt,firebase:{sign_in_provider:"custom",identities:{}}},ie);return[We(JSON.stringify({alg:"none",type:"JWT"})),We(JSON.stringify(Qt)),""].join(".")}function ut(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ut(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ut())}function be(){var ie;const ue=null===(ie=Nt())||void 0===ie?void 0:ie.forceEnvironment;if("node"===ue)return!0;if("browser"===ue)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Xe(){return typeof window<"u"||rn()}function rn(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function bn(){return typeof navigator<"u"&&"Cloudflare-Workers"===navigator.userAgent}function wt(){const ie="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof ie&&void 0!==ie.id}function Ct(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ze(){const ie=ut();return ie.indexOf("MSIE ")>=0||ie.indexOf("Trident/")>=0}function Jt(){return!be()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Re(){try{return"object"==typeof indexedDB}catch{return!1}}function Me(){return new Promise((ie,ue)=>{try{let ge=!0;const tt="validate-browser-context-for-indexeddb-analytics-module",Oe=self.indexedDB.open(tt);Oe.onsuccess=()=>{Oe.result.close(),ge||self.indexedDB.deleteDatabase(tt),ie(!0)},Oe.onupgradeneeded=()=>{ge=!1},Oe.onerror=()=>{var zt;ue((null===(zt=Oe.error)||void 0===zt?void 0:zt.message)||"")}}catch(ge){ue(ge)}})}class He extends Error{constructor(ue,ge,tt){super(ge),this.code=ue,this.customData=tt,this.name="FirebaseError",Object.setPrototypeOf(this,He.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,lt.prototype.create)}}class lt{constructor(ue,ge,tt){this.service=ue,this.serviceName=ge,this.errors=tt}create(ue,...ge){const tt=ge[0]||{},Oe=`${this.service}/${ue}`,zt=this.errors[ue],Qt=zt?function bt(ie,ue){return ie.replace(cn,(ge,tt)=>{const Oe=ue[tt];return null!=Oe?String(Oe):`<${tt}?>`})}(zt,tt):"Error";return new He(Oe,`${this.serviceName}: ${Qt} (${Oe}).`,tt)}}const cn=/\{\$([^}]+)}/g;function ot(ie,ue){return Object.prototype.hasOwnProperty.call(ie,ue)}function Xt(ie){for(const ue in ie)if(Object.prototype.hasOwnProperty.call(ie,ue))return!1;return!0}function Dn(ie,ue){if(ie===ue)return!0;const ge=Object.keys(ie),tt=Object.keys(ue);for(const Oe of ge){if(!tt.includes(Oe))return!1;const zt=ie[Oe],Qt=ue[Oe];if(Ot(zt)&&Ot(Qt)){if(!Dn(zt,Qt))return!1}else if(zt!==Qt)return!1}for(const Oe of tt)if(!ge.includes(Oe))return!1;return!0}function Ot(ie){return null!==ie&&"object"==typeof ie}function Nn(ie){const ue=[];for(const[ge,tt]of Object.entries(ie))Array.isArray(tt)?tt.forEach(Oe=>{ue.push(encodeURIComponent(ge)+"="+encodeURIComponent(Oe))}):ue.push(encodeURIComponent(ge)+"="+encodeURIComponent(tt));return ue.length?"&"+ue.join("&"):""}function an(ie){const ue={};return ie.replace(/^\?/,"").split("&").forEach(tt=>{if(tt){const[Oe,zt]=tt.split("=");ue[decodeURIComponent(Oe)]=decodeURIComponent(zt)}}),ue}function mn(ie){const ue=ie.indexOf("?");if(!ue)return"";const ge=ie.indexOf("#",ue);return ie.substring(ue,ge>0?ge:void 0)}function xr(ie,ue){const ge=new Jn(ie,ue);return ge.subscribe.bind(ge)}class Jn{constructor(ue,ge){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=ge,this.task.then(()=>{ue(this)}).catch(tt=>{this.error(tt)})}next(ue){this.forEachObserver(ge=>{ge.next(ue)})}error(ue){this.forEachObserver(ge=>{ge.error(ue)}),this.close(ue)}complete(){this.forEachObserver(ue=>{ue.complete()}),this.close()}subscribe(ue,ge,tt){let Oe;if(void 0===ue&&void 0===ge&&void 0===tt)throw new Error("Missing Observer.");Oe=function Or(ie,ue){if("object"!=typeof ie||null===ie)return!1;for(const ge of ue)if(ge in ie&&"function"==typeof ie[ge])return!0;return!1}(ue,["next","error","complete"])?ue:{next:ue,error:ge,complete:tt},void 0===Oe.next&&(Oe.next=_r),void 0===Oe.error&&(Oe.error=_r),void 0===Oe.complete&&(Oe.complete=_r);const zt=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Oe.error(this.finalError):Oe.complete()}catch{}}),this.observers.push(Oe),zt}unsubscribeOne(ue){void 0===this.observers||void 0===this.observers[ue]||(delete this.observers[ue],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(ue){if(!this.finalized)for(let ge=0;ge<this.observers.length;ge++)this.sendOne(ge,ue)}sendOne(ue,ge){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[ue])try{ge(this.observers[ue])}catch(tt){typeof console<"u"&&console.error&&console.error(tt)}})}close(ue){this.finalized||(this.finalized=!0,void 0!==ue&&(this.finalError=ue),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function _r(){}function Ft(ie){return ie&&ie._delegate?ie._delegate:ie}},4549:(on,rt,$)=>{$.d(rt,{V:()=>ne});var m=$(4412),V=$(4438),oe=$(1626);let ne=(()=>{class k{constructor(le){this.http=le,this.apiUrl="https://testapp.cleanEnvironstechnology.com/interview/test/v1/product/users?count=200000",this.dataSubject=new m.t([]),this.data$=this.dataSubject.asObservable(),this.addedEmployees=[]}fetchData(){this.http.get(this.apiUrl).subscribe(le=>{const We=[...le.map(pe=>({name:pe.name,contact:pe.id,email:pe.name,address:pe.name,date:pe.date})),...this.addedEmployees];this.dataSubject.next(We)},le=>{console.error("Error fetching data:",le)})}getData(){return this.data$}addEmployee(le){this.addedEmployees.push(le);const Qe=this.dataSubject.getValue();this.dataSubject.next([...Qe,le])}static{this.\u0275fac=function(Qe){return new(Qe||k)(V.KVO(oe.Qq))}}static{this.\u0275prov=V.jDH({token:k,factory:k.\u0275fac,providedIn:"root"})}}return k})()},5547:(on,rt,$)=>{var m=$(345),V=$(1626),oe=$(9888),ne=$(4341),k=$(4438),Ue=$(4549),le=$(4412),Qe=$(1182);let We=(()=>{class $e{constructor(ct,dt){this.afAuth=ct,this.router=dt,this.userSubject=new le.t(null),this.user=this.userSubject.asObservable(),this.afAuth.authState.subscribe(ht=>{this.userSubject.next(ht)})}login(ct,dt){return this.afAuth.signInWithEmailAndPassword(ct,dt)}signUp(ct,dt){return this.afAuth.createUserWithEmailAndPassword(ct,dt)}resetPassword(ct){return this.afAuth.sendPasswordResetEmail(ct)}logout(){return this.afAuth.signOut().then(()=>{this.router.navigate(["/login"])})}getUser(){return this.userSubject.value}static{this.\u0275fac=function(dt){return new(dt||$e)(k.KVO(Qe.DS),k.KVO(oe.Ix))}}static{this.\u0275prov=k.jDH({token:$e,factory:$e.\u0275fac,providedIn:"root"})}}return $e})();var pe=$(177);function fe($e,gt){1&$e&&(k.j41(0,"h2",10),k.EFF(1,"Sign In"),k.k0s())}function Be($e,gt){1&$e&&(k.j41(0,"h2",10),k.EFF(1,"Sign Up"),k.k0s())}function At($e,gt){1&$e&&(k.j41(0,"h2",10),k.EFF(1,"Forgot Password"),k.k0s())}function Je($e,gt){1&$e&&(k.j41(0,"small"),k.EFF(1,"Email is required."),k.k0s())}function xt($e,gt){1&$e&&(k.j41(0,"small"),k.EFF(1,"Enter a valid email address."),k.k0s())}function qt($e,gt){if(1&$e&&(k.j41(0,"div",20),k.DNE(1,Je,2,0,"small",21)(2,xt,2,0,"small",21),k.k0s()),2&$e){let ct,dt;const ht=k.XpG(2);k.R7$(),k.Y8G("ngIf",null==(ct=ht.loginForm.get("email"))||null==ct.errors?null:ct.errors.required),k.R7$(),k.Y8G("ngIf",null==(dt=ht.loginForm.get("email"))||null==dt.errors?null:dt.errors.email)}}function $t($e,gt){1&$e&&(k.j41(0,"small"),k.EFF(1,"Password is required."),k.k0s())}function Nt($e,gt){if(1&$e&&(k.j41(0,"small"),k.EFF(1),k.k0s()),2&$e){let ct;const dt=k.XpG(4);k.R7$(),k.SpI(" Password must be at least ",null==(ct=dt.loginForm.get("password"))||null==ct.errors||null==ct.errors.minlength?null:ct.errors.minlength.requiredLength," characters long. ")}}function un($e,gt){if(1&$e&&(k.j41(0,"div",20),k.DNE(1,$t,2,0,"small",21)(2,Nt,2,1,"small",21),k.k0s()),2&$e){let ct,dt;const ht=k.XpG(3);k.R7$(),k.Y8G("ngIf",null==(ct=ht.loginForm.get("password"))||null==ct.errors?null:ct.errors.required),k.R7$(),k.Y8G("ngIf",null==(dt=ht.loginForm.get("password"))||null==dt.errors?null:dt.errors.minlength)}}function ln($e,gt){if(1&$e&&(k.j41(0,"div",12)(1,"label",22),k.EFF(2,"Password"),k.k0s(),k.nrm(3,"input",23),k.DNE(4,un,3,2,"div",15),k.k0s()),2&$e){let ct;const dt=k.XpG(2);k.R7$(4),k.Y8G("ngIf",(null==(ct=dt.loginForm.get("password"))?null:ct.touched)&&(null==(ct=dt.loginForm.get("password"))?null:ct.invalid))}}function vt($e,gt){if(1&$e){const ct=k.RV6();k.j41(0,"div",24)(1,"a",25),k.bIt("click",function(){k.eBV(ct);const ht=k.XpG(2);return k.Njj(ht.onForgotPassword())}),k.EFF(2,"Forgot Password?"),k.k0s()()}}function he($e,gt){if(1&$e){const ct=k.RV6();k.j41(0,"div",26)(1,"button",27),k.bIt("click",function(){k.eBV(ct);const ht=k.XpG(2);return k.Njj(ht.onSignUp())}),k.EFF(2,"Sign Up"),k.k0s(),k.j41(3,"button",28),k.bIt("click",function(){k.eBV(ct);const ht=k.XpG(2);return k.Njj(ht.onAppFile())}),k.EFF(4,"App File"),k.k0s()()}}function at($e,gt){if(1&$e){const ct=k.RV6();k.j41(0,"form",11),k.bIt("ngSubmit",function(){k.eBV(ct);const ht=k.XpG();return k.Njj(ht.onSubmit())}),k.j41(1,"div",12)(2,"label",13),k.EFF(3,"Email"),k.k0s(),k.nrm(4,"input",14),k.DNE(5,qt,3,2,"div",15),k.k0s(),k.DNE(6,ln,5,1,"div",16),k.j41(7,"button",17),k.EFF(8,"Login"),k.k0s(),k.DNE(9,vt,3,0,"div",18)(10,he,5,0,"div",19),k.k0s()}if(2&$e){let ct;const dt=k.XpG();k.Y8G("formGroup",dt.loginForm),k.R7$(5),k.Y8G("ngIf",(null==(ct=dt.loginForm.get("email"))?null:ct.touched)&&(null==(ct=dt.loginForm.get("email"))?null:ct.invalid)),k.R7$(),k.Y8G("ngIf",!dt.isForgotPassword),k.R7$(3),k.Y8G("ngIf",!dt.isForgotPassword),k.R7$(),k.Y8G("ngIf",!dt.isForgotPassword)}}function Dt($e,gt){1&$e&&(k.j41(0,"small"),k.EFF(1,"Email is required."),k.k0s())}function ut($e,gt){1&$e&&(k.j41(0,"small"),k.EFF(1,"Enter a valid email address."),k.k0s())}function Ut($e,gt){if(1&$e&&(k.j41(0,"div",20),k.DNE(1,Dt,2,0,"small",21)(2,ut,2,0,"small",21),k.k0s()),2&$e){let ct,dt;const ht=k.XpG(2);k.R7$(),k.Y8G("ngIf",null==(ct=ht.signUpForm.get("email"))||null==ct.errors?null:ct.errors.required),k.R7$(),k.Y8G("ngIf",null==(dt=ht.signUpForm.get("email"))||null==dt.errors?null:dt.errors.email)}}function be($e,gt){1&$e&&(k.j41(0,"small"),k.EFF(1,"Password is required."),k.k0s())}function Xe($e,gt){if(1&$e&&(k.j41(0,"small"),k.EFF(1),k.k0s()),2&$e){let ct;const dt=k.XpG(3);k.R7$(),k.SpI(" Password must be at least ",null==(ct=dt.signUpForm.get("password"))||null==ct.errors||null==ct.errors.minlength?null:ct.errors.minlength.requiredLength," characters long. ")}}function rn($e,gt){if(1&$e&&(k.j41(0,"div",20),k.DNE(1,be,2,0,"small",21)(2,Xe,2,1,"small",21),k.k0s()),2&$e){let ct,dt;const ht=k.XpG(2);k.R7$(),k.Y8G("ngIf",null==(ct=ht.signUpForm.get("password"))||null==ct.errors?null:ct.errors.required),k.R7$(),k.Y8G("ngIf",null==(dt=ht.signUpForm.get("password"))||null==dt.errors?null:dt.errors.minlength)}}function bn($e,gt){if(1&$e){const ct=k.RV6();k.j41(0,"form",11),k.bIt("ngSubmit",function(){k.eBV(ct);const ht=k.XpG();return k.Njj(ht.onSignUpSubmit())}),k.j41(1,"div",12)(2,"label",29),k.EFF(3,"Full Name"),k.k0s(),k.nrm(4,"input",30),k.k0s(),k.j41(5,"div",12)(6,"label",13),k.EFF(7,"Email"),k.k0s(),k.nrm(8,"input",14),k.DNE(9,Ut,3,2,"div",15),k.k0s(),k.j41(10,"div",12)(11,"label",22),k.EFF(12,"Password"),k.k0s(),k.nrm(13,"input",23),k.DNE(14,rn,3,2,"div",15),k.k0s(),k.j41(15,"button",17),k.EFF(16,"Sign Up"),k.k0s()()}if(2&$e){let ct,dt;const ht=k.XpG();k.Y8G("formGroup",ht.signUpForm),k.R7$(9),k.Y8G("ngIf",(null==(ct=ht.signUpForm.get("email"))?null:ct.touched)&&(null==(ct=ht.signUpForm.get("email"))?null:ct.invalid)),k.R7$(5),k.Y8G("ngIf",(null==(dt=ht.signUpForm.get("password"))?null:dt.touched)&&(null==(dt=ht.signUpForm.get("password"))?null:dt.invalid))}}function wt($e,gt){if(1&$e&&(k.j41(0,"div",31),k.EFF(1),k.k0s()),2&$e){const ct=k.XpG();k.R7$(),k.SpI(" ",ct.errorMessage," ")}}const Bn=[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",component:(()=>{class $e{constructor(ct,dt,ht,ot){this.fb=ct,this.router=dt,this.dataService=ht,this.auth=ot,this.errorMessage="",this.isSignIn=!0,this.isForgotPassword=!1,this.loginForm=this.fb.group({email:["",[ne.k0.required,ne.k0.email,this.noWhitespaceValidator]],password:["",[ne.k0.required]]}),this.signUpForm=this.fb.group({name:["",ne.k0.required],email:["",[ne.k0.required,ne.k0.email]],password:["",[ne.k0.required,ne.k0.minLength(6)]]})}noWhitespaceValidator(ct){return ct.value&&-1!==ct.value.indexOf(" ")?{whitespace:!0}:null}onSubmit(){if(this.loginForm.invalid)return void(this.errorMessage="Please fill in all required fields correctly.");const{email:ct,password:dt}=this.loginForm.value;this.auth.login(ct,dt).then(ht=>{"prithikamanokaran23@gmail.com"===ct?(this.router.navigate(["/home"]),localStorage.setItem("user",JSON.stringify({role:"admin"}))):(localStorage.setItem("user",JSON.stringify({role:"user"})),this.router.navigate(["/home"]))}).catch(ht=>{this.errorMessage="Invalid email or password.",console.error("Login error:",ht)})}onSignUpSubmit(){if(this.signUpForm.invalid)return;const{email:ct,password:dt}=this.signUpForm.value;this.auth.signUp(ct,dt).then(()=>{this.isSignIn=!0},ot=>{this.errorMessage=ot.message})}onForgotPassword(){this.isForgotPassword=!0,this.loginForm.reset()}onResetPassword(){}onSignUp(){this.router.navigate(["/signup"])}onAppFile(){console.log("App file clicked")}static{this.\u0275fac=function(dt){return new(dt||$e)(k.rXU(ne.ok),k.rXU(oe.Ix),k.rXU(Ue.V),k.rXU(We))}}static{this.\u0275cmp=k.VBU({type:$e,selectors:[["app-login"]],decls:13,vars:6,consts:[[1,"container-fluid","login-container"],[1,"row","justify-content-center","align-items-center"],[1,"login-card","p-0"],[1,"row","g-0","h-100"],[1,"col-md-6","d-none","d-md-block","image-section"],[1,"text-center","text-white","p-4"],[1,"col-md-6","form-section","p-4"],["class","mb-4",4,"ngIf"],[3,"formGroup","ngSubmit",4,"ngIf"],["class","text-danger mt-3",4,"ngIf"],[1,"mb-4"],[3,"ngSubmit","formGroup"],[1,"mb-3"],["for","email",1,"form-label"],["type","email","id","email","formControlName","email","placeholder","Enter your email",1,"form-control"],["class","text-danger mt-1",4,"ngIf"],["class","mb-3",4,"ngIf"],["type","submit",1,"btn","btn-secondary","w-100","mb-3"],["class","text-center mb-3",4,"ngIf"],["class","d-flex justify-content-between",4,"ngIf"],[1,"text-danger","mt-1"],[4,"ngIf"],["for","password",1,"form-label"],["type","password","id","password","formControlName","password","placeholder","Enter your password",1,"form-control"],[1,"text-center","mb-3"],[1,"text-decoration-none","text-primary",3,"click"],[1,"d-flex","justify-content-between"],["type","button",1,"btn","btn-secondary","flex-grow-1","me-2",3,"click"],["type","button",1,"btn","btn-secondary","flex-grow-1","ms-2",3,"click"],["for","name",1,"form-label"],["type","text","id","name","formControlName","name","placeholder","Enter your full name",1,"form-control"],[1,"text-danger","mt-3"]],template:function(dt,ht){1&dt&&(k.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),k.nrm(5,"div",5),k.k0s(),k.j41(6,"div",6),k.DNE(7,fe,2,0,"h2",7)(8,Be,2,0,"h2",7)(9,At,2,0,"h2",7)(10,at,11,5,"form",8)(11,bn,17,3,"form",8)(12,wt,2,1,"div",9),k.k0s()()()()()),2&dt&&(k.R7$(7),k.Y8G("ngIf",ht.isSignIn&&!ht.isForgotPassword),k.R7$(),k.Y8G("ngIf",!ht.isSignIn),k.R7$(),k.Y8G("ngIf",ht.isForgotPassword),k.R7$(),k.Y8G("ngIf",ht.isSignIn),k.R7$(),k.Y8G("ngIf",!ht.isSignIn),k.R7$(),k.Y8G("ngIf",ht.errorMessage))},dependencies:[pe.bT,ne.qT,ne.me,ne.BC,ne.cb,ne.j4,ne.JD],styles:[".login-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;justify-content:center;align-items:center;background:linear-gradient(90deg,#e91e63 50%,#1d1d1d 50%)}.login-card[_ngcontent-%COMP%]{width:90vw;max-width:70vw;height:80vh;background-color:#fff;border-radius:1vw;overflow:hidden;box-shadow:0 4px 20px #0003;display:flex;flex-direction:column}.image-section[_ngcontent-%COMP%]{background:url(https://media.gettyimages.com/id/77862674/photo/hands-on-a-globe.jpg?s=612x612&w=0&k=20&c=Sr7LNYiwVPL7fq7aQeJNZWYWhw6Q8nQR_sTskYC-9fg=) no-repeat center center;background-size:cover;width:50%;height:100%}.image-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2vw;font-weight:700}.image-section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2vw}.form-section[_ngcontent-%COMP%]{padding:4vw;width:50%}.form-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2vw;font-weight:700;margin-bottom:2vh}.form-label[_ngcontent-%COMP%]{font-size:1vw}.form-control[_ngcontent-%COMP%]{font-size:1vw;padding:1vh 1vw}.btn-primary[_ngcontent-%COMP%]{background-color:#e91e63;border-color:#e91e63;font-size:1.2vw;padding:1vh 2vw}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#d81b60;border-color:#d81b60}@media (max-width: 768px){.login-card[_ngcontent-%COMP%]{flex-direction:column;width:95vw;height:auto}.image-section[_ngcontent-%COMP%]{width:100%;height:30vh}.form-section[_ngcontent-%COMP%]{width:100%;padding:3vw}.image-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], .image-section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .form-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .form-label[_ngcontent-%COMP%], .form-control[_ngcontent-%COMP%], .btn-primary[_ngcontent-%COMP%]{font-size:3vw}.btn-primary[_ngcontent-%COMP%]{padding:1.5vh 2.5vw}}.form-section[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{border-radius:5px;font-weight:700}.form-section[_ngcontent-%COMP%]   .d-flex[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{max-width:48%}.btn-secondary[_ngcontent-%COMP%]{background-color:#e91e63;border-color:#e91e63}"]})}}return $e})()},{path:"",loadChildren:()=>$.e(794).then($.bind($,8794)).then($e=>$e.LoggedInModule)}];let Ze=(()=>{class $e{static{this.\u0275fac=function(dt){return new(dt||$e)}}static{this.\u0275mod=k.$C({type:$e})}static{this.\u0275inj=k.G2t({imports:[oe.iI.forRoot(Bn),oe.iI]})}}return $e})();const Ae=($e,gt,ct)=>({"sidebar-expanded":$e,"sidebar-collapsed":gt,"sidebar-hidden":ct});function Pe($e,gt){1&$e&&(k.j41(0,"li",4)(1,"a",12),k.EFF(2,"Complaint List"),k.k0s()())}function Jt($e,gt){1&$e&&(k.j41(0,"span"),k.EFF(1,"\u2630"),k.k0s())}function Re($e,gt){1&$e&&(k.j41(0,"span"),k.EFF(1,"X"),k.k0s())}let Me=(()=>{class $e{constructor(ct){this.router=ct,this.isAdmin=!1,this.isLoggedIn=!1,this.sidebarExpanded=!0,this.isMobile=!1}ngOnInit(){const ct=JSON.parse(localStorage.getItem("user")||"{}");this.isAdmin="admin"===ct.role||"super admin"===ct.role,this.isLoggedIn=!!ct.role,this.onResize(),this.router.events.subscribe(dt=>{dt instanceof oe.wF&&this.isMobile&&(this.sidebarExpanded=!1)})}onResize(){this.isMobile=window.innerWidth<=768,this.isMobile&&(this.sidebarExpanded=!1)}logout(){localStorage.clear(),this.router.navigate(["/login"])}toggleSidebar(){this.sidebarExpanded=!this.sidebarExpanded}static{this.\u0275fac=function(dt){return new(dt||$e)(k.rXU(oe.Ix))}}static{this.\u0275cmp=k.VBU({type:$e,selectors:[["app-sidebar"]],hostBindings:function(dt,ht){1&dt&&k.bIt("resize",function(){return ht.onResize()},!1,k.tSv)},decls:18,vars:8,consts:[[1,"d-flex"],[1,"sidebar","vh-100","bg-dark","text-white","p-3",3,"ngClass"],[1,"mb-4"],[1,"list-unstyled"],[1,"mb-2"],["routerLink","/home",1,"text-decoration-none","text-white"],["class","mb-2",4,"ngIf"],["routerLink","/add-complaint-table",1,"text-decoration-none","text-white"],[1,"mt-4"],[1,"btn","btn-outline-light","w-100",3,"click"],[1,"btn","btn-dark","d-block","d-md-none","toggle-btn",3,"click"],[4,"ngIf"],["routerLink","/complaint-listing",1,"text-decoration-none","text-white"]],template:function(dt,ht){1&dt&&(k.j41(0,"div",0)(1,"div",1)(2,"h3",2),k.EFF(3,"Menu"),k.k0s(),k.j41(4,"ul",3)(5,"li",4)(6,"a",5),k.EFF(7,"Home"),k.k0s()(),k.DNE(8,Pe,3,0,"li",6),k.j41(9,"li",4)(10,"a",7),k.EFF(11,"ADD Complaint Table"),k.k0s()(),k.j41(12,"li",8)(13,"button",9),k.bIt("click",function(){return ht.logout()}),k.EFF(14,"Logout"),k.k0s()()()(),k.j41(15,"button",10),k.bIt("click",function(){return ht.toggleSidebar()}),k.DNE(16,Jt,2,0,"span",11)(17,Re,2,0,"span",11),k.k0s()()),2&dt&&(k.R7$(),k.Y8G("ngClass",k.sMw(4,Ae,ht.sidebarExpanded,!ht.sidebarExpanded,!ht.sidebarExpanded&&ht.isMobile)),k.R7$(7),k.Y8G("ngIf",ht.isAdmin),k.R7$(8),k.Y8G("ngIf",!ht.sidebarExpanded),k.R7$(),k.Y8G("ngIf",ht.sidebarExpanded))},dependencies:[pe.YU,pe.bT,oe.Wk],styles:[".sidebar[_ngcontent-%COMP%]{width:20vw;height:100vh;position:fixed;top:0;left:0}.sidebar-hidden[_ngcontent-%COMP%]{transform:translate(-100%);visibility:hidden;transition:transform .3s ease,visibility .3s ease}.sidebar-expanded[_ngcontent-%COMP%]{transform:translate(0);visibility:visible}@media (max-width: 768px){.sidebar[_ngcontent-%COMP%]{width:70vw;position:fixed;top:0;left:0;height:100vh;z-index:1050}.main-content[_ngcontent-%COMP%]{width:100vw}.toggle-btn[_ngcontent-%COMP%]{display:block}}.sidebar[_ngcontent-%COMP%]{transition:transform .3s ease,visibility .3s ease}"]})}}return $e})();const Ne=$e=>({width:$e}),ye=$e=>({collapsed:$e});function He($e,gt){if(1&$e&&k.nrm(0,"app-sidebar",3),2&$e){const ct=k.XpG();k.Y8G("ngClass",k.eq3(2,ye,ct.isSidebarCollapsed))("ngStyle",k.eq3(4,Ne,ct.isSidebarCollapsed?"60px":ct.sidebarWidth))}}let lt=(()=>{class $e{constructor(ct){this.router=ct,this.title="cleanEnvirons",this.isLoginPage=!1,this.sidebarWidthLogin="0vw",this.sidebarWidth="10vw",this.isSidebarCollapsed=!1,this.router.events.subscribe(()=>{this.isLoginPage="/login"===this.router.url})}toggleSidebar(){this.isSidebarCollapsed=!this.isSidebarCollapsed}setSidebarWidth(ct){this.sidebarWidth=ct}static{this.\u0275fac=function(dt){return new(dt||$e)(k.rXU(oe.Ix))}}static{this.\u0275cmp=k.VBU({type:$e,selectors:[["app-root"]],decls:4,vars:6,consts:[[1,"d-flex","vh-100"],["class","sidebar",3,"ngClass","ngStyle",4,"ngIf"],[1,"main-content",3,"ngStyle"],[1,"sidebar",3,"ngClass","ngStyle"]],template:function(dt,ht){1&dt&&(k.j41(0,"div",0),k.DNE(1,He,1,6,"app-sidebar",1),k.j41(2,"div",2),k.nrm(3,"router-outlet"),k.k0s()()),2&dt&&(k.R7$(),k.Y8G("ngIf",!ht.isLoginPage),k.R7$(),k.AVh("full-width",ht.isLoginPage),k.Y8G("ngStyle",k.eq3(4,Ne,ht.isSidebarCollapsed?"calc(100vw - 60px)":"calc(100vw - "+ht.sidebarWidthLogin+")")))},dependencies:[pe.YU,pe.bT,pe.B3,oe.n3,Me],styles:[".d-flex[_ngcontent-%COMP%]{display:flex;height:100vh}.sidebar[_ngcontent-%COMP%]{background-color:#f8f9fa;box-shadow:2px 0 5px #0000001a;z-index:1000;overflow-y:auto;transition:width .3s ease}.sidebar.collapsed[_ngcontent-%COMP%]{width:60px}.main-content[_ngcontent-%COMP%]{transition:width .3s ease}.main-content.full-width[_ngcontent-%COMP%]{width:100vw;overflow-x:auto}"]})}}return $e})();var bt=$(5090),cn=$(9253);const Zt={apiKey:"AIzaSyCNo7lWn25ljXnEg1dNLeWAFxL5uYVB3no",authDomain:"clean-environs.firebaseapp.com",projectId:"clean-environs",storageBucket:"clean-environs.firebasestorage.app",messagingSenderId:"79024030980",appId:"1:79024030980:web:067e7611be2dc629ba7c51",measurementId:"G-X0GEJL2D8W"};let Wt=(()=>{class $e{static{this.\u0275fac=function(dt){return new(dt||$e)}}static{this.\u0275mod=k.$C({type:$e,bootstrap:[lt]})}static{this.\u0275inj=k.G2t({imports:[m.Bb,Ze,ne.X1,V.q1,cn.bf.initializeApp(Zt),bt.cM,Qe.X8]})}}return $e})();m.sG().bootstrapModule(Wt).catch($e=>console.error($e))},4412:(on,rt,$)=>{$.d(rt,{t:()=>V});var m=$(1413);class V extends m.B{constructor(ne){super(),this._value=ne}get value(){return this.getValue()}_subscribe(ne){const k=super._subscribe(ne);return!k.closed&&ne.next(this._value),k}getValue(){const{hasError:ne,thrownError:k,_value:Ue}=this;if(ne)throw k;return this._throwIfClosed(),Ue}next(ne){super.next(this._value=ne)}}},1985:(on,rt,$)=>{$.d(rt,{c:()=>Qe});var m=$(7707),V=$(8359),oe=$(3494),ne=$(1203),k=$(1026),Ue=$(8071),le=$(9786);let Qe=(()=>{class Be{constructor(Je){Je&&(this._subscribe=Je)}lift(Je){const xt=new Be;return xt.source=this,xt.operator=Je,xt}subscribe(Je,xt,qt){const $t=function fe(Be){return Be&&Be instanceof m.vU||function pe(Be){return Be&&(0,Ue.T)(Be.next)&&(0,Ue.T)(Be.error)&&(0,Ue.T)(Be.complete)}(Be)&&(0,V.Uv)(Be)}(Je)?Je:new m.Ms(Je,xt,qt);return(0,le.Y)(()=>{const{operator:Nt,source:un}=this;$t.add(Nt?Nt.call($t,un):un?this._subscribe($t):this._trySubscribe($t))}),$t}_trySubscribe(Je){try{return this._subscribe(Je)}catch(xt){Je.error(xt)}}forEach(Je,xt){return new(xt=We(xt))((qt,$t)=>{const Nt=new m.Ms({next:un=>{try{Je(un)}catch(ln){$t(ln),Nt.unsubscribe()}},error:$t,complete:qt});this.subscribe(Nt)})}_subscribe(Je){var xt;return null===(xt=this.source)||void 0===xt?void 0:xt.subscribe(Je)}[oe.s](){return this}pipe(...Je){return(0,ne.m)(Je)(this)}toPromise(Je){return new(Je=We(Je))((xt,qt)=>{let $t;this.subscribe(Nt=>$t=Nt,Nt=>qt(Nt),()=>xt($t))})}}return Be.create=At=>new Be(At),Be})();function We(Be){var At;return null!==(At=Be??k.$.Promise)&&void 0!==At?At:Promise}},1413:(on,rt,$)=>{$.d(rt,{B:()=>le});var m=$(1985),V=$(8359);const ne=(0,$(1853).L)(We=>function(){We(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var k=$(7908),Ue=$(9786);let le=(()=>{class We extends m.c{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(fe){const Be=new Qe(this,this);return Be.operator=fe,Be}_throwIfClosed(){if(this.closed)throw new ne}next(fe){(0,Ue.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Be of this.currentObservers)Be.next(fe)}})}error(fe){(0,Ue.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=fe;const{observers:Be}=this;for(;Be.length;)Be.shift().error(fe)}})}complete(){(0,Ue.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:fe}=this;for(;fe.length;)fe.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var fe;return(null===(fe=this.observers)||void 0===fe?void 0:fe.length)>0}_trySubscribe(fe){return this._throwIfClosed(),super._trySubscribe(fe)}_subscribe(fe){return this._throwIfClosed(),this._checkFinalizedStatuses(fe),this._innerSubscribe(fe)}_innerSubscribe(fe){const{hasError:Be,isStopped:At,observers:Je}=this;return Be||At?V.Kn:(this.currentObservers=null,Je.push(fe),new V.yU(()=>{this.currentObservers=null,(0,k.o)(Je,fe)}))}_checkFinalizedStatuses(fe){const{hasError:Be,thrownError:At,isStopped:Je}=this;Be?fe.error(At):Je&&fe.complete()}asObservable(){const fe=new m.c;return fe.source=this,fe}}return We.create=(pe,fe)=>new Qe(pe,fe),We})();class Qe extends le{constructor(pe,fe){super(),this.destination=pe,this.source=fe}next(pe){var fe,Be;null===(Be=null===(fe=this.destination)||void 0===fe?void 0:fe.next)||void 0===Be||Be.call(fe,pe)}error(pe){var fe,Be;null===(Be=null===(fe=this.destination)||void 0===fe?void 0:fe.error)||void 0===Be||Be.call(fe,pe)}complete(){var pe,fe;null===(fe=null===(pe=this.destination)||void 0===pe?void 0:pe.complete)||void 0===fe||fe.call(pe)}_subscribe(pe){var fe,Be;return null!==(Be=null===(fe=this.source)||void 0===fe?void 0:fe.subscribe(pe))&&void 0!==Be?Be:V.Kn}}},7707:(on,rt,$)=>{$.d(rt,{Ms:()=>qt,vU:()=>Be});var m=$(8071),V=$(8359),oe=$(1026),ne=$(5334),k=$(5343);const Ue=We("C",void 0,void 0);function We(vt,he,at){return{kind:vt,value:he,error:at}}var pe=$(9270),fe=$(9786);class Be extends V.yU{constructor(he){super(),this.isStopped=!1,he?(this.destination=he,(0,V.Uv)(he)&&he.add(this)):this.destination=ln}static create(he,at,Dt){return new qt(he,at,Dt)}next(he){this.isStopped?un(function Qe(vt){return We("N",vt,void 0)}(he),this):this._next(he)}error(he){this.isStopped?un(function le(vt){return We("E",void 0,vt)}(he),this):(this.isStopped=!0,this._error(he))}complete(){this.isStopped?un(Ue,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(he){this.destination.next(he)}_error(he){try{this.destination.error(he)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const At=Function.prototype.bind;function Je(vt,he){return At.call(vt,he)}class xt{constructor(he){this.partialObserver=he}next(he){const{partialObserver:at}=this;if(at.next)try{at.next(he)}catch(Dt){$t(Dt)}}error(he){const{partialObserver:at}=this;if(at.error)try{at.error(he)}catch(Dt){$t(Dt)}else $t(he)}complete(){const{partialObserver:he}=this;if(he.complete)try{he.complete()}catch(at){$t(at)}}}class qt extends Be{constructor(he,at,Dt){let ut;if(super(),(0,m.T)(he)||!he)ut={next:he??void 0,error:at??void 0,complete:Dt??void 0};else{let Ut;this&&oe.$.useDeprecatedNextContext?(Ut=Object.create(he),Ut.unsubscribe=()=>this.unsubscribe(),ut={next:he.next&&Je(he.next,Ut),error:he.error&&Je(he.error,Ut),complete:he.complete&&Je(he.complete,Ut)}):ut=he}this.destination=new xt(ut)}}function $t(vt){oe.$.useDeprecatedSynchronousErrorHandling?(0,fe.l)(vt):(0,ne.m)(vt)}function un(vt,he){const{onStoppedNotification:at}=oe.$;at&&pe.f.setTimeout(()=>at(vt,he))}const ln={closed:!0,next:k.l,error:function Nt(vt){throw vt},complete:k.l}},8359:(on,rt,$)=>{$.d(rt,{Kn:()=>Ue,yU:()=>k,Uv:()=>le});var m=$(8071);const oe=(0,$(1853).L)(We=>function(fe){We(this),this.message=fe?`${fe.length} errors occurred during unsubscription:\n${fe.map((Be,At)=>`${At+1}) ${Be.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=fe});var ne=$(7908);class k{constructor(pe){this.initialTeardown=pe,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let pe;if(!this.closed){this.closed=!0;const{_parentage:fe}=this;if(fe)if(this._parentage=null,Array.isArray(fe))for(const Je of fe)Je.remove(this);else fe.remove(this);const{initialTeardown:Be}=this;if((0,m.T)(Be))try{Be()}catch(Je){pe=Je instanceof oe?Je.errors:[Je]}const{_finalizers:At}=this;if(At){this._finalizers=null;for(const Je of At)try{Qe(Je)}catch(xt){pe=pe??[],xt instanceof oe?pe=[...pe,...xt.errors]:pe.push(xt)}}if(pe)throw new oe(pe)}}add(pe){var fe;if(pe&&pe!==this)if(this.closed)Qe(pe);else{if(pe instanceof k){if(pe.closed||pe._hasParent(this))return;pe._addParent(this)}(this._finalizers=null!==(fe=this._finalizers)&&void 0!==fe?fe:[]).push(pe)}}_hasParent(pe){const{_parentage:fe}=this;return fe===pe||Array.isArray(fe)&&fe.includes(pe)}_addParent(pe){const{_parentage:fe}=this;this._parentage=Array.isArray(fe)?(fe.push(pe),fe):fe?[fe,pe]:pe}_removeParent(pe){const{_parentage:fe}=this;fe===pe?this._parentage=null:Array.isArray(fe)&&(0,ne.o)(fe,pe)}remove(pe){const{_finalizers:fe}=this;fe&&(0,ne.o)(fe,pe),pe instanceof k&&pe._removeParent(this)}}k.EMPTY=(()=>{const We=new k;return We.closed=!0,We})();const Ue=k.EMPTY;function le(We){return We instanceof k||We&&"closed"in We&&(0,m.T)(We.remove)&&(0,m.T)(We.add)&&(0,m.T)(We.unsubscribe)}function Qe(We){(0,m.T)(We)?We():We.unsubscribe()}},1026:(on,rt,$)=>{$.d(rt,{$:()=>m});const m={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},8793:(on,rt,$)=>{$.d(rt,{x:()=>k});var m=$(6365),oe=$(3794),ne=$(8455);function k(...Ue){return function V(){return(0,m.U)(1)}()((0,ne.H)(Ue,(0,oe.lI)(Ue)))}},983:(on,rt,$)=>{$.d(rt,{w:()=>V});const V=new($(1985).c)(k=>k.complete())},8455:(on,rt,$)=>{$.d(rt,{H:()=>he});var m=$(8750),V=$(941),oe=$(6745),Ue=$(1985),Qe=$(4761),We=$(8071),pe=$(5225);function Be(at,Dt){if(!at)throw new Error("Iterable cannot be null");return new Ue.c(ut=>{(0,pe.N)(ut,Dt,()=>{const Ut=at[Symbol.asyncIterator]();(0,pe.N)(ut,Dt,()=>{Ut.next().then(be=>{be.done?ut.complete():ut.next(be.value)})},0,!0)})})}var At=$(5055),Je=$(9858),xt=$(7441),qt=$(5397),$t=$(7953),Nt=$(591),un=$(5196);function he(at,Dt){return Dt?function vt(at,Dt){if(null!=at){if((0,At.l)(at))return function ne(at,Dt){return(0,m.Tg)(at).pipe((0,oe._)(Dt),(0,V.Q)(Dt))}(at,Dt);if((0,xt.X)(at))return function le(at,Dt){return new Ue.c(ut=>{let Ut=0;return Dt.schedule(function(){Ut===at.length?ut.complete():(ut.next(at[Ut++]),ut.closed||this.schedule())})})}(at,Dt);if((0,Je.y)(at))return function k(at,Dt){return(0,m.Tg)(at).pipe((0,oe._)(Dt),(0,V.Q)(Dt))}(at,Dt);if((0,$t.T)(at))return Be(at,Dt);if((0,qt.x)(at))return function fe(at,Dt){return new Ue.c(ut=>{let Ut;return(0,pe.N)(ut,Dt,()=>{Ut=at[Qe.l](),(0,pe.N)(ut,Dt,()=>{let be,Xe;try{({value:be,done:Xe}=Ut.next())}catch(rn){return void ut.error(rn)}Xe?ut.complete():ut.next(be)},0,!0)}),()=>(0,We.T)(Ut?.return)&&Ut.return()})}(at,Dt);if((0,un.U)(at))return function ln(at,Dt){return Be((0,un.C)(at),Dt)}(at,Dt)}throw(0,Nt.L)(at)}(at,Dt):(0,m.Tg)(at)}},8750:(on,rt,$)=>{$.d(rt,{Tg:()=>At});var m=$(1635),V=$(7441),oe=$(9858),ne=$(1985),k=$(5055),Ue=$(7953),le=$(591),Qe=$(5397),We=$(5196),pe=$(8071),fe=$(5334),Be=$(3494);function At(vt){if(vt instanceof ne.c)return vt;if(null!=vt){if((0,k.l)(vt))return function Je(vt){return new ne.c(he=>{const at=vt[Be.s]();if((0,pe.T)(at.subscribe))return at.subscribe(he);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(vt);if((0,V.X)(vt))return function xt(vt){return new ne.c(he=>{for(let at=0;at<vt.length&&!he.closed;at++)he.next(vt[at]);he.complete()})}(vt);if((0,oe.y)(vt))return function qt(vt){return new ne.c(he=>{vt.then(at=>{he.closed||(he.next(at),he.complete())},at=>he.error(at)).then(null,fe.m)})}(vt);if((0,Ue.T)(vt))return Nt(vt);if((0,Qe.x)(vt))return function $t(vt){return new ne.c(he=>{for(const at of vt)if(he.next(at),he.closed)return;he.complete()})}(vt);if((0,We.U)(vt))return function un(vt){return Nt((0,We.C)(vt))}(vt)}throw(0,le.L)(vt)}function Nt(vt){return new ne.c(he=>{(function ln(vt,he){var at,Dt,ut,Ut;return(0,m.sH)(this,void 0,void 0,function*(){try{for(at=(0,m.xN)(vt);!(Dt=yield at.next()).done;)if(he.next(Dt.value),he.closed)return}catch(be){ut={error:be}}finally{try{Dt&&!Dt.done&&(Ut=at.return)&&(yield Ut.call(at))}finally{if(ut)throw ut.error}}he.complete()})})(vt,he).catch(at=>he.error(at))})}},7673:(on,rt,$)=>{$.d(rt,{of:()=>oe});var m=$(3794),V=$(8455);function oe(...ne){const k=(0,m.lI)(ne);return(0,V.H)(ne,k)}},4360:(on,rt,$)=>{$.d(rt,{_:()=>V});var m=$(7707);function V(ne,k,Ue,le,Qe){return new oe(ne,k,Ue,le,Qe)}class oe extends m.vU{constructor(k,Ue,le,Qe,We,pe){super(k),this.onFinalize=We,this.shouldUnsubscribe=pe,this._next=Ue?function(fe){try{Ue(fe)}catch(Be){k.error(Be)}}:super._next,this._error=Qe?function(fe){try{Qe(fe)}catch(Be){k.error(Be)}finally{this.unsubscribe()}}:super._error,this._complete=le?function(){try{le()}catch(fe){k.error(fe)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var k;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Ue}=this;super.unsubscribe(),!Ue&&(null===(k=this.onFinalize)||void 0===k||k.call(this))}}}},274:(on,rt,$)=>{$.d(rt,{H:()=>oe});var m=$(1397),V=$(8071);function oe(ne,k){return(0,V.T)(k)?(0,m.Z)(ne,k,1):(0,m.Z)(ne,1)}},9901:(on,rt,$)=>{$.d(rt,{U:()=>oe});var m=$(9974),V=$(4360);function oe(ne){return(0,m.N)((k,Ue)=>{let le=!1;k.subscribe((0,V._)(Ue,Qe=>{le=!0,Ue.next(Qe)},()=>{le||Ue.next(ne),Ue.complete()}))})}},5964:(on,rt,$)=>{$.d(rt,{p:()=>oe});var m=$(9974),V=$(4360);function oe(ne,k){return(0,m.N)((Ue,le)=>{let Qe=0;Ue.subscribe((0,V._)(le,We=>ne.call(k,We,Qe++)&&le.next(We)))})}},980:(on,rt,$)=>{$.d(rt,{j:()=>V});var m=$(9974);function V(oe){return(0,m.N)((ne,k)=>{try{ne.subscribe(k)}finally{k.add(oe)}})}},1594:(on,rt,$)=>{$.d(rt,{$:()=>le});var m=$(9350),V=$(5964),oe=$(6697),ne=$(9901),k=$(3774),Ue=$(3669);function le(Qe,We){const pe=arguments.length>=2;return fe=>fe.pipe(Qe?(0,V.p)((Be,At)=>Qe(Be,At,fe)):Ue.D,(0,oe.s)(1),pe?(0,ne.U)(We):(0,k.v)(()=>new m.G))}},6354:(on,rt,$)=>{$.d(rt,{T:()=>oe});var m=$(9974),V=$(4360);function oe(ne,k){return(0,m.N)((Ue,le)=>{let Qe=0;Ue.subscribe((0,V._)(le,We=>{le.next(ne.call(k,We,Qe++))}))})}},6365:(on,rt,$)=>{$.d(rt,{U:()=>oe});var m=$(1397),V=$(3669);function oe(ne=1/0){return(0,m.Z)(V.D,ne)}},1397:(on,rt,$)=>{$.d(rt,{Z:()=>Qe});var m=$(6354),V=$(8750),oe=$(9974),ne=$(5225),k=$(4360),le=$(8071);function Qe(We,pe,fe=1/0){return(0,le.T)(pe)?Qe((Be,At)=>(0,m.T)((Je,xt)=>pe(Be,Je,At,xt))((0,V.Tg)(We(Be,At))),fe):("number"==typeof pe&&(fe=pe),(0,oe.N)((Be,At)=>function Ue(We,pe,fe,Be,At,Je,xt,qt){const $t=[];let Nt=0,un=0,ln=!1;const vt=()=>{ln&&!$t.length&&!Nt&&pe.complete()},he=Dt=>Nt<Be?at(Dt):$t.push(Dt),at=Dt=>{Je&&pe.next(Dt),Nt++;let ut=!1;(0,V.Tg)(fe(Dt,un++)).subscribe((0,k._)(pe,Ut=>{At?.(Ut),Je?he(Ut):pe.next(Ut)},()=>{ut=!0},void 0,()=>{if(ut)try{for(Nt--;$t.length&&Nt<Be;){const Ut=$t.shift();xt?(0,ne.N)(pe,xt,()=>at(Ut)):at(Ut)}vt()}catch(Ut){pe.error(Ut)}}))};return We.subscribe((0,k._)(pe,he,()=>{ln=!0,vt()})),()=>{qt?.()}}(Be,At,We,fe)))}},941:(on,rt,$)=>{$.d(rt,{Q:()=>ne});var m=$(5225),V=$(9974),oe=$(4360);function ne(k,Ue=0){return(0,V.N)((le,Qe)=>{le.subscribe((0,oe._)(Qe,We=>(0,m.N)(Qe,k,()=>Qe.next(We),Ue),()=>(0,m.N)(Qe,k,()=>Qe.complete(),Ue),We=>(0,m.N)(Qe,k,()=>Qe.error(We),Ue)))})}},2816:(on,rt,$)=>{$.d(rt,{S:()=>ne});var m=$(9974),V=$(4360);function ne(k,Ue){return(0,m.N)(function oe(k,Ue,le,Qe,We){return(pe,fe)=>{let Be=le,At=Ue,Je=0;pe.subscribe((0,V._)(fe,xt=>{const qt=Je++;At=Be?k(At,xt,qt):(Be=!0,xt),Qe&&fe.next(At)},We&&(()=>{Be&&fe.next(At),fe.complete()})))}}(k,Ue,arguments.length>=2,!0))}},9172:(on,rt,$)=>{$.d(rt,{Z:()=>ne});var m=$(8793),V=$(3794),oe=$(9974);function ne(...k){const Ue=(0,V.lI)(k);return(0,oe.N)((le,Qe)=>{(Ue?(0,m.x)(k,le,Ue):(0,m.x)(k,le)).subscribe(Qe)})}},6745:(on,rt,$)=>{$.d(rt,{_:()=>V});var m=$(9974);function V(oe,ne=0){return(0,m.N)((k,Ue)=>{Ue.add(oe.schedule(()=>k.subscribe(Ue),ne))})}},5558:(on,rt,$)=>{$.d(rt,{n:()=>ne});var m=$(8750),V=$(9974),oe=$(4360);function ne(k,Ue){return(0,V.N)((le,Qe)=>{let We=null,pe=0,fe=!1;const Be=()=>fe&&!We&&Qe.complete();le.subscribe((0,oe._)(Qe,At=>{We?.unsubscribe();let Je=0;const xt=pe++;(0,m.Tg)(k(At,xt)).subscribe(We=(0,oe._)(Qe,qt=>Qe.next(Ue?Ue(At,qt,xt,Je++):qt),()=>{We=null,Be()}))},()=>{fe=!0,Be()}))})}},6697:(on,rt,$)=>{$.d(rt,{s:()=>ne});var m=$(983),V=$(9974),oe=$(4360);function ne(k){return k<=0?()=>m.w:(0,V.N)((Ue,le)=>{let Qe=0;Ue.subscribe((0,oe._)(le,We=>{++Qe<=k&&(le.next(We),k<=Qe&&le.complete())}))})}},8141:(on,rt,$)=>{$.d(rt,{M:()=>k});var m=$(8071),V=$(9974),oe=$(4360),ne=$(3669);function k(Ue,le,Qe){const We=(0,m.T)(Ue)||le||Qe?{next:Ue,error:le,complete:Qe}:Ue;return We?(0,V.N)((pe,fe)=>{var Be;null===(Be=We.subscribe)||void 0===Be||Be.call(We);let At=!0;pe.subscribe((0,oe._)(fe,Je=>{var xt;null===(xt=We.next)||void 0===xt||xt.call(We,Je),fe.next(Je)},()=>{var Je;At=!1,null===(Je=We.complete)||void 0===Je||Je.call(We),fe.complete()},Je=>{var xt;At=!1,null===(xt=We.error)||void 0===xt||xt.call(We,Je),fe.error(Je)},()=>{var Je,xt;At&&(null===(Je=We.unsubscribe)||void 0===Je||Je.call(We)),null===(xt=We.finalize)||void 0===xt||xt.call(We)}))}):ne.D}},3774:(on,rt,$)=>{$.d(rt,{v:()=>ne});var m=$(9350),V=$(9974),oe=$(4360);function ne(Ue=k){return(0,V.N)((le,Qe)=>{let We=!1;le.subscribe((0,oe._)(Qe,pe=>{We=!0,Qe.next(pe)},()=>We?Qe.complete():Qe.error(Ue())))})}function k(){return new m.G}},6780:(on,rt,$)=>{$.d(rt,{R:()=>k});var m=$(8359);class V extends m.yU{constructor(le,Qe){super()}schedule(le,Qe=0){return this}}const oe={setInterval(Ue,le,...Qe){const{delegate:We}=oe;return We?.setInterval?We.setInterval(Ue,le,...Qe):setInterval(Ue,le,...Qe)},clearInterval(Ue){const{delegate:le}=oe;return(le?.clearInterval||clearInterval)(Ue)},delegate:void 0};var ne=$(7908);class k extends V{constructor(le,Qe){super(le,Qe),this.scheduler=le,this.work=Qe,this.pending=!1}schedule(le,Qe=0){var We;if(this.closed)return this;this.state=le;const pe=this.id,fe=this.scheduler;return null!=pe&&(this.id=this.recycleAsyncId(fe,pe,Qe)),this.pending=!0,this.delay=Qe,this.id=null!==(We=this.id)&&void 0!==We?We:this.requestAsyncId(fe,this.id,Qe),this}requestAsyncId(le,Qe,We=0){return oe.setInterval(le.flush.bind(le,this),We)}recycleAsyncId(le,Qe,We=0){if(null!=We&&this.delay===We&&!1===this.pending)return Qe;null!=Qe&&oe.clearInterval(Qe)}execute(le,Qe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const We=this._execute(le,Qe);if(We)return We;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(le,Qe){let pe,We=!1;try{this.work(le)}catch(fe){We=!0,pe=fe||new Error("Scheduled action threw falsy error")}if(We)return this.unsubscribe(),pe}unsubscribe(){if(!this.closed){const{id:le,scheduler:Qe}=this,{actions:We}=Qe;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ne.o)(We,this),null!=le&&(this.id=this.recycleAsyncId(Qe,le,null)),this.delay=null,super.unsubscribe()}}}},9687:(on,rt,$)=>{$.d(rt,{q:()=>oe});var m=$(6129);class V{constructor(k,Ue=V.now){this.schedulerActionCtor=k,this.now=Ue}schedule(k,Ue=0,le){return new this.schedulerActionCtor(this,k).schedule(le,Ue)}}V.now=m.U.now;class oe extends V{constructor(k,Ue=V.now){super(k,Ue),this.actions=[],this._active=!1}flush(k){const{actions:Ue}=this;if(this._active)return void Ue.push(k);let le;this._active=!0;do{if(le=k.execute(k.state,k.delay))break}while(k=Ue.shift());if(this._active=!1,le){for(;k=Ue.shift();)k.unsubscribe();throw le}}}},3236:(on,rt,$)=>{$.d(rt,{E:()=>oe});var m=$(6780);const oe=new($(9687).q)(m.R)},6129:(on,rt,$)=>{$.d(rt,{U:()=>m});const m={now:()=>(m.delegate||Date).now(),delegate:void 0}},9270:(on,rt,$)=>{$.d(rt,{f:()=>m});const m={setTimeout(V,oe,...ne){const{delegate:k}=m;return k?.setTimeout?k.setTimeout(V,oe,...ne):setTimeout(V,oe,...ne)},clearTimeout(V){const{delegate:oe}=m;return(oe?.clearTimeout||clearTimeout)(V)},delegate:void 0}},4761:(on,rt,$)=>{$.d(rt,{l:()=>V});const V=function m(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},3494:(on,rt,$)=>{$.d(rt,{s:()=>m});const m="function"==typeof Symbol&&Symbol.observable||"@@observable"},9350:(on,rt,$)=>{$.d(rt,{G:()=>V});const V=(0,$(1853).L)(oe=>function(){oe(this),this.name="EmptyError",this.message="no elements in sequence"})},3794:(on,rt,$)=>{$.d(rt,{R0:()=>Ue,ms:()=>ne,lI:()=>k});var m=$(8071);function oe(le){return le[le.length-1]}function ne(le){return(0,m.T)(oe(le))?le.pop():void 0}function k(le){return function V(le){return le&&(0,m.T)(le.schedule)}(oe(le))?le.pop():void 0}function Ue(le,Qe){return"number"==typeof oe(le)?le.pop():Qe}},3073:(on,rt,$)=>{$.d(rt,{D:()=>k});const{isArray:m}=Array,{getPrototypeOf:V,prototype:oe,keys:ne}=Object;function k(le){if(1===le.length){const Qe=le[0];if(m(Qe))return{args:Qe,keys:null};if(function Ue(le){return le&&"object"==typeof le&&V(le)===oe}(Qe)){const We=ne(Qe);return{args:We.map(pe=>Qe[pe]),keys:We}}}return{args:le,keys:null}}},7908:(on,rt,$)=>{function m(V,oe){if(V){const ne=V.indexOf(oe);0<=ne&&V.splice(ne,1)}}$.d(rt,{o:()=>m})},1853:(on,rt,$)=>{function m(V){const ne=V(k=>{Error.call(k),k.stack=(new Error).stack});return ne.prototype=Object.create(Error.prototype),ne.prototype.constructor=ne,ne}$.d(rt,{L:()=>m})},8496:(on,rt,$)=>{function m(V,oe){return V.reduce((ne,k,Ue)=>(ne[k]=oe[Ue],ne),{})}$.d(rt,{e:()=>m})},9786:(on,rt,$)=>{$.d(rt,{Y:()=>oe,l:()=>ne});var m=$(1026);let V=null;function oe(k){if(m.$.useDeprecatedSynchronousErrorHandling){const Ue=!V;if(Ue&&(V={errorThrown:!1,error:null}),k(),Ue){const{errorThrown:le,error:Qe}=V;if(V=null,le)throw Qe}}else k()}function ne(k){m.$.useDeprecatedSynchronousErrorHandling&&V&&(V.errorThrown=!0,V.error=k)}},5225:(on,rt,$)=>{function m(V,oe,ne,k=0,Ue=!1){const le=oe.schedule(function(){ne(),Ue?V.add(this.schedule(null,k)):this.unsubscribe()},k);if(V.add(le),!Ue)return le}$.d(rt,{N:()=>m})},3669:(on,rt,$)=>{function m(V){return V}$.d(rt,{D:()=>m})},7441:(on,rt,$)=>{$.d(rt,{X:()=>m});const m=V=>V&&"number"==typeof V.length&&"function"!=typeof V},7953:(on,rt,$)=>{$.d(rt,{T:()=>V});var m=$(8071);function V(oe){return Symbol.asyncIterator&&(0,m.T)(oe?.[Symbol.asyncIterator])}},8071:(on,rt,$)=>{function m(V){return"function"==typeof V}$.d(rt,{T:()=>m})},5055:(on,rt,$)=>{$.d(rt,{l:()=>oe});var m=$(3494),V=$(8071);function oe(ne){return(0,V.T)(ne[m.s])}},5397:(on,rt,$)=>{$.d(rt,{x:()=>oe});var m=$(4761),V=$(8071);function oe(ne){return(0,V.T)(ne?.[m.l])}},9858:(on,rt,$)=>{$.d(rt,{y:()=>V});var m=$(8071);function V(oe){return(0,m.T)(oe?.then)}},5196:(on,rt,$)=>{$.d(rt,{C:()=>oe,U:()=>ne});var m=$(1635),V=$(8071);function oe(k){return(0,m.AQ)(this,arguments,function*(){const le=k.getReader();try{for(;;){const{value:Qe,done:We}=yield(0,m.N3)(le.read());if(We)return yield(0,m.N3)(void 0);yield yield(0,m.N3)(Qe)}}finally{le.releaseLock()}})}function ne(k){return(0,V.T)(k?.getReader)}},9974:(on,rt,$)=>{$.d(rt,{N:()=>oe,S:()=>V});var m=$(8071);function V(ne){return(0,m.T)(ne?.lift)}function oe(ne){return k=>{if(V(k))return k.lift(function(Ue){try{return ne(Ue,this)}catch(le){this.error(le)}});throw new TypeError("Unable to lift unknown Observable type")}}},6450:(on,rt,$)=>{$.d(rt,{I:()=>ne});var m=$(6354);const{isArray:V}=Array;function ne(k){return(0,m.T)(Ue=>function oe(k,Ue){return V(Ue)?k(...Ue):k(Ue)}(k,Ue))}},5343:(on,rt,$)=>{function m(){}$.d(rt,{l:()=>m})},1203:(on,rt,$)=>{$.d(rt,{F:()=>V,m:()=>oe});var m=$(3669);function V(...ne){return oe(ne)}function oe(ne){return 0===ne.length?m.D:1===ne.length?ne[0]:function(Ue){return ne.reduce((le,Qe)=>Qe(le),Ue)}}},5334:(on,rt,$)=>{$.d(rt,{m:()=>oe});var m=$(1026),V=$(9270);function oe(ne){V.f.setTimeout(()=>{const{onUnhandledError:k}=m.$;if(!k)throw ne;k(ne)})}},591:(on,rt,$)=>{function m(V){return new TypeError(`You provided ${null!==V&&"object"==typeof V?"an invalid object":`'${V}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}$.d(rt,{L:()=>m})},177:(on,rt,$)=>{$.d(rt,{AJ:()=>Zo,B3:()=>dn,MD:()=>xi,N0:()=>xo,QT:()=>oe,Sm:()=>qt,Sq:()=>gn,VF:()=>k,Vy:()=>Aa,Xr:()=>gs,YU:()=>je,ZD:()=>ne,_b:()=>se,aZ:()=>Nt,bT:()=>Kn,fw:()=>$t,hb:()=>Je,hj:()=>We,qQ:()=>le,vh:()=>bi});var m=$(4438);let V=null;function oe(){return V}function ne(D){V??=D}class k{}const le=new m.nKC("");let Qe=(()=>{class D{historyGo(M){throw new Error("")}static{this.\u0275fac=function(F){return new(F||D)}}static{this.\u0275prov=m.jDH({token:D,factory:()=>(0,m.WQX)(pe),providedIn:"platform"})}}return D})();const We=new m.nKC("");let pe=(()=>{class D extends Qe{constructor(){super(),this._doc=(0,m.WQX)(le),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return oe().getBaseHref(this._doc)}onPopState(M){const F=oe().getGlobalEventTarget(this._doc,"window");return F.addEventListener("popstate",M,!1),()=>F.removeEventListener("popstate",M)}onHashChange(M){const F=oe().getGlobalEventTarget(this._doc,"window");return F.addEventListener("hashchange",M,!1),()=>F.removeEventListener("hashchange",M)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(M){this._location.pathname=M}pushState(M,F,ce){this._history.pushState(M,F,ce)}replaceState(M,F,ce){this._history.replaceState(M,F,ce)}forward(){this._history.forward()}back(){this._history.back()}historyGo(M=0){this._history.go(M)}getState(){return this._history.state}static{this.\u0275fac=function(F){return new(F||D)}}static{this.\u0275prov=m.jDH({token:D,factory:()=>new D,providedIn:"platform"})}}return D})();function fe(D,z){if(0==D.length)return z;if(0==z.length)return D;let M=0;return D.endsWith("/")&&M++,z.startsWith("/")&&M++,2==M?D+z.substring(1):1==M?D+z:D+"/"+z}function Be(D){const z=D.match(/#|\?|$/),M=z&&z.index||D.length;return D.slice(0,M-("/"===D[M-1]?1:0))+D.slice(M)}function At(D){return D&&"?"!==D[0]?"?"+D:D}let Je=(()=>{class D{historyGo(M){throw new Error("")}static{this.\u0275fac=function(F){return new(F||D)}}static{this.\u0275prov=m.jDH({token:D,factory:()=>(0,m.WQX)(qt),providedIn:"root"})}}return D})();const xt=new m.nKC("");let qt=(()=>{class D extends Je{constructor(M,F){super(),this._platformLocation=M,this._removeListenerFns=[],this._baseHref=F??this._platformLocation.getBaseHrefFromDOM()??(0,m.WQX)(le).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(M){this._removeListenerFns.push(this._platformLocation.onPopState(M),this._platformLocation.onHashChange(M))}getBaseHref(){return this._baseHref}prepareExternalUrl(M){return fe(this._baseHref,M)}path(M=!1){const F=this._platformLocation.pathname+At(this._platformLocation.search),ce=this._platformLocation.hash;return ce&&M?`${F}${ce}`:F}pushState(M,F,ce,nt){const Tt=this.prepareExternalUrl(ce+At(nt));this._platformLocation.pushState(M,F,Tt)}replaceState(M,F,ce,nt){const Tt=this.prepareExternalUrl(ce+At(nt));this._platformLocation.replaceState(M,F,Tt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(M=0){this._platformLocation.historyGo?.(M)}static{this.\u0275fac=function(F){return new(F||D)(m.KVO(Qe),m.KVO(xt,8))}}static{this.\u0275prov=m.jDH({token:D,factory:D.\u0275fac,providedIn:"root"})}}return D})(),$t=(()=>{class D extends Je{constructor(M,F){super(),this._platformLocation=M,this._baseHref="",this._removeListenerFns=[],null!=F&&(this._baseHref=F)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(M){this._removeListenerFns.push(this._platformLocation.onPopState(M),this._platformLocation.onHashChange(M))}getBaseHref(){return this._baseHref}path(M=!1){const F=this._platformLocation.hash??"#";return F.length>0?F.substring(1):F}prepareExternalUrl(M){const F=fe(this._baseHref,M);return F.length>0?"#"+F:F}pushState(M,F,ce,nt){let Tt=this.prepareExternalUrl(ce+At(nt));0==Tt.length&&(Tt=this._platformLocation.pathname),this._platformLocation.pushState(M,F,Tt)}replaceState(M,F,ce,nt){let Tt=this.prepareExternalUrl(ce+At(nt));0==Tt.length&&(Tt=this._platformLocation.pathname),this._platformLocation.replaceState(M,F,Tt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(M=0){this._platformLocation.historyGo?.(M)}static{this.\u0275fac=function(F){return new(F||D)(m.KVO(Qe),m.KVO(xt,8))}}static{this.\u0275prov=m.jDH({token:D,factory:D.\u0275fac})}}return D})(),Nt=(()=>{class D{constructor(M){this._subject=new m.bkB,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=M;const F=this._locationStrategy.getBaseHref();this._basePath=function he(D){if(new RegExp("^(https?:)?//").test(D)){const[,M]=D.split(/\/\/[^\/]+/);return M}return D}(Be(vt(F))),this._locationStrategy.onPopState(ce=>{this._subject.emit({url:this.path(!0),pop:!0,state:ce.state,type:ce.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(M=!1){return this.normalize(this._locationStrategy.path(M))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(M,F=""){return this.path()==this.normalize(M+At(F))}normalize(M){return D.stripTrailingSlash(function ln(D,z){if(!D||!z.startsWith(D))return z;const M=z.substring(D.length);return""===M||["/",";","?","#"].includes(M[0])?M:z}(this._basePath,vt(M)))}prepareExternalUrl(M){return M&&"/"!==M[0]&&(M="/"+M),this._locationStrategy.prepareExternalUrl(M)}go(M,F="",ce=null){this._locationStrategy.pushState(ce,"",M,F),this._notifyUrlChangeListeners(this.prepareExternalUrl(M+At(F)),ce)}replaceState(M,F="",ce=null){this._locationStrategy.replaceState(ce,"",M,F),this._notifyUrlChangeListeners(this.prepareExternalUrl(M+At(F)),ce)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(M=0){this._locationStrategy.historyGo?.(M)}onUrlChange(M){return this._urlChangeListeners.push(M),this._urlChangeSubscription??=this.subscribe(F=>{this._notifyUrlChangeListeners(F.url,F.state)}),()=>{const F=this._urlChangeListeners.indexOf(M);this._urlChangeListeners.splice(F,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(M="",F){this._urlChangeListeners.forEach(ce=>ce(M,F))}subscribe(M,F,ce){return this._subject.subscribe({next:M,error:F,complete:ce})}static{this.normalizeQueryParams=At}static{this.joinWithSlash=fe}static{this.stripTrailingSlash=Be}static{this.\u0275fac=function(F){return new(F||D)(m.KVO(Je))}}static{this.\u0275prov=m.jDH({token:D,factory:()=>function un(){return new Nt((0,m.KVO)(Je))}(),providedIn:"root"})}}return D})();function vt(D){return D.replace(/\/index.html$/,"")}var Ut=function(D){return D[D.Format=0]="Format",D[D.Standalone=1]="Standalone",D}(Ut||{}),be=function(D){return D[D.Narrow=0]="Narrow",D[D.Abbreviated=1]="Abbreviated",D[D.Wide=2]="Wide",D[D.Short=3]="Short",D}(be||{}),Xe=function(D){return D[D.Short=0]="Short",D[D.Medium=1]="Medium",D[D.Long=2]="Long",D[D.Full=3]="Full",D}(Xe||{});const rn={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function Re(D,z){return ht((0,m.H5H)(D)[m.KH2.DateFormat],z)}function Me(D,z){return ht((0,m.H5H)(D)[m.KH2.TimeFormat],z)}function Ne(D,z){return ht((0,m.H5H)(D)[m.KH2.DateTimeFormat],z)}function ye(D,z){const M=(0,m.H5H)(D),F=M[m.KH2.NumberSymbols][z];if(typeof F>"u"){if(z===rn.CurrencyDecimal)return M[m.KH2.NumberSymbols][rn.Decimal];if(z===rn.CurrencyGroup)return M[m.KH2.NumberSymbols][rn.Group]}return F}function $e(D){if(!D[m.KH2.ExtraData])throw new Error(`Missing extra locale data for the locale "${D[m.KH2.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function ht(D,z){for(let M=z;M>-1;M--)if(typeof D[M]<"u")return D[M];throw new Error("Locale data API: locale data undefined")}function ot(D){const[z,M]=D.split(":");return{hours:+z,minutes:+M}}const Dn=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Ot={},mr=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var Nn=function(D){return D[D.Short=0]="Short",D[D.ShortGMT=1]="ShortGMT",D[D.Long=2]="Long",D[D.Extended=3]="Extended",D}(Nn||{}),an=function(D){return D[D.FullYear=0]="FullYear",D[D.Month=1]="Month",D[D.Date=2]="Date",D[D.Hours=3]="Hours",D[D.Minutes=4]="Minutes",D[D.Seconds=5]="Seconds",D[D.FractionalSeconds=6]="FractionalSeconds",D[D.Day=7]="Day",D}(an||{}),mn=function(D){return D[D.DayPeriods=0]="DayPeriods",D[D.Days=1]="Days",D[D.Months=2]="Months",D[D.Eras=3]="Eras",D}(mn||{});function Yn(D,z,M,F){let ce=function ie(D){if(ge(D))return D;if("number"==typeof D&&!isNaN(D))return new Date(D);if("string"==typeof D){if(D=D.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(D)){const[ce,nt=1,Tt=1]=D.split("-").map(Kt=>+Kt);return xr(ce,nt-1,Tt)}const M=parseFloat(D);if(!isNaN(D-M))return new Date(M);let F;if(F=D.match(Dn))return function ue(D){const z=new Date(0);let M=0,F=0;const ce=D[8]?z.setUTCFullYear:z.setFullYear,nt=D[8]?z.setUTCHours:z.setHours;D[9]&&(M=Number(D[9]+D[10]),F=Number(D[9]+D[11])),ce.call(z,Number(D[1]),Number(D[2])-1,Number(D[3]));const Tt=Number(D[4]||0)-M,Kt=Number(D[5]||0)-F,yn=Number(D[6]||0),Ir=Math.floor(1e3*parseFloat("0."+(D[7]||0)));return nt.call(z,Tt,Kt,yn,Ir),z}(F)}const z=new Date(D);if(!ge(z))throw new Error(`Unable to convert "${D}" into a date`);return z}(D);z=Jn(M,z)||z;let Kt,Tt=[];for(;z;){if(Kt=mr.exec(z),!Kt){Tt.push(z);break}{Tt=Tt.concat(Kt.slice(1));const Mr=Tt.pop();if(!Mr)break;z=Mr}}let yn=ce.getTimezoneOffset();F&&(yn=Ee(F,yn),ce=function Ft(D,z,M){const F=M?-1:1,ce=D.getTimezoneOffset();return function pt(D,z){return(D=new Date(D.getTime())).setMinutes(D.getMinutes()+z),D}(D,F*(Ee(z,ce)-ce))}(ce,F,!0));let Ir="";return Tt.forEach(Mr=>{const er=function J(D){if(te[D])return te[D];let z;switch(D){case"G":case"GG":case"GGG":z=jn(mn.Eras,be.Abbreviated);break;case"GGGG":z=jn(mn.Eras,be.Wide);break;case"GGGGG":z=jn(mn.Eras,be.Narrow);break;case"y":z=En(an.FullYear,1,0,!1,!0);break;case"yy":z=En(an.FullYear,2,0,!0,!0);break;case"yyy":z=En(an.FullYear,3,0,!1,!0);break;case"yyyy":z=En(an.FullYear,4,0,!1,!0);break;case"Y":z=G(1);break;case"YY":z=G(2,!0);break;case"YYY":z=G(3);break;case"YYYY":z=G(4);break;case"M":case"L":z=En(an.Month,1,1);break;case"MM":case"LL":z=En(an.Month,2,1);break;case"MMM":z=jn(mn.Months,be.Abbreviated);break;case"MMMM":z=jn(mn.Months,be.Wide);break;case"MMMMM":z=jn(mn.Months,be.Narrow);break;case"LLL":z=jn(mn.Months,be.Abbreviated,Ut.Standalone);break;case"LLLL":z=jn(mn.Months,be.Wide,Ut.Standalone);break;case"LLLLL":z=jn(mn.Months,be.Narrow,Ut.Standalone);break;case"w":z=Y(1);break;case"ww":z=Y(2);break;case"W":z=Y(1,!0);break;case"d":z=En(an.Date,1);break;case"dd":z=En(an.Date,2);break;case"c":case"cc":z=En(an.Day,1);break;case"ccc":z=jn(mn.Days,be.Abbreviated,Ut.Standalone);break;case"cccc":z=jn(mn.Days,be.Wide,Ut.Standalone);break;case"ccccc":z=jn(mn.Days,be.Narrow,Ut.Standalone);break;case"cccccc":z=jn(mn.Days,be.Short,Ut.Standalone);break;case"E":case"EE":case"EEE":z=jn(mn.Days,be.Abbreviated);break;case"EEEE":z=jn(mn.Days,be.Wide);break;case"EEEEE":z=jn(mn.Days,be.Narrow);break;case"EEEEEE":z=jn(mn.Days,be.Short);break;case"a":case"aa":case"aaa":z=jn(mn.DayPeriods,be.Abbreviated);break;case"aaaa":z=jn(mn.DayPeriods,be.Wide);break;case"aaaaa":z=jn(mn.DayPeriods,be.Narrow);break;case"b":case"bb":case"bbb":z=jn(mn.DayPeriods,be.Abbreviated,Ut.Standalone,!0);break;case"bbbb":z=jn(mn.DayPeriods,be.Wide,Ut.Standalone,!0);break;case"bbbbb":z=jn(mn.DayPeriods,be.Narrow,Ut.Standalone,!0);break;case"B":case"BB":case"BBB":z=jn(mn.DayPeriods,be.Abbreviated,Ut.Format,!0);break;case"BBBB":z=jn(mn.DayPeriods,be.Wide,Ut.Format,!0);break;case"BBBBB":z=jn(mn.DayPeriods,be.Narrow,Ut.Format,!0);break;case"h":z=En(an.Hours,1,-12);break;case"hh":z=En(an.Hours,2,-12);break;case"H":z=En(an.Hours,1);break;case"HH":z=En(an.Hours,2);break;case"m":z=En(an.Minutes,1);break;case"mm":z=En(an.Minutes,2);break;case"s":z=En(an.Seconds,1);break;case"ss":z=En(an.Seconds,2);break;case"S":z=En(an.FractionalSeconds,1);break;case"SS":z=En(an.FractionalSeconds,2);break;case"SSS":z=En(an.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":z=Jr(Nn.Short);break;case"ZZZZZ":z=Jr(Nn.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":z=Jr(Nn.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":z=Jr(Nn.Long);break;default:return null}return te[D]=z,z}(Mr);Ir+=er?er(ce,M,yn):"''"===Mr?"'":Mr.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),Ir}function xr(D,z,M){const F=new Date(0);return F.setFullYear(D,z,M),F.setHours(0,0,0),F}function Jn(D,z){const M=function wt(D){return(0,m.H5H)(D)[m.KH2.LocaleId]}(D);if(Ot[M]??={},Ot[M][z])return Ot[M][z];let F="";switch(z){case"shortDate":F=Re(D,Xe.Short);break;case"mediumDate":F=Re(D,Xe.Medium);break;case"longDate":F=Re(D,Xe.Long);break;case"fullDate":F=Re(D,Xe.Full);break;case"shortTime":F=Me(D,Xe.Short);break;case"mediumTime":F=Me(D,Xe.Medium);break;case"longTime":F=Me(D,Xe.Long);break;case"fullTime":F=Me(D,Xe.Full);break;case"short":const ce=Jn(D,"shortTime"),nt=Jn(D,"shortDate");F=gi(Ne(D,Xe.Short),[ce,nt]);break;case"medium":const Tt=Jn(D,"mediumTime"),Kt=Jn(D,"mediumDate");F=gi(Ne(D,Xe.Medium),[Tt,Kt]);break;case"long":const yn=Jn(D,"longTime"),Ir=Jn(D,"longDate");F=gi(Ne(D,Xe.Long),[yn,Ir]);break;case"full":const Mr=Jn(D,"fullTime"),er=Jn(D,"fullDate");F=gi(Ne(D,Xe.Full),[Mr,er])}return F&&(Ot[M][z]=F),F}function gi(D,z){return z&&(D=D.replace(/\{([^}]+)}/g,function(M,F){return null!=z&&F in z?z[F]:M})),D}function Or(D,z,M="-",F,ce){let nt="";(D<0||ce&&D<=0)&&(ce?D=1-D:(D=-D,nt=M));let Tt=String(D);for(;Tt.length<z;)Tt="0"+Tt;return F&&(Tt=Tt.slice(Tt.length-z)),nt+Tt}function En(D,z,M=0,F=!1,ce=!1){return function(nt,Tt){let Kt=function Kr(D,z){switch(D){case an.FullYear:return z.getFullYear();case an.Month:return z.getMonth();case an.Date:return z.getDate();case an.Hours:return z.getHours();case an.Minutes:return z.getMinutes();case an.Seconds:return z.getSeconds();case an.FractionalSeconds:return z.getMilliseconds();case an.Day:return z.getDay();default:throw new Error(`Unknown DateType value "${D}".`)}}(D,nt);if((M>0||Kt>-M)&&(Kt+=M),D===an.Hours)0===Kt&&-12===M&&(Kt=12);else if(D===an.FractionalSeconds)return function _r(D,z){return Or(D,3).substring(0,z)}(Kt,z);const yn=ye(Tt,rn.MinusSign);return Or(Kt,z,yn,F,ce)}}function jn(D,z,M=Ut.Format,F=!1){return function(ce,nt){return function In(D,z,M,F,ce,nt){switch(M){case mn.Months:return function Ze(D,z,M){const F=(0,m.H5H)(D),nt=ht([F[m.KH2.MonthsFormat],F[m.KH2.MonthsStandalone]],z);return ht(nt,M)}(z,ce,F)[D.getMonth()];case mn.Days:return function Bn(D,z,M){const F=(0,m.H5H)(D),nt=ht([F[m.KH2.DaysFormat],F[m.KH2.DaysStandalone]],z);return ht(nt,M)}(z,ce,F)[D.getDay()];case mn.DayPeriods:const Tt=D.getHours(),Kt=D.getMinutes();if(nt){const Ir=function gt(D){const z=(0,m.H5H)(D);return $e(z),(z[m.KH2.ExtraData][2]||[]).map(F=>"string"==typeof F?ot(F):[ot(F[0]),ot(F[1])])}(z),Mr=function ct(D,z,M){const F=(0,m.H5H)(D);$e(F);const nt=ht([F[m.KH2.ExtraData][0],F[m.KH2.ExtraData][1]],z)||[];return ht(nt,M)||[]}(z,ce,F),er=Ir.findIndex(Gr=>{if(Array.isArray(Gr)){const[Ar,ci]=Gr,wr=Tt>=Ar.hours&&Kt>=Ar.minutes,Lt=Tt<ci.hours||Tt===ci.hours&&Kt<ci.minutes;if(Ar.hours<ci.hours){if(wr&&Lt)return!0}else if(wr||Lt)return!0}else if(Gr.hours===Tt&&Gr.minutes===Kt)return!0;return!1});if(-1!==er)return Mr[er]}return function Ct(D,z,M){const F=(0,m.H5H)(D),nt=ht([F[m.KH2.DayPeriodsFormat],F[m.KH2.DayPeriodsStandalone]],z);return ht(nt,M)}(z,ce,F)[Tt<12?0:1];case mn.Eras:return function Ae(D,z){return ht((0,m.H5H)(D)[m.KH2.Eras],z)}(z,F)[D.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${M}`)}}(ce,nt,D,z,M,F)}}function Jr(D){return function(z,M,F){const ce=-1*F,nt=ye(M,rn.MinusSign),Tt=ce>0?Math.floor(ce/60):Math.ceil(ce/60);switch(D){case Nn.Short:return(ce>=0?"+":"")+Or(Tt,2,nt)+Or(Math.abs(ce%60),2,nt);case Nn.ShortGMT:return"GMT"+(ce>=0?"+":"")+Or(Tt,1,nt);case Nn.Long:return"GMT"+(ce>=0?"+":"")+Or(Tt,2,nt)+":"+Or(Math.abs(ce%60),2,nt);case Nn.Extended:return 0===F?"Z":(ce>=0?"+":"")+Or(Tt,2,nt)+":"+Or(Math.abs(ce%60),2,nt);default:throw new Error(`Unknown zone width "${D}"`)}}}const Ie=0,or=4;function mt(D){const z=D.getDay(),M=0===z?-3:or-z;return xr(D.getFullYear(),D.getMonth(),D.getDate()+M)}function Y(D,z=!1){return function(M,F){let ce;if(z){const nt=new Date(M.getFullYear(),M.getMonth(),1).getDay()-1,Tt=M.getDate();ce=1+Math.floor((Tt+nt)/7)}else{const nt=mt(M),Tt=function ri(D){const z=xr(D,Ie,1).getDay();return xr(D,0,1+(z<=or?or:or+7)-z)}(nt.getFullYear()),Kt=nt.getTime()-Tt.getTime();ce=1+Math.round(Kt/6048e5)}return Or(ce,D,ye(F,rn.MinusSign))}}function G(D,z=!1){return function(M,F){return Or(mt(M).getFullYear(),D,ye(F,rn.MinusSign),z)}}const te={};function Ee(D,z){D=D.replace(/:/g,"");const M=Date.parse("Jan 01, 1970 00:00:00 "+D)/6e4;return isNaN(M)?z:M}function ge(D){return D instanceof Date&&!isNaN(D.valueOf())}function se(D,z){z=encodeURIComponent(z);for(const M of D.split(";")){const F=M.indexOf("="),[ce,nt]=-1==F?[M,""]:[M.slice(0,F),M.slice(F+1)];if(ce.trim()===z)return decodeURIComponent(nt)}return null}const ae=/\s+/,Fe=[];let je=(()=>{class D{constructor(M,F){this._ngEl=M,this._renderer=F,this.initialClasses=Fe,this.stateMap=new Map}set klass(M){this.initialClasses=null!=M?M.trim().split(ae):Fe}set ngClass(M){this.rawClass="string"==typeof M?M.trim().split(ae):M}ngDoCheck(){for(const F of this.initialClasses)this._updateState(F,!0);const M=this.rawClass;if(Array.isArray(M)||M instanceof Set)for(const F of M)this._updateState(F,!0);else if(null!=M)for(const F of Object.keys(M))this._updateState(F,!!M[F]);this._applyStateDiff()}_updateState(M,F){const ce=this.stateMap.get(M);void 0!==ce?(ce.enabled!==F&&(ce.changed=!0,ce.enabled=F),ce.touched=!0):this.stateMap.set(M,{enabled:F,changed:!0,touched:!0})}_applyStateDiff(){for(const M of this.stateMap){const F=M[0],ce=M[1];ce.changed?(this._toggleClass(F,ce.enabled),ce.changed=!1):ce.touched||(ce.enabled&&this._toggleClass(F,!1),this.stateMap.delete(F)),ce.touched=!1}}_toggleClass(M,F){(M=M.trim()).length>0&&M.split(ae).forEach(ce=>{F?this._renderer.addClass(this._ngEl.nativeElement,ce):this._renderer.removeClass(this._ngEl.nativeElement,ce)})}static{this.\u0275fac=function(F){return new(F||D)(m.rXU(m.aKT),m.rXU(m.sFG))}}static{this.\u0275dir=m.FsC({type:D,selectors:[["","ngClass",""]],inputs:{klass:[m.Mj6.None,"class","klass"],ngClass:"ngClass"},standalone:!0})}}return D})();class sn{constructor(z,M,F,ce){this.$implicit=z,this.ngForOf=M,this.index=F,this.count=ce}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let gn=(()=>{class D{set ngForOf(M){this._ngForOf=M,this._ngForOfDirty=!0}set ngForTrackBy(M){this._trackByFn=M}get ngForTrackBy(){return this._trackByFn}constructor(M,F,ce){this._viewContainer=M,this._template=F,this._differs=ce,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(M){M&&(this._template=M)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const M=this._ngForOf;!this._differ&&M&&(this._differ=this._differs.find(M).create(this.ngForTrackBy))}if(this._differ){const M=this._differ.diff(this._ngForOf);M&&this._applyChanges(M)}}_applyChanges(M){const F=this._viewContainer;M.forEachOperation((ce,nt,Tt)=>{if(null==ce.previousIndex)F.createEmbeddedView(this._template,new sn(ce.item,this._ngForOf,-1,-1),null===Tt?void 0:Tt);else if(null==Tt)F.remove(null===nt?void 0:nt);else if(null!==nt){const Kt=F.get(nt);F.move(Kt,Tt),yr(Kt,ce)}});for(let ce=0,nt=F.length;ce<nt;ce++){const Kt=F.get(ce).context;Kt.index=ce,Kt.count=nt,Kt.ngForOf=this._ngForOf}M.forEachIdentityChange(ce=>{yr(F.get(ce.currentIndex),ce)})}static ngTemplateContextGuard(M,F){return!0}static{this.\u0275fac=function(F){return new(F||D)(m.rXU(m.c1b),m.rXU(m.C4Q),m.rXU(m._q3))}}static{this.\u0275dir=m.FsC({type:D,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return D})();function yr(D,z){D.context.$implicit=z.item}let Kn=(()=>{class D{constructor(M,F){this._viewContainer=M,this._context=new ar,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=F}set ngIf(M){this._context.$implicit=this._context.ngIf=M,this._updateView()}set ngIfThen(M){Ci("ngIfThen",M),this._thenTemplateRef=M,this._thenViewRef=null,this._updateView()}set ngIfElse(M){Ci("ngIfElse",M),this._elseTemplateRef=M,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(M,F){return!0}static{this.\u0275fac=function(F){return new(F||D)(m.rXU(m.c1b),m.rXU(m.C4Q))}}static{this.\u0275dir=m.FsC({type:D,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return D})();class ar{constructor(){this.$implicit=null,this.ngIf=null}}function Ci(D,z){if(z&&!z.createEmbeddedView)throw new Error(`${D} must be a TemplateRef, but received '${(0,m.Tbb)(z)}'.`)}let dn=(()=>{class D{constructor(M,F,ce){this._ngEl=M,this._differs=F,this._renderer=ce,this._ngStyle=null,this._differ=null}set ngStyle(M){this._ngStyle=M,!this._differ&&M&&(this._differ=this._differs.find(M).create())}ngDoCheck(){if(this._differ){const M=this._differ.diff(this._ngStyle);M&&this._applyChanges(M)}}_setStyle(M,F){const[ce,nt]=M.split("."),Tt=-1===ce.indexOf("-")?void 0:m.czy.DashCase;null!=F?this._renderer.setStyle(this._ngEl.nativeElement,ce,nt?`${F}${nt}`:F,Tt):this._renderer.removeStyle(this._ngEl.nativeElement,ce,Tt)}_applyChanges(M){M.forEachRemovedItem(F=>this._setStyle(F.key,null)),M.forEachAddedItem(F=>this._setStyle(F.key,F.currentValue)),M.forEachChangedItem(F=>this._setStyle(F.key,F.currentValue))}static{this.\u0275fac=function(F){return new(F||D)(m.rXU(m.aKT),m.rXU(m.MKu),m.rXU(m.sFG))}}static{this.\u0275dir=m.FsC({type:D,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0})}}return D})();const Da=new m.nKC(""),wi=new m.nKC("");let bi=(()=>{class D{constructor(M,F,ce){this.locale=M,this.defaultTimezone=F,this.defaultOptions=ce}transform(M,F,ce,nt){if(null==M||""===M||M!=M)return null;try{return Yn(M,F??this.defaultOptions?.dateFormat??"mediumDate",nt||this.locale,ce??this.defaultOptions?.timezone??this.defaultTimezone??void 0)}catch(Tt){throw function cr(D,z){return new m.wOt(2100,!1)}()}}static{this.\u0275fac=function(F){return new(F||D)(m.rXU(m.xe9,16),m.rXU(Da,24),m.rXU(wi,24))}}static{this.\u0275pipe=m.EJ8({name:"date",type:D,pure:!0,standalone:!0})}}return D})(),xi=(()=>{class D{static{this.\u0275fac=function(F){return new(F||D)}}static{this.\u0275mod=m.$C({type:D})}static{this.\u0275inj=m.G2t({})}}return D})();const Zo="browser",Cs="server";function Aa(D){return D===Cs}let gs=(()=>{class D{static{this.\u0275prov=(0,m.jDH)({token:D,providedIn:"root",factory:()=>function ps(D){return D===Zo}((0,m.WQX)(m.Agw))?new hi((0,m.WQX)(le),window):new Gs})}}return D})();class hi{constructor(z,M){this.document=z,this.window=M,this.offset=()=>[0,0]}setOffset(z){this.offset=Array.isArray(z)?()=>z:z}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(z){this.window.scrollTo(z[0],z[1])}scrollToAnchor(z){const M=function _i(D,z){const M=D.getElementById(z)||D.getElementsByName(z)[0];if(M)return M;if("function"==typeof D.createTreeWalker&&D.body&&"function"==typeof D.body.attachShadow){const F=D.createTreeWalker(D.body,NodeFilter.SHOW_ELEMENT);let ce=F.currentNode;for(;ce;){const nt=ce.shadowRoot;if(nt){const Tt=nt.getElementById(z)||nt.querySelector(`[name="${z}"]`);if(Tt)return Tt}ce=F.nextNode()}}return null}(this.document,z);M&&(this.scrollToElement(M),M.focus())}setHistoryScrollRestoration(z){this.window.history.scrollRestoration=z}scrollToElement(z){const M=z.getBoundingClientRect(),F=M.left+this.window.pageXOffset,ce=M.top+this.window.pageYOffset,nt=this.offset();this.window.scrollTo(F-nt[0],ce-nt[1])}}class Gs{setOffset(z){}getScrollPosition(){return[0,0]}scrollToPosition(z){}scrollToAnchor(z){}setHistoryScrollRestoration(z){}}class xo{}},1626:(on,rt,$)=>{$.d(rt,{Qq:()=>Re,q1:()=>Dr}),$(467);var V=$(4438),oe=$(7673),ne=$(1985),k=$(8455),Ue=$(274),le=$(5964),Qe=$(6354),We=$(980),pe=$(5558),fe=$(177);class Be{}class At{}class Je{constructor(se){this.normalizedNames=new Map,this.lazyUpdate=null,se?"string"==typeof se?this.lazyInit=()=>{this.headers=new Map,se.split("\n").forEach(ae=>{const Fe=ae.indexOf(":");if(Fe>0){const je=ae.slice(0,Fe),St=je.toLowerCase(),kt=ae.slice(Fe+1).trim();this.maybeSetNormalizedName(je,St),this.headers.has(St)?this.headers.get(St).push(kt):this.headers.set(St,[kt])}})}:typeof Headers<"u"&&se instanceof Headers?(this.headers=new Map,se.forEach((ae,Fe)=>{this.setHeaderEntries(Fe,ae)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(se).forEach(([ae,Fe])=>{this.setHeaderEntries(ae,Fe)})}:this.headers=new Map}has(se){return this.init(),this.headers.has(se.toLowerCase())}get(se){this.init();const ae=this.headers.get(se.toLowerCase());return ae&&ae.length>0?ae[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(se){return this.init(),this.headers.get(se.toLowerCase())||null}append(se,ae){return this.clone({name:se,value:ae,op:"a"})}set(se,ae){return this.clone({name:se,value:ae,op:"s"})}delete(se,ae){return this.clone({name:se,value:ae,op:"d"})}maybeSetNormalizedName(se,ae){this.normalizedNames.has(ae)||this.normalizedNames.set(ae,se)}init(){this.lazyInit&&(this.lazyInit instanceof Je?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(se=>this.applyUpdate(se)),this.lazyUpdate=null))}copyFrom(se){se.init(),Array.from(se.headers.keys()).forEach(ae=>{this.headers.set(ae,se.headers.get(ae)),this.normalizedNames.set(ae,se.normalizedNames.get(ae))})}clone(se){const ae=new Je;return ae.lazyInit=this.lazyInit&&this.lazyInit instanceof Je?this.lazyInit:this,ae.lazyUpdate=(this.lazyUpdate||[]).concat([se]),ae}applyUpdate(se){const ae=se.name.toLowerCase();switch(se.op){case"a":case"s":let Fe=se.value;if("string"==typeof Fe&&(Fe=[Fe]),0===Fe.length)return;this.maybeSetNormalizedName(se.name,ae);const je=("a"===se.op?this.headers.get(ae):void 0)||[];je.push(...Fe),this.headers.set(ae,je);break;case"d":const St=se.value;if(St){let kt=this.headers.get(ae);if(!kt)return;kt=kt.filter(sn=>-1===St.indexOf(sn)),0===kt.length?(this.headers.delete(ae),this.normalizedNames.delete(ae)):this.headers.set(ae,kt)}else this.headers.delete(ae),this.normalizedNames.delete(ae)}}setHeaderEntries(se,ae){const Fe=(Array.isArray(ae)?ae:[ae]).map(St=>St.toString()),je=se.toLowerCase();this.headers.set(je,Fe),this.maybeSetNormalizedName(se,je)}forEach(se){this.init(),Array.from(this.normalizedNames.keys()).forEach(ae=>se(this.normalizedNames.get(ae),this.headers.get(ae)))}}class qt{encodeKey(se){return ln(se)}encodeValue(se){return ln(se)}decodeKey(se){return decodeURIComponent(se)}decodeValue(se){return decodeURIComponent(se)}}const Nt=/%(\d[a-f0-9])/gi,un={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function ln(W){return encodeURIComponent(W).replace(Nt,(se,ae)=>un[ae]??se)}function vt(W){return`${W}`}class he{constructor(se={}){if(this.updates=null,this.cloneFrom=null,this.encoder=se.encoder||new qt,se.fromString){if(se.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function $t(W,se){const ae=new Map;return W.length>0&&W.replace(/^\?/,"").split("&").forEach(je=>{const St=je.indexOf("="),[kt,sn]=-1==St?[se.decodeKey(je),""]:[se.decodeKey(je.slice(0,St)),se.decodeValue(je.slice(St+1))],gn=ae.get(kt)||[];gn.push(sn),ae.set(kt,gn)}),ae}(se.fromString,this.encoder)}else se.fromObject?(this.map=new Map,Object.keys(se.fromObject).forEach(ae=>{const Fe=se.fromObject[ae],je=Array.isArray(Fe)?Fe.map(vt):[vt(Fe)];this.map.set(ae,je)})):this.map=null}has(se){return this.init(),this.map.has(se)}get(se){this.init();const ae=this.map.get(se);return ae?ae[0]:null}getAll(se){return this.init(),this.map.get(se)||null}keys(){return this.init(),Array.from(this.map.keys())}append(se,ae){return this.clone({param:se,value:ae,op:"a"})}appendAll(se){const ae=[];return Object.keys(se).forEach(Fe=>{const je=se[Fe];Array.isArray(je)?je.forEach(St=>{ae.push({param:Fe,value:St,op:"a"})}):ae.push({param:Fe,value:je,op:"a"})}),this.clone(ae)}set(se,ae){return this.clone({param:se,value:ae,op:"s"})}delete(se,ae){return this.clone({param:se,value:ae,op:"d"})}toString(){return this.init(),this.keys().map(se=>{const ae=this.encoder.encodeKey(se);return this.map.get(se).map(Fe=>ae+"="+this.encoder.encodeValue(Fe)).join("&")}).filter(se=>""!==se).join("&")}clone(se){const ae=new he({encoder:this.encoder});return ae.cloneFrom=this.cloneFrom||this,ae.updates=(this.updates||[]).concat(se),ae}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(se=>this.map.set(se,this.cloneFrom.map.get(se))),this.updates.forEach(se=>{switch(se.op){case"a":case"s":const ae=("a"===se.op?this.map.get(se.param):void 0)||[];ae.push(vt(se.value)),this.map.set(se.param,ae);break;case"d":if(void 0===se.value){this.map.delete(se.param);break}{let Fe=this.map.get(se.param)||[];const je=Fe.indexOf(vt(se.value));-1!==je&&Fe.splice(je,1),Fe.length>0?this.map.set(se.param,Fe):this.map.delete(se.param)}}}),this.cloneFrom=this.updates=null)}}class Dt{constructor(){this.map=new Map}set(se,ae){return this.map.set(se,ae),this}get(se){return this.map.has(se)||this.map.set(se,se.defaultValue()),this.map.get(se)}delete(se){return this.map.delete(se),this}has(se){return this.map.has(se)}keys(){return this.map.keys()}}function Ut(W){return typeof ArrayBuffer<"u"&&W instanceof ArrayBuffer}function be(W){return typeof Blob<"u"&&W instanceof Blob}function Xe(W){return typeof FormData<"u"&&W instanceof FormData}class bn{constructor(se,ae,Fe,je){let St;if(this.url=ae,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=se.toUpperCase(),function ut(W){switch(W){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||je?(this.body=void 0!==Fe?Fe:null,St=je):St=Fe,St&&(this.reportProgress=!!St.reportProgress,this.withCredentials=!!St.withCredentials,St.responseType&&(this.responseType=St.responseType),St.headers&&(this.headers=St.headers),St.context&&(this.context=St.context),St.params&&(this.params=St.params),this.transferCache=St.transferCache),this.headers??=new Je,this.context??=new Dt,this.params){const kt=this.params.toString();if(0===kt.length)this.urlWithParams=ae;else{const sn=ae.indexOf("?");this.urlWithParams=ae+(-1===sn?"?":sn<ae.length-1?"&":"")+kt}}else this.params=new he,this.urlWithParams=ae}serializeBody(){return null===this.body?null:"string"==typeof this.body||Ut(this.body)||be(this.body)||Xe(this.body)||function rn(W){return typeof URLSearchParams<"u"&&W instanceof URLSearchParams}(this.body)?this.body:this.body instanceof he?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Xe(this.body)?null:be(this.body)?this.body.type||null:Ut(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof he?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(se={}){const ae=se.method||this.method,Fe=se.url||this.url,je=se.responseType||this.responseType,St=se.transferCache??this.transferCache,kt=void 0!==se.body?se.body:this.body,sn=se.withCredentials??this.withCredentials,gn=se.reportProgress??this.reportProgress;let yr=se.headers||this.headers,ii=se.params||this.params;const Kn=se.context??this.context;return void 0!==se.setHeaders&&(yr=Object.keys(se.setHeaders).reduce((ar,Ci)=>ar.set(Ci,se.setHeaders[Ci]),yr)),se.setParams&&(ii=Object.keys(se.setParams).reduce((ar,Ci)=>ar.set(Ci,se.setParams[Ci]),ii)),new bn(ae,Fe,kt,{params:ii,headers:yr,context:Kn,reportProgress:gn,responseType:je,withCredentials:sn,transferCache:St})}}var wt=function(W){return W[W.Sent=0]="Sent",W[W.UploadProgress=1]="UploadProgress",W[W.ResponseHeader=2]="ResponseHeader",W[W.DownloadProgress=3]="DownloadProgress",W[W.Response=4]="Response",W[W.User=5]="User",W}(wt||{});class Ct{constructor(se,ae=Pe.Ok,Fe="OK"){this.headers=se.headers||new Je,this.status=void 0!==se.status?se.status:ae,this.statusText=se.statusText||Fe,this.url=se.url||null,this.ok=this.status>=200&&this.status<300}}class Bn extends Ct{constructor(se={}){super(se),this.type=wt.ResponseHeader}clone(se={}){return new Bn({headers:se.headers||this.headers,status:void 0!==se.status?se.status:this.status,statusText:se.statusText||this.statusText,url:se.url||this.url||void 0})}}class Ze extends Ct{constructor(se={}){super(se),this.type=wt.Response,this.body=void 0!==se.body?se.body:null}clone(se={}){return new Ze({body:void 0!==se.body?se.body:this.body,headers:se.headers||this.headers,status:void 0!==se.status?se.status:this.status,statusText:se.statusText||this.statusText,url:se.url||this.url||void 0})}}class Ae extends Ct{constructor(se){super(se,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${se.url||"(unknown url)"}`:`Http failure response for ${se.url||"(unknown url)"}: ${se.status} ${se.statusText}`,this.error=se.error||null}}var Pe=function(W){return W[W.Continue=100]="Continue",W[W.SwitchingProtocols=101]="SwitchingProtocols",W[W.Processing=102]="Processing",W[W.EarlyHints=103]="EarlyHints",W[W.Ok=200]="Ok",W[W.Created=201]="Created",W[W.Accepted=202]="Accepted",W[W.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",W[W.NoContent=204]="NoContent",W[W.ResetContent=205]="ResetContent",W[W.PartialContent=206]="PartialContent",W[W.MultiStatus=207]="MultiStatus",W[W.AlreadyReported=208]="AlreadyReported",W[W.ImUsed=226]="ImUsed",W[W.MultipleChoices=300]="MultipleChoices",W[W.MovedPermanently=301]="MovedPermanently",W[W.Found=302]="Found",W[W.SeeOther=303]="SeeOther",W[W.NotModified=304]="NotModified",W[W.UseProxy=305]="UseProxy",W[W.Unused=306]="Unused",W[W.TemporaryRedirect=307]="TemporaryRedirect",W[W.PermanentRedirect=308]="PermanentRedirect",W[W.BadRequest=400]="BadRequest",W[W.Unauthorized=401]="Unauthorized",W[W.PaymentRequired=402]="PaymentRequired",W[W.Forbidden=403]="Forbidden",W[W.NotFound=404]="NotFound",W[W.MethodNotAllowed=405]="MethodNotAllowed",W[W.NotAcceptable=406]="NotAcceptable",W[W.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",W[W.RequestTimeout=408]="RequestTimeout",W[W.Conflict=409]="Conflict",W[W.Gone=410]="Gone",W[W.LengthRequired=411]="LengthRequired",W[W.PreconditionFailed=412]="PreconditionFailed",W[W.PayloadTooLarge=413]="PayloadTooLarge",W[W.UriTooLong=414]="UriTooLong",W[W.UnsupportedMediaType=415]="UnsupportedMediaType",W[W.RangeNotSatisfiable=416]="RangeNotSatisfiable",W[W.ExpectationFailed=417]="ExpectationFailed",W[W.ImATeapot=418]="ImATeapot",W[W.MisdirectedRequest=421]="MisdirectedRequest",W[W.UnprocessableEntity=422]="UnprocessableEntity",W[W.Locked=423]="Locked",W[W.FailedDependency=424]="FailedDependency",W[W.TooEarly=425]="TooEarly",W[W.UpgradeRequired=426]="UpgradeRequired",W[W.PreconditionRequired=428]="PreconditionRequired",W[W.TooManyRequests=429]="TooManyRequests",W[W.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",W[W.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",W[W.InternalServerError=500]="InternalServerError",W[W.NotImplemented=501]="NotImplemented",W[W.BadGateway=502]="BadGateway",W[W.ServiceUnavailable=503]="ServiceUnavailable",W[W.GatewayTimeout=504]="GatewayTimeout",W[W.HttpVersionNotSupported=505]="HttpVersionNotSupported",W[W.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",W[W.InsufficientStorage=507]="InsufficientStorage",W[W.LoopDetected=508]="LoopDetected",W[W.NotExtended=510]="NotExtended",W[W.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",W}(Pe||{});function Jt(W,se){return{body:se,headers:W.headers,context:W.context,observe:W.observe,params:W.params,reportProgress:W.reportProgress,responseType:W.responseType,withCredentials:W.withCredentials,transferCache:W.transferCache}}let Re=(()=>{class W{constructor(ae){this.handler=ae}request(ae,Fe,je={}){let St;if(ae instanceof bn)St=ae;else{let gn,yr;gn=je.headers instanceof Je?je.headers:new Je(je.headers),je.params&&(yr=je.params instanceof he?je.params:new he({fromObject:je.params})),St=new bn(ae,Fe,void 0!==je.body?je.body:null,{headers:gn,context:je.context,params:yr,reportProgress:je.reportProgress,responseType:je.responseType||"json",withCredentials:je.withCredentials,transferCache:je.transferCache})}const kt=(0,oe.of)(St).pipe((0,Ue.H)(gn=>this.handler.handle(gn)));if(ae instanceof bn||"events"===je.observe)return kt;const sn=kt.pipe((0,le.p)(gn=>gn instanceof Ze));switch(je.observe||"body"){case"body":switch(St.responseType){case"arraybuffer":return sn.pipe((0,Qe.T)(gn=>{if(null!==gn.body&&!(gn.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return gn.body}));case"blob":return sn.pipe((0,Qe.T)(gn=>{if(null!==gn.body&&!(gn.body instanceof Blob))throw new Error("Response is not a Blob.");return gn.body}));case"text":return sn.pipe((0,Qe.T)(gn=>{if(null!==gn.body&&"string"!=typeof gn.body)throw new Error("Response is not a string.");return gn.body}));default:return sn.pipe((0,Qe.T)(gn=>gn.body))}case"response":return sn;default:throw new Error(`Unreachable: unhandled observe type ${je.observe}}`)}}delete(ae,Fe={}){return this.request("DELETE",ae,Fe)}get(ae,Fe={}){return this.request("GET",ae,Fe)}head(ae,Fe={}){return this.request("HEAD",ae,Fe)}jsonp(ae,Fe){return this.request("JSONP",ae,{params:(new he).append(Fe,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(ae,Fe={}){return this.request("OPTIONS",ae,Fe)}patch(ae,Fe,je={}){return this.request("PATCH",ae,Jt(je,Fe))}post(ae,Fe,je={}){return this.request("POST",ae,Jt(je,Fe))}put(ae,Fe,je={}){return this.request("PUT",ae,Jt(je,Fe))}static{this.\u0275fac=function(Fe){return new(Fe||W)(V.KVO(Be))}}static{this.\u0275prov=V.jDH({token:W,factory:W.\u0275fac})}}return W})();function Zt(W,se){return se(W)}function Wt(W,se){return(ae,Fe)=>se.intercept(ae,{handle:je=>W(je,Fe)})}const gt=new V.nKC(""),ct=new V.nKC(""),dt=new V.nKC(""),ht=new V.nKC("");function ot(){let W=null;return(se,ae)=>{null===W&&(W=((0,V.WQX)(gt,{optional:!0})??[]).reduceRight(Wt,Zt));const Fe=(0,V.WQX)(V.TgB),je=Fe.add();return W(se,ae).pipe((0,We.j)(()=>Fe.remove(je)))}}let zn=(()=>{class W extends Be{constructor(ae,Fe){super(),this.backend=ae,this.injector=Fe,this.chain=null,this.pendingTasks=(0,V.WQX)(V.TgB);const je=(0,V.WQX)(ht,{optional:!0});this.backend=je??ae}handle(ae){if(null===this.chain){const je=Array.from(new Set([...this.injector.get(ct),...this.injector.get(dt,[])]));this.chain=je.reduceRight((St,kt)=>function $e(W,se,ae){return(Fe,je)=>(0,V.N4e)(ae,()=>se(Fe,St=>W(St,je)))}(St,kt,this.injector),Zt)}const Fe=this.pendingTasks.add();return this.chain(ae,je=>this.backend.handle(je)).pipe((0,We.j)(()=>this.pendingTasks.remove(Fe)))}static{this.\u0275fac=function(Fe){return new(Fe||W)(V.KVO(At),V.KVO(V.uvJ))}}static{this.\u0275prov=V.jDH({token:W,factory:W.\u0275fac})}}return W})();const _r=/^\)\]\}',?\n/;let Kr=(()=>{class W{constructor(ae){this.xhrFactory=ae}handle(ae){if("JSONP"===ae.method)throw new V.wOt(-2800,!1);const Fe=this.xhrFactory;return(Fe.\u0275loadImpl?(0,k.H)(Fe.\u0275loadImpl()):(0,oe.of)(null)).pipe((0,pe.n)(()=>new ne.c(St=>{const kt=Fe.build();if(kt.open(ae.method,ae.urlWithParams),ae.withCredentials&&(kt.withCredentials=!0),ae.headers.forEach((qn,rr)=>kt.setRequestHeader(qn,rr.join(","))),ae.headers.has("Accept")||kt.setRequestHeader("Accept","application/json, text/plain, */*"),!ae.headers.has("Content-Type")){const qn=ae.detectContentTypeHeader();null!==qn&&kt.setRequestHeader("Content-Type",qn)}if(ae.responseType){const qn=ae.responseType.toLowerCase();kt.responseType="json"!==qn?qn:"text"}const sn=ae.serializeBody();let gn=null;const yr=()=>{if(null!==gn)return gn;const qn=kt.statusText||"OK",rr=new Je(kt.getAllResponseHeaders()),Sn=function En(W){return"responseURL"in W&&W.responseURL?W.responseURL:/^X-Request-URL:/m.test(W.getAllResponseHeaders())?W.getResponseHeader("X-Request-URL"):null}(kt)||ae.url;return gn=new Bn({headers:rr,status:kt.status,statusText:qn,url:Sn}),gn},ii=()=>{let{headers:qn,status:rr,statusText:Sn,url:Cn}=yr(),An=null;rr!==Pe.NoContent&&(An=typeof kt.response>"u"?kt.responseText:kt.response),0===rr&&(rr=An?Pe.Ok:0);let xn=rr>=200&&rr<300;if("json"===ae.responseType&&"string"==typeof An){const Fr=An;An=An.replace(_r,"");try{An=""!==An?JSON.parse(An):null}catch(pr){An=Fr,xn&&(xn=!1,An={error:pr,text:An})}}xn?(St.next(new Ze({body:An,headers:qn,status:rr,statusText:Sn,url:Cn||void 0})),St.complete()):St.error(new Ae({error:An,headers:qn,status:rr,statusText:Sn,url:Cn||void 0}))},Kn=qn=>{const{url:rr}=yr(),Sn=new Ae({error:qn,status:kt.status||0,statusText:kt.statusText||"Unknown Error",url:rr||void 0});St.error(Sn)};let ar=!1;const Ci=qn=>{ar||(St.next(yr()),ar=!0);let rr={type:wt.DownloadProgress,loaded:qn.loaded};qn.lengthComputable&&(rr.total=qn.total),"text"===ae.responseType&&kt.responseText&&(rr.partialText=kt.responseText),St.next(rr)},jr=qn=>{let rr={type:wt.UploadProgress,loaded:qn.loaded};qn.lengthComputable&&(rr.total=qn.total),St.next(rr)};return kt.addEventListener("load",ii),kt.addEventListener("error",Kn),kt.addEventListener("timeout",Kn),kt.addEventListener("abort",Kn),ae.reportProgress&&(kt.addEventListener("progress",Ci),null!==sn&&kt.upload&&kt.upload.addEventListener("progress",jr)),kt.send(sn),St.next({type:wt.Sent}),()=>{kt.removeEventListener("error",Kn),kt.removeEventListener("abort",Kn),kt.removeEventListener("load",ii),kt.removeEventListener("timeout",Kn),ae.reportProgress&&(kt.removeEventListener("progress",Ci),null!==sn&&kt.upload&&kt.upload.removeEventListener("progress",jr)),kt.readyState!==kt.DONE&&kt.abort()}})))}static{this.\u0275fac=function(Fe){return new(Fe||W)(V.KVO(fe.N0))}}static{this.\u0275prov=V.jDH({token:W,factory:W.\u0275fac})}}return W})();const jn=new V.nKC(""),Jr=new V.nKC("",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),or=new V.nKC("",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class ri{}let mt=(()=>{class W{constructor(ae,Fe,je){this.doc=ae,this.platform=Fe,this.cookieName=je,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const ae=this.doc.cookie||"";return ae!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,fe._b)(ae,this.cookieName),this.lastCookieString=ae),this.lastToken}static{this.\u0275fac=function(Fe){return new(Fe||W)(V.KVO(fe.qQ),V.KVO(V.Agw),V.KVO(Jr))}}static{this.\u0275prov=V.jDH({token:W,factory:W.\u0275fac})}}return W})();function Y(W,se){const ae=W.url.toLowerCase();if(!(0,V.WQX)(jn)||"GET"===W.method||"HEAD"===W.method||ae.startsWith("http://")||ae.startsWith("https://"))return se(W);const Fe=(0,V.WQX)(ri).getToken(),je=(0,V.WQX)(or);return null!=Fe&&!W.headers.has(je)&&(W=W.clone({headers:W.headers.set(je,Fe)})),se(W)}var te=function(W){return W[W.Interceptors=0]="Interceptors",W[W.LegacyInterceptors=1]="LegacyInterceptors",W[W.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",W[W.NoXsrfProtection=3]="NoXsrfProtection",W[W.JsonpSupport=4]="JsonpSupport",W[W.RequestsMadeViaParent=5]="RequestsMadeViaParent",W[W.Fetch=6]="Fetch",W}(te||{});function J(W,se){return{\u0275kind:W,\u0275providers:se}}function Ee(...W){const se=[Re,Kr,zn,{provide:Be,useExisting:zn},{provide:At,useExisting:Kr},{provide:ct,useValue:Y,multi:!0},{provide:jn,useValue:!0},{provide:ri,useClass:mt}];for(const ae of W)se.push(...ae.\u0275providers);return(0,V.EmA)(se)}const Ft=new V.nKC("");let Dr=(()=>{class W{static{this.\u0275fac=function(Fe){return new(Fe||W)}}static{this.\u0275mod=V.$C({type:W})}static{this.\u0275inj=V.G2t({providers:[Ee(J(te.LegacyInterceptors,[{provide:Ft,useFactory:ot},{provide:ct,useExisting:Ft,multi:!0}]))]})}}return W})()},4438:(on,rt,$)=>{$.d(rt,{iLQ:()=>_I,sZ2:()=>Lf,hnV:()=>pD,Hbi:()=>CP,o8S:()=>Qd,BIS:()=>Iv,gRc:()=>bD,Ql9:()=>JR,Ocv:()=>oP,Z63:()=>go,aKT:()=>_a,uvJ:()=>Ns,zcH:()=>uo,bkB:()=>Ko,$GK:()=>Xn,nKC:()=>je,zZn:()=>ai,_q3:()=>AI,MKu:()=>CI,xe9:()=>cv,Co$:()=>_0,Vns:()=>ef,SKi:()=>Ki,Xx1:()=>ps,Agw:()=>Th,PLl:()=>o_,sFG:()=>dE,_9s:()=>Ud,czy:()=>Il,kdw:()=>vr,C4Q:()=>$h,NYb:()=>zR,giA:()=>hD,xvI:()=>vR,RxE:()=>iD,c1b:()=>Jh,gXe:()=>Yi,mal:()=>Mi,L39:()=>tM,Ol2:()=>AE,w6W:()=>bA,oH4:()=>TD,Rfq:()=>Y,WQX:()=>Pn,naY:()=>dP,QuC:()=>Qr,EmA:()=>ta,fpN:()=>AP,HJs:()=>cM,N4e:()=>Os,O8t:()=>rM,H3F:()=>sD,H8p:()=>Ks,KH2:()=>Zp,TgB:()=>Op,wOt:()=>Pt,WHO:()=>lD,e01:()=>dD,H5H:()=>YE,Zy3:()=>Xt,mq5:()=>Ew,JZv:()=>En,LfX:()=>Ai,plB:()=>Xu,jNT:()=>gI,zjR:()=>fD,TL$:()=>Tg,Tbb:()=>Ie,Vt3:()=>wE,Mj6:()=>Gi,GFd:()=>m0,OA$:()=>et,Jv_:()=>MT,aNF:()=>NT,R7$:()=>J_,BMQ:()=>VE,AVh:()=>$E,wni:()=>aT,VBU:()=>ko,FsC:()=>$c,jDH:()=>Wn,G2t:()=>cs,$C:()=>tc,EJ8:()=>Ti,rXU:()=>Fh,nrm:()=>qE,k0s:()=>Jy,j41:()=>Yy,RV6:()=>_w,xGo:()=>ed,KVO:()=>$r,kS0:()=>zo,QTQ:()=>Zv,bIt:()=>eI,lsd:()=>cT,XpG:()=>Yw,nI1:()=>jT,i5U:()=>$T,Y8G:()=>BE,eq3:()=>OT,sMw:()=>kT,mGM:()=>uT,Njj:()=>Bl,tSv:()=>N_,eBV:()=>nh,n$t:()=>tp,DNE:()=>kp,EFF:()=>vT,JRh:()=>rI,SpI:()=>rv,Lme:()=>iI}),$(467);let oe=null,k=1;const Ue=Symbol("SIGNAL");function le(e){const n=oe;return oe=e,n}function Je(e){if((!Dt(e)||e.dirty)&&(e.dirty||e.lastCleanEpoch!==k)){if(!e.producerMustRecompute(e)&&!ln(e))return e.dirty=!1,void(e.lastCleanEpoch=k);e.producerRecomputeValue(e),e.dirty=!1,e.lastCleanEpoch=k}}function ln(e){ut(e);for(let n=0;n<e.producerNode.length;n++){const r=e.producerNode[n],s=e.producerLastReadVersion[n];if(s!==r.version||(Je(r),s!==r.version))return!0}return!1}function at(e,n){if(function Ut(e){e.liveConsumerNode??=[],e.liveConsumerIndexOfThis??=[]}(e),ut(e),1===e.liveConsumerNode.length)for(let s=0;s<e.producerNode.length;s++)at(e.producerNode[s],e.producerIndexOfThis[s]);const r=e.liveConsumerNode.length-1;if(e.liveConsumerNode[n]=e.liveConsumerNode[r],e.liveConsumerIndexOfThis[n]=e.liveConsumerIndexOfThis[r],e.liveConsumerNode.length--,e.liveConsumerIndexOfThis.length--,n<e.liveConsumerNode.length){const s=e.liveConsumerIndexOfThis[n],a=e.liveConsumerNode[n];ut(a),a.producerIndexOfThis[s]=n}}function Dt(e){return e.consumerIsAlwaysLive||(e?.liveConsumerNode?.length??0)>0}function ut(e){e.producerNode??=[],e.producerIndexOfThis??=[],e.producerLastReadVersion??=[]}let Bn=null;var $e=$(1413),gt=$(8359),ct=$(4412),dt=$(6354);const ot="https://g.co/ng/security#xss";class Pt extends Error{constructor(n,r){super(Xt(n,r)),this.code=n}}function Xt(e,n){return`NG0${Math.abs(e)}${n?": "+n:""}`}function an(e){return{toString:e}.toString()}const Yn="__parameters__";function Or(e,n,r){return an(()=>{const s=function gi(e){return function(...r){if(e){const s=e(...r);for(const a in s)this[a]=s[a]}}}(n);function a(...l){if(this instanceof a)return s.apply(this,l),this;const p=new a(...l);return v.annotation=p,v;function v(T,x,H){const Z=T.hasOwnProperty(Yn)?T[Yn]:Object.defineProperty(T,Yn,{value:[]})[Yn];for(;Z.length<=H;)Z.push(null);return(Z[H]=Z[H]||[]).push(p),T}}return r&&(a.prototype=Object.create(r.prototype)),a.prototype.ngMetadataName=e,a.annotationCls=a,a})}const En=globalThis;function In(e){for(let n in e)if(e[n]===In)return n;throw Error("Could not find renamed property on target object.")}function Jr(e,n){for(const r in n)n.hasOwnProperty(r)&&!e.hasOwnProperty(r)&&(e[r]=n[r])}function Ie(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(Ie).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const n=e.toString();if(null==n)return""+n;const r=n.indexOf("\n");return-1===r?n:n.substring(0,r)}function or(e,n){return null==e||""===e?null===n?"":n:null==n||""===n?e:e+" "+n}const mt=In({__forward_ref__:In});function Y(e){return e.__forward_ref__=Y,e.toString=function(){return Ie(this())},e}function G(e){return te(e)?e():e}function te(e){return"function"==typeof e&&e.hasOwnProperty(mt)&&e.__forward_ref__===Y}function Wn(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function cs(e){return{providers:e.providers||[],imports:e.imports||[]}}function Ii(e){return it(e,W)||it(e,ae)}function Ai(e){return null!==Ii(e)}function it(e,n){return e.hasOwnProperty(n)?e[n]:null}function _t(e){return e&&(e.hasOwnProperty(se)||e.hasOwnProperty(Fe))?e[se]:null}const W=In({\u0275prov:In}),se=In({\u0275inj:In}),ae=In({ngInjectableDef:In}),Fe=In({ngInjectorDef:In});class je{constructor(n,r){this._desc=n,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof r?this.__NG_ELEMENT_ID__=r:void 0!==r&&(this.\u0275prov=Wn({token:this,providedIn:r.providedIn||"root",factory:r.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function qn(e){return e&&!!e.\u0275providers}const rr=In({\u0275cmp:In}),Sn=In({\u0275dir:In}),Cn=In({\u0275pipe:In}),An=In({\u0275mod:In}),xn=In({\u0275fac:In}),Fr=In({__NG_ELEMENT_ID__:In}),pr=In({__NG_ENV_ID__:In});function dn(e){return"string"==typeof e?e:null==e?"":String(e)}function Bi(e,n){throw new Pt(-201,!1)}var Xn=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}(Xn||{});let qi;function Ys(){return qi}function mi(e){const n=qi;return qi=e,n}function ws(e,n,r){const s=Ii(e);return s&&"root"==s.providedIn?void 0===s.value?s.value=s.factory():s.value:r&Xn.Optional?null:void 0!==n?n:void Bi()}const wi={},bi="__NG_DI_FLAG__",ji="ngTempTokenPath",Jo=/\n/gm,hs="__source";let $i;function Pr(e){const n=$i;return $i=e,n}function fs(e,n=Xn.Default){if(void 0===$i)throw new Pt(-203,!1);return null===$i?ws(e,void 0,n):$i.get(e,n&Xn.Optional?null:void 0,n)}function $r(e,n=Xn.Default){return(Ys()||fs)(G(e),n)}function Pn(e,n=Xn.Default){return $r(e,Si(n))}function Si(e){return typeof e>"u"||"number"==typeof e?e:(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function Js(e){const n=[];for(let r=0;r<e.length;r++){const s=G(e[r]);if(Array.isArray(s)){if(0===s.length)throw new Pt(900,!1);let a,l=Xn.Default;for(let p=0;p<s.length;p++){const v=s[p],T=Zo(v);"number"==typeof T?-1===T?a=v.token:l|=T:a=v}n.push($r(a,l))}else n.push($r(s))}return n}function xi(e,n){return e[bi]=n,e.prototype[bi]=n,e}function Zo(e){return e[bi]}const ps=xi(Or("Optional"),8),vr=xi(Or("SkipSelf"),4);function ir(e,n){return e.hasOwnProperty(xn)?e[xn]:null}function _i(e,n){e.forEach(r=>Array.isArray(r)?_i(r,n):n(r))}function Gs(e,n,r){n>=e.length?e.push(r):e.splice(n,0,r)}function xo(e,n){return n>=e.length-1?e.pop():e.splice(n,1)[0]}function ei(e,n,r){let s=Oi(e,n);return s>=0?e[1|s]=r:(s=~s,function fo(e,n,r,s){let a=e.length;if(a==n)e.push(r,s);else if(1===a)e.push(s,e[0]),e[0]=r;else{for(a--,e.push(e[a-1],e[a]);a>n;)e[a]=e[a-2],a--;e[n]=r,e[n+1]=s}}(e,s,n,r)),s}function Ca(e,n){const r=Oi(e,n);if(r>=0)return e[1|r]}function Oi(e,n){return function eo(e,n,r){let s=0,a=e.length>>r;for(;a!==s;){const l=s+(a-s>>1),p=e[l<<r];if(n===p)return l<<r;p>n?a=l:s=l+1}return~(a<<r)}(e,n,1)}const Ri={},ur=[],go=new je(""),ba=new je("",-1),Sa=new je("");class ms{get(n,r=wi){if(r===wi){const s=new Error(`NullInjectorError: No provider for ${Ie(n)}!`);throw s.name="NullInjectorError",s}return r}}var Hi=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}(Hi||{}),Yi=function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}(Yi||{}),Gi=function(e){return e[e.None=0]="None",e[e.SignalBased=1]="SignalBased",e[e.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",e}(Gi||{});function Zu(e,n,r){let s=e.length;for(;;){const a=e.indexOf(n,r);if(-1===a)return a;if(0===a||e.charCodeAt(a-1)<=32){const l=n.length;if(a+l===s||e.charCodeAt(a+l)<=32)return a}r=a+1}}function mo(e,n,r){let s=0;for(;s<r.length;){const a=r[s];if("number"==typeof a){if(0!==a)break;s++;const l=r[s++],p=r[s++],v=r[s++];e.setAttribute(n,p,v,l)}else{const l=a,p=r[++s];to(l)?e.setProperty(n,l,p):e.setAttribute(n,l,p),s++}}return s}function si(e){return 3===e||4===e||6===e}function to(e){return 64===e.charCodeAt(0)}function Rs(e,n){if(null!==n&&0!==n.length)if(null===e||0===e.length)e=n.slice();else{let r=-1;for(let s=0;s<n.length;s++){const a=n[s];"number"==typeof a?r=a:0===r||_o(e,r,a,null,-1===r||2===r?n[++s]:null)}}return e}function _o(e,n,r,s,a){let l=0,p=e.length;if(-1===n)p=-1;else for(;l<e.length;){const v=e[l++];if("number"==typeof v){if(v===n){p=-1;break}if(v>n){p=l-1;break}}}for(;l<e.length;){const v=e[l];if("number"==typeof v)break;if(v===r){if(null===s)return void(null!==a&&(e[l+1]=a));if(s===e[l+1])return void(e[l+2]=a)}l++,null!==s&&l++,null!==a&&l++}-1!==p&&(e.splice(p,0,n),l=p+1),e.splice(l++,0,r),null!==s&&e.splice(l++,0,s),null!==a&&e.splice(l++,0,a)}const Oo="ng-template";function zs(e,n,r,s){let a=0;if(s){for(;a<n.length&&"string"==typeof n[a];a+=2)if("class"===n[a]&&-1!==Zu(n[a+1].toLowerCase(),r,0))return!0}else if(Pi(e))return!1;if(a=n.indexOf(1,a),a>-1){let l;for(;++a<n.length&&"string"==typeof(l=n[a]);)if(l.toLowerCase()===r)return!0}return!1}function Pi(e){return 4===e.type&&e.value!==Oo}function U(e,n,r){return n===(4!==e.type||r?e.value:Oo)}function j(e,n,r){let s=4;const a=e.attrs,l=null!==a?function Mn(e){for(let n=0;n<e.length;n++)if(si(e[n]))return n;return e.length}(a):0;let p=!1;for(let v=0;v<n.length;v++){const T=n[v];if("number"!=typeof T){if(!p)if(4&s){if(s=2|1&s,""!==T&&!U(e,T,r)||""===T&&1===n.length){if(R(s))return!1;p=!0}}else if(8&s){if(null===a||!zs(e,a,T,r)){if(R(s))return!1;p=!0}}else{const x=n[++v],H=X(T,a,Pi(e),r);if(-1===H){if(R(s))return!1;p=!0;continue}if(""!==x){let Z;if(Z=H>l?"":a[H+1].toLowerCase(),2&s&&x!==Z){if(R(s))return!1;p=!0}}}}else{if(!p&&!R(s)&&!R(T))return!1;if(p&&R(T))continue;p=!1,s=T|1&s}}return R(s)||p}function R(e){return!(1&e)}function X(e,n,r,s){if(null===n)return-1;let a=0;if(s||!r){let l=!1;for(;a<n.length;){const p=n[a];if(p===e)return a;if(3===p||6===p)l=!0;else{if(1===p||2===p){let v=n[++a];for(;"string"==typeof v;)v=n[++a];continue}if(4===p)break;if(0===p){a+=4;continue}}a+=l?1:2}return-1}return function Hn(e,n){let r=e.indexOf(4);if(r>-1)for(r++;r<e.length;){const s=e[r];if("number"==typeof s)return-1;if(s===n)return r;r++}return-1}(n,e)}function ve(e,n,r=!1){for(let s=0;s<n.length;s++)if(j(e,n[s],r))return!0;return!1}function Ji(e,n){return e?":not("+n.trim()+")":n}function Zi(e){let n=e[0],r=1,s=2,a="",l=!1;for(;r<e.length;){let p=e[r];if("string"==typeof p)if(2&s){const v=e[++r];a+="["+p+(v.length>0?'="'+v+'"':"")+"]"}else 8&s?a+="."+p:4&s&&(a+=" "+p);else""!==a&&!R(p)&&(n+=Ji(l,a),a=""),s=p,l=l||!R(s);r++}return""!==a&&(n+=Ji(l,a)),n}function ko(e){return an(()=>{const n=no(e),r={...n,decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===Hi.OnPush,directiveDefs:null,pipeDefs:null,dependencies:n.standalone&&e.dependencies||null,getStandaloneInjector:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||Yi.Emulated,styles:e.styles||ur,_:null,schemas:e.schemas||null,tView:null,id:""};yo(r);const s=e.dependencies;return r.directiveDefs=ea(s,!1),r.pipeDefs=ea(s,!0),r.id=function nc(e){let n=0;const r=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,e.consts,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery].join("|");for(const a of r)n=Math.imul(31,n)+a.charCodeAt(0)|0;return n+=2147483648,"c"+n}(r),r})}function ec(e){return Ln(e)||Hr(e)}function eu(e){return null!==e}function tc(e){return an(()=>({type:e.type,bootstrap:e.bootstrap||ur,declarations:e.declarations||ur,imports:e.imports||ur,exports:e.exports||ur,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function Ms(e,n){if(null==e)return Ri;const r={};for(const s in e)if(e.hasOwnProperty(s)){const a=e[s];let l,p,v=Gi.None;Array.isArray(a)?(v=a[0],l=a[1],p=a[2]??l):(l=a,p=a),n?(r[l]=v!==Gi.None?[s,v]:s,n[l]=p):r[l]=s}return r}function $c(e){return an(()=>{const n=no(e);return yo(n),n})}function Ti(e){return{type:e.type,name:e.name,factory:null,pure:!1!==e.pure,standalone:!0===e.standalone,onDestroy:e.type.prototype.ngOnDestroy||null}}function Ln(e){return e[rr]||null}function Hr(e){return e[Sn]||null}function ti(e){return e[Cn]||null}function Qr(e){const n=Ln(e)||Hr(e)||ti(e);return null!==n&&n.standalone}function fi(e,n){const r=e[An]||null;if(!r&&!0===n)throw new Error(`Type ${Ie(e)} does not have '\u0275mod' property.`);return r}function no(e){const n={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:n,inputTransforms:null,inputConfig:e.inputs||Ri,exportAs:e.exportAs||null,standalone:!0===e.standalone,signals:!0===e.signals,selectors:e.selectors||ur,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Ms(e.inputs,n),outputs:Ms(e.outputs),debugInfo:null}}function yo(e){e.features?.forEach(n=>n(e))}function ea(e,n){if(!e)return null;const r=n?ti:ec;return()=>("function"==typeof e?e():e).map(s=>r(s)).filter(eu)}function ta(e){return{\u0275providers:e}}function vo(...e){return{\u0275providers:na(0,e),\u0275fromNgModule:!0}}function na(e,...n){const r=[],s=new Set;let a;const l=p=>{r.push(p)};return _i(n,p=>{const v=p;ra(v,l,[],s)&&(a||=[],a.push(v))}),void 0!==a&&Vo(a,l),r}function Vo(e,n){for(let r=0;r<e.length;r++){const{ngModule:s,providers:a}=e[r];ic(a,l=>{n(l,s)})}}function ra(e,n,r,s){if(!(e=G(e)))return!1;let a=null,l=_t(e);const p=!l&&Ln(e);if(l||p){if(p&&!p.standalone)return!1;a=e}else{const T=e.ngModule;if(l=_t(T),!l)return!1;a=T}const v=s.has(a);if(p){if(v)return!1;if(s.add(a),p.dependencies){const T="function"==typeof p.dependencies?p.dependencies():p.dependencies;for(const x of T)ra(x,n,r,s)}}else{if(!l)return!1;{if(null!=l.imports&&!v){let x;s.add(a);try{_i(l.imports,H=>{ra(H,n,r,s)&&(x||=[],x.push(H))})}finally{}void 0!==x&&Vo(x,n)}if(!v){const x=ir(a)||(()=>new a);n({provide:a,useFactory:x,deps:ur},a),n({provide:Sa,useValue:a,multi:!0},a),n({provide:go,useValue:()=>$r(a),multi:!0},a)}const T=l.providers;if(null!=T&&!v){const x=e;ic(T,H=>{n(H,x)})}}}return a!==e&&void 0!==e.providers}function ic(e,n){for(let r of e)qn(r)&&(r=r.\u0275providers),Array.isArray(r)?ic(r,n):n(r)}const Iu=In({provide:String,useValue:In});function Fo(e){return null!==e&&"object"==typeof e&&Iu in e}function ts(e){return"function"==typeof e}const Ks=new je(""),tu={},nu={};let ia;function sa(){return void 0===ia&&(ia=new ms),ia}class Ns{}class Er extends Ns{get destroyed(){return this._destroyed}constructor(n,r,s,a){super(),this.parent=r,this.source=s,this.scopes=a,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,xs(n,p=>this.processProvider(p)),this.records.set(ba,ro(void 0,this)),a.has("environment")&&this.records.set(Ns,ro(void 0,this));const l=this.records.get(Ks);null!=l&&"string"==typeof l.value&&this.scopes.add(l.value),this.injectorDefTypes=new Set(this.get(Sa,ur,Xn.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;const n=le(null);try{for(const s of this._ngOnDestroyHooks)s.ngOnDestroy();const r=this._onDestroyHooks;this._onDestroyHooks=[];for(const s of r)s()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),le(n)}}onDestroy(n){return this.assertNotDestroyed(),this._onDestroyHooks.push(n),()=>this.removeOnDestroy(n)}runInContext(n){this.assertNotDestroyed();const r=Pr(this),s=mi(void 0);try{return n()}finally{Pr(r),mi(s)}}get(n,r=wi,s=Xn.Default){if(this.assertNotDestroyed(),n.hasOwnProperty(pr))return n[pr](this);s=Si(s);const l=Pr(this),p=mi(void 0);try{if(!(s&Xn.SkipSelf)){let T=this.records.get(n);if(void 0===T){const x=function Pa(e){return"function"==typeof e||"object"==typeof e&&e instanceof je}(n)&&Ii(n);T=x&&this.injectableDefInScope(x)?ro(ru(n),tu):null,this.records.set(n,T)}if(null!=T)return this.hydrate(n,T)}return(s&Xn.Self?sa():this.parent).get(n,r=s&Xn.Optional&&r===wi?null:r)}catch(v){if("NullInjectorError"===v.name){if((v[ji]=v[ji]||[]).unshift(Ie(n)),l)throw v;return function Cs(e,n,r,s){const a=e[ji];throw n[hs]&&a.unshift(n[hs]),e.message=function Zs(e,n,r,s=null){e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.slice(2):e;let a=Ie(n);if(Array.isArray(n))a=n.map(Ie).join(" -> ");else if("object"==typeof n){let l=[];for(let p in n)if(n.hasOwnProperty(p)){let v=n[p];l.push(p+":"+("string"==typeof v?JSON.stringify(v):Ie(v)))}a=`{${l.join(", ")}}`}return`${r}${s?"("+s+")":""}[${a}]: ${e.replace(Jo,"\n  ")}`}("\n"+e.message,a,r,s),e.ngTokenPath=a,e[ji]=null,e}(v,n,"R3InjectorError",this.source)}throw v}finally{mi(p),Pr(l)}}resolveInjectorInitializers(){const n=le(null),r=Pr(this),s=mi(void 0);try{const l=this.get(go,ur,Xn.Self);for(const p of l)p()}finally{Pr(r),mi(s),le(n)}}toString(){const n=[],r=this.records;for(const s of r.keys())n.push(Ie(s));return`R3Injector[${n.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Pt(205,!1)}processProvider(n){let r=ts(n=G(n))?n:G(n&&n.provide);const s=function Hc(e){return Fo(e)?ro(void 0,e.useValue):ro(wu(e),tu)}(n);if(!ts(n)&&!0===n.multi){let a=this.records.get(r);a||(a=ro(void 0,tu,!0),a.factory=()=>Js(a.multi),this.records.set(r,a)),r=n,a.multi.push(n)}this.records.set(r,s)}hydrate(n,r){const s=le(null);try{return r.value===tu&&(r.value=nu,r.value=r.factory()),"object"==typeof r.value&&r.value&&function Gc(e){return null!==e&&"object"==typeof e&&"function"==typeof e.ngOnDestroy}(r.value)&&this._ngOnDestroyHooks.add(r.value),r.value}finally{le(s)}}injectableDefInScope(n){if(!n.providedIn)return!1;const r=G(n.providedIn);return"string"==typeof r?"any"===r||this.scopes.has(r):this.injectorDefTypes.has(r)}removeOnDestroy(n){const r=this._onDestroyHooks.indexOf(n);-1!==r&&this._onDestroyHooks.splice(r,1)}}function ru(e){const n=Ii(e),r=null!==n?n.factory:ir(e);if(null!==r)return r;if(e instanceof je)throw new Pt(204,!1);if(e instanceof Function)return function Ra(e){if(e.length>0)throw new Pt(204,!1);const r=function ke(e){return e&&(e[W]||e[ae])||null}(e);return null!==r?()=>r.factory(e):()=>new e}(e);throw new Pt(204,!1)}function wu(e,n,r){let s;if(ts(e)){const a=G(e);return ir(a)||ru(a)}if(Fo(e))s=()=>G(e.useValue);else if(function Uo(e){return!(!e||!e.useFactory)}(e))s=()=>e.useFactory(...Js(e.deps||[]));else if(function Lo(e){return!(!e||!e.useExisting)}(e))s=()=>$r(G(e.useExisting));else{const a=G(e&&(e.useClass||e.provide));if(!function Tu(e){return!!e.deps}(e))return ir(a)||ru(a);s=()=>new a(...Js(e.deps))}return s}function ro(e,n,r=!1){return{factory:e,value:n,multi:r?[]:void 0}}function xs(e,n){for(const r of e)Array.isArray(r)?xs(r,n):r&&qn(r)?xs(r.\u0275providers,n):n(r)}function Os(e,n){e instanceof Er&&e.assertNotDestroyed();const s=Pr(e),a=mi(void 0);try{return n()}finally{Pr(s),mi(a)}}function Du(){return void 0!==Ys()||null!=function Ds(){return $i}()}const wr=0,Lt=1,pn=2,dr=3,Tr=4,Cr=5,yi=6,so=7,zr=8,Nr=9,qs=10,On=11,Eo=12,oc=13,iu=14,Wr=15,Ma=16,Io=17,wo=18,su=19,Xr=20,oa=21,_s=22,zi=23,kn=25,ns=1,kr=7,To=9,oi=10;var ou=function(e){return e[e.None=0]="None",e[e.HasTransplantedViews=2]="HasTransplantedViews",e}(ou||{});function Qi(e){return Array.isArray(e)&&"object"==typeof e[ns]}function rs(e){return Array.isArray(e)&&!0===e[ns]}function Bo(e){return!!(4&e.flags)}function jo(e){return e.componentOffset>-1}function au(e){return!(1&~e.flags)}function Qs(e){return!!e.template}function $o(e){return!!(512&e[pn])}class q{constructor(n,r,s){this.previousValue=n,this.currentValue=r,this.firstChange=s}isFirstChange(){return this.firstChange}}function de(e,n,r,s){null!==n?n.applyValueToInputSignal(n,s):e[r]=s}function et(){return ze}function ze(e){return e.type.prototype.ngOnChanges&&(e.setInput=Un),tn}function tn(){const e=vi(this),n=e?.current;if(n){const r=e.previous;if(r===Ri)e.previous=n;else for(let s in n)r[s]=n[s];e.current=null,this.ngOnChanges(n)}}function Un(e,n,r,s,a){const l=this.declaredInputs[s],p=vi(e)||function ks(e,n){return e[Fn]=n}(e,{previous:Ri,current:null}),v=p.current||(p.current={}),T=p.previous,x=T[l];v[l]=new q(x&&x.currentValue,r,T===Ri),de(e,n,a,r)}et.ngInherit=!0;const Fn="__ngSimpleChanges__";function vi(e){return e[Fn]||null}const Xs=function(e,n,r){};let uu=!1;function br(e){for(;Array.isArray(e);)e=e[wr];return e}function cu(e,n){return br(n[e])}function Vs(e,n){return br(n[e.index])}function Pu(e,n){return e.data[n]}function ys(e,n){const r=n[e];return Qi(r)?r:r[wr]}function kl(e){return!(128&~e[pn])}function ha(e,n){return null==n?null:e[n]}function cc(e){e[Io]=0}function Vl(e){1024&e[pn]||(e[pn]|=1024,kl(e)&&oo(e))}function lc(e){return!!(9216&e[pn]||e[zi]?.dirty)}function lu(e){e[qs].changeDetectionScheduler?.notify(1),lc(e)?oo(e):64&e[pn]&&(function Ru(){return uu}()?(e[pn]|=1024,oo(e)):e[qs].changeDetectionScheduler?.notify())}function oo(e){e[qs].changeDetectionScheduler?.notify();let n=fa(e);for(;null!==n&&!(8192&n[pn])&&(n[pn]|=8192,kl(n));)n=fa(n)}function La(e,n){if(!(256&~e[pn]))throw new Pt(911,!1);null===e[oa]&&(e[oa]=[]),e[oa].push(n)}function fa(e){const n=e[dr];return rs(n)?n[dr]:n}const _n={lFrame:Yc(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Mu(){return _n.bindingsEnabled}function yt(){return _n.lFrame.lView}function lr(){return _n.lFrame.tView}function nh(e){return _n.lFrame.contextLView=e,e[zr]}function Bl(e){return _n.lFrame.contextLView=null,e}function Sr(){let e=jl();for(;null!==e&&64===e.type;)e=e.parent;return e}function jl(){return _n.lFrame.currentTNode}function ao(e,n){const r=_n.lFrame;r.currentTNode=e,r.isParent=n}function rh(){return _n.lFrame.isParent}function ki(){const e=_n.lFrame;let n=e.bindingRootIndex;return-1===n&&(n=e.bindingRootIndex=e.tView.bindingStartIndex),n}function Ho(){return _n.lFrame.bindingIndex++}function pa(e){const n=_n.lFrame,r=n.bindingIndex;return n.bindingIndex=n.bindingIndex+e,r}function ug(e,n){const r=_n.lFrame;r.bindingIndex=r.bindingRootIndex=e,Vi(n)}function Vi(e){_n.lFrame.currentDirectiveIndex=e}function oh(){return _n.lFrame.currentQueryIndex}function Hl(e){_n.lFrame.currentQueryIndex=e}function cg(e){const n=e[Lt];return 2===n.type?n.declTNode:1===n.type?e[Cr]:null}function Gl(e,n,r){if(r&Xn.SkipSelf){let a=n,l=e;for(;!(a=a.parent,null!==a||r&Xn.Host||(a=cg(l),null===a||(l=l[iu],10&a.type))););if(null===a)return!1;n=a,e=l}const s=_n.lFrame=Xc();return s.currentTNode=n,s.lView=e,!0}function ah(e){const n=Xc(),r=e[Lt];_n.lFrame=n,n.currentTNode=r.firstChild,n.lView=e,n.tView=r,n.contextLView=e,n.bindingIndex=r.bindingStartIndex,n.inI18n=!1}function Xc(){const e=_n.lFrame,n=null===e?null:e.child;return null===n?Yc(e):n}function Yc(e){const n={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=n),n}function ff(){const e=_n.lFrame;return _n.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const Jc=ff;function Zc(){const e=ff();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function Fi(){return _n.lFrame.selectedIndex}function ga(e){_n.lFrame.selectedIndex=e}function Yr(){const e=_n.lFrame;return Pu(e.tView,e.selectedIndex)}let lh=!0;function $a(){return lh}function Co(e){lh=e}function pc(e,n){for(let r=n.directiveStart,s=n.directiveEnd;r<s;r++){const l=e.data[r].type.prototype,{ngAfterContentInit:p,ngAfterContentChecked:v,ngAfterViewInit:T,ngAfterViewChecked:x,ngOnDestroy:H}=l;p&&(e.contentHooks??=[]).push(-r,p),v&&((e.contentHooks??=[]).push(r,v),(e.contentCheckHooks??=[]).push(r,v)),T&&(e.viewHooks??=[]).push(-r,T),x&&((e.viewHooks??=[]).push(r,x),(e.viewCheckHooks??=[]).push(r,x)),null!=H&&(e.destroyHooks??=[]).push(r,H)}}function el(e,n,r){Ga(e,n,3,r)}function tl(e,n,r,s){(3&e[pn])===r&&Ga(e,n,r,s)}function Ha(e,n){let r=e[pn];(3&r)===n&&(r&=16383,r+=1,e[pn]=r)}function Ga(e,n,r,s){const l=s??-1,p=n.length-1;let v=0;for(let T=void 0!==s?65535&e[Io]:0;T<p;T++)if("number"==typeof n[T+1]){if(v=n[T],null!=s&&v>=s)break}else n[T]<0&&(e[Io]+=65536),(v<l||-1==l)&&(dh(e,r,n,T),e[Io]=(4294901760&e[Io])+T+2),T++}function Wl(e,n){Xs(4,e,n);const r=le(null);try{n.call(e)}finally{le(r),Xs(5,e,n)}}function dh(e,n,r,s){const a=r[s]<0,l=r[s+1],v=e[a?-r[s]:r[s]];a?e[pn]>>14<e[Io]>>16&&(3&e[pn])===n&&(e[pn]+=16384,Wl(v,l)):Wl(v,l)}const za=-1;class xu{constructor(n,r,s){this.factory=n,this.resolving=!1,this.canSeeViewProviders=r,this.injectImpl=s}}function rl(e){return e!==za}function Wa(e){return 32767&e}function Ou(e,n){let r=function il(e){return e>>16}(e),s=n;for(;r>0;)s=s[iu],r--;return s}let sl=!0;function bo(e){const n=sl;return sl=e,n}const fh=255,Ql=5;let _f=0;const Fs={};function Xl(e,n){const r=is(e,n);if(-1!==r)return r;const s=n[Lt];s.firstCreatePass&&(e.injectorIndex=n.length,ol(s.data,e),ol(n,null),ol(s.blueprint,null));const a=Yl(e,n),l=e.injectorIndex;if(rl(a)){const p=Wa(a),v=Ou(a,n),T=v[Lt].data;for(let x=0;x<8;x++)n[l+x]=v[p+x]|T[p+x]}return n[l+8]=a,l}function ol(e,n){e.push(0,0,0,0,0,0,0,0,n)}function is(e,n){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===n[e.injectorIndex+8]?-1:e.injectorIndex}function Yl(e,n){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let r=0,s=null,a=n;for(;null!==a;){if(s=rd(a),null===s)return za;if(r++,a=a[iu],-1!==s.injectorIndex)return s.injectorIndex|r<<16}return za}function gc(e,n,r){!function ph(e,n,r){let s;"string"==typeof r?s=r.charCodeAt(0)||0:r.hasOwnProperty(Fr)&&(s=r[Fr]),null==s&&(s=r[Fr]=_f++);const a=s&fh;n.data[e+(a>>Ql)]|=1<<a}(e,n,r)}function mc(e,n,r){if(r&Xn.Optional||void 0!==e)return e;Bi()}function Zl(e,n,r,s){if(r&Xn.Optional&&void 0===s&&(s=null),!(r&(Xn.Self|Xn.Host))){const a=e[Nr],l=mi(void 0);try{return a?a.get(n,s,r&Xn.Optional):ws(n,s,r&Xn.Optional)}finally{mi(l)}}return mc(s,0,r)}function gh(e,n,r,s=Xn.Default,a){if(null!==e){if(2048&n[pn]&&!(s&Xn.Self)){const p=function nd(e,n,r,s,a){let l=e,p=n;for(;null!==l&&null!==p&&2048&p[pn]&&!(512&p[pn]);){const v=yf(l,p,r,s|Xn.Self,Fs);if(v!==Fs)return v;let T=l.parent;if(!T){const x=p[Xr];if(x){const H=x.get(r,Fs,s);if(H!==Fs)return H}T=rd(p),p=p[iu]}l=T}return a}(e,n,r,s,Fs);if(p!==Fs)return p}const l=yf(e,n,r,s,Fs);if(l!==Fs)return l}return Zl(n,r,s,a)}function yf(e,n,r,s,a){const l=function gg(e){if("string"==typeof e)return e.charCodeAt(0)||0;const n=e.hasOwnProperty(Fr)?e[Fr]:void 0;return"number"==typeof n?n>=0?n&fh:vc:n}(r);if("function"==typeof l){if(!Gl(n,e,s))return s&Xn.Host?mc(a,0,s):Zl(n,r,s,a);try{let p;if(p=l(s),null!=p||s&Xn.Optional)return p;Bi()}finally{Jc()}}else if("number"==typeof l){let p=null,v=is(e,n),T=za,x=s&Xn.Host?n[Wr][Cr]:null;for((-1===v||s&Xn.SkipSelf)&&(T=-1===v?Yl(e,n):n[v+8],T!==za&&yc(s,!1)?(p=n[Lt],v=Wa(T),n=Ou(T,n)):v=-1);-1!==v;){const H=n[Lt];if(fu(l,v,H.data)){const Z=vf(v,n,r,p,s,x);if(Z!==Fs)return Z}T=n[v+8],T!==za&&yc(s,n[Lt].data[v+8]===x)&&fu(l,v,n)?(p=H,v=Wa(T),n=Ou(T,n)):v=-1}}return a}function vf(e,n,r,s,a,l){const p=n[Lt],v=p.data[e+8],H=_c(v,p,r,null==s?jo(v)&&sl:s!=p&&!!(3&v.type),a&Xn.Host&&l===v);return null!==H?ku(n,p,H,v):Fs}function _c(e,n,r,s,a){const l=e.providerIndexes,p=n.data,v=1048575&l,T=e.directiveStart,H=l>>20,Te=a?v+H:e.directiveEnd;for(let Se=s?v:v+H;Se<Te;Se++){const Ke=p[Se];if(Se<T&&r===Ke||Se>=T&&Ke.type===r)return Se}if(a){const Se=p[T];if(Se&&Qs(Se)&&Se.type===r)return T}return null}function ku(e,n,r,s){let a=e[r];const l=n.data;if(function nl(e){return e instanceof xu}(a)){const p=a;p.resolving&&function Ta(e,n){throw n&&n.join(" > "),new Pt(-200,e)}(function Qn(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():dn(e)}(l[r]));const v=bo(p.canSeeViewProviders);p.resolving=!0;const x=p.injectImpl?mi(p.injectImpl):null;Gl(e,s,Xn.Default);try{a=e[r]=p.factory(void 0,l,e,s),n.firstCreatePass&&r>=s.directiveStart&&function gf(e,n,r){const{ngOnChanges:s,ngOnInit:a,ngDoCheck:l}=n.type.prototype;if(s){const p=ze(n);(r.preOrderHooks??=[]).push(e,p),(r.preOrderCheckHooks??=[]).push(e,p)}a&&(r.preOrderHooks??=[]).push(0-e,a),l&&((r.preOrderHooks??=[]).push(e,l),(r.preOrderCheckHooks??=[]).push(e,l))}(r,l[r],n)}finally{null!==x&&mi(x),bo(v),p.resolving=!1,Jc()}}return a}function fu(e,n,r){return!!(r[n+(e>>Ql)]&1<<e)}function yc(e,n){return!(e&Xn.Self||e&Xn.Host&&n)}class li{constructor(n,r){this._tNode=n,this._lView=r}get(n,r,s){return gh(this._tNode,this._lView,n,Si(s),r)}}function vc(){return new li(Sr(),yt())}function ed(e){return an(()=>{const n=e.prototype.constructor,r=n[xn]||td(n),s=Object.prototype;let a=Object.getPrototypeOf(e.prototype).constructor;for(;a&&a!==s;){const l=a[xn]||td(a);if(l&&l!==r)return l;a=Object.getPrototypeOf(a)}return l=>new l})}function td(e){return te(e)?()=>{const n=td(G(e));return n&&n()}:ir(e)}function rd(e){const n=e[Lt],r=n.type;return 2===r?n.declTNode:1===r?e[Cr]:null}function zo(e){return function Jl(e,n){if("class"===n)return e.classes;if("style"===n)return e.styles;const r=e.attrs;if(r){const s=r.length;let a=0;for(;a<s;){const l=r[a];if(si(l))break;if(0===l)a+=2;else if("number"==typeof l)for(a++;a<s&&"string"==typeof r[a];)a++;else{if(l===n)return r[a+1];a+=2}}}return null}(Sr(),e)}function ad(e,n=null,r=null,s){const a=Tf(e,n,r,s);return a.resolveInjectorInitializers(),a}function Tf(e,n=null,r=null,s,a=new Set){const l=[r||ur,vo(e)];return s=s||("object"==typeof e?void 0:Ie(e)),new Er(l,n||sa(),s||null,a)}let ai=(()=>{class e{static{this.THROW_IF_NOT_FOUND=wi}static{this.NULL=new ms}static create(r,s){if(Array.isArray(r))return ad({name:""},s,r,"");{const a=r.name??"";return ad({name:a},r.parent,r.providers,a)}}static{this.\u0275prov=Wn({token:e,providedIn:"any",factory:()=>$r(ba)})}static{this.__NG_ELEMENT_ID__=-1}}return e})();function ll(e){return e.ngOriginalError}class uo{constructor(){this._console=console}handleError(n){const r=this._findOriginalError(n);this._console.error("ERROR",n),r&&this._console.error("ORIGINAL ERROR",r)}_findOriginalError(n){let r=n&&ll(n);for(;r&&ll(r);)r=ll(r);return r||null}}const Af=new je("",{providedIn:"root",factory:()=>Pn(uo).handleError.bind(void 0)});let qa=(()=>{class e{static{this.__NG_ELEMENT_ID__=ma}static{this.__NG_ENV_ID__=r=>r}}return e})();class yg extends qa{constructor(n){super(),this._lView=n}onDestroy(n){return La(this._lView,n),()=>function Ll(e,n){if(null===e[oa])return;const r=e[oa].indexOf(n);-1!==r&&e[oa].splice(r,1)}(this._lView,n)}}function ma(){return new yg(yt())}function dl(){return co(Sr(),yt())}function co(e,n){return new _a(Vs(e,n))}let _a=(()=>{class e{constructor(r){this.nativeElement=r}static{this.__NG_ELEMENT_ID__=dl}}return e})();function Wo(e){return e instanceof _a?e.nativeElement:e}function cd(e){return n=>{setTimeout(e,void 0,n)}}const Ko=class ya extends $e.B{constructor(n=!1){super(),this.destroyRef=void 0,this.__isAsync=n,Du()&&(this.destroyRef=Pn(qa,{optional:!0})??void 0)}emit(n){const r=le(null);try{super.next(n)}finally{le(r)}}subscribe(n,r,s){let a=n,l=r||(()=>null),p=s;if(n&&"object"==typeof n){const T=n;a=T.next?.bind(T),l=T.error?.bind(T),p=T.complete?.bind(T)}this.__isAsync&&(l=cd(l),a&&(a=cd(a)),p&&(p=cd(p)));const v=super.subscribe({next:a,error:l,complete:p});return n instanceof gt.yU&&n.add(v),v}};function Rf(){return this._results[Symbol.iterator]()}class Fu{get changes(){return this._changes??=new Ko}constructor(n=!1){this._emitDistinctChangesOnly=n,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;const r=Fu.prototype;r[Symbol.iterator]||(r[Symbol.iterator]=Rf)}get(n){return this._results[n]}map(n){return this._results.map(n)}filter(n){return this._results.filter(n)}find(n){return this._results.find(n)}reduce(n,r){return this._results.reduce(n,r)}forEach(n){this._results.forEach(n)}some(n){return this._results.some(n)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(n,r){this.dirty=!1;const s=function hi(e){return e.flat(Number.POSITIVE_INFINITY)}(n);(this._changesDetected=!function gs(e,n,r){if(e.length!==n.length)return!1;for(let s=0;s<e.length;s++){let a=e[s],l=n[s];if(r&&(a=r(a),l=r(l)),l!==a)return!1}return!0}(this._results,s,r))&&(this._results=s,this.length=s.length,this.last=s[this.length-1],this.first=s[0])}notifyOnChanges(){void 0!==this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(n){this._onDirty=n}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){void 0!==this._changes&&(this._changes.complete(),this._changes.unsubscribe())}}function y(e){return!(128&~e.flags)}const h=new Map;let I=0;const di="__ngContext__";function ui(e,n){Qi(n)?(e[di]=n[su],function K(e){h.set(e[su],e)}(n)):e[di]=n}function e_(e){return vg(e[Eo])}function xf(e){return vg(e[Tr])}function vg(e){for(;null!==e&&!rs(e);)e=e[Tr];return e}let Qa;function Tg(e){Qa=e}const Lf=new je("",{providedIn:"root",factory:()=>Ev}),Ev="ng",o_=new je(""),Th=new je("",{providedIn:"platform",factory:()=>"unknown"}),Iv=new je("",{providedIn:"root",factory:()=>function Dc(){if(void 0!==Qa)return Qa;if(typeof document<"u")return document;throw new Pt(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let l_=()=>null;function Rg(e,n,r=!1){return l_(e,n,r)}const p_=new je("",{providedIn:"root",factory:()=>!1});let qf;function Vg(e){return function Qf(){if(void 0===qf&&(qf=null,En.trustedTypes))try{qf=En.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch{}return qf}()?.createScriptURL(e)||e}class Fg{constructor(n){this.changingThisBreaksApplicationSecurity=n}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${ot})`}}function va(e){return e instanceof Fg?e.changingThisBreaksApplicationSecurity:e}function Td(e,n){const r=function Ls(e){return e instanceof Fg&&e.getTypeName()||null}(e);if(null!=r&&r!==n){if("ResourceURL"===r&&"URL"===n)return!0;throw new Error(`Required a safe ${n}, got a ${r} (see ${ot})`)}return r===n}const Mv=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var _l=function(e){return e[e.NONE=0]="NONE",e[e.HTML=1]="HTML",e[e.STYLE=2]="STYLE",e[e.SCRIPT=3]="SCRIPT",e[e.URL=4]="URL",e[e.RESOURCE_URL=5]="RESOURCE_URL",e}(_l||{});function Rc(e){const n=yl();return n?n.sanitize(_l.URL,e)||"":Td(e,"URL")?va(e):function Bg(e){return(e=String(e)).match(Mv)?e:"unsafe:"+e}(dn(e))}function Sh(e){const n=yl();if(n)return Vg(n.sanitize(_l.RESOURCE_URL,e)||"");if(Td(e,"ResourceURL"))return Vg(va(e));throw new Pt(904,!1)}function tp(e,n,r){return function zg(e,n){return"src"===n&&("embed"===e||"frame"===e||"iframe"===e||"media"===e||"script"===e)||"href"===n&&("base"===e||"link"===e)?Sh:Rc}(n,r)(e)}function yl(){const e=yt();return e&&e[qs].sanitizer}function N_(e){return e.ownerDocument.defaultView}function qo(e){return e instanceof Function?e():e}var Il=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}(Il||{});let Zg;function V_(e,n){return Zg(e,n)}function Cd(e,n,r,s,a){if(null!=s){let l,p=!1;rs(s)?l=s:Qi(s)&&(p=!0,s=s[wr]);const v=br(s);0===e&&null!==r?null==a?j_(n,r,v):Tl(n,r,v,a||null,!0):1===e&&null!==r?Tl(n,r,v,a||null,!0):2===e?function Vh(e,n,r){const s=nm(e,n);s&&function bd(e,n,r,s){e.removeChild(n,r,s)}(e,s,n,r)}(n,v,p):3===e&&n.destroyNode(v),null!=l&&function Qv(e,n,r,s,a){const l=r[kr];l!==br(r)&&Cd(n,e,s,l,a);for(let v=oi;v<r.length;v++){const T=r[v];cp(T[Lt],T,e,n,s,l)}}(n,e,l,r,a)}}function _u(e,n,r){return e.createElement(n,r)}function L_(e,n){n[qs].changeDetectionScheduler?.notify(1),cp(e,n,n[On],2,null,null)}function U_(e,n){const r=e[To],s=r.indexOf(n);r.splice(s,1)}function kh(e,n){if(e.length<=oi)return;const r=oi+n,s=e[r];if(s){const a=s[Ma];null!==a&&a!==e&&U_(a,s),n>0&&(e[r-1][Tr]=s[Tr]);const l=xo(e,oi+n);!function Oh(e,n){L_(e,n),n[wr]=null,n[Cr]=null}(s[Lt],s);const p=l[wo];null!==p&&p.detachView(l[Lt]),s[dr]=null,s[Tr]=null,s[pn]&=-129}return s}function ap(e,n){if(!(256&n[pn])){const r=n[On];r.destroyNode&&cp(e,n,r,3,null,null),function $v(e){let n=e[Eo];if(!n)return em(e[Lt],e);for(;n;){let r=null;if(Qi(n))r=n[Eo];else{const s=n[oi];s&&(r=s)}if(!r){for(;n&&!n[Tr]&&n!==e;)Qi(n)&&em(n[Lt],n),n=n[dr];null===n&&(n=e),Qi(n)&&em(n[Lt],n),r=n&&n[Tr]}n=r}}(n)}}function em(e,n){if(256&n[pn])return;const r=le(null);try{n[pn]&=-129,n[pn]|=256,n[zi]&&function vt(e){if(ut(e),Dt(e))for(let n=0;n<e.producerNode.length;n++)at(e.producerNode[n],e.producerIndexOfThis[n]);e.producerNode.length=e.producerLastReadVersion.length=e.producerIndexOfThis.length=0,e.liveConsumerNode&&(e.liveConsumerNode.length=e.liveConsumerIndexOfThis.length=0)}(n[zi]),function zv(e,n){let r;if(null!=e&&null!=(r=e.destroyHooks))for(let s=0;s<r.length;s+=2){const a=n[r[s]];if(!(a instanceof xu)){const l=r[s+1];if(Array.isArray(l))for(let p=0;p<l.length;p+=2){const v=a[l[p]],T=l[p+1];Xs(4,v,T);try{T.call(v)}finally{Xs(5,v,T)}}else{Xs(4,a,l);try{l.call(a)}finally{Xs(5,a,l)}}}}}(e,n),function Gv(e,n){const r=e.cleanup,s=n[so];if(null!==r)for(let l=0;l<r.length-1;l+=2)if("string"==typeof r[l]){const p=r[l+3];p>=0?s[p]():s[-p].unsubscribe(),l+=2}else r[l].call(s[r[l+1]]);null!==s&&(n[so]=null);const a=n[oa];if(null!==a){n[oa]=null;for(let l=0;l<a.length;l++)(0,a[l])()}}(e,n),1===n[Lt].type&&n[On].destroy();const s=n[Ma];if(null!==s&&rs(n[dr])){s!==n[dr]&&U_(s,n);const a=n[wo];null!==a&&a.detachView(e)}!function Le(e){h.delete(e[su])}(n)}finally{le(r)}}function tm(e,n,r){return function B_(e,n,r){let s=n;for(;null!==s&&40&s.type;)s=(n=s).parent;if(null===s)return r[wr];{const{componentOffset:a}=s;if(a>-1){const{encapsulation:l}=e.data[s.directiveStart+a];if(l===Yi.None||l===Yi.Emulated)return null}return Vs(s,r)}}(e,n.parent,r)}function Tl(e,n,r,s,a){e.insertBefore(n,r,s,a)}function j_(e,n,r){e.appendChild(n,r)}function $_(e,n,r,s,a){null!==s?Tl(e,n,r,s,a):j_(e,n,r)}function nm(e,n){return e.parentNode(n)}let rm,W_=function z_(e,n,r){return 40&e.type?Vs(e,r):null};function im(e,n,r,s){const a=tm(e,s,n),l=n[On],v=function G_(e,n,r){return W_(e,n,r)}(s.parent||n[Cr],s,n);if(null!=a)if(Array.isArray(r))for(let T=0;T<r.length;T++)$_(l,a,r[T],v,!1);else $_(l,a,r,v,!1);void 0!==rm&&rm(l,s,n,r,a)}function up(e,n){if(null!==n){const r=n.type;if(3&r)return Vs(n,e);if(4&r)return sm(-1,e[n.index]);if(8&r){const s=n.child;if(null!==s)return up(e,s);{const a=e[n.index];return rs(a)?sm(-1,a):br(a)}}if(32&r)return V_(n,e)()||br(e[n.index]);{const s=qv(e,n);return null!==s?Array.isArray(s)?s[0]:up(fa(e[Wr]),s):up(e,n.next)}}return null}function qv(e,n){return null!==n?e[Wr][Cr].projection[n.projection]:null}function sm(e,n){const r=oi+e+1;if(r<n.length){const s=n[r],a=s[Lt].firstChild;if(null!==a)return up(s,a)}return n[kr]}function q_(e,n,r,s,a,l,p){for(;null!=r;){const v=s[r.index],T=r.type;if(p&&0===n&&(v&&ui(br(v),s),r.flags|=2),32&~r.flags)if(8&T)q_(e,n,r.child,s,a,l,!1),Cd(n,e,a,v,l);else if(32&T){const x=V_(r,s);let H;for(;H=x();)Cd(n,e,a,H,l);Cd(n,e,a,v,l)}else 16&T?Hu(e,n,s,r,a,l):Cd(n,e,a,v,l);r=p?r.projectionNext:r.next}}function cp(e,n,r,s,a,l){q_(r,s,e.firstChild,n,a,l,!1)}function Hu(e,n,r,s,a,l){const p=r[Wr],T=p[Cr].projection[s.projection];if(Array.isArray(T))for(let x=0;x<T.length;x++)Cd(n,e,a,T[x],l);else{let x=T;const H=p[dr];y(s)&&(x.flags|=128),q_(e,n,x,H,a,l,!0)}}function X_(e,n,r){""===r?e.removeAttribute(n,"class"):e.setAttribute(n,"class",r)}function Y_(e,n,r){const{mergedAttrs:s,classes:a,styles:l}=r;null!==s&&mo(e,n,s),null!==a&&X_(e,n,a),null!==l&&function Yv(e,n,r){e.setAttribute(n,"style",r)}(e,n,l)}const sr={};function J_(e=1){Jv(lr(),yt(),Fi()+e,!1)}function Jv(e,n,r,s){if(!s)if(3&~n[pn]){const l=e.preOrderHooks;null!==l&&tl(n,l,0,r)}else{const l=e.preOrderCheckHooks;null!==l&&el(n,l,r)}ga(r)}function Fh(e,n=Xn.Default){const r=yt();return null===r?$r(e,n):gh(Sr(),r,G(e),n)}function Zv(){throw new Error("invalid")}function om(e,n,r,s,a,l){const p=le(null);try{let v=null;a&Gi.SignalBased&&(v=n[s][Ue]),null!==v&&void 0!==v.transformFn&&(l=v.transformFn(l)),a&Gi.HasDecoratorInputTransform&&(l=e.inputTransforms[s].call(n,l)),null!==e.setInput?e.setInput(n,v,l,r,s):de(n,v,s,l)}finally{le(p)}}function am(e,n,r,s,a,l,p,v,T,x,H){const Z=n.blueprint.slice();return Z[wr]=a,Z[pn]=204|s,(null!==x||e&&2048&e[pn])&&(Z[pn]|=2048),cc(Z),Z[dr]=Z[iu]=e,Z[zr]=r,Z[qs]=p||e&&e[qs],Z[On]=v||e&&e[On],Z[Nr]=T||e&&e[Nr]||null,Z[Cr]=l,Z[su]=function N(){return I++}(),Z[yi]=H,Z[Xr]=x,Z[Wr]=2==n.type?e[Wr]:Z,Z}function Lh(e,n,r,s,a){let l=e.data[n];if(null===l)l=function Z_(e,n,r,s,a){const l=jl(),p=rh(),T=e.data[n]=function _(e,n,r,s,a,l){let p=n?n.injectorIndex:-1,v=0;return function Nu(){return null!==_n.skipHydrationRootTNode}()&&(v|=128),{type:r,index:s,insertBeforeIndex:null,injectorIndex:p,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:v,providerIndexes:0,value:a,attrs:l,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:n,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,p?l:l&&l.parent,r,n,s,a);return null===e.firstChild&&(e.firstChild=T),null!==l&&(p?null==l.child&&null!==T.parent&&(l.child=T):null===l.next&&(l.next=T,T.prev=l)),T}(e,n,r,s,a),function sh(){return _n.lFrame.inI18n}()&&(l.flags|=32);else if(64&l.type){l.type=r,l.value=s,l.attrs=a;const p=function ja(){const e=_n.lFrame,n=e.currentTNode;return e.isParent?n:n.parent}();l.injectorIndex=null===p?-1:p.injectorIndex}return ao(l,!0),l}function lp(e,n,r,s){if(0===r)return-1;const a=n.length;for(let l=0;l<r;l++)n.push(s),e.blueprint.push(s),e.data.push(null);return a}function um(e,n,r,s,a){const l=Fi(),p=2&s;try{ga(-1),p&&n.length>kn&&Jv(e,n,kn,!1),Xs(p?2:0,a),r(s,a)}finally{ga(l),Xs(p?3:1,a)}}function dp(e,n,r){if(Bo(n)){const s=le(null);try{const l=n.directiveEnd;for(let p=n.directiveStart;p<l;p++){const v=e.data[p];v.contentQueries&&v.contentQueries(1,r[p],p)}}finally{le(s)}}}function ey(e,n,r){Mu()&&(function Tn(e,n,r,s){const a=r.directiveStart,l=r.directiveEnd;jo(r)&&function st(e,n,r){const s=Vs(n,e),a=tE(r);let p=16;r.signals?p=4096:r.onPush&&(p=64);const v=Pd(e,am(e,a,null,p,s,n,null,e[qs].rendererFactory.createRenderer(s,r),null,null,null));e[n.index]=v}(n,r,e.data[a+r.componentOffset]),e.firstCreatePass||Xl(r,n),ui(s,n);const p=r.initialInputs;for(let v=a;v<l;v++){const T=e.data[v],x=ku(n,e,v,r);ui(x,n),null!==p&&Bh(0,v-a,x,T,0,p),Qs(T)&&(ys(r.index,n)[zr]=ku(n,e,v,r))}}(e,n,r,Vs(r,n)),!(64&~r.flags)&&nr(e,n,r))}function ty(e,n,r=Vs){const s=n.localNames;if(null!==s){let a=n.index+1;for(let l=0;l<s.length;l+=2){const p=s[l+1],v=-1===p?r(n,e):e[p];e[a++]=v}}}function tE(e){const n=e.tView;return null===n||n.incompleteFirstPass?e.tView=Uh(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):n}function Uh(e,n,r,s,a,l,p,v,T,x,H){const Z=kn+s,Te=Z+a,Se=function hp(e,n){const r=[];for(let s=0;s<n;s++)r.push(s<e?null:sr);return r}(Z,Te),Ke="function"==typeof x?x():x;return Se[Lt]={type:e,blueprint:Se,template:r,queries:null,viewQuery:v,declTNode:n,data:Se.slice().fill(null,Z),bindingStartIndex:Z,expandoStartIndex:Te,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof l?l():l,pipeRegistry:"function"==typeof p?p():p,firstChild:null,schemas:T,consts:Ke,incompleteFirstPass:!1,ssrId:H}}let i=()=>null;function A(e,n,r,s,a){for(let l in n){if(!n.hasOwnProperty(l))continue;const p=n[l];if(void 0===p)continue;s??={};let v,T=Gi.None;Array.isArray(p)?(v=p[0],T=p[1]):v=p;let x=l;if(null!==a){if(!a.hasOwnProperty(l))continue;x=a[l]}0===e?S(s,r,x,v,T):S(s,r,x,v)}return s}function S(e,n,r,s,a){let l;e.hasOwnProperty(r)?(l=e[r]).push(n,s):l=e[r]=[n,s],void 0!==a&&l.push(a)}function jt(e,n,r,s){if(Mu()){const a=null===s?null:{"":-1},l=function hr(e,n){const r=e.directiveRegistry;let s=null,a=null;if(r)for(let l=0;l<r.length;l++){const p=r[l];if(ve(n,p.selectors,!1))if(s||(s=[]),Qs(p))if(null!==p.findHostDirectiveDefs){const v=[];a=a||new Map,p.findHostDirectiveDefs(p,v,a),s.unshift(...v,p),xe(e,n,v.length)}else s.unshift(p),xe(e,n,0);else a=a||new Map,p.findHostDirectiveDefs?.(p,s,a),s.push(p)}return null===s?null:[s,a]}(e,r);let p,v;null===l?p=v=null:[p,v]=l,null!==p&&Vt(e,n,r,p,a,v),a&&function _e(e,n,r){if(n){const s=e.localNames=[];for(let a=0;a<n.length;a+=2){const l=r[n[a+1]];if(null==l)throw new Pt(-301,!1);s.push(n[a],l)}}}(r,s,a)}r.mergedAttrs=Rs(r.mergedAttrs,r.attrs)}function Vt(e,n,r,s,a,l){for(let x=0;x<s.length;x++)gc(Xl(r,n),e,s[x].type);!function Ve(e,n,r){e.flags|=1,e.directiveStart=n,e.directiveEnd=n+r,e.providerIndexes=n}(r,e.data.length,s.length);for(let x=0;x<s.length;x++){const H=s[x];H.providersResolver&&H.providersResolver(H)}let p=!1,v=!1,T=lp(e,n,s.length,null);for(let x=0;x<s.length;x++){const H=s[x];r.mergedAttrs=Rs(r.mergedAttrs,H.hostAttrs),Ge(e,r,n,T,H),Ce(T,H,a),null!==H.contentQueries&&(r.flags|=4),(null!==H.hostBindings||null!==H.hostAttrs||0!==H.hostVars)&&(r.flags|=64);const Z=H.type.prototype;!p&&(Z.ngOnChanges||Z.ngOnInit||Z.ngDoCheck)&&((e.preOrderHooks??=[]).push(r.index),p=!0),!v&&(Z.ngOnChanges||Z.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(r.index),v=!0),T++}!function L(e,n,r){const a=n.directiveEnd,l=e.data,p=n.attrs,v=[];let T=null,x=null;for(let H=n.directiveStart;H<a;H++){const Z=l[H],Te=r?r.get(Z):null,Ke=Te?Te.outputs:null;T=A(0,Z.inputs,H,T,Te?Te.inputs:null),x=A(1,Z.outputs,H,x,Ke);const It=null===T||null===p||Pi(n)?null:nE(T,H,p);v.push(It)}null!==T&&(T.hasOwnProperty("class")&&(n.flags|=8),T.hasOwnProperty("style")&&(n.flags|=16)),n.initialInputs=v,n.inputs=T,n.outputs=x}(e,r,l)}function nr(e,n,r){const s=r.directiveStart,a=r.directiveEnd,l=r.index,p=function $l(){return _n.lFrame.currentDirectiveIndex}();try{ga(l);for(let v=s;v<a;v++){const T=e.data[v],x=n[v];Vi(v),(null!==T.hostBindings||0!==T.hostVars||null!==T.hostAttrs)&&Ur(T,x)}}finally{ga(-1),Vi(p)}}function Ur(e,n){null!==e.hostBindings&&e.hostBindings(1,n)}function xe(e,n,r){n.componentOffset=r,(e.components??=[]).push(n.index)}function Ce(e,n,r){if(r){if(n.exportAs)for(let s=0;s<n.exportAs.length;s++)r[n.exportAs[s]]=e;Qs(n)&&(r[""]=e)}}function Ge(e,n,r,s,a){e.data[s]=a;const l=a.factory||(a.factory=ir(a.type)),p=new xu(l,Qs(a),Fh);e.blueprint[s]=p,r[s]=p,function vn(e,n,r,s,a){const l=a.hostBindings;if(l){let p=e.hostBindingOpCodes;null===p&&(p=e.hostBindingOpCodes=[]);const v=~n.index;(function Rn(e){let n=e.length;for(;n>0;){const r=e[--n];if("number"==typeof r&&r<0)return r}return 0})(p)!=v&&p.push(v),p.push(r,s,l)}}(e,n,s,lp(e,r,a.hostVars,sr),a)}function De(e,n,r,s,a,l){const p=Vs(e,n);!function Xa(e,n,r,s,a,l,p){if(null==l)e.removeAttribute(n,a,r);else{const v=null==p?dn(l):p(l,s||"",a);e.setAttribute(n,a,v,r)}}(n[On],p,l,e.value,r,s,a)}function Bh(e,n,r,s,a,l){const p=l[n];if(null!==p)for(let v=0;v<p.length;)om(s,r,p[v++],p[v++],p[v++],p[v++])}function nE(e,n,r){let s=null,a=0;for(;a<r.length;){const l=r[a];if(0!==l)if(5!==l){if("number"==typeof l)break;if(e.hasOwnProperty(l)){null===s&&(s=[]);const p=e[l];for(let v=0;v<p.length;v+=3)if(p[v]===n){s.push(l,p[v+1],p[v+2],r[a+1]);break}}a+=2}else a+=2;else a+=4}return s}function Sd(e,n,r,s){return[e,!0,0,n,null,s,null,r,null,null]}function Rd(e,n){const r=e.contentQueries;if(null!==r){const s=le(null);try{for(let a=0;a<r.length;a+=2){const p=r[a+1];if(-1!==p){const v=e.data[p];Hl(r[a]),v.contentQueries(2,n[p],p)}}}finally{le(s)}}}function Pd(e,n){return e[Eo]?e[oc][Tr]=n:e[Eo]=n,e[oc]=n,n}function fp(e,n,r){Hl(0);const s=le(null);try{n(e,r)}finally{le(s)}}function Gu(e){return e[so]||(e[so]=[])}function Us(e){return e.cleanup||(e.cleanup=[])}function Mc(e,n){const r=e[Nr],s=r?r.get(uo,null):null;s&&s.handleError(n)}function cm(e,n,r,s,a){for(let l=0;l<r.length;){const p=r[l++],v=r[l++],T=r[l++];om(e.data[p],n[p],s,v,T,a)}}function Qo(e,n,r){const s=cu(n,e);!function jv(e,n,r){e.setValue(n,r)}(e[On],s,r)}function rE(e,n){const r=ys(n,e),s=r[Lt];!function iE(e,n){for(let r=n.length;r<e.blueprint.length;r++)n.push(e.blueprint[r])}(s,r);const a=r[wr];null!==a&&null===r[yi]&&(r[yi]=Rg(a,r[Nr])),Md(s,r,r[zr])}function Md(e,n,r){ah(n);try{const s=e.viewQuery;null!==s&&fp(1,s,r);const a=e.template;null!==a&&um(e,n,a,1,r),e.firstCreatePass&&(e.firstCreatePass=!1),n[wo]?.finishViewCreation(e),e.staticContentQueries&&Rd(e,n),e.staticViewQueries&&fp(2,e.viewQuery,r);const l=e.components;null!==l&&function pp(e,n){for(let r=0;r<n.length;r++)rE(e,n[r])}(n,l)}catch(s){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),s}finally{n[pn]&=-5,Zc()}}function Nc(e,n){return!n||null===n.firstChild||y(e)}function Al(e,n,r,s=!0){const a=n[Lt];if(function Hv(e,n,r,s){const a=oi+s,l=r.length;s>0&&(r[a-1][Tr]=n),s<l-oi?(n[Tr]=r[a],Gs(r,oi+s,n)):(r.push(n),n[Tr]=null),n[dr]=r;const p=n[Ma];null!==p&&r!==p&&function Pc(e,n){const r=e[To];n[Wr]!==n[dr][dr][Wr]&&(e[pn]|=ou.HasTransplantedViews),null===r?e[To]=[n]:r.push(n)}(p,n);const v=n[wo];null!==v&&v.insertView(e),lu(n),n[pn]|=128}(a,n,e,r),s){const p=sm(r,e),v=n[On],T=nm(v,e[kr]);null!==T&&function wl(e,n,r,s,a,l){s[wr]=a,s[Cr]=n,cp(e,s,r,1,a,l)}(a,e[Cr],v,n,T,p)}const l=n[yi];null!==l&&null!==l.firstChild&&(l.firstChild=null)}function Nd(e,n,r,s,a=!1){for(;null!==r;){const l=n[r.index];null!==l&&s.push(br(l)),rs(l)&&ry(l,s);const p=r.type;if(8&p)Nd(e,n,r.child,s);else if(32&p){const v=V_(r,n);let T;for(;T=v();)s.push(T)}else if(16&p){const v=qv(n,r);if(Array.isArray(v))s.push(...v);else{const T=fa(n[Wr]);Nd(T[Lt],T,v,s,!0)}}r=a?r.projectionNext:r.next}return s}function ry(e,n){for(let r=oi;r<e.length;r++){const s=e[r],a=s[Lt].firstChild;null!==a&&Nd(s[Lt],s,a,n)}e[kr]!==e[wr]&&n.push(e[kr])}let lm=[];const sE={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{},consumerIsAlwaysLive:!0,consumerMarkedDirty:e=>{oo(e.lView)},consumerOnSignalRead(){this.lView[zi]=this}},_p=100;function xd(e,n=!0,r=0){const s=e[qs],a=s.rendererFactory;a.begin?.();try{!function hm(e,n){vp(e,n);let r=0;for(;lc(e);){if(r===_p)throw new Pt(103,!1);r++,vp(e,1)}}(e,r)}catch(p){throw n&&Mc(e,p),p}finally{a.end?.(),s.inlineEffectRunner?.flush()}}function ho(e,n,r,s){const a=n[pn];if(!(256&~a))return;n[qs].inlineEffectRunner?.flush(),ah(n);let p=null,v=null;(function yp(e){return 2!==e.type})(e)&&(v=function iy(e){return e[zi]??function dm(e){const n=lm.pop()??Object.create(sE);return n.lView=e,n}(e)}(n),p=function Nt(e){return e&&(e.nextProducerIndex=0),le(e)}(v));try{cc(n),function ih(e){return _n.lFrame.bindingIndex=e}(e.bindingStartIndex),null!==r&&um(e,n,r,2,s);const T=!(3&~a);if(T){const Z=e.preOrderCheckHooks;null!==Z&&el(n,Z,null)}else{const Z=e.preOrderHooks;null!==Z&&tl(n,Z,0,null),Ha(n,0)}if(function oy(e){for(let n=e_(e);null!==n;n=xf(n)){if(!(n[pn]&ou.HasTransplantedViews))continue;const r=n[To];for(let s=0;s<r.length;s++){Vl(r[s])}}}(n),fm(n,0),null!==e.contentQueries&&Rd(e,n),T){const Z=e.contentCheckHooks;null!==Z&&el(n,Z)}else{const Z=e.contentHooks;null!==Z&&tl(n,Z,1),Ha(n,1)}!function eE(e,n){const r=e.hostBindingOpCodes;if(null!==r)try{for(let s=0;s<r.length;s++){const a=r[s];if(a<0)ga(~a);else{const l=a,p=r[++s],v=r[++s];ug(p,l),v(2,n[l])}}}finally{ga(-1)}}(e,n);const x=e.components;null!==x&&pm(n,x,0);const H=e.viewQuery;if(null!==H&&fp(2,H,s),T){const Z=e.viewCheckHooks;null!==Z&&el(n,Z)}else{const Z=e.viewHooks;null!==Z&&tl(n,Z,2),Ha(n,2)}if(!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),n[_s]){for(const Z of n[_s])Z();n[_s]=null}n[pn]&=-73}catch(T){throw oo(n),T}finally{null!==v&&(function un(e,n){if(le(n),e&&void 0!==e.producerNode&&void 0!==e.producerIndexOfThis&&void 0!==e.producerLastReadVersion){if(Dt(e))for(let r=e.nextProducerIndex;r<e.producerNode.length;r++)at(e.producerNode[r],e.producerIndexOfThis[r]);for(;e.producerNode.length>e.nextProducerIndex;)e.producerNode.pop(),e.producerLastReadVersion.pop(),e.producerIndexOfThis.pop()}}(v,p),function sy(e){e.lView[zi]!==e&&(e.lView=null,lm.push(e))}(v)),Zc()}}function fm(e,n){for(let r=e_(e);null!==r;r=xf(r))for(let s=oi;s<r.length;s++)Od(r[s],n)}function oE(e,n,r){Od(ys(n,e),r)}function Od(e,n){kl(e)&&vp(e,n)}function vp(e,n){const s=e[Lt],a=e[pn],l=e[zi];let p=!!(0===n&&16&a);if(p||=!!(64&a&&0===n),p||=!!(1024&a),p||=!(!l?.dirty||!ln(l)),l&&(l.dirty=!1),e[pn]&=-9217,p)ho(s,e,s.template,e[zr]);else if(8192&a){fm(e,1);const v=s.components;null!==v&&pm(e,v,1)}}function pm(e,n,r){for(let s=0;s<n.length;s++)oE(e,n[s],r)}function Cl(e){for(e[qs].changeDetectionScheduler?.notify();e;){e[pn]|=64;const n=fa(e);if($o(e)&&!n)return e;e=n}return null}class jh{get rootNodes(){const n=this._lView,r=n[Lt];return Nd(r,n,r.firstChild,[])}constructor(n,r,s=!0){this._lView=n,this._cdRefInjectingView=r,this.notifyErrorHandler=s,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[zr]}set context(n){this._lView[zr]=n}get destroyed(){return!(256&~this._lView[pn])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const n=this._lView[dr];if(rs(n)){const r=n[8],s=r?r.indexOf(this):-1;s>-1&&(kh(n,s),xo(r,s))}this._attachedToViewContainer=!1}ap(this._lView[Lt],this._lView)}onDestroy(n){La(this._lView,n)}markForCheck(){Cl(this._cdRefInjectingView||this._lView)}detach(){this._lView[pn]&=-129}reattach(){lu(this._lView),this._lView[pn]|=128}detectChanges(){this._lView[pn]|=1024,xd(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Pt(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,L_(this._lView[Lt],this._lView)}attachToAppRef(n){if(this._attachedToViewContainer)throw new Pt(902,!1);this._appRef=n,lu(this._lView)}}let $h=(()=>{class e{static{this.__NG_ELEMENT_ID__=uy}}return e})();const gm=$h,ay=class extends gm{constructor(n,r,s){super(),this._declarationLView=n,this._declarationTContainer=r,this.elementRef=s}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,r){return this.createEmbeddedViewImpl(n,r)}createEmbeddedViewImpl(n,r,s){const a=function Dl(e,n,r,s){const a=le(null);try{const l=n.tView,T=am(e,l,r,4096&e[pn]?4096:16,null,n,null,null,s?.injector??null,s?.embeddedViewInjector??null,s?.dehydratedView??null);T[Ma]=e[n.index];const H=e[wo];return null!==H&&(T[wo]=H.createEmbeddedView(l)),Md(l,T,r),T}finally{le(a)}}(this._declarationLView,this._declarationTContainer,n,{embeddedViewInjector:r,dehydratedView:s});return new jh(a)}};function uy(){return xc(Sr(),yt())}function xc(e,n){return 4&e.type?new ay(n,e,co(e,n)):null}class Ku{}class qu{}class Qh{}class Cp{resolveComponentFactory(n){throw function Ap(e){const n=Error(`No component factory found for ${Ie(e)}.`);return n.ngComponent=e,n}(n)}}let Fc=(()=>{class e{static{this.NULL=new Cp}}return e})();class Ud{}let dE=(()=>{class e{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>function Ty(){const e=yt(),r=ys(Sr().index,e);return(Qi(r)?r:e)[On]}()}}return e})(),hE=(()=>{class e{static{this.\u0275prov=Wn({token:e,providedIn:"root",factory:()=>null})}}return e})();const Am={},Dy=new Set;function Po(e){Dy.has(e)||(Dy.add(e),performance?.mark?.("mark_feature_usage",{detail:{feature:e}}))}function Qu(...e){}class Ki{constructor({enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:s=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ko(!1),this.onMicrotaskEmpty=new Ko(!1),this.onStable=new Ko(!1),this.onError=new Ko(!1),typeof Zone>"u")throw new Pt(908,!1);Zone.assertZonePatched();const a=this;a._nesting=0,a._outer=a._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(a._inner=a._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(a._inner=a._inner.fork(Zone.longStackTraceZoneSpec)),a.shouldCoalesceEventChangeDetection=!s&&r,a.shouldCoalesceRunChangeDetection=s,a.lastRequestAnimationFrameId=-1,a.nativeRequestAnimationFrame=function Ay(){const e="function"==typeof En.requestAnimationFrame;let n=En[e?"requestAnimationFrame":"setTimeout"],r=En[e?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&n&&r){const s=n[Zone.__symbol__("OriginalDelegate")];s&&(n=s);const a=r[Zone.__symbol__("OriginalDelegate")];a&&(r=a)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:r}}().nativeRequestAnimationFrame,function gE(e){const n=()=>{!function pE(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(En,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,yu(e),e.isCheckStableRunning=!0,Cm(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),yu(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(r,s,a,l,p,v)=>{if(function bp(e){return!(!Array.isArray(e)||1!==e.length)&&!0===e[0].data?.__ignore_ng_zone__}(v))return r.invokeTask(a,l,p,v);try{return Cy(e),r.invokeTask(a,l,p,v)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===l.type||e.shouldCoalesceRunChangeDetection)&&n(),by(e)}},onInvoke:(r,s,a,l,p,v,T)=>{try{return Cy(e),r.invoke(a,l,p,v,T)}finally{e.shouldCoalesceRunChangeDetection&&n(),by(e)}},onHasTask:(r,s,a,l)=>{r.hasTask(a,l),s===a&&("microTask"==l.change?(e._hasPendingMicrotasks=l.microTask,yu(e),Cm(e)):"macroTask"==l.change&&(e.hasPendingMacrotasks=l.macroTask))},onHandleError:(r,s,a,l)=>(r.handleError(a,l),e.runOutsideAngular(()=>e.onError.emit(l)),!1)})}(a)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ki.isInAngularZone())throw new Pt(909,!1)}static assertNotInAngularZone(){if(Ki.isInAngularZone())throw new Pt(909,!1)}run(n,r,s){return this._inner.run(n,r,s)}runTask(n,r,s,a){const l=this._inner,p=l.scheduleEventTask("NgZoneEvent: "+a,n,Bd,Qu,Qu);try{return l.runTask(p,r,s)}finally{l.cancelTask(p)}}runGuarded(n,r,s){return this._inner.runGuarded(n,r,s)}runOutsideAngular(n){return this._outer.run(n)}}const Bd={};function Cm(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function yu(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function Cy(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function by(e){e._nesting--,Cm(e)}class jd{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ko,this.onMicrotaskEmpty=new Ko,this.onStable=new Ko,this.onError=new Ko}run(n,r,s){return n.apply(r,s)}runGuarded(n,r,s){return n.apply(r,s)}runOutsideAngular(n){return n()}runTask(n,r,s,a){return n.apply(r,s)}}var Ya=function(e){return e[e.EarlyRead=0]="EarlyRead",e[e.Write=1]="Write",e[e.MixedReadWrite=2]="MixedReadWrite",e[e.Read=3]="Read",e}(Ya||{});const $d={destroy(){}};function Mi(e,n){!n&&function io(e){if(!Du())throw new Pt(-203,!1)}();const r=n?.injector??Pn(ai);if(!function So(e){return"browser"===(e??Pn(ai)).get(Th)}(r))return $d;Po("NgAfterNextRender");const s=r.get(Hd),a=s.handler??=new Py,l=n?.phase??Ya.MixedReadWrite,p=()=>{a.unregister(T),v()},v=r.get(qa).onDestroy(p),T=Os(r,()=>new Ry(l,()=>{p(),e()}));return a.register(T),{destroy:p}}class Ry{constructor(n,r){this.phase=n,this.callbackFn=r,this.zone=Pn(Ki),this.errorHandler=Pn(uo,{optional:!0}),Pn(Ku,{optional:!0})?.notify(1)}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(n){this.errorHandler?.handleError(n)}}}class Py{constructor(){this.executingCallbacks=!1,this.buckets={[Ya.EarlyRead]:new Set,[Ya.Write]:new Set,[Ya.MixedReadWrite]:new Set,[Ya.Read]:new Set},this.deferredCallbacks=new Set}register(n){(this.executingCallbacks?this.deferredCallbacks:this.buckets[n.phase]).add(n)}unregister(n){this.buckets[n.phase].delete(n),this.deferredCallbacks.delete(n)}execute(){this.executingCallbacks=!0;for(const n of Object.values(this.buckets))for(const r of n)r.invoke();this.executingCallbacks=!1;for(const n of this.deferredCallbacks)this.buckets[n.phase].add(n);this.deferredCallbacks.clear()}destroy(){for(const n of Object.values(this.buckets))n.clear();this.deferredCallbacks.clear()}}let Hd=(()=>{class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){const r=[...this.internalCallbacks];this.internalCallbacks.length=0;for(const s of r)s()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}static{this.\u0275prov=Wn({token:e,providedIn:"root",factory:()=>new e})}}return e})();function Xu(e){return!!fi(e)}function Pl(e,n,r){let s=r?e.styles:null,a=r?e.classes:null,l=0;if(null!==n)for(let p=0;p<n.length;p++){const v=n[p];"number"==typeof v?l=v:1==l?a=or(a,v):2==l&&(s=or(s,v+": "+n[++p]+";"))}r?e.styles=s:e.stylesWithoutHost=s,r?e.classes=a:e.classesWithoutHost=a}class Ny extends Fc{constructor(n){super(),this.ngModule=n}resolveComponentFactory(n){const r=Ln(n);return new Gd(r,this.ngModule)}}function Pm(e){const n=[];for(const r in e){if(!e.hasOwnProperty(r))continue;const s=e[r];void 0!==s&&n.push({propName:Array.isArray(s)?s[0]:s,templateName:r})}return n}class Yh{constructor(n,r){this.injector=n,this.parentInjector=r}get(n,r,s){s=Si(s);const a=this.injector.get(n,Am,s);return a!==Am||r===Am?a:this.parentInjector.get(n,r,s)}}class Gd extends Qh{get inputs(){const n=this.componentDef,r=n.inputTransforms,s=Pm(n.inputs);if(null!==r)for(const a of s)r.hasOwnProperty(a.propName)&&(a.transform=r[a.propName]);return s}get outputs(){return Pm(this.componentDef.outputs)}constructor(n,r){super(),this.componentDef=n,this.ngModule=r,this.componentType=n.type,this.selector=function Ws(e){return e.map(Zi).join(",")}(n.selectors),this.ngContentSelectors=n.ngContentSelectors?n.ngContentSelectors:[],this.isBoundToModule=!!r}create(n,r,s,a){const l=le(null);try{let p=(a=a||this.ngModule)instanceof Ns?a:a?.injector;p&&null!==this.componentDef.getStandaloneInjector&&(p=this.componentDef.getStandaloneInjector(p)||p);const v=p?new Yh(n,p):n,T=v.get(Ud,null);if(null===T)throw new Pt(407,!1);const x=v.get(hE,null),Te={rendererFactory:T,sanitizer:x,inlineEffectRunner:null,afterRenderEventManager:v.get(Hd,null),changeDetectionScheduler:v.get(Ku,null)},Se=T.createRenderer(null,this.componentDef),Ke=this.componentDef.selectors[0][0]||"div",It=s?function u(e,n,r,s){const l=s.get(p_,!1)||r===Yi.ShadowDom,p=e.selectRootElement(n,l);return function t(e){i(e)}(p),p}(Se,s,this.componentDef.encapsulation,v):_u(Se,Ke,function Xh(e){const n=e.toLowerCase();return"svg"===n?"svg":"math"===n?"math":null}(Ke));let Ht=512;this.componentDef.signals?Ht|=4096:this.componentDef.onPush||(Ht|=16);let Yt=null;null!==It&&(Yt=Rg(It,v,!0));const Mt=Uh(0,null,null,1,0,null,null,null,null,null,null),Gn=am(null,Mt,null,Ht,null,null,Te,Se,v,null,Yt);let Br,pi;ah(Gn);try{const $s=this.componentDef;let Ia,ig=null;$s.findHostDirectiveDefs?(Ia=[],ig=new Map,$s.findHostDirectiveDefs($s,Ia,ig),Ia.push($s)):Ia=[$s];const iA=function Nm(e,n){const r=e[Lt],s=kn;return e[s]=n,Lh(r,s,2,"#host",null)}(Gn,It),lM=function xy(e,n,r,s,a,l,p){const v=a[Lt];!function Pp(e,n,r,s){for(const a of e)n.mergedAttrs=Rs(n.mergedAttrs,a.hostAttrs);null!==n.mergedAttrs&&(Pl(n,n.mergedAttrs,!0),null!==r&&Y_(s,r,n))}(s,e,n,p);let T=null;null!==n&&(T=Rg(n,a[Nr]));const x=l.rendererFactory.createRenderer(n,r);let H=16;r.signals?H=4096:r.onPush&&(H=64);const Z=am(a,tE(r),null,H,a[e.index],e,l,x,null,null,T);return v.firstCreatePass&&xe(v,e,s.length-1),Pd(a,Z),a[e.index]=Z}(iA,It,$s,Ia,Gn,Te,Se);pi=Pu(Mt,kn),It&&function ky(e,n,r,s){if(s)mo(e,r,["ng-version","17.3.12"]);else{const{attrs:a,classes:l}=function es(e){const n=[],r=[];let s=1,a=2;for(;s<e.length;){let l=e[s];if("string"==typeof l)2===a?""!==l&&n.push(l,e[++s]):8===a&&r.push(l);else{if(!R(a))break;a=l}s++}return{attrs:n,classes:r}}(n.selectors[0]);a&&mo(e,r,a),l&&l.length>0&&X_(e,r,l.join(" "))}}(Se,$s,It,s),void 0!==r&&function Ml(e,n,r){const s=e.projection=[];for(let a=0;a<n.length;a++){const l=r[a];s.push(null!=l?Array.from(l):null)}}(pi,this.ngContentSelectors,r),Br=function Oy(e,n,r,s,a,l){const p=Sr(),v=a[Lt],T=Vs(p,a);Vt(v,a,p,r,null,s);for(let H=0;H<r.length;H++)ui(ku(a,v,p.directiveStart+H,p),a);nr(v,a,p),T&&ui(T,a);const x=ku(a,v,p.directiveStart+p.componentOffset,p);if(e[zr]=a[zr]=x,null!==l)for(const H of l)H(x,n);return dp(v,p,a),x}(lM,$s,Ia,ig,Gn,[Vy]),Md(Mt,Gn,null)}finally{Zc()}return new Mm(this.componentType,Br,co(pi,Gn),Gn,pi)}finally{le(l)}}}class Mm extends qu{constructor(n,r,s,a,l){super(),this.location=s,this._rootLView=a,this._tNode=l,this.previousInputValues=null,this.instance=r,this.hostView=this.changeDetectorRef=new jh(a,void 0,!1),this.componentType=n}setInput(n,r){const s=this._tNode.inputs;let a;if(null!==s&&(a=s[n])){if(this.previousInputValues??=new Map,this.previousInputValues.has(n)&&Object.is(this.previousInputValues.get(n),r))return;const l=this._rootLView;cm(l[Lt],l,a,n,r),this.previousInputValues.set(n,r),Cl(ys(this._tNode.index,l))}}get injector(){return new li(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(n){this.hostView.onDestroy(n)}}function Vy(){const e=Sr();pc(yt()[Lt],e)}let Jh=(()=>{class e{static{this.__NG_ELEMENT_ID__=Fy}}return e})();function Fy(){return xm(Sr(),yt())}const Ly=Jh,Zh=class extends Ly{constructor(n,r,s){super(),this._lContainer=n,this._hostTNode=r,this._hostLView=s}get element(){return co(this._hostTNode,this._hostLView)}get injector(){return new li(this._hostTNode,this._hostLView)}get parentInjector(){const n=Yl(this._hostTNode,this._hostLView);if(rl(n)){const r=Ou(n,this._hostLView),s=Wa(n);return new li(r[Lt].data[s+8],r)}return new li(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(n){const r=Mo(this._lContainer);return null!==r&&r[n]||null}get length(){return this._lContainer.length-oi}createEmbeddedView(n,r,s){let a,l;"number"==typeof s?a=s:null!=s&&(a=s.index,l=s.injector);const v=n.createEmbeddedViewImpl(r||{},l,null);return this.insertImpl(v,a,Nc(this._hostTNode,null)),v}createComponent(n,r,s,a,l){const p=n&&!function Tt(e){return"function"==typeof e}(n);let v;if(p)v=r;else{const Ke=r||{};v=Ke.index,s=Ke.injector,a=Ke.projectableNodes,l=Ke.environmentInjector||Ke.ngModuleRef}const T=p?n:new Gd(Ln(n)),x=s||this.parentInjector;if(!l&&null==T.ngModule){const It=(p?x:this.parentInjector).get(Ns,null);It&&(l=It)}Ln(T.componentType??{});const Se=T.create(x,a,null,l);return this.insertImpl(Se.hostView,v,Nc(this._hostTNode,null)),Se}insert(n,r){return this.insertImpl(n,r,!0)}insertImpl(n,r,s){const a=n._lView;if(function uc(e){return rs(e[dr])}(a)){const v=this.indexOf(n);if(-1!==v)this.detach(v);else{const T=a[dr],x=new Zh(T,T[Cr],T[dr]);x.detach(x.indexOf(n))}}const l=this._adjustIndex(r),p=this._lContainer;return Al(p,a,l,s),n.attachToViewContainerRef(),Gs(Mp(p),l,n),n}move(n,r){return this.insert(n,r)}indexOf(n){const r=Mo(this._lContainer);return null!==r?r.indexOf(n):-1}remove(n){const r=this._adjustIndex(n,-1),s=kh(this._lContainer,r);s&&(xo(Mp(this._lContainer),r),ap(s[Lt],s))}detach(n){const r=this._adjustIndex(n,-1),s=kh(this._lContainer,r);return s&&null!=xo(Mp(this._lContainer),r)?new jh(s):null}_adjustIndex(n,r=0){return n??this.length+r}};function Mo(e){return e[8]}function Mp(e){return e[8]||(e[8]=[])}function xm(e,n){let r;const s=n[e.index];return rs(s)?r=s:(r=Sd(s,n,null,e),n[e.index]=r,Pd(n,r)),g(r,n,e,s),new Zh(r,e,n)}let g=function ee(e,n,r,s){if(e[kr])return;let a;a=8&r.type?br(s):function zd(e,n){const r=e[On],s=r.createComment(""),a=Vs(n,e);return Tl(r,nm(r,a),s,function Wv(e,n){return e.nextSibling(n)}(r,a),!1),s}(n,r),e[kr]=a},P=()=>!1;class ni{constructor(n){this.queryList=n,this.matches=null}clone(){return new ni(this.queryList)}setDirty(){this.queryList.setDirty()}}class ss{constructor(n=[]){this.queries=n}createEmbeddedView(n){const r=n.queries;if(null!==r){const s=null!==n.contentQueries?n.contentQueries[0]:r.length,a=[];for(let l=0;l<s;l++){const p=r.getByIndex(l);a.push(this.queries[p.indexInDeclarationView].clone())}return new ss(a)}return null}insertView(n){this.dirtyQueriesWithMatches(n)}detachView(n){this.dirtyQueriesWithMatches(n)}finishViewCreation(n){this.dirtyQueriesWithMatches(n)}dirtyQueriesWithMatches(n){for(let r=0;r<this.queries.length;r++)null!==EE(n,r).matches&&this.queries[r].setDirty()}}class Vr{constructor(n,r,s=null){this.flags=r,this.read=s,this.predicate="string"==typeof n?function sA(e){return e.split(",").map(n=>n.trim())}(n):n}}class vs{constructor(n=[]){this.queries=n}elementStart(n,r){for(let s=0;s<this.queries.length;s++)this.queries[s].elementStart(n,r)}elementEnd(n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementEnd(n)}embeddedTView(n){let r=null;for(let s=0;s<this.length;s++){const a=null!==r?r.length:0,l=this.getByIndex(s).embeddedTView(n,a);l&&(l.indexInDeclarationView=s,null!==r?r.push(l):r=[l])}return null!==r?new vs(r):null}template(n,r){for(let s=0;s<this.queries.length;s++)this.queries[s].template(n,r)}getByIndex(n){return this.queries[n]}get length(){return this.queries.length}track(n){this.queries.push(n)}}class Es{constructor(n,r=-1){this.metadata=n,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=r}elementStart(n,r){this.isApplyingToNode(r)&&this.matchTNode(n,r)}elementEnd(n){this._declarationNodeIndex===n.index&&(this._appliesToNextNode=!1)}template(n,r){this.elementStart(n,r)}embeddedTView(n,r){return this.isApplyingToNode(n)?(this.crossesNgTemplate=!0,this.addMatch(-n.index,r),new Es(this.metadata)):null}isApplyingToNode(n){if(this._appliesToNextNode&&1&~this.metadata.flags){const r=this._declarationNodeIndex;let s=n.parent;for(;null!==s&&8&s.type&&s.index!==r;)s=s.parent;return r===(null!==s?s.index:-1)}return this._appliesToNextNode}matchTNode(n,r){const s=this.metadata.predicate;if(Array.isArray(s))for(let a=0;a<s.length;a++){const l=s[a];this.matchTNodeWithReadOption(n,r,Wd(r,l)),this.matchTNodeWithReadOption(n,r,_c(r,n,l,!1,!1))}else s===$h?4&r.type&&this.matchTNodeWithReadOption(n,r,-1):this.matchTNodeWithReadOption(n,r,_c(r,n,s,!1,!1))}matchTNodeWithReadOption(n,r,s){if(null!==s){const a=this.metadata.read;if(null!==a)if(a===_a||a===Jh||a===$h&&4&r.type)this.addMatch(r.index,-2);else{const l=_c(r,n,a,!1,!1);null!==l&&this.addMatch(r.index,l)}else this.addMatch(r.index,s)}}addMatch(n,r){null===this.matches?this.matches=[n,r]:this.matches.push(n,r)}}function Wd(e,n){const r=e.localNames;if(null!==r)for(let s=0;s<r.length;s+=2)if(r[s]===n)return r[s+1];return null}function Np(e,n,r,s){return-1===r?function Ja(e,n){return 11&e.type?co(e,n):4&e.type?xc(e,n):null}(n,e):-2===r?function Om(e,n,r){return r===_a?co(n,e):r===$h?xc(n,e):r===Jh?xm(n,e):void 0}(e,n,s):ku(e,e[Lt],r,n)}function WI(e,n,r,s){const a=n[wo].queries[s];if(null===a.matches){const l=e.data,p=r.matches,v=[];for(let T=0;null!==p&&T<p.length;T+=2){const x=p[T];v.push(x<0?null:Np(n,l[x],p[T+1],r.metadata.read))}a.matches=v}return a.matches}function yE(e,n,r,s){const a=e.queries.getByIndex(r),l=a.matches;if(null!==l){const p=WI(e,n,a,r);for(let v=0;v<l.length;v+=2){const T=l[v];if(T>0)s.push(p[v/2]);else{const x=l[v+1],H=n[-T];for(let Z=oi;Z<H.length;Z++){const Te=H[Z];Te[Ma]===Te[dr]&&yE(Te[Lt],Te,x,s)}if(null!==H[To]){const Z=H[To];for(let Te=0;Te<Z.length;Te++){const Se=Z[Te];yE(Se[Lt],Se,x,s)}}}}}return s}function QI(e,n,r,s){const a=lr();if(a.firstCreatePass){const l=Sr();(function XI(e,n,r){null===e.queries&&(e.queries=new vs),e.queries.track(new Es(n,r))})(a,new Vr(n,r,s),l.index),function oA(e,n){const r=e.contentQueries||(e.contentQueries=[]);n!==(r.length?r[r.length-1]:-1)&&r.push(e.queries.length-1,n)}(a,e),!(2&~r)&&(a.staticContentQueries=!0)}return function KI(e,n,r){const s=new Fu(!(4&~r));return function f(e,n,r,s){const a=Gu(n);a.push(r),e.firstCreatePass&&Us(e).push(s,a.length-1)}(e,n,s,s.destroy),(n[wo]??=new ss).queries.push(new ni(s))-1}(a,yt(),r)}function EE(e,n){return e.queries.getByIndex(n)}function YI(e,n){const r=e[Lt],s=EE(r,n);return s.crossesNgTemplate?yE(r,e,n,[]):WI(r,e,s,n)}function wE(e){let n=function h0(e){return Object.getPrototypeOf(e.prototype).constructor}(e.type),r=!0;const s=[e];for(;n;){let a;if(Qs(e))a=n.\u0275cmp||n.\u0275dir;else{if(n.\u0275cmp)throw new Pt(903,!1);a=n.\u0275dir}if(a){if(r){s.push(a);const p=e;p.inputs=By(e.inputs),p.inputTransforms=By(e.inputTransforms),p.declaredInputs=By(e.declaredInputs),p.outputs=By(e.outputs);const v=a.hostBindings;v&&IA(e,v);const T=a.viewQuery,x=a.contentQueries;if(T&&vA(e,T),x&&EA(e,x),_A(e,a),Jr(e.outputs,a.outputs),Qs(a)&&a.data.animation){const H=e.data;H.animation=(H.animation||[]).concat(a.data.animation)}}const l=a.features;if(l)for(let p=0;p<l.length;p++){const v=l[p];v&&v.ngInherit&&v(e),v===wE&&(r=!1)}}n=Object.getPrototypeOf(n)}!function yA(e){let n=0,r=null;for(let s=e.length-1;s>=0;s--){const a=e[s];a.hostVars=n+=a.hostVars,a.hostAttrs=Rs(a.hostAttrs,r=Rs(r,a.hostAttrs))}}(s)}function _A(e,n){for(const r in n.inputs){if(!n.inputs.hasOwnProperty(r)||e.inputs.hasOwnProperty(r))continue;const s=n.inputs[r];if(void 0!==s&&(e.inputs[r]=s,e.declaredInputs[r]=n.declaredInputs[r],null!==n.inputTransforms)){const a=Array.isArray(s)?s[0]:s;if(!n.inputTransforms.hasOwnProperty(a))continue;e.inputTransforms??={},e.inputTransforms[a]=n.inputTransforms[a]}}}function By(e){return e===Ri?{}:e===ur?[]:e}function vA(e,n){const r=e.viewQuery;e.viewQuery=r?(s,a)=>{n(s,a),r(s,a)}:n}function EA(e,n){const r=e.contentQueries;e.contentQueries=r?(s,a,l)=>{n(s,a,l),r(s,a,l)}:n}function IA(e,n){const r=e.hostBindings;e.hostBindings=r?(s,a)=>{n(s,a),r(s,a)}:n}function m0(e){const n=e.inputConfig,r={};for(const s in n)if(n.hasOwnProperty(s)){const a=n[s];Array.isArray(a)&&a[3]&&(r[s]=a[3])}e.inputTransforms=r}class ef{}class _0{}function bA(e,n){return new TE(e,n??null,[])}class TE extends ef{constructor(n,r,s){super(),this._parent=r,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Ny(this);const a=fi(n);this._bootstrapComponents=qo(a.bootstrap),this._r3Injector=Tf(n,r,[{provide:ef,useValue:this},{provide:Fc,useValue:this.componentFactoryResolver},...s],Ie(n),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(n)}get injector(){return this._r3Injector}destroy(){const n=this._r3Injector;!n.destroyed&&n.destroy(),this.destroyCbs.forEach(r=>r()),this.destroyCbs=null}onDestroy(n){this.destroyCbs.push(n)}}class DE extends _0{constructor(n){super(),this.moduleType=n}create(n){return new TE(this.moduleType,n,[])}}class y0 extends ef{constructor(n){super(),this.componentFactoryResolver=new Ny(this),this.instance=null;const r=new Er([...n.providers,{provide:ef,useValue:this},{provide:Fc,useValue:this.componentFactoryResolver}],n.parent||sa(),n.debugName,new Set(["environment"]));this.injector=r,n.runEnvironmentInitializers&&r.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(n){this.injector.onDestroy(n)}}function AE(e,n,r=null){return new y0({providers:e,parent:n,debugName:r,runEnvironmentInitializers:!0}).injector}let Op=(()=>{class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new ct.t(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);const r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),0===this.pendingTasks.size&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275fac=function(s){return new(s||e)}}static{this.\u0275prov=Wn({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function $y(e){return!!CE(e)&&(Array.isArray(e)||!(e instanceof Map)&&Symbol.iterator in e)}function CE(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function Uc(e,n,r){return e[n]=r}function os(e,n,r){return!Object.is(e[n],r)&&(e[n]=r,!0)}function tf(e,n,r,s){const a=os(e,n,r);return os(e,n+1,s)||a}function kp(e,n,r,s,a,l,p,v){const T=yt(),x=lr(),H=e+kn,Z=x.firstCreatePass?function OA(e,n,r,s,a,l,p,v,T){const x=n.consts,H=Lh(n,e,4,p||null,ha(x,v));jt(n,r,H,ha(x,T)),pc(n,H);const Z=H.tView=Uh(2,H,s,a,l,n.directiveRegistry,n.pipeRegistry,null,n.schemas,x,null);return null!==n.queries&&(n.queries.template(n,H),Z.queries=n.queries.embeddedTView(H)),H}(H,x,T,n,r,s,a,l,p):x.data[H];ao(Z,!1);const Te=v0(x,T,Z,e);$a()&&im(x,T,Te,Z),ui(Te,T);const Se=Sd(Te,T,Te,Z);return T[H]=Se,Pd(T,Se),function B(e,n,r){return P(e,n,r)}(Se,Z,T),au(Z)&&ey(x,T,Z),null!=p&&ty(T,Z,v),kp}let v0=function E0(e,n,r,s){return Co(!0),n[On].createComment("")};function VE(e,n,r,s){const a=yt();return os(a,Ho(),n)&&(lr(),De(Yr(),a,e,n,r,s)),VE}function Gp(e,n,r,s,a,l){const v=tf(e,function Ao(){return _n.lFrame.bindingIndex}(),r,a);return pa(2),v?n+dn(r)+s+dn(a)+l:sr}function Qy(e,n){return e<<17|n<<2}function qd(e){return e>>17&32767}function FE(e){return 2|e}function rf(e){return(131068&e)>>2}function LE(e,n){return-131069&e|n<<2}function UE(e){return 1|e}function Y0(e,n,r,s){const a=e[r+1],l=null===n;let p=s?qd(a):rf(a),v=!1;for(;0!==p&&(!1===v||l);){const x=e[p+1];EC(e[p],n)&&(v=!0,e[p+1]=s?UE(x):FE(x)),p=s?qd(x):rf(x)}v&&(e[r+1]=s?FE(a):UE(a))}function EC(e,n){return null===e||null==n||(Array.isArray(e)?e[1]:e)===n||!(!Array.isArray(e)||"string"!=typeof n)&&Oi(e,n)>=0}function BE(e,n,r){const s=yt();return os(s,Ho(),n)&&function re(e,n,r,s,a,l,p,v){const T=Vs(n,r);let H,x=n.inputs;!v&&null!=x&&(H=x[s])?(cm(e,r,H,s,a),jo(n)&&function we(e,n){const r=ys(n,e);16&r[pn]||(r[pn]|=64)}(r,n.index)):3&n.type&&(s=function Q(e){return"class"===e?"className":"for"===e?"htmlFor":"formaction"===e?"formAction":"innerHtml"===e?"innerHTML":"readonly"===e?"readOnly":"tabindex"===e?"tabIndex":e}(s),a=null!=p?p(a,n.value||"",s):a,l.setProperty(T,s,a))}(lr(),Yr(),s,e,n,s[On],r,!1),BE}function jE(e,n,r,s,a){const p=a?"class":"style";cm(e,r,n.inputs[p],p,s)}function $E(e,n){return function Yu(e,n,r,s){const a=yt(),l=lr(),p=pa(2);l.firstUpdatePass&&function ow(e,n,r,s){const a=e.data;if(null===a[r+1]){const l=a[Fi()],p=function sw(e,n){return n>=e.expandoStartIndex}(e,r);(function lw(e,n){return!!(e.flags&(n?8:16))})(l,s)&&null===n&&!p&&(n=!1),n=function RC(e,n,r,s){const a=function fc(e){const n=_n.lFrame.currentDirectiveIndex;return-1===n?null:e[n]}(e);let l=s?n.residualClasses:n.residualStyles;if(null===a)0===(s?n.classBindings:n.styleBindings)&&(r=jm(r=HE(null,e,n,r,s),n.attrs,s),l=null);else{const p=n.directiveStylingLast;if(-1===p||e[p]!==a)if(r=HE(a,e,n,r,s),null===l){let T=function PC(e,n,r){const s=r?n.classBindings:n.styleBindings;if(0!==rf(s))return e[qd(s)]}(e,n,s);void 0!==T&&Array.isArray(T)&&(T=HE(null,e,n,T[1],s),T=jm(T,n.attrs,s),function MC(e,n,r,s){e[qd(r?n.classBindings:n.styleBindings)]=s}(e,n,s,T))}else l=function NC(e,n,r){let s;const a=n.directiveEnd;for(let l=1+n.directiveStylingLast;l<a;l++)s=jm(s,e[l].hostAttrs,r);return jm(s,n.attrs,r)}(e,n,s)}return void 0!==l&&(s?n.residualClasses=l:n.residualStyles=l),r}(a,l,n,s),function yC(e,n,r,s,a,l){let p=l?n.classBindings:n.styleBindings,v=qd(p),T=rf(p);e[s]=r;let H,x=!1;if(Array.isArray(r)?(H=r[1],(null===H||Oi(r,H)>0)&&(x=!0)):H=r,a)if(0!==T){const Te=qd(e[v+1]);e[s+1]=Qy(Te,v),0!==Te&&(e[Te+1]=LE(e[Te+1],s)),e[v+1]=function mC(e,n){return 131071&e|n<<17}(e[v+1],s)}else e[s+1]=Qy(v,0),0!==v&&(e[v+1]=LE(e[v+1],s)),v=s;else e[s+1]=Qy(T,0),0===v?v=s:e[T+1]=LE(e[T+1],s),T=s;x&&(e[s+1]=FE(e[s+1])),Y0(e,H,s,!0),Y0(e,H,s,!1),function vC(e,n,r,s,a){const l=a?e.residualClasses:e.residualStyles;null!=l&&"string"==typeof n&&Oi(l,n)>=0&&(r[s+1]=UE(r[s+1]))}(n,H,e,s,l),p=Qy(v,T),l?n.classBindings=p:n.styleBindings=p}(a,l,n,r,p,s)}}(l,e,p,s),n!==sr&&os(a,p,n)&&function uw(e,n,r,s,a,l,p,v){if(!(3&n.type))return;const T=e.data,x=T[v+1],H=function _C(e){return!(1&~e)}(x)?cw(T,n,r,a,rf(x),p):void 0;Xy(H)||(Xy(l)||function gC(e){return!(2&~e)}(x)&&(l=cw(T,null,r,a,v,p)),function Xv(e,n,r,s,a){if(n)a?e.addClass(r,s):e.removeClass(r,s);else{let l=-1===s.indexOf("-")?void 0:Il.DashCase;null==a?e.removeStyle(r,s,l):("string"==typeof a&&a.endsWith("!important")&&(a=a.slice(0,-10),l|=Il.Important),e.setStyle(r,s,a,l))}}(s,p,cu(Fi(),r),a,l))}(l,l.data[Fi()],a,a[On],e,a[p+1]=function VC(e,n){return null==e||""===e||("string"==typeof n?e+=n:"object"==typeof e&&(e=Ie(va(e)))),e}(n,r),s,p)}(e,n,null,!0),$E}function HE(e,n,r,s,a){let l=null;const p=r.directiveEnd;let v=r.directiveStylingLast;for(-1===v?v=r.directiveStart:v++;v<p&&(l=n[v],s=jm(s,l.hostAttrs,a),l!==e);)v++;return null!==e&&(r.directiveStylingLast=v),s}function jm(e,n,r){const s=r?1:2;let a=-1;if(null!==n)for(let l=0;l<n.length;l++){const p=n[l];"number"==typeof p?a=p:a===s&&(Array.isArray(e)||(e=void 0===e?[]:["",e]),ei(e,p,!!r||n[++l]))}return void 0===e?null:e}function cw(e,n,r,s,a,l){const p=null===n;let v;for(;a>0;){const T=e[a],x=Array.isArray(T),H=x?T[1]:T,Z=null===H;let Te=r[a+1];Te===sr&&(Te=Z?ur:void 0);let Se=Z?Ca(Te,s):H===s?Te:void 0;if(x&&!Xy(Se)&&(Se=Ca(T,s)),Xy(Se)&&(v=Se,p))return v;const Ke=e[a+1];a=p?qd(Ke):rf(Ke)}if(null!==n){let T=l?n.residualClasses:n.residualStyles;null!=T&&(v=Ca(T,s))}return v}function Xy(e){return void 0!==e}function Yy(e,n,r,s){const a=yt(),l=lr(),p=kn+e,v=a[On],T=l.firstCreatePass?function sb(e,n,r,s,a,l){const p=n.consts,T=Lh(n,e,2,s,ha(p,a));return jt(n,r,T,ha(p,l)),null!==T.attrs&&Pl(T,T.attrs,!1),null!==T.mergedAttrs&&Pl(T,T.mergedAttrs,!0),null!==n.queries&&n.queries.elementStart(n,T),T}(p,l,a,n,r,s):l.data[p],x=pw(l,a,T,v,n,e);a[p]=x;const H=au(T);return ao(T,!0),Y_(v,x,T),!function Fm(e){return!(32&~e.flags)}(T)&&$a()&&im(l,a,x,T),0===function dc(){return _n.lFrame.elementDepthCount}()&&ui(x,a),function th(){_n.lFrame.elementDepthCount++}(),H&&(ey(l,a,T),dp(l,T,a)),null!==s&&ty(a,T),Yy}function Jy(){let e=Sr();rh()?function Qc(){_n.lFrame.isParent=!1}():(e=e.parent,ao(e,!1));const n=e;(function Ba(e){return _n.skipHydrationRootTNode===e})(n)&&function du(){_n.skipHydrationRootTNode=null}(),function Ua(){_n.lFrame.elementDepthCount--}();const r=lr();return r.firstCreatePass&&(pc(r,e),Bo(e)&&r.queries.elementEnd(e)),null!=n.classesWithoutHost&&function hg(e){return!!(8&e.flags)}(n)&&jE(r,n,yt(),n.classesWithoutHost,!0),null!=n.stylesWithoutHost&&function hh(e){return!!(16&e.flags)}(n)&&jE(r,n,yt(),n.stylesWithoutHost,!1),Jy}function qE(e,n,r,s){return Yy(e,n,r,s),Jy(),qE}let pw=(e,n,r,s,a,l)=>(Co(!0),_u(s,a,function ch(){return _n.lFrame.currentNamespace}()));function _w(){return yt()}const sf=void 0;var hb=["en",[["a","p"],["AM","PM"],sf],[["AM","PM"],sf,sf],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],sf,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],sf,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",sf,"{1} 'at' {0}",sf],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function db(e){const r=Math.floor(Math.abs(e)),s=e.toString().replace(/^[^.]*\.?/,"").length;return 1===r&&0===s?1:5}];let Jp={};function YE(e){const n=function fb(e){return e.toLowerCase().replace(/_/g,"-")}(e);let r=Iw(n);if(r)return r;const s=n.split("-")[0];if(r=Iw(s),r)return r;if("en"===s)return hb;throw new Pt(701,!1)}function Ew(e){return YE(e)[Zp.PluralCase]}function Iw(e){return e in Jp||(Jp[e]=En.ng&&En.ng.common&&En.ng.common.locales&&En.ng.common.locales[e]),Jp[e]}var Zp=function(e){return e[e.LocaleId=0]="LocaleId",e[e.DayPeriodsFormat=1]="DayPeriodsFormat",e[e.DayPeriodsStandalone=2]="DayPeriodsStandalone",e[e.DaysFormat=3]="DaysFormat",e[e.DaysStandalone=4]="DaysStandalone",e[e.MonthsFormat=5]="MonthsFormat",e[e.MonthsStandalone=6]="MonthsStandalone",e[e.Eras=7]="Eras",e[e.FirstDayOfWeek=8]="FirstDayOfWeek",e[e.WeekendRange=9]="WeekendRange",e[e.DateFormat=10]="DateFormat",e[e.TimeFormat=11]="TimeFormat",e[e.DateTimeFormat=12]="DateTimeFormat",e[e.NumberSymbols=13]="NumberSymbols",e[e.NumberFormats=14]="NumberFormats",e[e.CurrencyCode=15]="CurrencyCode",e[e.CurrencySymbol=16]="CurrencySymbol",e[e.CurrencyName=17]="CurrencyName",e[e.Currencies=18]="Currencies",e[e.Directionality=19]="Directionality",e[e.PluralCase=20]="PluralCase",e[e.ExtraData=21]="ExtraData",e}(Zp||{});const eg="en-US";let ww=eg;function eI(e,n,r,s){const a=yt(),l=lr(),p=Sr();return function tI(e,n,r,s,a,l,p){const v=au(s),x=e.firstCreatePass&&Us(e),H=n[zr],Z=Gu(n);let Te=!0;if(3&s.type||p){const It=Vs(s,n),Ht=p?p(It):It,Yt=Z.length,Mt=p?Br=>p(br(Br[s.index])):s.index;let Gn=null;if(!p&&v&&(Gn=function cS(e,n,r,s){const a=e.cleanup;if(null!=a)for(let l=0;l<a.length-1;l+=2){const p=a[l];if(p===r&&a[l+1]===s){const v=n[so],T=a[l+2];return v.length>T?v[T]:null}"string"==typeof p&&(l+=2)}return null}(e,n,a,s.index)),null!==Gn)(Gn.__ngLastListenerFn__||Gn).__ngNextListenerFn__=l,Gn.__ngLastListenerFn__=l,Te=!1;else{l=Xw(s,n,H,l,!1);const Br=r.listen(Ht,a,l);Z.push(l,Br),x&&x.push(a,Mt,Yt,Yt+1)}}else l=Xw(s,n,H,l,!1);const Se=s.outputs;let Ke;if(Te&&null!==Se&&(Ke=Se[a])){const It=Ke.length;if(It)for(let Ht=0;Ht<It;Ht+=2){const pi=n[Ke[Ht]][Ke[Ht+1]].subscribe(l),$s=Z.length;Z.push(l,pi),x&&x.push(a,s.index,$s,-($s+1))}}}(l,a,a[On],p,e,n,s),eI}function Qw(e,n,r,s){const a=le(null);try{return Xs(6,n,r),!1!==r(s)}catch(l){return Mc(e,l),!1}finally{Xs(7,n,r),le(a)}}function Xw(e,n,r,s,a){return function l(p){if(p===Function)return s;Cl(e.componentOffset>-1?ys(e.index,n):n);let T=Qw(n,r,s,p),x=l.__ngNextListenerFn__;for(;x;)T=Qw(n,r,x,p)&&T,x=x.__ngNextListenerFn__;return a&&!1===T&&p.preventDefault(),T}}function Yw(e=1){return function uh(e){return(_n.lFrame.contextLView=function Fl(e,n){for(;e>0;)n=n[iu],e--;return n}(e,_n.lFrame.contextLView))[zr]}(e)}function aT(e,n,r,s){QI(e,n,r,s)}function uT(e){const n=yt(),r=lr(),s=oh();Hl(s+1);const a=EE(r,s);if(e.dirty&&function Zd(e){return!(4&~e[pn])}(n)===!(2&~a.metadata.flags)){if(null===a.matches)e.reset([]);else{const l=YI(n,s);e.reset(l,Wo),e.notifyOnChanges()}return!0}return!1}function cT(){return function vE(e,n){return e[wo].queries[n].queryList}(yt(),oh())}function vT(e,n=""){const r=yt(),s=lr(),a=e+kn,l=s.firstCreatePass?Lh(s,a,1,n,null):s.data[a],p=ET(s,r,l,n,e);r[a]=p,$a()&&im(s,r,p,l),ao(l,!1)}let ET=(e,n,r,s,a)=>(Co(!0),function F_(e,n){return e.createText(n)}(n[On],s));function rI(e){return rv("",e,""),rI}function rv(e,n,r){const s=yt(),a=function Hp(e,n,r,s){return os(e,Ho(),r)?n+dn(r)+s:sr}(s,e,n,r);return a!==sr&&Qo(s,Fi(),a),rv}function iI(e,n,r,s,a){const l=yt(),p=Gp(l,e,n,r,s,a);return p!==sr&&Qo(l,Fi(),p),iI}function sI(e,n,r,s,a){if(e=G(e),Array.isArray(e))for(let l=0;l<e.length;l++)sI(e[l],n,r,s,a);else{const l=lr(),p=yt(),v=Sr();let T=ts(e)?e:G(e.provide);const x=wu(e),H=1048575&v.providerIndexes,Z=v.directiveStart,Te=v.providerIndexes>>20;if(ts(e)||!e.multi){const Se=new xu(x,a,Fh),Ke=aI(T,n,a?H:H+Te,Z);-1===Ke?(gc(Xl(v,p),l,T),oI(l,e,n.length),n.push(T),v.directiveStart++,v.directiveEnd++,a&&(v.providerIndexes+=1048576),r.push(Se),p.push(Se)):(r[Ke]=Se,p[Ke]=Se)}else{const Se=aI(T,n,H+Te,Z),Ke=aI(T,n,H,H+Te),Ht=Ke>=0&&r[Ke];if(a&&!Ht||!a&&!(Se>=0&&r[Se])){gc(Xl(v,p),l,T);const Yt=function OS(e,n,r,s,a){const l=new xu(e,r,Fh);return l.multi=[],l.index=n,l.componentProviders=0,PT(l,a,s&&!r),l}(a?xS:NS,r.length,a,s,x);!a&&Ht&&(r[Ke].providerFactory=Yt),oI(l,e,n.length,0),n.push(T),v.directiveStart++,v.directiveEnd++,a&&(v.providerIndexes+=1048576),r.push(Yt),p.push(Yt)}else oI(l,e,Se>-1?Se:Ke,PT(r[a?Ke:Se],x,!a&&s));!a&&s&&Ht&&r[Ke].componentProviders++}}}function oI(e,n,r,s){const a=ts(n),l=function sc(e){return!!e.useClass}(n);if(a||l){const T=(l?G(n.useClass):n).prototype.ngOnDestroy;if(T){const x=e.destroyHooks||(e.destroyHooks=[]);if(!a&&n.multi){const H=x.indexOf(r);-1===H?x.push(r,[s,T]):x[H+1].push(s,T)}else x.push(r,T)}}}function PT(e,n,r){return r&&e.componentProviders++,e.multi.push(n)-1}function aI(e,n,r,s){for(let a=r;a<s;a++)if(n[a]===e)return a;return-1}function NS(e,n,r,s){return uI(this.multi,[])}function xS(e,n,r,s){const a=this.multi;let l;if(this.providerFactory){const p=this.providerFactory.componentProviders,v=ku(r,r[Lt],this.providerFactory.index,s);l=v.slice(0,p),uI(a,l);for(let T=p;T<v.length;T++)l.push(v[T])}else l=[],uI(a,l);return l}function uI(e,n){for(let r=0;r<e.length;r++)n.push((0,e[r])());return n}function MT(e,n=[]){return r=>{r.providersResolver=(s,a)=>function MS(e,n,r){const s=lr();if(s.firstCreatePass){const a=Qs(e);sI(r,s.data,s.blueprint,a,!0),sI(n,s.data,s.blueprint,a,!1)}}(s,a?a(e):e,n)}}let kS=(()=>{class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){const s=na(0,r.type),a=s.length>0?AE([s],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,a)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(const r of this.cachedInjectors.values())null!==r&&r.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=Wn({token:e,providedIn:"environment",factory:()=>new e($r(Ns))})}}return e})();function NT(e){Po("NgStandalone"),e.getStandaloneInjector=n=>n.get(kS).getOrCreateStandaloneInjector(e)}function OT(e,n,r,s){return function VT(e,n,r,s,a,l){const p=n+r;return os(e,p,a)?Uc(e,p+1,l?s.call(l,a):s(a)):qm(e,p+1)}(yt(),ki(),e,n,r,s)}function kT(e,n,r,s,a,l){return function LT(e,n,r,s,a,l,p,v){const T=n+r;return function Hy(e,n,r,s,a){const l=tf(e,n,r,s);return os(e,n+2,a)||l}(e,T,a,l,p)?Uc(e,T+3,v?s.call(v,a,l,p):s(a,l,p)):qm(e,T+3)}(yt(),ki(),e,n,r,s,a,l)}function qm(e,n){const r=e[n];return r===sr?void 0:r}function jT(e,n){const r=lr();let s;const a=e+kn;r.firstCreatePass?(s=function WS(e,n){if(n)for(let r=n.length-1;r>=0;r--){const s=n[r];if(e===s.name)return s}}(n,r.pipeRegistry),r.data[a]=s,s.onDestroy&&(r.destroyHooks??=[]).push(a,s.onDestroy)):s=r.data[a];const l=s.factory||(s.factory=ir(s.type)),v=mi(Fh);try{const T=bo(!1),x=l();return bo(T),function _S(e,n,r,s){r>=e.data.length&&(e.data[r]=null,e.blueprint[r]=null),n[r]=s}(r,yt(),a,x),x}finally{mi(v)}}function $T(e,n,r,s){const a=e+kn,l=yt(),p=function Fa(e,n){return e[n]}(l,a);return function Qm(e,n){return e[Lt].data[n].pure}(l,a)?function FT(e,n,r,s,a,l,p){const v=n+r;return tf(e,v,a,l)?Uc(e,v+2,p?s.call(p,a,l):s(a,l)):qm(e,v+2)}(l,ki(),n,p.transform,r,s,p):p.transform(r,s)}class iD{constructor(n){this.full=n;const r=n.split(".");this.major=r[0],this.minor=r[1],this.patch=r.slice(2).join(".")}}const vR=new iD("17.3.12");let sD=(()=>{class e{log(r){console.log(r)}warn(r){console.warn(r)}static{this.\u0275fac=function(s){return new(s||e)}}static{this.\u0275prov=Wn({token:e,factory:e.\u0275fac,providedIn:"platform"})}}return e})();const lD=new je(""),dD=new je("");let pI,zR=(()=>{class e{constructor(r,s,a){this._ngZone=r,this.registry=s,this._pendingCount=0,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,pI||(function WR(e){pI=e}(a),a.addToWindow(s)),this._watchAngularEvents(),r.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ki.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let r=this._callbacks.pop();clearTimeout(r.timeoutId),r.doneCb()}});else{let r=this.getPendingTasks();this._callbacks=this._callbacks.filter(s=>!s.updateCb||!s.updateCb(r)||(clearTimeout(s.timeoutId),!1))}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(r=>({source:r.source,creationLocation:r.creationLocation,data:r.data})):[]}addCallback(r,s,a){let l=-1;s&&s>0&&(l=setTimeout(()=>{this._callbacks=this._callbacks.filter(p=>p.timeoutId!==l),r()},s)),this._callbacks.push({doneCb:r,timeoutId:l,updateCb:a})}whenStable(r,s,a){if(a&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(r,s,a),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(r){this.registry.registerApplication(r,this)}unregisterApplication(r){this.registry.unregisterApplication(r)}findProviders(r,s,a){return[]}static{this.\u0275fac=function(s){return new(s||e)($r(Ki),$r(hD),$r(dD))}}static{this.\u0275prov=Wn({token:e,factory:e.\u0275fac})}}return e})(),hD=(()=>{class e{constructor(){this._applications=new Map}registerApplication(r,s){this._applications.set(r,s)}unregisterApplication(r){this._applications.delete(r)}unregisterAllApplications(){this._applications.clear()}getTestability(r){return this._applications.get(r)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(r,s=!0){return pI?.findTestabilityInTree(this,r,s)??null}static{this.\u0275fac=function(s){return new(s||e)}}static{this.\u0275prov=Wn({token:e,factory:e.\u0275fac,providedIn:"platform"})}}return e})();function gI(e){return!!e&&"function"==typeof e.then}function fD(e){return!!e&&"function"==typeof e.subscribe}const pD=new je("");let mI=(()=>{class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,s)=>{this.resolve=r,this.reject=s}),this.appInits=Pn(pD,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const r=[];for(const a of this.appInits){const l=a();if(gI(l))r.push(l);else if(fD(l)){const p=new Promise((v,T)=>{l.subscribe({complete:v,error:T})});r.push(p)}}const s=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{s()}).catch(a=>{this.reject(a)}),0===r.length&&s(),this.initialized=!0}static{this.\u0275fac=function(s){return new(s||e)}}static{this.\u0275prov=Wn({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();const _I=new je("");function _D(e,n){return Array.isArray(n)?n.reduce(_D,e):{...e,...n}}let Qd=(()=>{class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Pn(Af),this.afterRenderEffectManager=Pn(Hd),this.externalTestViews=new Set,this.beforeRender=new $e.B,this.afterTick=new $e.B,this.componentTypes=[],this.components=[],this.isStable=Pn(Op).hasPendingTasks.pipe((0,dt.T)(r=>!r)),this._injector=Pn(Ns)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,s){const a=r instanceof Qh;if(!this._injector.get(mI).done)throw!a&&Qr(r),new Pt(405,!1);let p;p=a?r:this._injector.get(Fc).resolveComponentFactory(r),this.componentTypes.push(p.componentType);const v=function KR(e){return e.isBoundToModule}(p)?void 0:this._injector.get(ef),x=p.create(ai.NULL,[],s||p.selector,v),H=x.location.nativeElement,Z=x.injector.get(lD,null);return Z?.registerApplication(H),x.onDestroy(()=>{this.detachView(x.hostView),av(this.components,x),Z?.unregisterApplication(H)}),this._loadComponent(x),x}tick(){this._tick(!0)}_tick(r){if(this._runningTick)throw new Pt(101,!1);const s=le(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(r)}catch(a){this.internalErrorHandler(a)}finally{this.afterTick.next(),this._runningTick=!1,le(s)}}detectChangesInAttachedViews(r){let s=0;const a=this.afterRenderEffectManager;for(;;){if(s===_p)throw new Pt(103,!1);if(r){const l=0===s;this.beforeRender.next(l);for(let{_lView:p,notifyErrorHandler:v}of this._views)QR(p,l,v)}if(s++,a.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:l})=>yI(l))&&(a.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:l})=>yI(l))))break}}attachView(r){const s=r;this._views.push(s),s.attachToAppRef(this)}detachView(r){const s=r;av(this._views,s),s.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);const s=this._injector.get(_I,[]);[...this._bootstrapListeners,...s].forEach(a=>a(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>av(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new Pt(406,!1);const r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(s){return new(s||e)}}static{this.\u0275prov=Wn({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function av(e,n){const r=e.indexOf(n);r>-1&&e.splice(r,1)}function QR(e,n,r){!n&&!yI(e)||function XR(e,n,r){let s;r?(s=0,e[pn]|=1024):s=64&e[pn]?0:1,xd(e,n,s)}(e,r,n)}function yI(e){return lc(e)}class YR{constructor(n,r){this.ngModuleFactory=n,this.componentFactories=r}}let JR=(()=>{class e{compileModuleSync(r){return new DE(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){const s=this.compileModuleSync(r),l=qo(fi(r).declarations).reduce((p,v)=>{const T=Ln(v);return T&&p.push(new Gd(T)),p},[]);return new YR(s,l)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}static{this.\u0275fac=function(s){return new(s||e)}}static{this.\u0275prov=Wn({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),tP=(()=>{class e{constructor(){this.zone=Pn(Ki),this.applicationRef=Pn(Qd)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(s){return new(s||e)}}static{this.\u0275prov=Wn({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function nP(){const e=Pn(Ki),n=Pn(uo);return r=>e.runOutsideAngular(()=>n.handleError(r))}let iP=(()=>{class e{constructor(){this.subscription=new gt.yU,this.initialized=!1,this.zone=Pn(Ki),this.pendingTasks=Pn(Op)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Ki.assertNotInAngularZone(),queueMicrotask(()=>{null!==r&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Ki.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(s){return new(s||e)}}static{this.\u0275prov=Wn({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();const cv=new je("",{providedIn:"root",factory:()=>Pn(cv,Xn.Optional|Xn.SkipSelf)||function sP(){return typeof $localize<"u"&&$localize.locale||eg}()}),oP=new je("",{providedIn:"root",factory:()=>"USD"}),vI=new je("");let ID=(()=>{class e{constructor(r){this._injector=r,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(r,s){const a=function Sy(e="zone.js",n){return"noop"===e?new jd:"zone.js"===e?new Ki(n):e}(s?.ngZone,function ED(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}({eventCoalescing:s?.ngZoneEventCoalescing,runCoalescing:s?.ngZoneRunCoalescing}));return a.run(()=>{const l=function SA(e,n,r){return new TE(e,n,r)}(r.moduleType,this.injector,function vD(e){return[{provide:Ki,useFactory:e},{provide:go,multi:!0,useFactory:()=>{const n=Pn(tP,{optional:!0});return()=>n.initialize()}},{provide:go,multi:!0,useFactory:()=>{const n=Pn(iP);return()=>{n.initialize()}}},{provide:Af,useFactory:nP}]}(()=>a)),p=l.injector.get(uo,null);return a.runOutsideAngular(()=>{const v=a.onError.subscribe({next:T=>{p.handleError(T)}});l.onDestroy(()=>{av(this._modules,l),v.unsubscribe()})}),function mD(e,n,r){try{const s=r();return gI(s)?s.catch(a=>{throw n.runOutsideAngular(()=>e.handleError(a)),a}):s}catch(s){throw n.runOutsideAngular(()=>e.handleError(s)),s}}(p,a,()=>{const v=l.injector.get(mI);return v.runInitializers(),v.donePromise.then(()=>(function Tw(e){"string"==typeof e&&(ww=e.toLowerCase().replace(/_/g,"-"))}(l.injector.get(cv,eg)||eg),this._moduleDoBootstrap(l),l))})})}bootstrapModule(r,s=[]){const a=_D({},s);return function eP(e,n,r){const s=new DE(r);return Promise.resolve(s)}(0,0,r).then(l=>this.bootstrapModuleFactory(l,a))}_moduleDoBootstrap(r){const s=r.injector.get(Qd);if(r._bootstrapComponents.length>0)r._bootstrapComponents.forEach(a=>s.bootstrap(a));else{if(!r.instance.ngDoBootstrap)throw new Pt(-403,!1);r.instance.ngDoBootstrap(s)}this._modules.push(r)}onDestroy(r){this._destroyListeners.push(r)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Pt(404,!1);this._modules.slice().forEach(s=>s.destroy()),this._destroyListeners.forEach(s=>s());const r=this._injector.get(vI,null);r&&(r.forEach(s=>s()),r.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static{this.\u0275fac=function(s){return new(s||e)($r(ai))}}static{this.\u0275prov=Wn({token:e,factory:e.\u0275fac,providedIn:"platform"})}}return e})(),Xd=null;const wD=new je("");function TD(e,n,r=[]){const s=`Platform: ${n}`,a=new je(s);return(l=[])=>{let p=EI();if(!p||p.injector.get(wD,!1)){const v=[...r,...l,{provide:a,useValue:!0}];e?e(v):function uP(e){if(Xd&&!Xd.get(wD,!1))throw new Pt(400,!1);(function gD(){!function Ae(e){Bn=e}(()=>{throw new Pt(600,!1)})})(),Xd=e;const n=e.get(ID);(function AD(e){e.get(o_,null)?.forEach(r=>r())})(e)}(function DD(e=[],n){return ai.create({name:n,providers:[{provide:Ks,useValue:"platform"},{provide:vI,useValue:new Set([()=>Xd=null])},...e]})}(v,s))}return function cP(e){const n=EI();if(!n)throw new Pt(401,!1);return n}()}}function EI(){return Xd?.get(ID)??null}function dP(){return!1}let bD=(()=>{class e{static{this.__NG_ELEMENT_ID__=hP}}return e})();function hP(e){return function fP(e,n,r){if(jo(e)&&!r){const s=ys(e.index,n);return new jh(s,s)}return 47&e.type?new jh(n[Wr],n):null}(Sr(),yt(),!(16&~e))}class MD{constructor(){}supports(n){return $y(n)}create(n){return new yP(n)}}const _P=(e,n)=>n;class yP{constructor(n){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=n||_P}forEachItem(n){let r;for(r=this._itHead;null!==r;r=r._next)n(r)}forEachOperation(n){let r=this._itHead,s=this._removalsHead,a=0,l=null;for(;r||s;){const p=!s||r&&r.currentIndex<xD(s,a,l)?r:s,v=xD(p,a,l),T=p.currentIndex;if(p===s)a--,s=s._nextRemoved;else if(r=r._next,null==p.previousIndex)a++;else{l||(l=[]);const x=v-a,H=T-a;if(x!=H){for(let Te=0;Te<x;Te++){const Se=Te<l.length?l[Te]:l[Te]=0,Ke=Se+Te;H<=Ke&&Ke<x&&(l[Te]=Se+1)}l[p.previousIndex]=H-x}}v!==T&&n(p,v,T)}}forEachPreviousItem(n){let r;for(r=this._previousItHead;null!==r;r=r._nextPrevious)n(r)}forEachAddedItem(n){let r;for(r=this._additionsHead;null!==r;r=r._nextAdded)n(r)}forEachMovedItem(n){let r;for(r=this._movesHead;null!==r;r=r._nextMoved)n(r)}forEachRemovedItem(n){let r;for(r=this._removalsHead;null!==r;r=r._nextRemoved)n(r)}forEachIdentityChange(n){let r;for(r=this._identityChangesHead;null!==r;r=r._nextIdentityChange)n(r)}diff(n){if(null==n&&(n=[]),!$y(n))throw new Pt(900,!1);return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let a,l,p,r=this._itHead,s=!1;if(Array.isArray(n)){this.length=n.length;for(let v=0;v<this.length;v++)l=n[v],p=this._trackByFn(v,l),null!==r&&Object.is(r.trackById,p)?(s&&(r=this._verifyReinsertion(r,l,p,v)),Object.is(r.item,l)||this._addIdentityChange(r,l)):(r=this._mismatch(r,l,p,v),s=!0),r=r._next}else a=0,function NA(e,n){if(Array.isArray(e))for(let r=0;r<e.length;r++)n(e[r]);else{const r=e[Symbol.iterator]();let s;for(;!(s=r.next()).done;)n(s.value)}}(n,v=>{p=this._trackByFn(a,v),null!==r&&Object.is(r.trackById,p)?(s&&(r=this._verifyReinsertion(r,v,p,a)),Object.is(r.item,v)||this._addIdentityChange(r,v)):(r=this._mismatch(r,v,p,a),s=!0),r=r._next,a++}),this.length=a;return this._truncate(r),this.collection=n,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let n;for(n=this._previousItHead=this._itHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._additionsHead;null!==n;n=n._nextAdded)n.previousIndex=n.currentIndex;for(this._additionsHead=this._additionsTail=null,n=this._movesHead;null!==n;n=n._nextMoved)n.previousIndex=n.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(n,r,s,a){let l;return null===n?l=this._itTail:(l=n._prev,this._remove(n)),null!==(n=null===this._unlinkedRecords?null:this._unlinkedRecords.get(s,null))?(Object.is(n.item,r)||this._addIdentityChange(n,r),this._reinsertAfter(n,l,a)):null!==(n=null===this._linkedRecords?null:this._linkedRecords.get(s,a))?(Object.is(n.item,r)||this._addIdentityChange(n,r),this._moveAfter(n,l,a)):n=this._addAfter(new vP(r,s),l,a),n}_verifyReinsertion(n,r,s,a){let l=null===this._unlinkedRecords?null:this._unlinkedRecords.get(s,null);return null!==l?n=this._reinsertAfter(l,n._prev,a):n.currentIndex!=a&&(n.currentIndex=a,this._addToMoves(n,a)),n}_truncate(n){for(;null!==n;){const r=n._next;this._addToRemovals(this._unlink(n)),n=r}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(n,r,s){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(n);const a=n._prevRemoved,l=n._nextRemoved;return null===a?this._removalsHead=l:a._nextRemoved=l,null===l?this._removalsTail=a:l._prevRemoved=a,this._insertAfter(n,r,s),this._addToMoves(n,s),n}_moveAfter(n,r,s){return this._unlink(n),this._insertAfter(n,r,s),this._addToMoves(n,s),n}_addAfter(n,r,s){return this._insertAfter(n,r,s),this._additionsTail=null===this._additionsTail?this._additionsHead=n:this._additionsTail._nextAdded=n,n}_insertAfter(n,r,s){const a=null===r?this._itHead:r._next;return n._next=a,n._prev=r,null===a?this._itTail=n:a._prev=n,null===r?this._itHead=n:r._next=n,null===this._linkedRecords&&(this._linkedRecords=new ND),this._linkedRecords.put(n),n.currentIndex=s,n}_remove(n){return this._addToRemovals(this._unlink(n))}_unlink(n){null!==this._linkedRecords&&this._linkedRecords.remove(n);const r=n._prev,s=n._next;return null===r?this._itHead=s:r._next=s,null===s?this._itTail=r:s._prev=r,n}_addToMoves(n,r){return n.previousIndex===r||(this._movesTail=null===this._movesTail?this._movesHead=n:this._movesTail._nextMoved=n),n}_addToRemovals(n){return null===this._unlinkedRecords&&(this._unlinkedRecords=new ND),this._unlinkedRecords.put(n),n.currentIndex=null,n._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=n,n._prevRemoved=null):(n._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=n),n}_addIdentityChange(n,r){return n.item=r,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=n:this._identityChangesTail._nextIdentityChange=n,n}}class vP{constructor(n,r){this.item=n,this.trackById=r,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class EP{constructor(){this._head=null,this._tail=null}add(n){null===this._head?(this._head=this._tail=n,n._nextDup=null,n._prevDup=null):(this._tail._nextDup=n,n._prevDup=this._tail,n._nextDup=null,this._tail=n)}get(n,r){let s;for(s=this._head;null!==s;s=s._nextDup)if((null===r||r<=s.currentIndex)&&Object.is(s.trackById,n))return s;return null}remove(n){const r=n._prevDup,s=n._nextDup;return null===r?this._head=s:r._nextDup=s,null===s?this._tail=r:s._prevDup=r,null===this._head}}class ND{constructor(){this.map=new Map}put(n){const r=n.trackById;let s=this.map.get(r);s||(s=new EP,this.map.set(r,s)),s.add(n)}get(n,r){const a=this.map.get(n);return a?a.get(n,r):null}remove(n){const r=n.trackById;return this.map.get(r).remove(n)&&this.map.delete(r),n}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function xD(e,n,r){const s=e.previousIndex;if(null===s)return s;let a=0;return r&&s<r.length&&(a=r[s]),s+n+a}class OD{constructor(){}supports(n){return n instanceof Map||CE(n)}create(){return new IP}}class IP{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(n){let r;for(r=this._mapHead;null!==r;r=r._next)n(r)}forEachPreviousItem(n){let r;for(r=this._previousMapHead;null!==r;r=r._nextPrevious)n(r)}forEachChangedItem(n){let r;for(r=this._changesHead;null!==r;r=r._nextChanged)n(r)}forEachAddedItem(n){let r;for(r=this._additionsHead;null!==r;r=r._nextAdded)n(r)}forEachRemovedItem(n){let r;for(r=this._removalsHead;null!==r;r=r._nextRemoved)n(r)}diff(n){if(n){if(!(n instanceof Map||CE(n)))throw new Pt(900,!1)}else n=new Map;return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let r=this._mapHead;if(this._appendAfter=null,this._forEach(n,(s,a)=>{if(r&&r.key===a)this._maybeAddToChanges(r,s),this._appendAfter=r,r=r._next;else{const l=this._getOrCreateRecordForKey(a,s);r=this._insertBeforeOrAppend(r,l)}}),r){r._prev&&(r._prev._next=null),this._removalsHead=r;for(let s=r;null!==s;s=s._nextRemoved)s===this._mapHead&&(this._mapHead=null),this._records.delete(s.key),s._nextRemoved=s._next,s.previousValue=s.currentValue,s.currentValue=null,s._prev=null,s._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(n,r){if(n){const s=n._prev;return r._next=n,r._prev=s,n._prev=r,s&&(s._next=r),n===this._mapHead&&(this._mapHead=r),this._appendAfter=n,n}return this._appendAfter?(this._appendAfter._next=r,r._prev=this._appendAfter):this._mapHead=r,this._appendAfter=r,null}_getOrCreateRecordForKey(n,r){if(this._records.has(n)){const a=this._records.get(n);this._maybeAddToChanges(a,r);const l=a._prev,p=a._next;return l&&(l._next=p),p&&(p._prev=l),a._next=null,a._prev=null,a}const s=new wP(n);return this._records.set(n,s),s.currentValue=r,this._addToAdditions(s),s}_reset(){if(this.isDirty){let n;for(this._previousMapHead=this._mapHead,n=this._previousMapHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._changesHead;null!==n;n=n._nextChanged)n.previousValue=n.currentValue;for(n=this._additionsHead;null!=n;n=n._nextAdded)n.previousValue=n.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(n,r){Object.is(r,n.currentValue)||(n.previousValue=n.currentValue,n.currentValue=r,this._addToChanges(n))}_addToAdditions(n){null===this._additionsHead?this._additionsHead=this._additionsTail=n:(this._additionsTail._nextAdded=n,this._additionsTail=n)}_addToChanges(n){null===this._changesHead?this._changesHead=this._changesTail=n:(this._changesTail._nextChanged=n,this._changesTail=n)}_forEach(n,r){n instanceof Map?n.forEach(r):Object.keys(n).forEach(s=>r(n[s],s))}}class wP{constructor(n){this.key=n,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function kD(){return new AI([new MD])}let AI=(()=>{class e{static{this.\u0275prov=Wn({token:e,providedIn:"root",factory:kD})}constructor(r){this.factories=r}static create(r,s){if(null!=s){const a=s.factories.slice();r=r.concat(a)}return new e(r)}static extend(r){return{provide:e,useFactory:s=>e.create(r,s||kD()),deps:[[e,new vr,new ps]]}}find(r){const s=this.factories.find(a=>a.supports(r));if(null!=s)return s;throw new Pt(901,!1)}}return e})();function VD(){return new CI([new OD])}let CI=(()=>{class e{static{this.\u0275prov=Wn({token:e,providedIn:"root",factory:VD})}constructor(r){this.factories=r}static create(r,s){if(s){const a=s.factories.slice();r=r.concat(a)}return new e(r)}static extend(r){return{provide:e,useFactory:s=>e.create(r,s||VD()),deps:[[e,new vr,new ps]]}}find(r){const s=this.factories.find(a=>a.supports(r));if(s)return s;throw new Pt(901,!1)}}return e})();const AP=TD(null,"core",[]);let CP=(()=>{class e{constructor(r){}static{this.\u0275fac=function(s){return new(s||e)($r(Qd))}}static{this.\u0275mod=tc({type:e})}static{this.\u0275inj=cs({})}}return e})();function tM(e){return"boolean"==typeof e?e:null!=e&&"false"!==e}function rM(e){const n=le(null);try{return e()}finally{le(n)}}function cM(e){const n=Ln(e);if(!n)return null;const r=new Gd(n);return{get selector(){return r.selector},get type(){return r.componentType},get inputs(){return r.inputs},get outputs(){return r.outputs},get ngContentSelectors(){return r.ngContentSelectors},get isStandalone(){return n.standalone},get isSignal(){return n.signals}}}},1182:(on,rt,$)=>{$.d(rt,{DS:()=>Me,X8:()=>Ne,$z:()=>Ae,UB:()=>Jt,yy:()=>Bn,ZP:()=>Ze,AU:()=>Pe,CP:()=>Ct,gF:()=>Re}),$(7955);var V=$(177),oe=$(4438),ne=$(1825),k=$(9253),Ue=$(1413),le=$(7673),Qe=$(1985),We=$(8455),pe=$(6365),fe=$(8750),Be=$(983),At=$(3794),xt=$(941),qt=$(5558),$t=$(6354),Nt=$(6129);class un extends Ue.B{constructor(He=1/0,lt=1/0,bt=Nt.U){super(),this._bufferSize=He,this._windowTime=lt,this._timestampProvider=bt,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=lt===1/0,this._bufferSize=Math.max(1,He),this._windowTime=Math.max(1,lt)}next(He){const{isStopped:lt,_buffer:bt,_infiniteTimeWindow:cn,_timestampProvider:Zt,_windowTime:Wt}=this;lt||(bt.push(He),!cn&&bt.push(Zt.now()+Wt)),this._trimBuffer(),super.next(He)}_subscribe(He){this._throwIfClosed(),this._trimBuffer();const lt=this._innerSubscribe(He),{_infiniteTimeWindow:bt,_buffer:cn}=this,Zt=cn.slice();for(let Wt=0;Wt<Zt.length&&!He.closed;Wt+=bt?1:2)He.next(Zt[Wt]);return this._checkFinalizedStatuses(He),lt}_trimBuffer(){const{_bufferSize:He,_timestampProvider:lt,_buffer:bt,_infiniteTimeWindow:cn}=this,Zt=(cn?1:2)*He;if(He<1/0&&Zt<bt.length&&bt.splice(0,bt.length-Zt),!cn){const Wt=lt.now();let $e=0;for(let gt=1;gt<bt.length&&bt[gt]<=Wt;gt+=2)$e=gt;$e&&bt.splice(0,$e+1)}}}var ln=$(7707),vt=$(9974);function at(ye,He,...lt){if(!0===He)return void ye();if(!1===He)return;const bt=new ln.Ms({next:()=>{bt.unsubscribe(),ye()}});return He(...lt).subscribe(bt)}function Dt(ye,He,lt){let bt,cn=!1;return ye&&"object"==typeof ye?({bufferSize:bt=1/0,windowTime:He=1/0,refCount:cn=!1,scheduler:lt}=ye):bt=ye??1/0,function he(ye={}){const{connector:He=(()=>new Ue.B),resetOnError:lt=!0,resetOnComplete:bt=!0,resetOnRefCountZero:cn=!0}=ye;return Zt=>{let Wt,$e,gt,ct=0,dt=!1,ht=!1;const ot=()=>{$e?.unsubscribe(),$e=void 0},Pt=()=>{ot(),Wt=gt=void 0,dt=ht=!1},Xt=()=>{const zn=Wt;Pt(),zn?.unsubscribe()};return(0,vt.N)((zn,Dn)=>{ct++,!ht&&!dt&&ot();const Ot=gt=gt??He();Dn.add(()=>{ct--,0===ct&&!ht&&!dt&&($e=at(Xt,cn))}),Ot.subscribe(Dn),!Wt&&ct>0&&(Wt=new ln.Ms({next:mr=>Ot.next(mr),error:mr=>{ht=!0,ot(),$e=at(Pt,lt,mr),Ot.error(mr)},complete:()=>{dt=!0,ot(),$e=at(Pt,bt),Ot.complete()}}),(0,fe.Tg)(zn).subscribe(Wt))})(Zt)}}({connector:()=>new un(bt,He,lt),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:cn})}var ut=$(1594),Ut=$(8071);function be(ye,He){return(0,Ut.T)(He)?(0,qt.n)(()=>ye,He):(0,qt.n)(()=>ye)}var Xe=$(6745),rn=$(5964),bn=$(7935);const Ct=new oe.nKC("angularfire2.auth.use-emulator"),Bn=new oe.nKC("angularfire2.auth.settings"),Ze=new oe.nKC("angularfire2.auth.tenant-id"),Ae=new oe.nKC("angularfire2.auth.langugage-code"),Pe=new oe.nKC("angularfire2.auth.use-device-language"),Jt=new oe.nKC("angularfire.auth.persistence"),Re=(ye,He,lt,bt,cn,Zt,Wt,$e)=>(0,k.BM)(`${ye.name}.auth`,"AngularFireAuth",ye.name,()=>{const gt=He.runOutsideAngular(()=>ye.auth());if(lt&&gt.useEmulator(...lt),bt&&(gt.tenantId=bt),gt.languageCode=cn,Zt&&gt.useDeviceLanguage(),Wt)for(const[ct,dt]of Object.entries(Wt))gt.settings[ct]=dt;return $e&&gt.setPersistence($e),gt},[lt,bt,cn,Zt,Wt,$e]);let Me=(()=>{class ye{authState;idToken;user;idTokenResult;credential;constructor(lt,bt,cn,Zt,Wt,$e,gt,ct,dt,ht,ot,Pt){const Xt=new Ue.B,zn=(0,le.of)(void 0).pipe((0,xt.Q)(Wt.outsideAngular),(0,qt.n)(()=>Zt.runOutsideAngular(()=>Promise.resolve().then($.bind($,7955)))),(0,$t.T)(()=>(0,k.iB)(lt,Zt,bt)),(0,$t.T)(Dn=>Re(Dn,Zt,$e,ct,dt,ht,gt,ot)),Dt({bufferSize:1,refCount:!1}));if((0,V.Vy)(cn))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,le.of)(null);else{zn.pipe((0,ut.$)()).subscribe();const Dn=zn.pipe((0,qt.n)(Nn=>Nn.getRedirectResult().then(an=>an,()=>null)),ne.U0,Dt({bufferSize:1,refCount:!1})),Ot=zn.pipe((0,qt.n)(Nn=>new Qe.c(an=>({unsubscribe:Zt.runOutsideAngular(()=>Nn.onAuthStateChanged(mn=>an.next(mn),mn=>an.error(mn),()=>an.complete()))})))),mr=zn.pipe((0,qt.n)(Nn=>new Qe.c(an=>({unsubscribe:Zt.runOutsideAngular(()=>Nn.onIdTokenChanged(mn=>an.next(mn),mn=>an.error(mn),()=>an.complete()))}))));this.authState=Dn.pipe(be(Ot),(0,Xe._)(Wt.outsideAngular),(0,xt.Q)(Wt.insideAngular)),this.user=Dn.pipe(be(mr),(0,Xe._)(Wt.outsideAngular),(0,xt.Q)(Wt.insideAngular)),this.idToken=this.user.pipe((0,qt.n)(Nn=>Nn?(0,We.H)(Nn.getIdToken()):(0,le.of)(null))),this.idTokenResult=this.user.pipe((0,qt.n)(Nn=>Nn?(0,We.H)(Nn.getIdTokenResult()):(0,le.of)(null))),this.credential=function Je(...ye){const He=(0,At.lI)(ye),lt=(0,At.R0)(ye,1/0),bt=ye;return bt.length?1===bt.length?(0,fe.Tg)(bt[0]):(0,pe.U)(lt)((0,We.H)(bt,He)):Be.w}(Dn,Xt,this.authState.pipe((0,rn.p)(Nn=>!Nn))).pipe((0,$t.T)(Nn=>Nn?.user?Nn:null),(0,Xe._)(Wt.outsideAngular),(0,xt.Q)(Wt.insideAngular))}return(0,k.Gt)(this,zn,Zt,{spy:{apply:(Dn,Ot,mr)=>{(Dn.startsWith("signIn")||Dn.startsWith("createUser"))&&mr.then(Nn=>Xt.next(Nn))}}})}static \u0275fac=function(bt){return new(bt||ye)(oe.KVO(k.rx),oe.KVO(k.uP,8),oe.KVO(oe.Agw),oe.KVO(oe.SKi),oe.KVO(ne.u0),oe.KVO(Ct,8),oe.KVO(Bn,8),oe.KVO(Ze,8),oe.KVO(Ae,8),oe.KVO(Pe,8),oe.KVO(Jt,8),oe.KVO(ne.Jv,8))};static \u0275prov=oe.jDH({token:ye,factory:ye.\u0275fac,providedIn:"any"})}return ye})(),Ne=(()=>{class ye{constructor(){bn.A.registerVersion("angularfire",ne.xv.full,"auth-compat")}static \u0275fac=function(bt){return new(bt||ye)};static \u0275mod=oe.$C({type:ye});static \u0275inj=oe.G2t({providers:[Me]})}return ye})()},5090:(on,rt,$)=>{$.d(rt,{Qe:()=>or,cM:()=>ri});var m=$(177),V=$(4438),oe=$(1825),ne=$(9253),k=$(1182),Ue=$(3236),le=$(1985),Qe=$(8455),We=$(7673),pe=$(9172),fe=$(9974),Be=$(4360);function At(){return(0,fe.N)((mt,Y)=>{let G,te=!1;mt.subscribe((0,Be._)(Y,J=>{const Ee=G;G=J,te&&Y.next([Ee,J]),te=!0}))})}var Je=$(6354),xt=$(2816),qt=$(3669);function Nt(mt,Y){return mt===Y}var un=$(5964),vt=($(7955),$(3345)),he=$(9583),at=$(1076),Dt=$(1362);function be(mt,Y){if(void 0===Y)return{merge:!1};if(void 0!==Y.mergeFields&&void 0!==Y.merge)throw new he.W6("invalid-argument",`Invalid options passed to function ${mt}(): You cannot specify both "merge" and "mergeFields".`);return Y}function Xe(){if(typeof Uint8Array>"u")throw new he.W6("unimplemented","Uint8Arrays are not available in this environment.")}function rn(){if(!(0,he.qG)())throw new he.W6("unimplemented","Blobs are unavailable in Firestore in this environment.")}class bn{constructor(Y){this._delegate=Y}static fromBase64String(Y){return rn(),new bn(he.Ix.fromBase64String(Y))}static fromUint8Array(Y){return Xe(),new bn(he.Ix.fromUint8Array(Y))}toBase64(){return rn(),this._delegate.toBase64()}toUint8Array(){return Xe(),this._delegate.toUint8Array()}isEqual(Y){return this._delegate.isEqual(Y._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function wt(mt){return function Ct(mt,Y){if("object"!=typeof mt||null===mt)return!1;const G=mt;for(const te of Y)if(te in G&&"function"==typeof G[te])return!0;return!1}(mt,["next","error","complete"])}class Bn{enableIndexedDbPersistence(Y,G){return(0,he.ol)(Y._delegate,{forceOwnership:G})}enableMultiTabIndexedDbPersistence(Y){return(0,he.Q5)(Y._delegate)}clearIndexedDbPersistence(Y){return(0,he.me)(Y._delegate)}}class Ze{constructor(Y,G,te){this._delegate=G,this._persistenceProvider=te,this.INTERNAL={delete:()=>this.terminate()},Y instanceof he.cm||(this._appCompat=Y)}get _databaseId(){return this._delegate._databaseId}settings(Y){const G=this._delegate._getSettings();!Y.merge&&G.host!==Y.host&&(0,he.qi)("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),Y.merge&&delete(Y=Object.assign(Object.assign({},G),Y)).merge,this._delegate._setSettings(Y)}useEmulator(Y,G,te={}){(0,he.vN)(this._delegate,Y,G,te)}enableNetwork(){return(0,he.Os)(this._delegate)}disableNetwork(){return(0,he.LA)(this._delegate)}enablePersistence(Y){let G=!1,te=!1;return Y&&(G=!!Y.synchronizeTabs,te=!!Y.experimentalForceOwningTab,(0,he.c8)("synchronizeTabs",G,"experimentalForceOwningTab",te)),G?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,te)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return(0,he.iB)(this._delegate)}onSnapshotsInSync(Y){return(0,he.FC)(this._delegate,Y)}get app(){if(!this._appCompat)throw new he.W6("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(Y){try{return new gt(this,(0,he.rJ)(this._delegate,Y))}catch(G){throw ye(G,"collection()","Firestore.collection()")}}doc(Y){try{return new Ne(this,(0,he.H9)(this._delegate,Y))}catch(G){throw ye(G,"doc()","Firestore.doc()")}}collectionGroup(Y){try{return new Zt(this,(0,he.Cs)(this._delegate,Y))}catch(G){throw ye(G,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(Y){return(0,he.c4)(this._delegate,G=>Y(new Jt(this,G)))}batch(){return(0,he.Ws)(this._delegate),new Re(new he.GA(this._delegate,Y=>(0,he.z6)(this._delegate,Y)))}loadBundle(Y){return(0,he.po)(this._delegate,Y)}namedQuery(Y){return(0,he.St)(this._delegate,Y).then(G=>G?new Zt(this,G):null)}}class Ae extends he.fS{constructor(Y){super(),this.firestore=Y}convertBytes(Y){return new bn(new he.Ix(Y))}convertReference(Y){const G=this.convertDocumentKey(Y,this.firestore._databaseId);return Ne.forKey(G,this.firestore,null)}}class Jt{constructor(Y,G){this._firestore=Y,this._delegate=G,this._userDataWriter=new Ae(Y)}get(Y){const G=ct(Y);return this._delegate.get(G).then(te=>new bt(this._firestore,new he.Wq(this._firestore._delegate,this._userDataWriter,te._key,te._document,te.metadata,G.converter)))}set(Y,G,te){const J=ct(Y);return te?(be("Transaction.set",te),this._delegate.set(J,G,te)):this._delegate.set(J,G),this}update(Y,G,te,...J){const Ee=ct(Y);return 2===arguments.length?this._delegate.update(Ee,G):this._delegate.update(Ee,G,te,...J),this}delete(Y){const G=ct(Y);return this._delegate.delete(G),this}}class Re{constructor(Y){this._delegate=Y}set(Y,G,te){const J=ct(Y);return te?(be("WriteBatch.set",te),this._delegate.set(J,G,te)):this._delegate.set(J,G),this}update(Y,G,te,...J){const Ee=ct(Y);return 2===arguments.length?this._delegate.update(Ee,G):this._delegate.update(Ee,G,te,...J),this}delete(Y){const G=ct(Y);return this._delegate.delete(G),this}commit(){return this._delegate.commit()}}class Me{constructor(Y,G,te){this._firestore=Y,this._userDataWriter=G,this._delegate=te}fromFirestore(Y,G){const te=new he.YQ(this._firestore._delegate,this._userDataWriter,Y._key,Y._document,Y.metadata,null);return this._delegate.fromFirestore(new cn(this._firestore,te),G??{})}toFirestore(Y,G){return G?this._delegate.toFirestore(Y,G):this._delegate.toFirestore(Y)}static getInstance(Y,G){const te=Me.INSTANCES;let J=te.get(Y);J||(J=new WeakMap,te.set(Y,J));let Ee=J.get(G);return Ee||(Ee=new Me(Y,new Ae(Y),G),J.set(G,Ee)),Ee}}Me.INSTANCES=new WeakMap;class Ne{constructor(Y,G){this.firestore=Y,this._delegate=G,this._userDataWriter=new Ae(Y)}static forPath(Y,G,te){if(Y.length%2!=0)throw new he.W6("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${Y.canonicalString()} has ${Y.length}`);return new Ne(G,new he.T1(G._delegate,te,new he.K$(Y)))}static forKey(Y,G,te){return new Ne(G,new he.T1(G._delegate,te,Y))}get id(){return this._delegate.id}get parent(){return new gt(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(Y){try{return new gt(this.firestore,(0,he.rJ)(this._delegate,Y))}catch(G){throw ye(G,"collection()","DocumentReference.collection()")}}isEqual(Y){return(Y=(0,at.Ku)(Y))instanceof he.T1&&(0,he.yx)(this._delegate,Y)}set(Y,G){G=be("DocumentReference.set",G);try{return G?(0,he.BN)(this._delegate,Y,G):(0,he.BN)(this._delegate,Y)}catch(te){throw ye(te,"setDoc()","DocumentReference.set()")}}update(Y,G,...te){try{return 1===arguments.length?(0,he.mZ)(this._delegate,Y):(0,he.mZ)(this._delegate,Y,G,...te)}catch(J){throw ye(J,"updateDoc()","DocumentReference.update()")}}delete(){return(0,he.kd)(this._delegate)}onSnapshot(...Y){const G=He(Y),te=lt(Y,J=>new bt(this.firestore,new he.Wq(this.firestore._delegate,this._userDataWriter,J._key,J._document,J.metadata,this._delegate.converter)));return(0,he.aQ)(this._delegate,G,te)}get(Y){let G;return G="cache"===Y?.source?(0,he.nY)(this._delegate):"server"===Y?.source?(0,he._e)(this._delegate):(0,he.x7)(this._delegate),G.then(te=>new bt(this.firestore,new he.Wq(this.firestore._delegate,this._userDataWriter,te._key,te._document,te.metadata,this._delegate.converter)))}withConverter(Y){return new Ne(this.firestore,this._delegate.withConverter(Y?Me.getInstance(this.firestore,Y):null))}}function ye(mt,Y,G){return mt.message=mt.message.replace(Y,G),mt}function He(mt){for(const Y of mt)if("object"==typeof Y&&!wt(Y))return Y;return{}}function lt(mt,Y){var G,te;let J;return J=wt(mt[0])?mt[0]:wt(mt[1])?mt[1]:"function"==typeof mt[0]?{next:mt[0],error:mt[1],complete:mt[2]}:{next:mt[1],error:mt[2],complete:mt[3]},{next:Ee=>{J.next&&J.next(Y(Ee))},error:null===(G=J.error)||void 0===G?void 0:G.bind(J),complete:null===(te=J.complete)||void 0===te?void 0:te.bind(J)}}class bt{constructor(Y,G){this._firestore=Y,this._delegate=G}get ref(){return new Ne(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(Y){return this._delegate.data(Y)}get(Y,G){return this._delegate.get(Y,G)}isEqual(Y){return(0,he.lN)(this._delegate,Y._delegate)}}class cn extends bt{data(Y){const G=this._delegate.data(Y);return this._delegate._converter||(0,he.bI)(void 0!==G,"Document in a QueryDocumentSnapshot should exist"),G}}class Zt{constructor(Y,G){this.firestore=Y,this._delegate=G,this._userDataWriter=new Ae(Y)}where(Y,G,te){try{return new Zt(this.firestore,(0,he.P)(this._delegate,(0,he._M)(Y,G,te)))}catch(J){throw ye(J,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(Y,G){try{return new Zt(this.firestore,(0,he.P)(this._delegate,(0,he.My)(Y,G)))}catch(te){throw ye(te,/(orderBy|where)\(\)/,"Query.$1()")}}limit(Y){try{return new Zt(this.firestore,(0,he.P)(this._delegate,(0,he.AB)(Y)))}catch(G){throw ye(G,"limit()","Query.limit()")}}limitToLast(Y){try{return new Zt(this.firestore,(0,he.P)(this._delegate,(0,he.$1)(Y)))}catch(G){throw ye(G,"limitToLast()","Query.limitToLast()")}}startAt(...Y){try{return new Zt(this.firestore,(0,he.P)(this._delegate,(0,he.EO)(...Y)))}catch(G){throw ye(G,"startAt()","Query.startAt()")}}startAfter(...Y){try{return new Zt(this.firestore,(0,he.P)(this._delegate,(0,he.HM)(...Y)))}catch(G){throw ye(G,"startAfter()","Query.startAfter()")}}endBefore(...Y){try{return new Zt(this.firestore,(0,he.P)(this._delegate,(0,he.rf)(...Y)))}catch(G){throw ye(G,"endBefore()","Query.endBefore()")}}endAt(...Y){try{return new Zt(this.firestore,(0,he.P)(this._delegate,(0,he.FD)(...Y)))}catch(G){throw ye(G,"endAt()","Query.endAt()")}}isEqual(Y){return(0,he.B)(this._delegate,Y._delegate)}get(Y){let G;return G="cache"===Y?.source?(0,he.kU)(this._delegate):"server"===Y?.source?(0,he.Rr)(this._delegate):(0,he.GG)(this._delegate),G.then(te=>new $e(this.firestore,new he.NJ(this.firestore._delegate,this._userDataWriter,this._delegate,te._snapshot)))}onSnapshot(...Y){const G=He(Y),te=lt(Y,J=>new $e(this.firestore,new he.NJ(this.firestore._delegate,this._userDataWriter,this._delegate,J._snapshot)));return(0,he.aQ)(this._delegate,G,te)}withConverter(Y){return new Zt(this.firestore,this._delegate.withConverter(Y?Me.getInstance(this.firestore,Y):null))}}class Wt{constructor(Y,G){this._firestore=Y,this._delegate=G}get type(){return this._delegate.type}get doc(){return new cn(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class $e{constructor(Y,G){this._firestore=Y,this._delegate=G}get query(){return new Zt(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(Y=>new cn(this._firestore,Y))}docChanges(Y){return this._delegate.docChanges(Y).map(G=>new Wt(this._firestore,G))}forEach(Y,G){this._delegate.forEach(te=>{Y.call(G,new cn(this._firestore,te))})}isEqual(Y){return(0,he.lN)(this._delegate,Y._delegate)}}class gt extends Zt{constructor(Y,G){super(Y,G),this.firestore=Y,this._delegate=G}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const Y=this._delegate.parent;return Y?new Ne(this.firestore,Y):null}doc(Y){try{return new Ne(this.firestore,void 0===Y?(0,he.H9)(this._delegate):(0,he.H9)(this._delegate,Y))}catch(G){throw ye(G,"doc()","CollectionReference.doc()")}}add(Y){return(0,he.gS)(this._delegate,Y).then(G=>new Ne(this.firestore,G))}isEqual(Y){return(0,he.yx)(this._delegate,Y._delegate)}withConverter(Y){return new gt(this.firestore,this._delegate.withConverter(Y?Me.getInstance(this.firestore,Y):null))}}function ct(mt){return(0,he.lo)(mt,he.T1)}class dt{constructor(...Y){this._delegate=new he.uY(...Y)}static documentId(){return new dt(he.FA.keyField().canonicalString())}isEqual(Y){return(Y=(0,at.Ku)(Y))instanceof he.uY&&this._delegate._internalPath.isEqual(Y._internalPath)}}class ht{constructor(Y){this._delegate=Y}static serverTimestamp(){const Y=(0,he.O5)();return Y._methodName="FieldValue.serverTimestamp",new ht(Y)}static delete(){const Y=(0,he.CL)();return Y._methodName="FieldValue.delete",new ht(Y)}static arrayUnion(...Y){const G=(0,he.hq)(...Y);return G._methodName="FieldValue.arrayUnion",new ht(G)}static arrayRemove(...Y){const G=(0,he.C3)(...Y);return G._methodName="FieldValue.arrayRemove",new ht(G)}static increment(Y){const G=(0,he.GV)(Y);return G._methodName="FieldValue.increment",new ht(G)}isEqual(Y){return this._delegate.isEqual(Y._delegate)}}const ot={Firestore:Ze,GeoPoint:he.Ci,Timestamp:he.Dc,Blob:bn,Transaction:Jt,WriteBatch:Re,DocumentReference:Ne,DocumentSnapshot:bt,Query:Zt,QueryDocumentSnapshot:cn,QuerySnapshot:$e,CollectionReference:gt,FieldPath:dt,FieldValue:ht,setLogLevel:function Pe(mt){(0,he.He)(mt)},CACHE_SIZE_UNLIMITED:he.H6};!function Xt(mt){(function Pt(mt,Y){mt.INTERNAL.registerComponent(new Dt.uA("firestore-compat",G=>{const te=G.getProvider("app-compat").getImmediate(),J=G.getProvider("firestore").getImmediate();return Y(te,J)},"PUBLIC").setServiceProps(Object.assign({},ot)))})(mt,(Y,G)=>new Ze(Y,G,new Bn)),mt.registerVersion("@firebase/firestore-compat","0.3.38")}(vt.A);var zn=$(7935);function Ot(mt,Y){return function Dn(mt,Y=Ue.E){return new le.c(G=>{let te;return null!=Y?Y.schedule(()=>{te=mt.onSnapshot({includeMetadataChanges:!0},G)}):te=mt.onSnapshot({includeMetadataChanges:!0},G),()=>{te?.()}})}(mt,Y)}function Nn(mt,Y){return Ot(mt,Y).pipe((0,Je.T)(G=>({payload:G,type:"query"})))}class an{ref;afs;constructor(Y,G){this.ref=Y,this.afs=G}set(Y,G){return this.ref.set(Y,G)}update(Y){return this.ref.update(Y)}delete(){return this.ref.delete()}collection(Y,G){const te=this.ref.collection(Y),{ref:J,query:Ee}=Ie(te,G);return new _r(J,Ee,this.afs)}snapshotChanges(){return function mr(mt,Y){return Ot(mt,Y).pipe((0,pe.Z)(void 0),At(),(0,Je.T)(G=>{const[te,J]=G;return J.exists?te?.exists?{payload:J,type:"modified"}:{payload:J,type:"added"}:{payload:J,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(oe.U0)}valueChanges(Y={}){return this.snapshotChanges().pipe((0,Je.T)(({payload:G})=>Y.idField?{...G.data(),[Y.idField]:G.id}:G.data()))}get(Y){return(0,Qe.H)(this.ref.get(Y)).pipe(oe.U0)}}function mn(mt,Y){return Nn(mt,Y).pipe((0,pe.Z)(void 0),At(),(0,Je.T)(G=>{const[te,J]=G,Ee=J.payload.docChanges(),pt=Ee.map(Ft=>({type:Ft.type,payload:Ft}));return te&&JSON.stringify(te.payload.metadata)!==JSON.stringify(J.payload.metadata)&&J.payload.docs.forEach((Ft,ie)=>{const ue=Ee.find(tt=>tt.doc.ref.isEqual(Ft.ref)),ge=te?.payload.docs.find(tt=>tt.ref.isEqual(Ft.ref));ue&&JSON.stringify(ue.doc.metadata)===JSON.stringify(Ft.metadata)||!ue&&ge&&JSON.stringify(ge.metadata)===JSON.stringify(Ft.metadata)||pt.push({type:"modified",payload:{oldIndex:ie,newIndex:ie,type:"modified",doc:Ft}})}),pt}))}function Yn(mt,Y,G){return mn(mt,G).pipe((0,xt.S)((te,J)=>function xr(mt,Y,G){return Y.forEach(te=>{G.indexOf(te.type)>-1&&(mt=function gi(mt,Y){switch(Y.type){case"added":if(!mt[Y.newIndex]||!mt[Y.newIndex].doc.ref.isEqual(Y.doc.ref))return Jn(mt,Y.newIndex,0,Y);break;case"modified":if(null==mt[Y.oldIndex]||mt[Y.oldIndex].doc.ref.isEqual(Y.doc.ref)){if(Y.oldIndex!==Y.newIndex){const G=mt.slice();return G.splice(Y.oldIndex,1),G.splice(Y.newIndex,0,Y),G}return Jn(mt,Y.newIndex,1,Y)}break;case"removed":if(mt[Y.oldIndex]&&mt[Y.oldIndex].doc.ref.isEqual(Y.doc.ref))return Jn(mt,Y.oldIndex,1)}return mt}(mt,te))}),mt}(te,J.map(Ee=>Ee.payload),Y),[]),function $t(mt,Y=qt.D){return mt=mt??Nt,(0,fe.N)((G,te)=>{let J,Ee=!0;G.subscribe((0,Be._)(te,pt=>{const Ft=Y(pt);(Ee||!mt(J,Ft))&&(Ee=!1,J=Ft,te.next(pt))}))})}(),(0,Je.T)(te=>te.map(J=>({type:J.type,payload:J}))))}function Jn(mt,Y,G,...te){const J=mt.slice();return J.splice(Y,G,...te),J}function Or(mt){return(!mt||0===mt.length)&&(mt=["added","removed","modified"]),mt}class _r{ref;query;afs;constructor(Y,G,te){this.ref=Y,this.query=G,this.afs=te}stateChanges(Y){let G=mn(this.query,this.afs.schedulers.outsideAngular);return Y&&Y.length>0&&(G=G.pipe((0,Je.T)(te=>te.filter(J=>Y.indexOf(J.type)>-1)))),G.pipe((0,pe.Z)(void 0),At(),(0,un.p)(([te,J])=>J.length>0||!te),(0,Je.T)(([,te])=>te),oe.U0)}auditTrail(Y){return this.stateChanges(Y).pipe((0,xt.S)((G,te)=>[...G,...te],[]))}snapshotChanges(Y){const G=Or(Y);return Yn(this.query,G,this.afs.schedulers.outsideAngular).pipe(oe.U0)}valueChanges(Y={}){return Nn(this.query,this.afs.schedulers.outsideAngular).pipe((0,Je.T)(G=>G.payload.docs.map(te=>Y.idField?{...te.data(),[Y.idField]:te.id}:te.data())),oe.U0)}get(Y){return(0,Qe.H)(this.query.get(Y)).pipe(oe.U0)}add(Y){return this.ref.add(Y)}doc(Y){return new an(this.ref.doc(Y),this.afs)}}class En{query;afs;constructor(Y,G){this.query=Y,this.afs=G}stateChanges(Y){return Y&&0!==Y.length?mn(this.query,this.afs.schedulers.outsideAngular).pipe((0,Je.T)(G=>G.filter(te=>Y.indexOf(te.type)>-1)),(0,un.p)(G=>G.length>0),oe.U0):mn(this.query,this.afs.schedulers.outsideAngular).pipe(oe.U0)}auditTrail(Y){return this.stateChanges(Y).pipe((0,xt.S)((G,te)=>[...G,...te],[]))}snapshotChanges(Y){const G=Or(Y);return Yn(this.query,G,this.afs.schedulers.outsideAngular).pipe(oe.U0)}valueChanges(Y={}){return Nn(this.query,this.afs.schedulers.outsideAngular).pipe((0,Je.T)(te=>te.payload.docs.map(J=>Y.idField?{[Y.idField]:J.id,...J.data()}:J.data())),oe.U0)}get(Y){return(0,Qe.H)(this.query.get(Y)).pipe(oe.U0)}}const Kr=new V.nKC("angularfire2.enableFirestorePersistence"),jn=new V.nKC("angularfire2.firestore.persistenceSettings"),In=new V.nKC("angularfire2.firestore.settings"),Jr=new V.nKC("angularfire2.firestore.use-emulator");function Ie(mt,Y=(G=>G)){return{query:Y(mt),ref:mt}}let or=(()=>{class mt{schedulers;firestore;persistenceEnabled$;constructor(G,te,J,Ee,pt,Ft,ie,ue,ge,tt,Oe,zt,Qt,Dr,qr,wn,en){this.schedulers=ie;const Vn=(0,ne.iB)(G,Ft,te),fr=ge;tt&&(0,k.gF)(Vn,Ft,Oe,Qt,Dr,qr,zt,wn),[this.firestore,this.persistenceEnabled$]=(0,ne.BM)(`${Vn.name}.firestore`,"AngularFirestore",Vn.name,()=>{const Zr=Ft.runOutsideAngular(()=>Vn.firestore());if(Ee&&Zr.settings(Ee),fr&&Zr.useEmulator(...fr),J&&!(0,m.Vy)(pt)){const Ui=()=>{try{return(0,Qe.H)(Zr.enablePersistence(ue||void 0).then(()=>!0,()=>!1))}catch(Ni){return typeof console<"u"&&console.warn(Ni),(0,We.of)(!1)}};return[Zr,Ft.runOutsideAngular(Ui)]}return[Zr,(0,We.of)(!1)]},[Ee,fr,J])}collection(G,te){let J;J="string"==typeof G?this.firestore.collection(G):G;const{ref:Ee,query:pt}=Ie(J,te),Ft=this.schedulers.ngZone.run(()=>Ee);return new _r(Ft,pt,this)}collectionGroup(G,te){const J=te||(pt=>pt),Ee=this.firestore.collectionGroup(G);return new En(J(Ee),this)}doc(G){let te;te="string"==typeof G?this.firestore.doc(G):G;const J=this.schedulers.ngZone.run(()=>te);return new an(J,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(te){return new(te||mt)(V.KVO(ne.rx),V.KVO(ne.uP,8),V.KVO(Kr,8),V.KVO(In,8),V.KVO(V.Agw),V.KVO(V.SKi),V.KVO(oe.u0),V.KVO(jn,8),V.KVO(Jr,8),V.KVO(k.DS,8),V.KVO(k.CP,8),V.KVO(k.yy,8),V.KVO(k.ZP,8),V.KVO(k.$z,8),V.KVO(k.AU,8),V.KVO(k.UB,8),V.KVO(oe.Jv,8))};static \u0275prov=V.jDH({token:mt,factory:mt.\u0275fac,providedIn:"any"})}return mt})(),ri=(()=>{class mt{constructor(){zn.A.registerVersion("angularfire",oe.xv.full,"fst-compat")}static enablePersistence(G){return{ngModule:mt,providers:[{provide:Kr,useValue:!0},{provide:jn,useValue:G}]}}static \u0275fac=function(te){return new(te||mt)};static \u0275mod=V.$C({type:mt});static \u0275inj=V.G2t({providers:[or]})}return mt})()},9253:(on,rt,$)=>{$.d(rt,{BM:()=>Je,Gt:()=>k,bf:()=>At,e7:()=>Ue,iB:()=>pe,rx:()=>Qe,uP:()=>We});var m=$(4438),V=$(1825),oe=$(7935);const ne=["ngOnDestroy"],k=(Nt,un,ln,vt={})=>new Proxy(Nt,{get:(he,at)=>ln.runOutsideAngular(()=>{if(Nt[at])return vt?.spy?.get&&vt.spy.get(at,Nt[at]),Nt[at];if(ne.indexOf(at)>-1)return()=>{};const Dt=un.toPromise().then(ut=>{const Ut=ut?.[at];return"function"==typeof Ut?Ut.bind(ut):Ut?.then?Ut.then(be=>ln.run(()=>be)):ln.run(()=>Ut)});return new Proxy(()=>{},{get:(ut,Ut)=>Dt[Ut],apply:(ut,Ut,be)=>Dt.then(Xe=>{const rn=Xe?.(...be);return vt?.spy?.apply&&vt.spy.apply(at,be,rn),rn})})})}),Ue=(Nt,un)=>{un.forEach(ln=>{Object.getOwnPropertyNames(ln.prototype||ln).forEach(vt=>{Object.defineProperty(Nt.prototype,vt,Object.getOwnPropertyDescriptor(ln.prototype||ln,vt))})})};class le{constructor(un){return un}}const Qe=new m.nKC("angularfire2.app.options"),We=new m.nKC("angularfire2.app.name");function pe(Nt,un,ln){const he="object"==typeof ln&&ln||{};he.name=he.name||"string"==typeof ln&&ln||"[DEFAULT]";const Dt=oe.A.apps.filter(ut=>ut&&ut.name===he.name)[0]||un.runOutsideAngular(()=>oe.A.initializeApp(Nt,he));try{if(JSON.stringify(Nt)!==JSON.stringify(Dt.options)){const ut=!!module.hot;fe("error",`${Dt.name} Firebase App already initialized with different options${ut?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new le(Dt)}const fe=(Nt,...un)=>{(0,m.naY)()&&typeof console<"u"&&console[Nt](...un)},Be={provide:le,useFactory:pe,deps:[Qe,m.SKi,[new m.Xx1,We]]};let At=(()=>{class Nt{static initializeApp(ln,vt){return{ngModule:Nt,providers:[{provide:Qe,useValue:ln},{provide:We,useValue:vt}]}}constructor(ln){oe.A.registerVersion("angularfire",V.xv.full,"core"),oe.A.registerVersion("angularfire",V.xv.full,"app-compat"),oe.A.registerVersion("angular",m.xvI.full,ln.toString())}static \u0275fac=function(vt){return new(vt||Nt)(m.KVO(m.Agw))};static \u0275mod=m.$C({type:Nt});static \u0275inj=m.G2t({providers:[Be]})}return Nt})();function Je(Nt,un,ln,vt,he){const[,at,Dt]=globalThis.\u0275AngularfireInstanceCache.find(ut=>ut[0]===Nt)||[];if(at)return function xt(Nt,un){try{return Nt.toString()===un.toString()}catch{return Nt===un}}(he,Dt)||($t("error",`${un} was already initialized on the ${ln} Firebase App with different settings.${qt?" You may need to reload as Firebase is not HMR aware.":""}`),$t("warn",{is:he,was:Dt})),at;{const ut=vt();return globalThis.\u0275AngularfireInstanceCache.push([Nt,ut,he]),ut}}const qt=typeof module<"u"&&!!module.hot,$t=(Nt,...un)=>{(0,m.naY)()&&typeof console<"u"&&console[Nt](...un)};globalThis.\u0275AngularfireInstanceCache||=[]},1825:(on,rt,$)=>{$.d(rt,{xv:()=>xt,U0:()=>bn,u0:()=>Dt,Jv:()=>un});var m=$(4438),V=$(7852);(0,V.registerVersion)("firebase","10.14.1","app");var k=$(6780),le=$(9687);const We=new class Qe extends le.q{}(class Ue extends k.R{constructor(Ae,Pe){super(Ae,Pe),this.scheduler=Ae,this.work=Pe}schedule(Ae,Pe=0){return Pe>0?super.schedule(Ae,Pe):(this.delay=Pe,this.state=Ae,this.scheduler.flush(this),this)}execute(Ae,Pe){return Pe>0||this.closed?super.execute(Ae,Pe):this._execute(Ae,Pe)}requestAsyncId(Ae,Pe,Jt=0){return null!=Jt&&Jt>0||null==Jt&&this.delay>0?super.requestAsyncId(Ae,Pe,Jt):(Ae.flush(this),0)}});var fe=$(3236),Be=$(8141),At=$(6745),Je=$(941);const xt=new m.RxE("ANGULARFIRE2_VERSION");class un{constructor(){return((Ze,Ae)=>{const Pe=(0,V.getApps)(),Jt=[];return Pe.forEach(Re=>{Re.container.getProvider(Ze).instances.forEach(Ne=>{Jt.includes(Ne)||Jt.push(Ne)})}),Jt})(ln)}}const ln="app-check";function vt(){}class he{zone;delegate;constructor(Ae,Pe=We){this.zone=Ae,this.delegate=Pe}now(){return this.delegate.now()}schedule(Ae,Pe,Jt){const Re=this.zone;return this.delegate.schedule(function(Ne){Re.runGuarded(()=>{Ae.apply(this,[Ne])})},Pe,Jt)}}class at{zone;task=null;constructor(Ae){this.zone=Ae}call(Ae,Pe){const Jt=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",vt,{},vt,vt)),Pe.pipe((0,Be.M)({next:Jt,complete:Jt,error:Jt})).subscribe(Ae).add(Jt)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Dt=(()=>{class Ze{ngZone;outsideAngular;insideAngular;constructor(Pe){this.ngZone=Pe,this.outsideAngular=Pe.runOutsideAngular(()=>new he(Zone.current)),this.insideAngular=Pe.run(()=>new he(Zone.current,fe.E)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(Jt){return new(Jt||Ze)(m.KVO(m.SKi))};static \u0275prov=m.jDH({token:Ze,factory:Ze.\u0275fac,providedIn:"root"})}return Ze})();function bn(Ze){return function wt(Ze){return function(Pe){return(Pe=Pe.lift(new at(Ze.ngZone))).pipe((0,At._)(Ze.outsideAngular),(0,Je.Q)(Ze.insideAngular))}}(function ut(){const Ze=globalThis.\u0275AngularFireScheduler;if(!Ze)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return Ze}())(Ze)}},4341:(on,rt,$)=>{$.d(rt,{me:()=>vt,ok:()=>to,JD:()=>Si,j4:()=>$i,YN:()=>zs,BC:()=>Nn,cb:()=>an,xH:()=>Zs,X1:()=>Pi,wz:()=>Cs,k0:()=>be,qT:()=>qi,y7:()=>ir});var m=$(4438),V=$(177),oe=$(8455),ne=$(1985),k=$(3073),Ue=$(8750),le=$(3794),Qe=$(4360),We=$(6450),pe=$(8496),Be=$(6354);let At=(()=>{class U{constructor(R,X){this._renderer=R,this._elementRef=X,this.onChange=ve=>{},this.onTouched=()=>{}}setProperty(R,X){this._renderer.setProperty(this._elementRef.nativeElement,R,X)}registerOnTouched(R){this.onTouched=R}registerOnChange(R){this.onChange=R}setDisabledState(R){this.setProperty("disabled",R)}static{this.\u0275fac=function(X){return new(X||U)(m.rXU(m.sFG),m.rXU(m.aKT))}}static{this.\u0275dir=m.FsC({type:U})}}return U})(),Je=(()=>{class U extends At{static{this.\u0275fac=(()=>{let R;return function(ve){return(R||(R=m.xGo(U)))(ve||U)}})()}static{this.\u0275dir=m.FsC({type:U,features:[m.Vt3]})}}return U})();const xt=new m.nKC(""),Nt={provide:xt,useExisting:(0,m.Rfq)(()=>vt),multi:!0},ln=new m.nKC("");let vt=(()=>{class U extends At{constructor(R,X,ve){super(R,X),this._compositionMode=ve,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function un(){const U=(0,V.QT)()?(0,V.QT)().getUserAgent():"";return/android (\d+)/.test(U.toLowerCase())}())}writeValue(R){this.setProperty("value",R??"")}_handleInput(R){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(R)}_compositionStart(){this._composing=!0}_compositionEnd(R){this._composing=!1,this._compositionMode&&this.onChange(R)}static{this.\u0275fac=function(X){return new(X||U)(m.rXU(m.sFG),m.rXU(m.aKT),m.rXU(ln,8))}}static{this.\u0275dir=m.FsC({type:U,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(X,ve){1&X&&m.bIt("input",function(Mn){return ve._handleInput(Mn.target.value)})("blur",function(){return ve.onTouched()})("compositionstart",function(){return ve._compositionStart()})("compositionend",function(Mn){return ve._compositionEnd(Mn.target.value)})},features:[m.Jv_([Nt]),m.Vt3]})}}return U})();function he(U){return null==U||("string"==typeof U||Array.isArray(U))&&0===U.length}function at(U){return null!=U&&"number"==typeof U.length}const Dt=new m.nKC(""),ut=new m.nKC(""),Ut=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class be{static min(j){return function Xe(U){return j=>{if(he(j.value)||he(U))return null;const R=parseFloat(j.value);return!isNaN(R)&&R<U?{min:{min:U,actual:j.value}}:null}}(j)}static max(j){return function rn(U){return j=>{if(he(j.value)||he(U))return null;const R=parseFloat(j.value);return!isNaN(R)&&R>U?{max:{max:U,actual:j.value}}:null}}(j)}static required(j){return function bn(U){return he(U.value)?{required:!0}:null}(j)}static requiredTrue(j){return function wt(U){return!0===U.value?null:{required:!0}}(j)}static email(j){return function Ct(U){return he(U.value)||Ut.test(U.value)?null:{email:!0}}(j)}static minLength(j){return function Bn(U){return j=>he(j.value)||!at(j.value)?null:j.value.length<U?{minlength:{requiredLength:U,actualLength:j.value.length}}:null}(j)}static maxLength(j){return function Ze(U){return j=>at(j.value)&&j.value.length>U?{maxlength:{requiredLength:U,actualLength:j.value.length}}:null}(j)}static pattern(j){return function Ae(U){if(!U)return Pe;let j,R;return"string"==typeof U?(R="","^"!==U.charAt(0)&&(R+="^"),R+=U,"$"!==U.charAt(U.length-1)&&(R+="$"),j=new RegExp(R)):(R=U.toString(),j=U),X=>{if(he(X.value))return null;const ve=X.value;return j.test(ve)?null:{pattern:{requiredPattern:R,actualValue:ve}}}}(j)}static nullValidator(j){return null}static compose(j){return lt(j)}static composeAsync(j){return cn(j)}}function Pe(U){return null}function Jt(U){return null!=U}function Re(U){return(0,m.jNT)(U)?(0,oe.H)(U):U}function Me(U){let j={};return U.forEach(R=>{j=null!=R?{...j,...R}:j}),0===Object.keys(j).length?null:j}function Ne(U,j){return j.map(R=>R(U))}function He(U){return U.map(j=>function ye(U){return!U.validate}(j)?j:R=>j.validate(R))}function lt(U){if(!U)return null;const j=U.filter(Jt);return 0==j.length?null:function(R){return Me(Ne(R,j))}}function bt(U){return null!=U?lt(He(U)):null}function cn(U){if(!U)return null;const j=U.filter(Jt);return 0==j.length?null:function(R){return function fe(...U){const j=(0,le.ms)(U),{args:R,keys:X}=(0,k.D)(U),ve=new ne.c(Gt=>{const{length:Mn}=R;if(!Mn)return void Gt.complete();const Hn=new Array(Mn);let Ps=Mn,Ji=Mn;for(let Zi=0;Zi<Mn;Zi++){let Ws=!1;(0,Ue.Tg)(R[Zi]).subscribe((0,Qe._)(Gt,es=>{Ws||(Ws=!0,Ji--),Hn[Zi]=es},()=>Ps--,void 0,()=>{(!Ps||!Ws)&&(Ji||Gt.next(X?(0,pe.e)(X,Hn):Hn),Gt.complete())}))}});return j?ve.pipe((0,We.I)(j)):ve}(Ne(R,j).map(Re)).pipe((0,Be.T)(Me))}}function Zt(U){return null!=U?cn(He(U)):null}function Wt(U,j){return null===U?[j]:Array.isArray(U)?[...U,j]:[U,j]}function $e(U){return U._rawValidators}function gt(U){return U._rawAsyncValidators}function ct(U){return U?Array.isArray(U)?U:[U]:[]}function dt(U,j){return Array.isArray(U)?U.includes(j):U===j}function ht(U,j){const R=ct(j);return ct(U).forEach(ve=>{dt(R,ve)||R.push(ve)}),R}function ot(U,j){return ct(j).filter(R=>!dt(U,R))}class Pt{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(j){this._rawValidators=j||[],this._composedValidatorFn=bt(this._rawValidators)}_setAsyncValidators(j){this._rawAsyncValidators=j||[],this._composedAsyncValidatorFn=Zt(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(j){this._onDestroyCallbacks.push(j)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(j=>j()),this._onDestroyCallbacks=[]}reset(j=void 0){this.control&&this.control.reset(j)}hasError(j,R){return!!this.control&&this.control.hasError(j,R)}getError(j,R){return this.control?this.control.getError(j,R):null}}class Xt extends Pt{get formDirective(){return null}get path(){return null}}class zn extends Pt{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Dn{constructor(j){this._cd=j}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Nn=(()=>{class U extends Dn{constructor(R){super(R)}static{this.\u0275fac=function(X){return new(X||U)(m.rXU(zn,2))}}static{this.\u0275dir=m.FsC({type:U,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(X,ve){2&X&&m.AVh("ng-untouched",ve.isUntouched)("ng-touched",ve.isTouched)("ng-pristine",ve.isPristine)("ng-dirty",ve.isDirty)("ng-valid",ve.isValid)("ng-invalid",ve.isInvalid)("ng-pending",ve.isPending)},features:[m.Vt3]})}}return U})(),an=(()=>{class U extends Dn{constructor(R){super(R)}static{this.\u0275fac=function(X){return new(X||U)(m.rXU(Xt,10))}}static{this.\u0275dir=m.FsC({type:U,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(X,ve){2&X&&m.AVh("ng-untouched",ve.isUntouched)("ng-touched",ve.isTouched)("ng-pristine",ve.isPristine)("ng-dirty",ve.isDirty)("ng-valid",ve.isValid)("ng-invalid",ve.isInvalid)("ng-pending",ve.isPending)("ng-submitted",ve.isSubmitted)},features:[m.Vt3]})}}return U})();const G="VALID",te="INVALID",J="PENDING",Ee="DISABLED";function pt(U){return(ge(U)?U.validators:U)||null}function ie(U,j){return(ge(j)?j.asyncValidators:U)||null}function ge(U){return null!=U&&!Array.isArray(U)&&"object"==typeof U}function tt(U,j,R){const X=U.controls;if(!(j?Object.keys(X):X).length)throw new m.wOt(1e3,"");if(!X[R])throw new m.wOt(1001,"")}function Oe(U,j,R){U._forEachChild((X,ve)=>{if(void 0===R[ve])throw new m.wOt(1002,"")})}class zt{constructor(j,R){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(j),this._assignAsyncValidators(R)}get validator(){return this._composedValidatorFn}set validator(j){this._rawValidators=this._composedValidatorFn=j}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(j){this._rawAsyncValidators=this._composedAsyncValidatorFn=j}get parent(){return this._parent}get valid(){return this.status===G}get invalid(){return this.status===te}get pending(){return this.status==J}get disabled(){return this.status===Ee}get enabled(){return this.status!==Ee}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(j){this._assignValidators(j)}setAsyncValidators(j){this._assignAsyncValidators(j)}addValidators(j){this.setValidators(ht(j,this._rawValidators))}addAsyncValidators(j){this.setAsyncValidators(ht(j,this._rawAsyncValidators))}removeValidators(j){this.setValidators(ot(j,this._rawValidators))}removeAsyncValidators(j){this.setAsyncValidators(ot(j,this._rawAsyncValidators))}hasValidator(j){return dt(this._rawValidators,j)}hasAsyncValidator(j){return dt(this._rawAsyncValidators,j)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(j={}){this.touched=!0,this._parent&&!j.onlySelf&&this._parent.markAsTouched(j)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(j=>j.markAllAsTouched())}markAsUntouched(j={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(R=>{R.markAsUntouched({onlySelf:!0})}),this._parent&&!j.onlySelf&&this._parent._updateTouched(j)}markAsDirty(j={}){this.pristine=!1,this._parent&&!j.onlySelf&&this._parent.markAsDirty(j)}markAsPristine(j={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(R=>{R.markAsPristine({onlySelf:!0})}),this._parent&&!j.onlySelf&&this._parent._updatePristine(j)}markAsPending(j={}){this.status=J,!1!==j.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!j.onlySelf&&this._parent.markAsPending(j)}disable(j={}){const R=this._parentMarkedDirty(j.onlySelf);this.status=Ee,this.errors=null,this._forEachChild(X=>{X.disable({...j,onlySelf:!0})}),this._updateValue(),!1!==j.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...j,skipPristineCheck:R}),this._onDisabledChange.forEach(X=>X(!0))}enable(j={}){const R=this._parentMarkedDirty(j.onlySelf);this.status=G,this._forEachChild(X=>{X.enable({...j,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:j.emitEvent}),this._updateAncestors({...j,skipPristineCheck:R}),this._onDisabledChange.forEach(X=>X(!1))}_updateAncestors(j){this._parent&&!j.onlySelf&&(this._parent.updateValueAndValidity(j),j.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(j){this._parent=j}getRawValue(){return this.value}updateValueAndValidity(j={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===G||this.status===J)&&this._runAsyncValidator(j.emitEvent)),!1!==j.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!j.onlySelf&&this._parent.updateValueAndValidity(j)}_updateTreeValidity(j={emitEvent:!0}){this._forEachChild(R=>R._updateTreeValidity(j)),this.updateValueAndValidity({onlySelf:!0,emitEvent:j.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ee:G}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(j){if(this.asyncValidator){this.status=J,this._hasOwnPendingAsyncValidator=!0;const R=Re(this.asyncValidator(this));this._asyncValidationSubscription=R.subscribe(X=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(X,{emitEvent:j})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(j,R={}){this.errors=j,this._updateControlsErrors(!1!==R.emitEvent)}get(j){let R=j;return null==R||(Array.isArray(R)||(R=R.split(".")),0===R.length)?null:R.reduce((X,ve)=>X&&X._find(ve),this)}getError(j,R){const X=R?this.get(R):this;return X&&X.errors?X.errors[j]:null}hasError(j,R){return!!this.getError(j,R)}get root(){let j=this;for(;j._parent;)j=j._parent;return j}_updateControlsErrors(j){this.status=this._calculateStatus(),j&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(j)}_initObservables(){this.valueChanges=new m.bkB,this.statusChanges=new m.bkB}_calculateStatus(){return this._allControlsDisabled()?Ee:this.errors?te:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(J)?J:this._anyControlsHaveStatus(te)?te:G}_anyControlsHaveStatus(j){return this._anyControls(R=>R.status===j)}_anyControlsDirty(){return this._anyControls(j=>j.dirty)}_anyControlsTouched(){return this._anyControls(j=>j.touched)}_updatePristine(j={}){this.pristine=!this._anyControlsDirty(),this._parent&&!j.onlySelf&&this._parent._updatePristine(j)}_updateTouched(j={}){this.touched=this._anyControlsTouched(),this._parent&&!j.onlySelf&&this._parent._updateTouched(j)}_registerOnCollectionChange(j){this._onCollectionChange=j}_setUpdateStrategy(j){ge(j)&&null!=j.updateOn&&(this._updateOn=j.updateOn)}_parentMarkedDirty(j){return!j&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(j){return null}_assignValidators(j){this._rawValidators=Array.isArray(j)?j.slice():j,this._composedValidatorFn=function Ft(U){return Array.isArray(U)?bt(U):U||null}(this._rawValidators)}_assignAsyncValidators(j){this._rawAsyncValidators=Array.isArray(j)?j.slice():j,this._composedAsyncValidatorFn=function ue(U){return Array.isArray(U)?Zt(U):U||null}(this._rawAsyncValidators)}}class Qt extends zt{constructor(j,R,X){super(pt(R),ie(X,R)),this.controls=j,this._initObservables(),this._setUpdateStrategy(R),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(j,R){return this.controls[j]?this.controls[j]:(this.controls[j]=R,R.setParent(this),R._registerOnCollectionChange(this._onCollectionChange),R)}addControl(j,R,X={}){this.registerControl(j,R),this.updateValueAndValidity({emitEvent:X.emitEvent}),this._onCollectionChange()}removeControl(j,R={}){this.controls[j]&&this.controls[j]._registerOnCollectionChange(()=>{}),delete this.controls[j],this.updateValueAndValidity({emitEvent:R.emitEvent}),this._onCollectionChange()}setControl(j,R,X={}){this.controls[j]&&this.controls[j]._registerOnCollectionChange(()=>{}),delete this.controls[j],R&&this.registerControl(j,R),this.updateValueAndValidity({emitEvent:X.emitEvent}),this._onCollectionChange()}contains(j){return this.controls.hasOwnProperty(j)&&this.controls[j].enabled}setValue(j,R={}){Oe(this,0,j),Object.keys(j).forEach(X=>{tt(this,!0,X),this.controls[X].setValue(j[X],{onlySelf:!0,emitEvent:R.emitEvent})}),this.updateValueAndValidity(R)}patchValue(j,R={}){null!=j&&(Object.keys(j).forEach(X=>{const ve=this.controls[X];ve&&ve.patchValue(j[X],{onlySelf:!0,emitEvent:R.emitEvent})}),this.updateValueAndValidity(R))}reset(j={},R={}){this._forEachChild((X,ve)=>{X.reset(j?j[ve]:null,{onlySelf:!0,emitEvent:R.emitEvent})}),this._updatePristine(R),this._updateTouched(R),this.updateValueAndValidity(R)}getRawValue(){return this._reduceChildren({},(j,R,X)=>(j[X]=R.getRawValue(),j))}_syncPendingControls(){let j=this._reduceChildren(!1,(R,X)=>!!X._syncPendingControls()||R);return j&&this.updateValueAndValidity({onlySelf:!0}),j}_forEachChild(j){Object.keys(this.controls).forEach(R=>{const X=this.controls[R];X&&j(X,R)})}_setUpControls(){this._forEachChild(j=>{j.setParent(this),j._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(j){for(const[R,X]of Object.entries(this.controls))if(this.contains(R)&&j(X))return!0;return!1}_reduceValue(){return this._reduceChildren({},(R,X,ve)=>((X.enabled||this.disabled)&&(R[ve]=X.value),R))}_reduceChildren(j,R){let X=j;return this._forEachChild((ve,Gt)=>{X=R(X,ve,Gt)}),X}_allControlsDisabled(){for(const j of Object.keys(this.controls))if(this.controls[j].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(j){return this.controls.hasOwnProperty(j)?this.controls[j]:null}}class en extends Qt{}const fr=new m.nKC("CallSetDisabledState",{providedIn:"root",factory:()=>Zr}),Zr="always";function Ni(U,j,R=Zr){Ii(U,j),j.valueAccessor.writeValue(U.value),(U.disabled||"always"===R)&&j.valueAccessor.setDisabledState?.(U.disabled),function it(U,j){j.valueAccessor.registerOnChange(R=>{U._pendingValue=R,U._pendingChange=!0,U._pendingDirty=!0,"change"===U.updateOn&&_t(U,j)})}(U,j),function W(U,j){const R=(X,ve)=>{j.valueAccessor.writeValue(X),ve&&j.viewToModelUpdate(X)};U.registerOnChange(R),j._registerOnDestroy(()=>{U._unregisterOnChange(R)})}(U,j),function ke(U,j){j.valueAccessor.registerOnTouched(()=>{U._pendingTouched=!0,"blur"===U.updateOn&&U._pendingChange&&_t(U,j),"submit"!==U.updateOn&&U.markAsTouched()})}(U,j),function cs(U,j){if(j.valueAccessor.setDisabledState){const R=X=>{j.valueAccessor.setDisabledState(X)};U.registerOnDisabledChange(R),j._registerOnDestroy(()=>{U._unregisterOnDisabledChange(R)})}}(U,j)}function Wn(U,j,R=!0){const X=()=>{};j.valueAccessor&&(j.valueAccessor.registerOnChange(X),j.valueAccessor.registerOnTouched(X)),Ai(U,j),U&&(j._invokeOnDestroyCallbacks(),U._registerOnCollectionChange(()=>{}))}function Is(U,j){U.forEach(R=>{R.registerOnValidatorChange&&R.registerOnValidatorChange(j)})}function Ii(U,j){const R=$e(U);null!==j.validator?U.setValidators(Wt(R,j.validator)):"function"==typeof R&&U.setValidators([R]);const X=gt(U);null!==j.asyncValidator?U.setAsyncValidators(Wt(X,j.asyncValidator)):"function"==typeof X&&U.setAsyncValidators([X]);const ve=()=>U.updateValueAndValidity();Is(j._rawValidators,ve),Is(j._rawAsyncValidators,ve)}function Ai(U,j){let R=!1;if(null!==U){if(null!==j.validator){const ve=$e(U);if(Array.isArray(ve)&&ve.length>0){const Gt=ve.filter(Mn=>Mn!==j.validator);Gt.length!==ve.length&&(R=!0,U.setValidators(Gt))}}if(null!==j.asyncValidator){const ve=gt(U);if(Array.isArray(ve)&&ve.length>0){const Gt=ve.filter(Mn=>Mn!==j.asyncValidator);Gt.length!==ve.length&&(R=!0,U.setAsyncValidators(Gt))}}}const X=()=>{};return Is(j._rawValidators,X),Is(j._rawAsyncValidators,X),R}function _t(U,j){U._pendingDirty&&U.markAsDirty(),U.setValue(U._pendingValue,{emitModelToViewChange:!1}),j.viewToModelUpdate(U._pendingValue),U._pendingChange=!1}function Sn(U,j){const R=U.indexOf(j);R>-1&&U.splice(R,1)}function Cn(U){return"object"==typeof U&&null!==U&&2===Object.keys(U).length&&"value"in U&&"disabled"in U}Promise.resolve();const An=class extends zt{constructor(j=null,R,X){super(pt(R),ie(X,R)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(j),this._setUpdateStrategy(R),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),ge(R)&&(R.nonNullable||R.initialValueIsDefault)&&(this.defaultValue=Cn(j)?j.value:j)}setValue(j,R={}){this.value=this._pendingValue=j,this._onChange.length&&!1!==R.emitModelToViewChange&&this._onChange.forEach(X=>X(this.value,!1!==R.emitViewToModelChange)),this.updateValueAndValidity(R)}patchValue(j,R={}){this.setValue(j,R)}reset(j=this.defaultValue,R={}){this._applyFormState(j),this.markAsPristine(R),this.markAsUntouched(R),this.setValue(this.value,R),this._pendingChange=!1}_updateValue(){}_anyControls(j){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(j){this._onChange.push(j)}_unregisterOnChange(j){Sn(this._onChange,j)}registerOnDisabledChange(j){this._onDisabledChange.push(j)}_unregisterOnDisabledChange(j){Sn(this._onDisabledChange,j)}_forEachChild(j){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(j){Cn(j)?(this.value=this._pendingValue=j.value,j.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=j}};Promise.resolve();let qi=(()=>{class U{static{this.\u0275fac=function(X){return new(X||U)}}static{this.\u0275dir=m.FsC({type:U,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return U})();const Ts=new m.nKC(""),hs={provide:Xt,useExisting:(0,m.Rfq)(()=>$i)};let $i=(()=>{class U extends Xt{constructor(R,X,ve){super(),this.callSetDisabledState=ve,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new m.bkB,this._setValidators(R),this._setAsyncValidators(X)}ngOnChanges(R){this._checkFormPresent(),R.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Ai(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(R){const X=this.form.get(R.path);return Ni(X,R,this.callSetDisabledState),X.updateValueAndValidity({emitEvent:!1}),this.directives.push(R),X}getControl(R){return this.form.get(R.path)}removeControl(R){Wn(R.control||null,R,!1),function ar(U,j){const R=U.indexOf(j);R>-1&&U.splice(R,1)}(this.directives,R)}addFormGroup(R){this._setUpFormContainer(R)}removeFormGroup(R){this._cleanUpFormContainer(R)}getFormGroup(R){return this.form.get(R.path)}addFormArray(R){this._setUpFormContainer(R)}removeFormArray(R){this._cleanUpFormContainer(R)}getFormArray(R){return this.form.get(R.path)}updateModel(R,X){this.form.get(R.path).setValue(X)}onSubmit(R){return this.submitted=!0,function ii(U,j){U._syncPendingControls(),j.forEach(R=>{const X=R.control;"submit"===X.updateOn&&X._pendingChange&&(R.viewToModelUpdate(X._pendingValue),X._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(R),"dialog"===R?.target?.method}onReset(){this.resetForm()}resetForm(R=void 0){this.form.reset(R),this.submitted=!1}_updateDomValue(){this.directives.forEach(R=>{const X=R.control,ve=this.form.get(R.path);X!==ve&&(Wn(X||null,R),(U=>U instanceof An)(ve)&&(Ni(ve,R,this.callSetDisabledState),R.control=ve))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(R){const X=this.form.get(R.path);(function se(U,j){Ii(U,j)})(X,R),X.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(R){if(this.form){const X=this.form.get(R.path);X&&function ae(U,j){return Ai(U,j)}(X,R)&&X.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Ii(this.form,this),this._oldForm&&Ai(this._oldForm,this)}_checkFormPresent(){}static{this.\u0275fac=function(X){return new(X||U)(m.rXU(Dt,10),m.rXU(ut,10),m.rXU(fr,8))}}static{this.\u0275dir=m.FsC({type:U,selectors:[["","formGroup",""]],hostBindings:function(X,ve){1&X&&m.bIt("submit",function(Mn){return ve.onSubmit(Mn)})("reset",function(){return ve.onReset()})},inputs:{form:[m.Mj6.None,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[m.Jv_([hs]),m.Vt3,m.OA$]})}}return U})();const Pn={provide:zn,useExisting:(0,m.Rfq)(()=>Si)};let Si=(()=>{class U extends zn{set isDisabled(R){}static{this._ngModelWarningSentOnce=!1}constructor(R,X,ve,Gt,Mn){super(),this._ngModelWarningConfig=Mn,this._added=!1,this.name=null,this.update=new m.bkB,this._ngModelWarningSent=!1,this._parent=R,this._setValidators(X),this._setAsyncValidators(ve),this.valueAccessor=function Kn(U,j){if(!j)return null;let R,X,ve;return Array.isArray(j),j.forEach(Gt=>{Gt.constructor===vt?R=Gt:function yr(U){return Object.getPrototypeOf(U.constructor)===Je}(Gt)?X=Gt:ve=Gt}),ve||X||R||null}(0,Gt)}ngOnChanges(R){this._added||this._setUpControl(),function gn(U,j){if(!U.hasOwnProperty("model"))return!1;const R=U.model;return!!R.isFirstChange()||!Object.is(j,R.currentValue)}(R,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(R){this.viewModel=R,this.update.emit(R)}get path(){return function Ui(U,j){return[...j.path,U]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static{this.\u0275fac=function(X){return new(X||U)(m.rXU(Xt,13),m.rXU(Dt,10),m.rXU(ut,10),m.rXU(xt,10),m.rXU(Ts,8))}}static{this.\u0275dir=m.FsC({type:U,selectors:[["","formControlName",""]],inputs:{name:[m.Mj6.None,"formControlName","name"],isDisabled:[m.Mj6.None,"disabled","isDisabled"],model:[m.Mj6.None,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[m.Jv_([Pn]),m.Vt3,m.OA$]})}}return U})();const Js={provide:xt,useExisting:(0,m.Rfq)(()=>Cs),multi:!0};function xi(U,j){return null==U?`${j}`:(j&&"object"==typeof j&&(j="Object"),`${U}: ${j}`.slice(0,50))}let Cs=(()=>{class U extends Je{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(R){this._compareWith=R}writeValue(R){this.value=R;const ve=xi(this._getOptionId(R),R);this.setProperty("value",ve)}registerOnChange(R){this.onChange=X=>{this.value=this._getOptionValue(X),R(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(R){for(const X of this._optionMap.keys())if(this._compareWith(this._optionMap.get(X),R))return X;return null}_getOptionValue(R){const X=function Zo(U){return U.split(":")[0]}(R);return this._optionMap.has(X)?this._optionMap.get(X):R}static{this.\u0275fac=(()=>{let R;return function(ve){return(R||(R=m.xGo(U)))(ve||U)}})()}static{this.\u0275dir=m.FsC({type:U,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(X,ve){1&X&&m.bIt("change",function(Mn){return ve.onChange(Mn.target.value)})("blur",function(){return ve.onTouched()})},inputs:{compareWith:"compareWith"},features:[m.Jv_([Js]),m.Vt3]})}}return U})(),Zs=(()=>{class U{constructor(R,X,ve){this._element=R,this._renderer=X,this._select=ve,this._select&&(this.id=this._select._registerOption())}set ngValue(R){null!=this._select&&(this._select._optionMap.set(this.id,R),this._setElementValue(xi(this.id,R)),this._select.writeValue(this._select.value))}set value(R){this._setElementValue(R),this._select&&this._select.writeValue(this._select.value)}_setElementValue(R){this._renderer.setProperty(this._element.nativeElement,"value",R)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(X){return new(X||U)(m.rXU(m.aKT),m.rXU(m.sFG),m.rXU(Cs,9))}}static{this.\u0275dir=m.FsC({type:U,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return U})();const Xi={provide:xt,useExisting:(0,m.Rfq)(()=>No),multi:!0};function ps(U,j){return null==U?`${j}`:("string"==typeof j&&(j=`'${j}'`),j&&"object"==typeof j&&(j="Object"),`${U}: ${j}`.slice(0,50))}let No=(()=>{class U extends Je{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(R){this._compareWith=R}writeValue(R){let X;if(this.value=R,Array.isArray(R)){const ve=R.map(Gt=>this._getOptionId(Gt));X=(Gt,Mn)=>{Gt._setSelected(ve.indexOf(Mn.toString())>-1)}}else X=(ve,Gt)=>{ve._setSelected(!1)};this._optionMap.forEach(X)}registerOnChange(R){this.onChange=X=>{const ve=[],Gt=X.selectedOptions;if(void 0!==Gt){const Mn=Gt;for(let Hn=0;Hn<Mn.length;Hn++){const Ji=this._getOptionValue(Mn[Hn].value);ve.push(Ji)}}else{const Mn=X.options;for(let Hn=0;Hn<Mn.length;Hn++){const Ps=Mn[Hn];if(Ps.selected){const Ji=this._getOptionValue(Ps.value);ve.push(Ji)}}}this.value=ve,R(ve)}}_registerOption(R){const X=(this._idCounter++).toString();return this._optionMap.set(X,R),X}_getOptionId(R){for(const X of this._optionMap.keys())if(this._compareWith(this._optionMap.get(X)._value,R))return X;return null}_getOptionValue(R){const X=function Aa(U){return U.split(":")[0]}(R);return this._optionMap.has(X)?this._optionMap.get(X)._value:R}static{this.\u0275fac=(()=>{let R;return function(ve){return(R||(R=m.xGo(U)))(ve||U)}})()}static{this.\u0275dir=m.FsC({type:U,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(X,ve){1&X&&m.bIt("change",function(Mn){return ve.onChange(Mn.target)})("blur",function(){return ve.onTouched()})},inputs:{compareWith:"compareWith"},features:[m.Jv_([Xi]),m.Vt3]})}}return U})(),ir=(()=>{class U{constructor(R,X,ve){this._element=R,this._renderer=X,this._select=ve,this._select&&(this.id=this._select._registerOption(this))}set ngValue(R){null!=this._select&&(this._value=R,this._setElementValue(ps(this.id,R)),this._select.writeValue(this._select.value))}set value(R){this._select?(this._value=R,this._setElementValue(ps(this.id,R)),this._select.writeValue(this._select.value)):this._setElementValue(R)}_setElementValue(R){this._renderer.setProperty(this._element.nativeElement,"value",R)}_setSelected(R){this._renderer.setProperty(this._element.nativeElement,"selected",R)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(X){return new(X||U)(m.rXU(m.aKT),m.rXU(m.sFG),m.rXU(No,9))}}static{this.\u0275dir=m.FsC({type:U,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return U})(),Yi=(()=>{class U{static{this.\u0275fac=function(X){return new(X||U)}}static{this.\u0275mod=m.$C({type:U})}static{this.\u0275inj=m.G2t({})}}return U})();class Gi extends zt{constructor(j,R,X){super(pt(R),ie(X,R)),this.controls=j,this._initObservables(),this._setUpdateStrategy(R),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(j){return this.controls[this._adjustIndex(j)]}push(j,R={}){this.controls.push(j),this._registerControl(j),this.updateValueAndValidity({emitEvent:R.emitEvent}),this._onCollectionChange()}insert(j,R,X={}){this.controls.splice(j,0,R),this._registerControl(R),this.updateValueAndValidity({emitEvent:X.emitEvent})}removeAt(j,R={}){let X=this._adjustIndex(j);X<0&&(X=0),this.controls[X]&&this.controls[X]._registerOnCollectionChange(()=>{}),this.controls.splice(X,1),this.updateValueAndValidity({emitEvent:R.emitEvent})}setControl(j,R,X={}){let ve=this._adjustIndex(j);ve<0&&(ve=0),this.controls[ve]&&this.controls[ve]._registerOnCollectionChange(()=>{}),this.controls.splice(ve,1),R&&(this.controls.splice(ve,0,R),this._registerControl(R)),this.updateValueAndValidity({emitEvent:X.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(j,R={}){Oe(this,0,j),j.forEach((X,ve)=>{tt(this,!1,ve),this.at(ve).setValue(X,{onlySelf:!0,emitEvent:R.emitEvent})}),this.updateValueAndValidity(R)}patchValue(j,R={}){null!=j&&(j.forEach((X,ve)=>{this.at(ve)&&this.at(ve).patchValue(X,{onlySelf:!0,emitEvent:R.emitEvent})}),this.updateValueAndValidity(R))}reset(j=[],R={}){this._forEachChild((X,ve)=>{X.reset(j[ve],{onlySelf:!0,emitEvent:R.emitEvent})}),this._updatePristine(R),this._updateTouched(R),this.updateValueAndValidity(R)}getRawValue(){return this.controls.map(j=>j.getRawValue())}clear(j={}){this.controls.length<1||(this._forEachChild(R=>R._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:j.emitEvent}))}_adjustIndex(j){return j<0?j+this.length:j}_syncPendingControls(){let j=this.controls.reduce((R,X)=>!!X._syncPendingControls()||R,!1);return j&&this.updateValueAndValidity({onlySelf:!0}),j}_forEachChild(j){this.controls.forEach((R,X)=>{j(R,X)})}_updateValue(){this.value=this.controls.filter(j=>j.enabled||this.disabled).map(j=>j.value)}_anyControls(j){return this.controls.some(R=>R.enabled&&j(R))}_setUpControls(){this._forEachChild(j=>this._registerControl(j))}_allControlsDisabled(){for(const j of this.controls)if(j.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(j){j.setParent(this),j._registerOnCollectionChange(this._onCollectionChange)}_find(j){return this.at(j)??null}}function si(U){return!!U&&(void 0!==U.asyncValidators||void 0!==U.validators||void 0!==U.updateOn)}let to=(()=>{class U{constructor(){this.useNonNullable=!1}get nonNullable(){const R=new U;return R.useNonNullable=!0,R}group(R,X=null){const ve=this._reduceControls(R);let Gt={};return si(X)?Gt=X:null!==X&&(Gt.validators=X.validator,Gt.asyncValidators=X.asyncValidator),new Qt(ve,Gt)}record(R,X=null){const ve=this._reduceControls(R);return new en(ve,X)}control(R,X,ve){let Gt={};return this.useNonNullable?(si(X)?Gt=X:(Gt.validators=X,Gt.asyncValidators=ve),new An(R,{...Gt,nonNullable:!0})):new An(R,X,ve)}array(R,X,ve){const Gt=R.map(Mn=>this._createControl(Mn));return new Gi(Gt,X,ve)}_reduceControls(R){const X={};return Object.keys(R).forEach(ve=>{X[ve]=this._createControl(R[ve])}),X}_createControl(R){return R instanceof An||R instanceof zt?R:Array.isArray(R)?this.control(R[0],R.length>1?R[1]:null,R.length>2?R[2]:null):this.control(R)}static{this.\u0275fac=function(X){return new(X||U)}}static{this.\u0275prov=m.jDH({token:U,factory:U.\u0275fac,providedIn:"root"})}}return U})(),zs=(()=>{class U{static withConfig(R){return{ngModule:U,providers:[{provide:fr,useValue:R.callSetDisabledState??Zr}]}}static{this.\u0275fac=function(X){return new(X||U)}}static{this.\u0275mod=m.$C({type:U})}static{this.\u0275inj=m.G2t({imports:[Yi]})}}return U})(),Pi=(()=>{class U{static withConfig(R){return{ngModule:U,providers:[{provide:Ts,useValue:R.warnOnNgModelWithFormControl??"always"},{provide:fr,useValue:R.callSetDisabledState??Zr}]}}static{this.\u0275fac=function(X){return new(X||U)}}static{this.\u0275mod=m.$C({type:U})}static{this.\u0275inj=m.G2t({imports:[Yi]})}}return U})()},345:(on,rt,$)=>{$.d(rt,{Bb:()=>ct,hE:()=>ot,sG:()=>Zt});var m=$(4438),V=$(177);class oe extends V.VF{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class ne extends oe{static makeCurrent(){(0,V.ZD)(new ne)}onAndCancel(te,J,Ee){return te.addEventListener(J,Ee),()=>{te.removeEventListener(J,Ee)}}dispatchEvent(te,J){te.dispatchEvent(J)}remove(te){te.parentNode&&te.parentNode.removeChild(te)}createElement(te,J){return(J=J||this.getDefaultDocument()).createElement(te)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(te){return te.nodeType===Node.ELEMENT_NODE}isShadowRoot(te){return te instanceof DocumentFragment}getGlobalEventTarget(te,J){return"window"===J?window:"document"===J?te:"body"===J?te.body:null}getBaseHref(te){const J=function Ue(){return k=k||document.querySelector("base"),k?k.getAttribute("href"):null}();return null==J?null:function le(G){return new URL(G,document.baseURI).pathname}(J)}resetBaseElement(){k=null}getUserAgent(){return window.navigator.userAgent}getCookie(te){return(0,V._b)(document.cookie,te)}}let k=null,We=(()=>{class G{build(){return new XMLHttpRequest}static{this.\u0275fac=function(Ee){return new(Ee||G)}}static{this.\u0275prov=m.jDH({token:G,factory:G.\u0275fac})}}return G})();const pe=new m.nKC("");let fe=(()=>{class G{constructor(J,Ee){this._zone=Ee,this._eventNameToPlugin=new Map,J.forEach(pt=>{pt.manager=this}),this._plugins=J.slice().reverse()}addEventListener(J,Ee,pt){return this._findPluginFor(Ee).addEventListener(J,Ee,pt)}getZone(){return this._zone}_findPluginFor(J){let Ee=this._eventNameToPlugin.get(J);if(Ee)return Ee;if(Ee=this._plugins.find(Ft=>Ft.supports(J)),!Ee)throw new m.wOt(5101,!1);return this._eventNameToPlugin.set(J,Ee),Ee}static{this.\u0275fac=function(Ee){return new(Ee||G)(m.KVO(pe),m.KVO(m.SKi))}}static{this.\u0275prov=m.jDH({token:G,factory:G.\u0275fac})}}return G})();class Be{constructor(te){this._doc=te}}const At="ng-app-id";let Je=(()=>{class G{constructor(J,Ee,pt,Ft={}){this.doc=J,this.appId=Ee,this.nonce=pt,this.platformId=Ft,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=(0,V.Vy)(Ft),this.resetHostNodes()}addStyles(J){for(const Ee of J)1===this.changeUsageCount(Ee,1)&&this.onStyleAdded(Ee)}removeStyles(J){for(const Ee of J)this.changeUsageCount(Ee,-1)<=0&&this.onStyleRemoved(Ee)}ngOnDestroy(){const J=this.styleNodesInDOM;J&&(J.forEach(Ee=>Ee.remove()),J.clear());for(const Ee of this.getAllStyles())this.onStyleRemoved(Ee);this.resetHostNodes()}addHost(J){this.hostNodes.add(J);for(const Ee of this.getAllStyles())this.addStyleToHost(J,Ee)}removeHost(J){this.hostNodes.delete(J)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(J){for(const Ee of this.hostNodes)this.addStyleToHost(Ee,J)}onStyleRemoved(J){const Ee=this.styleRef;Ee.get(J)?.elements?.forEach(pt=>pt.remove()),Ee.delete(J)}collectServerRenderedStyles(){const J=this.doc.head?.querySelectorAll(`style[${At}="${this.appId}"]`);if(J?.length){const Ee=new Map;return J.forEach(pt=>{null!=pt.textContent&&Ee.set(pt.textContent,pt)}),Ee}return null}changeUsageCount(J,Ee){const pt=this.styleRef;if(pt.has(J)){const Ft=pt.get(J);return Ft.usage+=Ee,Ft.usage}return pt.set(J,{usage:Ee,elements:[]}),Ee}getStyleElement(J,Ee){const pt=this.styleNodesInDOM,Ft=pt?.get(Ee);if(Ft?.parentNode===J)return pt.delete(Ee),Ft.removeAttribute(At),Ft;{const ie=this.doc.createElement("style");return this.nonce&&ie.setAttribute("nonce",this.nonce),ie.textContent=Ee,this.platformIsServer&&ie.setAttribute(At,this.appId),J.appendChild(ie),ie}}addStyleToHost(J,Ee){const pt=this.getStyleElement(J,Ee),Ft=this.styleRef,ie=Ft.get(Ee)?.elements;ie?ie.push(pt):Ft.set(Ee,{elements:[pt],usage:1})}resetHostNodes(){const J=this.hostNodes;J.clear(),J.add(this.doc.head)}static{this.\u0275fac=function(Ee){return new(Ee||G)(m.KVO(V.qQ),m.KVO(m.sZ2),m.KVO(m.BIS,8),m.KVO(m.Agw))}}static{this.\u0275prov=m.jDH({token:G,factory:G.\u0275fac})}}return G})();const xt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},qt=/%COMP%/g,vt=new m.nKC("",{providedIn:"root",factory:()=>!0});function Dt(G,te){return te.map(J=>J.replace(qt,G))}let ut=(()=>{class G{constructor(J,Ee,pt,Ft,ie,ue,ge,tt=null){this.eventManager=J,this.sharedStylesHost=Ee,this.appId=pt,this.removeStylesOnCompDestroy=Ft,this.doc=ie,this.platformId=ue,this.ngZone=ge,this.nonce=tt,this.rendererByCompId=new Map,this.platformIsServer=(0,V.Vy)(ue),this.defaultRenderer=new Ut(J,ie,ge,this.platformIsServer)}createRenderer(J,Ee){if(!J||!Ee)return this.defaultRenderer;this.platformIsServer&&Ee.encapsulation===m.gXe.ShadowDom&&(Ee={...Ee,encapsulation:m.gXe.Emulated});const pt=this.getOrCreateRenderer(J,Ee);return pt instanceof Ct?pt.applyToHost(J):pt instanceof wt&&pt.applyStyles(),pt}getOrCreateRenderer(J,Ee){const pt=this.rendererByCompId;let Ft=pt.get(Ee.id);if(!Ft){const ie=this.doc,ue=this.ngZone,ge=this.eventManager,tt=this.sharedStylesHost,Oe=this.removeStylesOnCompDestroy,zt=this.platformIsServer;switch(Ee.encapsulation){case m.gXe.Emulated:Ft=new Ct(ge,tt,Ee,this.appId,Oe,ie,ue,zt);break;case m.gXe.ShadowDom:return new bn(ge,tt,J,Ee,ie,ue,this.nonce,zt);default:Ft=new wt(ge,tt,Ee,Oe,ie,ue,zt)}pt.set(Ee.id,Ft)}return Ft}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(Ee){return new(Ee||G)(m.KVO(fe),m.KVO(Je),m.KVO(m.sZ2),m.KVO(vt),m.KVO(V.qQ),m.KVO(m.Agw),m.KVO(m.SKi),m.KVO(m.BIS))}}static{this.\u0275prov=m.jDH({token:G,factory:G.\u0275fac})}}return G})();class Ut{constructor(te,J,Ee,pt){this.eventManager=te,this.doc=J,this.ngZone=Ee,this.platformIsServer=pt,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(te,J){return J?this.doc.createElementNS(xt[J]||J,te):this.doc.createElement(te)}createComment(te){return this.doc.createComment(te)}createText(te){return this.doc.createTextNode(te)}appendChild(te,J){(rn(te)?te.content:te).appendChild(J)}insertBefore(te,J,Ee){te&&(rn(te)?te.content:te).insertBefore(J,Ee)}removeChild(te,J){te&&te.removeChild(J)}selectRootElement(te,J){let Ee="string"==typeof te?this.doc.querySelector(te):te;if(!Ee)throw new m.wOt(-5104,!1);return J||(Ee.textContent=""),Ee}parentNode(te){return te.parentNode}nextSibling(te){return te.nextSibling}setAttribute(te,J,Ee,pt){if(pt){J=pt+":"+J;const Ft=xt[pt];Ft?te.setAttributeNS(Ft,J,Ee):te.setAttribute(J,Ee)}else te.setAttribute(J,Ee)}removeAttribute(te,J,Ee){if(Ee){const pt=xt[Ee];pt?te.removeAttributeNS(pt,J):te.removeAttribute(`${Ee}:${J}`)}else te.removeAttribute(J)}addClass(te,J){te.classList.add(J)}removeClass(te,J){te.classList.remove(J)}setStyle(te,J,Ee,pt){pt&(m.czy.DashCase|m.czy.Important)?te.style.setProperty(J,Ee,pt&m.czy.Important?"important":""):te.style[J]=Ee}removeStyle(te,J,Ee){Ee&m.czy.DashCase?te.style.removeProperty(J):te.style[J]=""}setProperty(te,J,Ee){null!=te&&(te[J]=Ee)}setValue(te,J){te.nodeValue=J}listen(te,J,Ee){if("string"==typeof te&&!(te=(0,V.QT)().getGlobalEventTarget(this.doc,te)))throw new Error(`Unsupported event target ${te} for event ${J}`);return this.eventManager.addEventListener(te,J,this.decoratePreventDefault(Ee))}decoratePreventDefault(te){return J=>{if("__ngUnwrap__"===J)return te;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>te(J)):te(J))&&J.preventDefault()}}}function rn(G){return"TEMPLATE"===G.tagName&&void 0!==G.content}class bn extends Ut{constructor(te,J,Ee,pt,Ft,ie,ue,ge){super(te,Ft,ie,ge),this.sharedStylesHost=J,this.hostEl=Ee,this.shadowRoot=Ee.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const tt=Dt(pt.id,pt.styles);for(const Oe of tt){const zt=document.createElement("style");ue&&zt.setAttribute("nonce",ue),zt.textContent=Oe,this.shadowRoot.appendChild(zt)}}nodeOrShadowRoot(te){return te===this.hostEl?this.shadowRoot:te}appendChild(te,J){return super.appendChild(this.nodeOrShadowRoot(te),J)}insertBefore(te,J,Ee){return super.insertBefore(this.nodeOrShadowRoot(te),J,Ee)}removeChild(te,J){return super.removeChild(this.nodeOrShadowRoot(te),J)}parentNode(te){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(te)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class wt extends Ut{constructor(te,J,Ee,pt,Ft,ie,ue,ge){super(te,Ft,ie,ue),this.sharedStylesHost=J,this.removeStylesOnCompDestroy=pt,this.styles=ge?Dt(ge,Ee.styles):Ee.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class Ct extends wt{constructor(te,J,Ee,pt,Ft,ie,ue,ge){const tt=pt+"-"+Ee.id;super(te,J,Ee,Ft,ie,ue,ge,tt),this.contentAttr=function he(G){return"_ngcontent-%COMP%".replace(qt,G)}(tt),this.hostAttr=function at(G){return"_nghost-%COMP%".replace(qt,G)}(tt)}applyToHost(te){this.applyStyles(),this.setAttribute(te,this.hostAttr,"")}createElement(te,J){const Ee=super.createElement(te,J);return super.setAttribute(Ee,this.contentAttr,""),Ee}}let Bn=(()=>{class G extends Be{constructor(J){super(J)}supports(J){return!0}addEventListener(J,Ee,pt){return J.addEventListener(Ee,pt,!1),()=>this.removeEventListener(J,Ee,pt)}removeEventListener(J,Ee,pt){return J.removeEventListener(Ee,pt)}static{this.\u0275fac=function(Ee){return new(Ee||G)(m.KVO(V.qQ))}}static{this.\u0275prov=m.jDH({token:G,factory:G.\u0275fac})}}return G})();const Ze=["alt","control","meta","shift"],Ae={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Pe={alt:G=>G.altKey,control:G=>G.ctrlKey,meta:G=>G.metaKey,shift:G=>G.shiftKey};let Jt=(()=>{class G extends Be{constructor(J){super(J)}supports(J){return null!=G.parseEventName(J)}addEventListener(J,Ee,pt){const Ft=G.parseEventName(Ee),ie=G.eventCallback(Ft.fullKey,pt,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,V.QT)().onAndCancel(J,Ft.domEventName,ie))}static parseEventName(J){const Ee=J.toLowerCase().split("."),pt=Ee.shift();if(0===Ee.length||"keydown"!==pt&&"keyup"!==pt)return null;const Ft=G._normalizeKey(Ee.pop());let ie="",ue=Ee.indexOf("code");if(ue>-1&&(Ee.splice(ue,1),ie="code."),Ze.forEach(tt=>{const Oe=Ee.indexOf(tt);Oe>-1&&(Ee.splice(Oe,1),ie+=tt+".")}),ie+=Ft,0!=Ee.length||0===Ft.length)return null;const ge={};return ge.domEventName=pt,ge.fullKey=ie,ge}static matchEventFullKeyCode(J,Ee){let pt=Ae[J.key]||J.key,Ft="";return Ee.indexOf("code.")>-1&&(pt=J.code,Ft="code."),!(null==pt||!pt)&&(pt=pt.toLowerCase()," "===pt?pt="space":"."===pt&&(pt="dot"),Ze.forEach(ie=>{ie!==pt&&(0,Pe[ie])(J)&&(Ft+=ie+".")}),Ft+=pt,Ft===Ee)}static eventCallback(J,Ee,pt){return Ft=>{G.matchEventFullKeyCode(Ft,J)&&pt.runGuarded(()=>Ee(Ft))}}static _normalizeKey(J){return"esc"===J?"escape":J}static{this.\u0275fac=function(Ee){return new(Ee||G)(m.KVO(V.qQ))}}static{this.\u0275prov=m.jDH({token:G,factory:G.\u0275fac})}}return G})();const Zt=(0,m.oH4)(m.fpN,"browser",[{provide:m.Agw,useValue:V.AJ},{provide:m.PLl,useValue:function He(){ne.makeCurrent()},multi:!0},{provide:V.qQ,useFactory:function bt(){return(0,m.TL$)(document),document},deps:[]}]),Wt=new m.nKC(""),$e=[{provide:m.e01,useClass:class Qe{addToWindow(te){m.JZv.getAngularTestability=(Ee,pt=!0)=>{const Ft=te.findTestabilityInTree(Ee,pt);if(null==Ft)throw new m.wOt(5103,!1);return Ft},m.JZv.getAllAngularTestabilities=()=>te.getAllTestabilities(),m.JZv.getAllAngularRootElements=()=>te.getAllRootElements(),m.JZv.frameworkStabilizers||(m.JZv.frameworkStabilizers=[]),m.JZv.frameworkStabilizers.push(Ee=>{const pt=m.JZv.getAllAngularTestabilities();let Ft=pt.length;const ie=function(){Ft--,0==Ft&&Ee()};pt.forEach(ue=>{ue.whenStable(ie)})})}findTestabilityInTree(te,J,Ee){return null==J?null:te.getTestability(J)??(Ee?(0,V.QT)().isShadowRoot(J)?this.findTestabilityInTree(te,J.host,!0):this.findTestabilityInTree(te,J.parentElement,!0):null)}},deps:[]},{provide:m.WHO,useClass:m.NYb,deps:[m.SKi,m.giA,m.e01]},{provide:m.NYb,useClass:m.NYb,deps:[m.SKi,m.giA,m.e01]}],gt=[{provide:m.H8p,useValue:"root"},{provide:m.zcH,useFactory:function lt(){return new m.zcH},deps:[]},{provide:pe,useClass:Bn,multi:!0,deps:[V.qQ,m.SKi,m.Agw]},{provide:pe,useClass:Jt,multi:!0,deps:[V.qQ]},ut,Je,fe,{provide:m._9s,useExisting:ut},{provide:V.N0,useClass:We,deps:[]},[]];let ct=(()=>{class G{constructor(J){}static withServerTransition(J){return{ngModule:G,providers:[{provide:m.sZ2,useValue:J.appId}]}}static{this.\u0275fac=function(Ee){return new(Ee||G)(m.KVO(Wt,12))}}static{this.\u0275mod=m.$C({type:G})}static{this.\u0275inj=m.G2t({providers:[...gt,...$e],imports:[V.MD,m.Hbi]})}}return G})(),ot=(()=>{class G{constructor(J){this._doc=J}getTitle(){return this._doc.title}setTitle(J){this._doc.title=J||""}static{this.\u0275fac=function(Ee){return new(Ee||G)(m.KVO(V.qQ))}}static{this.\u0275prov=m.jDH({token:G,factory:G.\u0275fac,providedIn:"root"})}}return G})()},9888:(on,rt,$)=>{$.d(rt,{wF:()=>Fr,Ix:()=>Nr,Wk:()=>Eo,iI:()=>Wc,n3:()=>vr});var m=$(467),V=$(4438),oe=$(1985),ne=$(8071),Ue=$(8455),le=$(7673),Qe=$(4412),We=$(3073),pe=$(3669),fe=$(6450),Be=$(3794),At=$(8496),Je=$(4360),xt=$(5225);function qt(...E){const C=(0,Be.lI)(E),w=(0,Be.ms)(E),{args:b,keys:O}=(0,We.D)(E);if(0===b.length)return(0,Ue.H)([],C);const q=new oe.c(function $t(E,C,w=pe.D){return b=>{Nt(C,()=>{const{length:O}=E,q=new Array(O);let de=O,et=O;for(let ze=0;ze<O;ze++)Nt(C,()=>{const tn=(0,Ue.H)(E[ze],C);let Un=!1;tn.subscribe((0,Je._)(b,Fn=>{q[ze]=Fn,Un||(Un=!0,et--),et||b.next(w(q.slice()))},()=>{--de||b.complete()}))},b)},b)}}(b,C,O?de=>(0,At.e)(O,de):pe.D));return w?q.pipe((0,fe.I)(w)):q}function Nt(E,C,w){E?(0,xt.N)(w,E,C):C()}var un=$(9350),ln=$(8793),vt=$(8750);function he(E){return new oe.c(C=>{(0,vt.Tg)(E()).subscribe(C)})}var at=$(1203);function Dt(E,C){const w=(0,ne.T)(E)?E:()=>E,b=O=>O.error(w());return new oe.c(C?O=>C.schedule(b,0,O):b)}var ut=$(983),Ut=$(8359),be=$(9974);function Xe(){return(0,be.N)((E,C)=>{let w=null;E._refCount++;const b=(0,Je._)(C,void 0,void 0,void 0,()=>{if(!E||E._refCount<=0||0<--E._refCount)return void(w=null);const O=E._connection,q=w;w=null,O&&(!q||O===q)&&O.unsubscribe(),C.unsubscribe()});E.subscribe(b),b.closed||(w=E.connect())})}class rn extends oe.c{constructor(C,w){super(),this.source=C,this.subjectFactory=w,this._subject=null,this._refCount=0,this._connection=null,(0,be.S)(C)&&(this.lift=C.lift)}_subscribe(C){return this.getSubject().subscribe(C)}getSubject(){const C=this._subject;return(!C||C.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:C}=this;this._subject=this._connection=null,C?.unsubscribe()}connect(){let C=this._connection;if(!C){C=this._connection=new Ut.yU;const w=this.getSubject();C.add(this.source.subscribe((0,Je._)(w,void 0,()=>{this._teardown(),w.complete()},b=>{this._teardown(),w.error(b)},()=>this._teardown()))),C.closed&&(this._connection=null,C=Ut.yU.EMPTY)}return C}refCount(){return Xe()(this)}}var bn=$(1413),wt=$(177),Ct=$(6354),Bn=$(5558),Ze=$(6697),Ae=$(9172),Pe=$(5964),Jt=$(1397),Re=$(1594),Me=$(274),Ne=$(8141);function ye(E){return(0,be.N)((C,w)=>{let q,b=null,O=!1;b=C.subscribe((0,Je._)(w,void 0,void 0,de=>{q=(0,vt.Tg)(E(de,ye(E)(C))),b?(b.unsubscribe(),b=null,q.subscribe(w)):O=!0})),O&&(b.unsubscribe(),b=null,q.subscribe(w))})}var He=$(2816),lt=$(9901);function bt(E){return E<=0?()=>ut.w:(0,be.N)((C,w)=>{let b=[];C.subscribe((0,Je._)(w,O=>{b.push(O),E<b.length&&b.shift()},()=>{for(const O of b)w.next(O);w.complete()},void 0,()=>{b=null}))})}var cn=$(3774),$e=$(980),gt=$(5343),dt=$(6365),ht=$(345);const ot="primary",Pt=Symbol("RouteTitle");class Xt{constructor(C){this.params=C||{}}has(C){return Object.prototype.hasOwnProperty.call(this.params,C)}get(C){if(this.has(C)){const w=this.params[C];return Array.isArray(w)?w[0]:w}return null}getAll(C){if(this.has(C)){const w=this.params[C];return Array.isArray(w)?w:[w]}return[]}get keys(){return Object.keys(this.params)}}function zn(E){return new Xt(E)}function Dn(E,C,w){const b=w.path.split("/");if(b.length>E.length||"full"===w.pathMatch&&(C.hasChildren()||b.length<E.length))return null;const O={};for(let q=0;q<b.length;q++){const de=b[q],et=E[q];if(de.startsWith(":"))O[de.substring(1)]=et;else if(de!==et.path)return null}return{consumed:E.slice(0,b.length),posParams:O}}function mr(E,C){const w=E?Nn(E):void 0,b=C?Nn(C):void 0;if(!w||!b||w.length!=b.length)return!1;let O;for(let q=0;q<w.length;q++)if(O=w[q],!an(E[O],C[O]))return!1;return!0}function Nn(E){return[...Object.keys(E),...Object.getOwnPropertySymbols(E)]}function an(E,C){if(Array.isArray(E)&&Array.isArray(C)){if(E.length!==C.length)return!1;const w=[...E].sort(),b=[...C].sort();return w.every((O,q)=>b[q]===O)}return E===C}function mn(E){return E.length>0?E[E.length-1]:null}function Yn(E){return function k(E){return!!E&&(E instanceof oe.c||(0,ne.T)(E.lift)&&(0,ne.T)(E.subscribe))}(E)?E:(0,V.jNT)(E)?(0,Ue.H)(Promise.resolve(E)):(0,le.of)(E)}const xr={exact:function _r(E,C,w){if(!mt(E.segments,C.segments)||!In(E.segments,C.segments,w)||E.numberOfChildren!==C.numberOfChildren)return!1;for(const b in C.children)if(!E.children[b]||!_r(E.children[b],C.children[b],w))return!1;return!0},subset:Kr},Jn={exact:function Or(E,C){return mr(E,C)},subset:function En(E,C){return Object.keys(C).length<=Object.keys(E).length&&Object.keys(C).every(w=>an(E[w],C[w]))},ignored:()=>!0};function gi(E,C,w){return xr[w.paths](E.root,C.root,w.matrixParams)&&Jn[w.queryParams](E.queryParams,C.queryParams)&&!("exact"===w.fragment&&E.fragment!==C.fragment)}function Kr(E,C,w){return jn(E,C,C.segments,w)}function jn(E,C,w,b){if(E.segments.length>w.length){const O=E.segments.slice(0,w.length);return!(!mt(O,w)||C.hasChildren()||!In(O,w,b))}if(E.segments.length===w.length){if(!mt(E.segments,w)||!In(E.segments,w,b))return!1;for(const O in C.children)if(!E.children[O]||!Kr(E.children[O],C.children[O],b))return!1;return!0}{const O=w.slice(0,E.segments.length),q=w.slice(E.segments.length);return!!(mt(E.segments,O)&&In(E.segments,O,b)&&E.children[ot])&&jn(E.children[ot],C,q,b)}}function In(E,C,w){return C.every((b,O)=>Jn[w](E[O].parameters,b.parameters))}class Jr{constructor(C=new Ie([],{}),w={},b=null){this.root=C,this.queryParams=w,this.fragment=b}get queryParamMap(){return this._queryParamMap??=zn(this.queryParams),this._queryParamMap}toString(){return J.serialize(this)}}class Ie{constructor(C,w){this.segments=C,this.children=w,this.parent=null,Object.values(w).forEach(b=>b.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ee(this)}}class or{constructor(C,w){this.path=C,this.parameters=w}get parameterMap(){return this._parameterMap??=zn(this.parameters),this._parameterMap}toString(){return zt(this)}}function mt(E,C){return E.length===C.length&&E.every((w,b)=>w.path===C[b].path)}let G=(()=>{class E{static{this.\u0275fac=function(b){return new(b||E)}}static{this.\u0275prov=V.jDH({token:E,factory:()=>new te,providedIn:"root"})}}return E})();class te{parse(C){const w=new Wn(C);return new Jr(w.parseRootSegment(),w.parseQueryParams(),w.parseFragment())}serialize(C){const w=`/${pt(C.root,!0)}`,b=function Dr(E){const C=Object.entries(E).map(([w,b])=>Array.isArray(b)?b.map(O=>`${ie(w)}=${ie(O)}`).join("&"):`${ie(w)}=${ie(b)}`).filter(w=>w);return C.length?`?${C.join("&")}`:""}(C.queryParams);return`${w}${b}${"string"==typeof C.fragment?`#${function ue(E){return encodeURI(E)}(C.fragment)}`:""}`}}const J=new te;function Ee(E){return E.segments.map(C=>zt(C)).join("/")}function pt(E,C){if(!E.hasChildren())return Ee(E);if(C){const w=E.children[ot]?pt(E.children[ot],!1):"",b=[];return Object.entries(E.children).forEach(([O,q])=>{O!==ot&&b.push(`${O}:${pt(q,!1)}`)}),b.length>0?`${w}(${b.join("//")})`:w}{const w=function Y(E,C){let w=[];return Object.entries(E.children).forEach(([b,O])=>{b===ot&&(w=w.concat(C(O,b)))}),Object.entries(E.children).forEach(([b,O])=>{b!==ot&&(w=w.concat(C(O,b)))}),w}(E,(b,O)=>O===ot?[pt(E.children[ot],!1)]:[`${O}:${pt(b,!1)}`]);return 1===Object.keys(E.children).length&&null!=E.children[ot]?`${Ee(E)}/${w[0]}`:`${Ee(E)}/(${w.join("//")})`}}function Ft(E){return encodeURIComponent(E).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ie(E){return Ft(E).replace(/%3B/gi,";")}function ge(E){return Ft(E).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function tt(E){return decodeURIComponent(E)}function Oe(E){return tt(E.replace(/\+/g,"%20"))}function zt(E){return`${ge(E.path)}${function Qt(E){return Object.entries(E).map(([C,w])=>`;${ge(C)}=${ge(w)}`).join("")}(E.parameters)}`}const qr=/^[^\/()?;#]+/;function wn(E){const C=E.match(qr);return C?C[0]:""}const en=/^[^\/()?;=#]+/,fr=/^[^=?&#]+/,Ui=/^[^&#]+/;class Wn{constructor(C){this.url=C,this.remaining=C}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ie([],{}):new Ie([],this.parseChildren())}parseQueryParams(){const C={};if(this.consumeOptional("?"))do{this.parseQueryParam(C)}while(this.consumeOptional("&"));return C}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const C=[];for(this.peekStartsWith("(")||C.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),C.push(this.parseSegment());let w={};this.peekStartsWith("/(")&&(this.capture("/"),w=this.parseParens(!0));let b={};return this.peekStartsWith("(")&&(b=this.parseParens(!1)),(C.length>0||Object.keys(w).length>0)&&(b[ot]=new Ie(C,w)),b}parseSegment(){const C=wn(this.remaining);if(""===C&&this.peekStartsWith(";"))throw new V.wOt(4009,!1);return this.capture(C),new or(tt(C),this.parseMatrixParams())}parseMatrixParams(){const C={};for(;this.consumeOptional(";");)this.parseParam(C);return C}parseParam(C){const w=function Vn(E){const C=E.match(en);return C?C[0]:""}(this.remaining);if(!w)return;this.capture(w);let b="";if(this.consumeOptional("=")){const O=wn(this.remaining);O&&(b=O,this.capture(b))}C[tt(w)]=tt(b)}parseQueryParam(C){const w=function Zr(E){const C=E.match(fr);return C?C[0]:""}(this.remaining);if(!w)return;this.capture(w);let b="";if(this.consumeOptional("=")){const de=function Ni(E){const C=E.match(Ui);return C?C[0]:""}(this.remaining);de&&(b=de,this.capture(b))}const O=Oe(w),q=Oe(b);if(C.hasOwnProperty(O)){let de=C[O];Array.isArray(de)||(de=[de],C[O]=de),de.push(q)}else C[O]=q}parseParens(C){const w={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const b=wn(this.remaining),O=this.remaining[b.length];if("/"!==O&&")"!==O&&";"!==O)throw new V.wOt(4010,!1);let q;b.indexOf(":")>-1?(q=b.slice(0,b.indexOf(":")),this.capture(q),this.capture(":")):C&&(q=ot);const de=this.parseChildren();w[q]=1===Object.keys(de).length?de[ot]:new Ie([],de),this.consumeOptional("//")}return w}peekStartsWith(C){return this.remaining.startsWith(C)}consumeOptional(C){return!!this.peekStartsWith(C)&&(this.remaining=this.remaining.substring(C.length),!0)}capture(C){if(!this.consumeOptional(C))throw new V.wOt(4011,!1)}}function Is(E){return E.segments.length>0?new Ie([],{[ot]:E}):E}function cs(E){const C={};for(const[b,O]of Object.entries(E.children)){const q=cs(O);if(b===ot&&0===q.segments.length&&q.hasChildren())for(const[de,et]of Object.entries(q.children))C[de]=et;else(q.segments.length>0||q.hasChildren())&&(C[b]=q)}return function Ii(E){if(1===E.numberOfChildren&&E.children[ot]){const C=E.children[ot];return new Ie(E.segments.concat(C.segments),C.children)}return E}(new Ie(E.segments,C))}function Ai(E){return E instanceof Jr}function ke(E){let C;const O=Is(function w(q){const de={};for(const ze of q.children){const tn=w(ze);de[ze.outlet]=tn}const et=new Ie(q.url,de);return q===E&&(C=et),et}(E.root));return C??O}function _t(E,C,w,b){let O=E;for(;O.parent;)O=O.parent;if(0===C.length)return ae(O,O,O,w,b);const q=function St(E){if("string"==typeof E[0]&&1===E.length&&"/"===E[0])return new je(!0,0,E);let C=0,w=!1;const b=E.reduce((O,q,de)=>{if("object"==typeof q&&null!=q){if(q.outlets){const et={};return Object.entries(q.outlets).forEach(([ze,tn])=>{et[ze]="string"==typeof tn?tn.split("/"):tn}),[...O,{outlets:et}]}if(q.segmentPath)return[...O,q.segmentPath]}return"string"!=typeof q?[...O,q]:0===de?(q.split("/").forEach((et,ze)=>{0==ze&&"."===et||(0==ze&&""===et?w=!0:".."===et?C++:""!=et&&O.push(et))}),O):[...O,q]},[]);return new je(w,C,b)}(C);if(q.toRoot())return ae(O,O,new Ie([],{}),w,b);const de=function sn(E,C,w){if(E.isAbsolute)return new kt(C,!0,0);if(!w)return new kt(C,!1,NaN);if(null===w.parent)return new kt(w,!0,0);const b=W(E.commands[0])?0:1;return function gn(E,C,w){let b=E,O=C,q=w;for(;q>O;){if(q-=O,b=b.parent,!b)throw new V.wOt(4005,!1);O=b.segments.length}return new kt(b,!1,O-q)}(w,w.segments.length-1+b,E.numberOfDoubleDots)}(q,O,E),et=de.processChildren?Kn(de.segmentGroup,de.index,q.commands):ii(de.segmentGroup,de.index,q.commands);return ae(O,de.segmentGroup,et,w,b)}function W(E){return"object"==typeof E&&null!=E&&!E.outlets&&!E.segmentPath}function se(E){return"object"==typeof E&&null!=E&&E.outlets}function ae(E,C,w,b,O){let de,q={};b&&Object.entries(b).forEach(([ze,tn])=>{q[ze]=Array.isArray(tn)?tn.map(Un=>`${Un}`):`${tn}`}),de=E===C?w:Fe(E,C,w);const et=Is(cs(de));return new Jr(et,q,O)}function Fe(E,C,w){const b={};return Object.entries(E.children).forEach(([O,q])=>{b[O]=q===C?w:Fe(q,C,w)}),new Ie(E.segments,b)}class je{constructor(C,w,b){if(this.isAbsolute=C,this.numberOfDoubleDots=w,this.commands=b,C&&b.length>0&&W(b[0]))throw new V.wOt(4003,!1);const O=b.find(se);if(O&&O!==mn(b))throw new V.wOt(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class kt{constructor(C,w,b){this.segmentGroup=C,this.processChildren=w,this.index=b}}function ii(E,C,w){if(E??=new Ie([],{}),0===E.segments.length&&E.hasChildren())return Kn(E,C,w);const b=function ar(E,C,w){let b=0,O=C;const q={match:!1,pathIndex:0,commandIndex:0};for(;O<E.segments.length;){if(b>=w.length)return q;const de=E.segments[O],et=w[b];if(se(et))break;const ze=`${et}`,tn=b<w.length-1?w[b+1]:null;if(O>0&&void 0===ze)break;if(ze&&tn&&"object"==typeof tn&&void 0===tn.outlets){if(!rr(ze,tn,de))return q;b+=2}else{if(!rr(ze,{},de))return q;b++}O++}return{match:!0,pathIndex:O,commandIndex:b}}(E,C,w),O=w.slice(b.commandIndex);if(b.match&&b.pathIndex<E.segments.length){const q=new Ie(E.segments.slice(0,b.pathIndex),{});return q.children[ot]=new Ie(E.segments.slice(b.pathIndex),E.children),Kn(q,0,O)}return b.match&&0===O.length?new Ie(E.segments,{}):b.match&&!E.hasChildren()?Ci(E,C,w):b.match?Kn(E,0,O):Ci(E,C,w)}function Kn(E,C,w){if(0===w.length)return new Ie(E.segments,{});{const b=function yr(E){return se(E[0])?E[0].outlets:{[ot]:E}}(w),O={};if(Object.keys(b).some(q=>q!==ot)&&E.children[ot]&&1===E.numberOfChildren&&0===E.children[ot].segments.length){const q=Kn(E.children[ot],C,w);return new Ie(E.segments,q.children)}return Object.entries(b).forEach(([q,de])=>{"string"==typeof de&&(de=[de]),null!==de&&(O[q]=ii(E.children[q],C,de))}),Object.entries(E.children).forEach(([q,de])=>{void 0===b[q]&&(O[q]=de)}),new Ie(E.segments,O)}}function Ci(E,C,w){const b=E.segments.slice(0,C);let O=0;for(;O<w.length;){const q=w[O];if(se(q)){const ze=jr(q.outlets);return new Ie(b,ze)}if(0===O&&W(w[0])){b.push(new or(E.segments[C].path,qn(w[0]))),O++;continue}const de=se(q)?q.outlets[ot]:`${q}`,et=O<w.length-1?w[O+1]:null;de&&et&&W(et)?(b.push(new or(de,qn(et))),O+=2):(b.push(new or(de,{})),O++)}return new Ie(b,{})}function jr(E){const C={};return Object.entries(E).forEach(([w,b])=>{"string"==typeof b&&(b=[b]),null!==b&&(C[w]=Ci(new Ie([],{}),0,b))}),C}function qn(E){const C={};return Object.entries(E).forEach(([w,b])=>C[w]=`${b}`),C}function rr(E,C,w){return E==w.path&&mr(C,w.parameters)}const Sn="imperative";var Cn=function(E){return E[E.NavigationStart=0]="NavigationStart",E[E.NavigationEnd=1]="NavigationEnd",E[E.NavigationCancel=2]="NavigationCancel",E[E.NavigationError=3]="NavigationError",E[E.RoutesRecognized=4]="RoutesRecognized",E[E.ResolveStart=5]="ResolveStart",E[E.ResolveEnd=6]="ResolveEnd",E[E.GuardsCheckStart=7]="GuardsCheckStart",E[E.GuardsCheckEnd=8]="GuardsCheckEnd",E[E.RouteConfigLoadStart=9]="RouteConfigLoadStart",E[E.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",E[E.ChildActivationStart=11]="ChildActivationStart",E[E.ChildActivationEnd=12]="ChildActivationEnd",E[E.ActivationStart=13]="ActivationStart",E[E.ActivationEnd=14]="ActivationEnd",E[E.Scroll=15]="Scroll",E[E.NavigationSkipped=16]="NavigationSkipped",E}(Cn||{});class An{constructor(C,w){this.id=C,this.url=w}}class xn extends An{constructor(C,w,b="imperative",O=null){super(C,w),this.type=Cn.NavigationStart,this.navigationTrigger=b,this.restoredState=O}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Fr extends An{constructor(C,w,b){super(C,w),this.urlAfterRedirects=b,this.type=Cn.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}var pr=function(E){return E[E.Redirect=0]="Redirect",E[E.SupersededByNewNavigation=1]="SupersededByNewNavigation",E[E.NoDataFromResolver=2]="NoDataFromResolver",E[E.GuardRejected=3]="GuardRejected",E}(pr||{}),dn=function(E){return E[E.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",E[E.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",E}(dn||{});class Qn extends An{constructor(C,w,b,O){super(C,w),this.reason=b,this.code=O,this.type=Cn.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class wa extends An{constructor(C,w,b,O){super(C,w),this.reason=b,this.code=O,this.type=Cn.NavigationSkipped}}class cr extends An{constructor(C,w,b,O){super(C,w),this.error=b,this.target=O,this.type=Cn.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Ta extends An{constructor(C,w,b,O){super(C,w),this.urlAfterRedirects=b,this.state=O,this.type=Cn.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ls extends An{constructor(C,w,b,O){super(C,w),this.urlAfterRedirects=b,this.state=O,this.type=Cn.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Lr extends An{constructor(C,w,b,O,q){super(C,w),this.urlAfterRedirects=b,this.state=O,this.shouldActivate=q,this.type=Cn.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Bi extends An{constructor(C,w,b,O){super(C,w),this.urlAfterRedirects=b,this.state=O,this.type=Cn.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Xn extends An{constructor(C,w,b,O){super(C,w),this.urlAfterRedirects=b,this.state=O,this.type=Cn.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class qi{constructor(C){this.route=C,this.type=Cn.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Ys{constructor(C){this.route=C,this.type=Cn.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class mi{constructor(C){this.snapshot=C,this.type=Cn.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ws{constructor(C){this.snapshot=C,this.type=Cn.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Hs{constructor(C){this.snapshot=C,this.type=Cn.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Da{constructor(C){this.snapshot=C,this.type=Cn.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class wi{constructor(C,w,b){this.routerEvent=C,this.position=w,this.anchor=b,this.type=Cn.Scroll}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class bi{}class ji{constructor(C){this.url=C}}class Jo{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new ds,this.attachRef=null}}let ds=(()=>{class E{constructor(){this.contexts=new Map}onChildOutletCreated(w,b){const O=this.getOrCreateContext(w);O.outlet=b,this.contexts.set(w,O)}onChildOutletDestroyed(w){const b=this.getContext(w);b&&(b.outlet=null,b.attachRef=null)}onOutletDeactivated(){const w=this.contexts;return this.contexts=new Map,w}onOutletReAttached(w){this.contexts=w}getOrCreateContext(w){let b=this.getContext(w);return b||(b=new Jo,this.contexts.set(w,b)),b}getContext(w){return this.contexts.get(w)||null}static{this.\u0275fac=function(b){return new(b||E)}}static{this.\u0275prov=V.jDH({token:E,factory:E.\u0275fac,providedIn:"root"})}}return E})();class hs{constructor(C){this._root=C}get root(){return this._root.value}parent(C){const w=this.pathFromRoot(C);return w.length>1?w[w.length-2]:null}children(C){const w=$i(C,this._root);return w?w.children.map(b=>b.value):[]}firstChild(C){const w=$i(C,this._root);return w&&w.children.length>0?w.children[0].value:null}siblings(C){const w=Ds(C,this._root);return w.length<2?[]:w[w.length-2].children.map(O=>O.value).filter(O=>O!==C)}pathFromRoot(C){return Ds(C,this._root).map(w=>w.value)}}function $i(E,C){if(E===C.value)return C;for(const w of C.children){const b=$i(E,w);if(b)return b}return null}function Ds(E,C){if(E===C.value)return[C];for(const w of C.children){const b=Ds(E,w);if(b.length)return b.unshift(C),b}return[]}class Pr{constructor(C,w){this.value=C,this.children=w}toString(){return`TreeNode(${this.value})`}}function fs(E){const C={};return E&&E.children.forEach(w=>C[w.value.outlet]=w),C}class $r extends hs{constructor(C,w){super(C),this.snapshot=w,Cs(this,C)}toString(){return this.snapshot.toString()}}function As(E){const C=function Pn(E){const q=new xi([],{},{},"",{},ot,E,null,{});return new Zo("",new Pr(q,[]))}(E),w=new Qe.t([new or("",{})]),b=new Qe.t({}),O=new Qe.t({}),q=new Qe.t({}),de=new Qe.t(""),et=new Si(w,b,q,de,O,ot,E,C.root);return et.snapshot=C.root,new $r(new Pr(et,[]),C)}class Si{constructor(C,w,b,O,q,de,et,ze){this.urlSubject=C,this.paramsSubject=w,this.queryParamsSubject=b,this.fragmentSubject=O,this.dataSubject=q,this.outlet=de,this.component=et,this._futureSnapshot=ze,this.title=this.dataSubject?.pipe((0,Ct.T)(tn=>tn[Pt]))??(0,le.of)(void 0),this.url=C,this.params=w,this.queryParams=b,this.fragment=O,this.data=q}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe((0,Ct.T)(C=>zn(C))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe((0,Ct.T)(C=>zn(C))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Js(E,C,w="emptyOnly"){let b;const{routeConfig:O}=E;return b=null===C||"always"!==w&&""!==O?.path&&(C.component||C.routeConfig?.loadComponent)?{params:{...E.params},data:{...E.data},resolve:{...E.data,...E._resolvedData??{}}}:{params:{...C.params,...E.params},data:{...C.data,...E.data},resolve:{...E.data,...C.data,...O?.data,...E._resolvedData}},O&&Aa(O)&&(b.resolve[Pt]=O.title),b}class xi{get title(){return this.data?.[Pt]}constructor(C,w,b,O,q,de,et,ze,tn){this.url=C,this.params=w,this.queryParams=b,this.fragment=O,this.data=q,this.outlet=de,this.component=et,this.routeConfig=ze,this._resolve=tn}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=zn(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=zn(this.queryParams),this._queryParamMap}toString(){return`Route(url:'${this.url.map(b=>b.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Zo extends hs{constructor(C,w){super(w),this.url=C,Cs(this,w)}toString(){return Zs(this._root)}}function Cs(E,C){C.value._routerState=E,C.children.forEach(w=>Cs(E,w))}function Zs(E){const C=E.children.length>0?` { ${E.children.map(Zs).join(", ")} } `:"";return`${E.value}${C}`}function Xi(E){if(E.snapshot){const C=E.snapshot,w=E._futureSnapshot;E.snapshot=w,mr(C.queryParams,w.queryParams)||E.queryParamsSubject.next(w.queryParams),C.fragment!==w.fragment&&E.fragmentSubject.next(w.fragment),mr(C.params,w.params)||E.paramsSubject.next(w.params),function Ot(E,C){if(E.length!==C.length)return!1;for(let w=0;w<E.length;++w)if(!mr(E[w],C[w]))return!1;return!0}(C.url,w.url)||E.urlSubject.next(w.url),mr(C.data,w.data)||E.dataSubject.next(w.data)}else E.snapshot=E._futureSnapshot,E.dataSubject.next(E._futureSnapshot.data)}function ps(E,C){const w=mr(E.params,C.params)&&function ri(E,C){return mt(E,C)&&E.every((w,b)=>mr(w.parameters,C[b].parameters))}(E.url,C.url);return w&&!(!E.parent!=!C.parent)&&(!E.parent||ps(E.parent,C.parent))}function Aa(E){return"string"==typeof E.title||null===E.title}let vr=(()=>{class E{constructor(){this.activated=null,this._activatedRoute=null,this.name=ot,this.activateEvents=new V.bkB,this.deactivateEvents=new V.bkB,this.attachEvents=new V.bkB,this.detachEvents=new V.bkB,this.parentContexts=(0,V.WQX)(ds),this.location=(0,V.WQX)(V.c1b),this.changeDetector=(0,V.WQX)(V.gRc),this.environmentInjector=(0,V.WQX)(V.uvJ),this.inputBinder=(0,V.WQX)(ir,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(w){if(w.name){const{firstChange:b,previousValue:O}=w.name;if(b)return;this.isTrackedInParentContexts(O)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(O)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(w){return this.parentContexts.getContext(w)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const w=this.parentContexts.getContext(this.name);w?.route&&(w.attachRef?this.attach(w.attachRef,w.route):this.activateWith(w.route,w.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new V.wOt(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new V.wOt(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new V.wOt(4012,!1);this.location.detach();const w=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(w.instance),w}attach(w,b){this.activated=w,this._activatedRoute=b,this.location.insert(w.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(w.instance)}deactivate(){if(this.activated){const w=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(w)}}activateWith(w,b){if(this.isActivated)throw new V.wOt(4013,!1);this._activatedRoute=w;const O=this.location,de=w.snapshot.component,et=this.parentContexts.getOrCreateContext(this.name).children,ze=new No(w,et,O.injector);this.activated=O.createComponent(de,{index:O.length,injector:ze,environmentInjector:b??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(b){return new(b||E)}}static{this.\u0275dir=V.FsC({type:E,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[V.OA$]})}}return E})();class No{__ngOutletInjector(C){return new No(this.route,this.childContexts,C)}constructor(C,w,b){this.route=C,this.childContexts=w,this.parent=b}get(C,w){return C===Si?this.route:C===ds?this.childContexts:this.parent.get(C,w)}}const ir=new V.nKC("");let gs=(()=>{class E{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(w){this.unsubscribeFromRouteData(w),this.subscribeToRouteData(w)}unsubscribeFromRouteData(w){this.outletDataSubscriptions.get(w)?.unsubscribe(),this.outletDataSubscriptions.delete(w)}subscribeToRouteData(w){const{activatedRoute:b}=w,O=qt([b.queryParams,b.params,b.data]).pipe((0,Bn.n)(([q,de,et],ze)=>(et={...q,...de,...et},0===ze?(0,le.of)(et):Promise.resolve(et)))).subscribe(q=>{if(!w.isActivated||!w.activatedComponentRef||w.activatedRoute!==b||null===b.component)return void this.unsubscribeFromRouteData(w);const de=(0,V.HJs)(b.component);if(de)for(const{templateName:et}of de.inputs)w.activatedComponentRef.setInput(et,q[et]);else this.unsubscribeFromRouteData(w)});this.outletDataSubscriptions.set(w,O)}static{this.\u0275fac=function(b){return new(b||E)}}static{this.\u0275prov=V.jDH({token:E,factory:E.\u0275fac})}}return E})();function _i(E,C,w){if(w&&E.shouldReuseRoute(C.value,w.value.snapshot)){const b=w.value;b._futureSnapshot=C.value;const O=function Gs(E,C,w){return C.children.map(b=>{for(const O of w.children)if(E.shouldReuseRoute(b.value,O.value.snapshot))return _i(E,b,O);return _i(E,b)})}(E,C,w);return new Pr(b,O)}{if(E.shouldAttach(C.value)){const q=E.retrieve(C.value);if(null!==q){const de=q.route;return de.value._futureSnapshot=C.value,de.children=C.children.map(et=>_i(E,et)),de}}const b=function xo(E){return new Si(new Qe.t(E.url),new Qe.t(E.params),new Qe.t(E.queryParams),new Qe.t(E.fragment),new Qe.t(E.data),E.outlet,E.component,E)}(C.value),O=C.children.map(q=>_i(E,q));return new Pr(b,O)}}const bs="ngNavigationCancelingError";function $n(E,C){const{redirectTo:w,navigationBehaviorOptions:b}=Ai(C)?{redirectTo:C,navigationBehaviorOptions:void 0}:C,O=tr(!1,pr.Redirect);return O.url=w,O.navigationBehaviorOptions=b,O}function tr(E,C){const w=new Error(`NavigationCancelingError: ${E||""}`);return w[bs]=!0,w.cancellationCode=C,w}function po(E){return!!E&&E[bs]}let ei=(()=>{class E{static{this.\u0275fac=function(b){return new(b||E)}}static{this.\u0275cmp=V.VBU({type:E,selectors:[["ng-component"]],standalone:!0,features:[V.aNF],decls:1,vars:0,template:function(b,O){1&b&&V.nrm(0,"router-outlet")},dependencies:[vr],encapsulation:2})}}return E})();function ms(E){const C=E.children&&E.children.map(ms),w=C?{...E,children:C}:{...E};return!w.component&&!w.loadComponent&&(C||w.loadChildren)&&w.outlet&&w.outlet!==ot&&(w.component=ei),w}function Hi(E){return E.outlet||ot}function Gi(E){if(!E)return null;if(E.routeConfig?._injector)return E.routeConfig._injector;for(let C=E.parent;C;C=C.parent){const w=C.routeConfig;if(w?._loadedInjector)return w._loadedInjector;if(w?._injector)return w._injector}return null}class si{constructor(C,w,b,O,q){this.routeReuseStrategy=C,this.futureState=w,this.currState=b,this.forwardEvent=O,this.inputBindingEnabled=q}activate(C){const w=this.futureState._root,b=this.currState?this.currState._root:null;this.deactivateChildRoutes(w,b,C),Xi(this.futureState.root),this.activateChildRoutes(w,b,C)}deactivateChildRoutes(C,w,b){const O=fs(w);C.children.forEach(q=>{const de=q.value.outlet;this.deactivateRoutes(q,O[de],b),delete O[de]}),Object.values(O).forEach(q=>{this.deactivateRouteAndItsChildren(q,b)})}deactivateRoutes(C,w,b){const O=C.value,q=w?w.value:null;if(O===q)if(O.component){const de=b.getContext(O.outlet);de&&this.deactivateChildRoutes(C,w,de.children)}else this.deactivateChildRoutes(C,w,b);else q&&this.deactivateRouteAndItsChildren(w,b)}deactivateRouteAndItsChildren(C,w){C.value.component&&this.routeReuseStrategy.shouldDetach(C.value.snapshot)?this.detachAndStoreRouteSubtree(C,w):this.deactivateRouteAndOutlet(C,w)}detachAndStoreRouteSubtree(C,w){const b=w.getContext(C.value.outlet),O=b&&C.value.component?b.children:w,q=fs(C);for(const de of Object.values(q))this.deactivateRouteAndItsChildren(de,O);if(b&&b.outlet){const de=b.outlet.detach(),et=b.children.onOutletDeactivated();this.routeReuseStrategy.store(C.value.snapshot,{componentRef:de,route:C,contexts:et})}}deactivateRouteAndOutlet(C,w){const b=w.getContext(C.value.outlet),O=b&&C.value.component?b.children:w,q=fs(C);for(const de of Object.values(q))this.deactivateRouteAndItsChildren(de,O);b&&(b.outlet&&(b.outlet.deactivate(),b.children.onOutletDeactivated()),b.attachRef=null,b.route=null)}activateChildRoutes(C,w,b){const O=fs(w);C.children.forEach(q=>{this.activateRoutes(q,O[q.value.outlet],b),this.forwardEvent(new Da(q.value.snapshot))}),C.children.length&&this.forwardEvent(new ws(C.value.snapshot))}activateRoutes(C,w,b){const O=C.value,q=w?w.value:null;if(Xi(O),O===q)if(O.component){const de=b.getOrCreateContext(O.outlet);this.activateChildRoutes(C,w,de.children)}else this.activateChildRoutes(C,w,b);else if(O.component){const de=b.getOrCreateContext(O.outlet);if(this.routeReuseStrategy.shouldAttach(O.snapshot)){const et=this.routeReuseStrategy.retrieve(O.snapshot);this.routeReuseStrategy.store(O.snapshot,null),de.children.onOutletReAttached(et.contexts),de.attachRef=et.componentRef,de.route=et.route.value,de.outlet&&de.outlet.attach(et.componentRef,et.route.value),Xi(et.route.value),this.activateChildRoutes(C,null,de.children)}else{const et=Gi(O.snapshot);de.attachRef=null,de.route=O,de.injector=et,de.outlet&&de.outlet.activateWith(O,de.injector),this.activateChildRoutes(C,null,de.children)}}else this.activateChildRoutes(C,null,b)}}class to{constructor(C){this.path=C,this.route=this.path[this.path.length-1]}}class Rs{constructor(C,w){this.component=C,this.route=w}}function _o(E,C,w){const b=E._root;return Pi(b,C?C._root:null,w,[b.value])}function zs(E,C){const w=Symbol(),b=C.get(E,w);return b===w?"function"!=typeof E||(0,V.LfX)(E)?C.get(E):E:b}function Pi(E,C,w,b,O={canDeactivateChecks:[],canActivateChecks:[]}){const q=fs(C);return E.children.forEach(de=>{(function U(E,C,w,b,O={canDeactivateChecks:[],canActivateChecks:[]}){const q=E.value,de=C?C.value:null,et=w?w.getContext(E.value.outlet):null;if(de&&q.routeConfig===de.routeConfig){const ze=function j(E,C,w){if("function"==typeof w)return w(E,C);switch(w){case"pathParamsChange":return!mt(E.url,C.url);case"pathParamsOrQueryParamsChange":return!mt(E.url,C.url)||!mr(E.queryParams,C.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ps(E,C)||!mr(E.queryParams,C.queryParams);default:return!ps(E,C)}}(de,q,q.routeConfig.runGuardsAndResolvers);ze?O.canActivateChecks.push(new to(b)):(q.data=de.data,q._resolvedData=de._resolvedData),Pi(E,C,q.component?et?et.children:null:w,b,O),ze&&et&&et.outlet&&et.outlet.isActivated&&O.canDeactivateChecks.push(new Rs(et.outlet.component,de))}else de&&R(C,et,O),O.canActivateChecks.push(new to(b)),Pi(E,null,q.component?et?et.children:null:w,b,O)})(de,q[de.value.outlet],w,b.concat([de.value]),O),delete q[de.value.outlet]}),Object.entries(q).forEach(([de,et])=>R(et,w.getContext(de),O)),O}function R(E,C,w){const b=fs(E),O=E.value;Object.entries(b).forEach(([q,de])=>{R(de,O.component?C?C.children.getContext(q):null:C,w)}),w.canDeactivateChecks.push(new Rs(O.component&&C&&C.outlet&&C.outlet.isActivated?C.outlet.component:null,O))}function X(E){return"function"==typeof E}function Zi(E){return E instanceof un.G||"EmptyError"===E?.name}const Ws=Symbol("INITIAL_VALUE");function es(){return(0,Bn.n)(E=>qt(E.map(C=>C.pipe((0,Ze.s)(1),(0,Ae.Z)(Ws)))).pipe((0,Ct.T)(C=>{for(const w of C)if(!0!==w){if(w===Ws)return Ws;if(!1===w||w instanceof Jr)return w}return!0}),(0,Pe.p)(C=>C!==Ws),(0,Ze.s)(1)))}function ti(E){return(0,at.F)((0,Ne.M)(C=>{if(Ai(C))throw $n(0,C)}),(0,Ct.T)(C=>!0===C))}class fi{constructor(C){this.segmentGroup=C||null}}class no extends Error{constructor(C){super(),this.urlTree=C}}function yo(E){return Dt(new fi(E))}class ta{constructor(C,w){this.urlSerializer=C,this.urlTree=w}lineralizeSegments(C,w){let b=[],O=w.root;for(;;){if(b=b.concat(O.segments),0===O.numberOfChildren)return(0,le.of)(b);if(O.numberOfChildren>1||!O.children[ot])return Dt(new V.wOt(4e3,!1));O=O.children[ot]}}applyRedirectCommands(C,w,b){const O=this.applyRedirectCreateUrlTree(w,this.urlSerializer.parse(w),C,b);if(w.startsWith("/"))throw new no(O);return O}applyRedirectCreateUrlTree(C,w,b,O){const q=this.createSegmentGroup(C,w.root,b,O);return new Jr(q,this.createQueryParams(w.queryParams,this.urlTree.queryParams),w.fragment)}createQueryParams(C,w){const b={};return Object.entries(C).forEach(([O,q])=>{if("string"==typeof q&&q.startsWith(":")){const et=q.substring(1);b[O]=w[et]}else b[O]=q}),b}createSegmentGroup(C,w,b,O){const q=this.createSegments(C,w.segments,b,O);let de={};return Object.entries(w.children).forEach(([et,ze])=>{de[et]=this.createSegmentGroup(C,ze,b,O)}),new Ie(q,de)}createSegments(C,w,b,O){return w.map(q=>q.path.startsWith(":")?this.findPosParam(C,q,O):this.findOrReturn(q,b))}findPosParam(C,w,b){const O=b[w.path.substring(1)];if(!O)throw new V.wOt(4001,!1);return O}findOrReturn(C,w){let b=0;for(const O of w){if(O.path===C.path)return w.splice(b),O;b++}return C}}const vo={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function na(E,C,w,b,O){const q=Vo(E,C,w);return q.matched?(b=function Ca(E,C){return E.providers&&!E._injector&&(E._injector=(0,V.Ol2)(E.providers,C,`Route: ${E.path}`)),E._injector??C}(C,b),function Qr(E,C,w,b){const O=C.canMatch;if(!O||0===O.length)return(0,le.of)(!0);const q=O.map(de=>{const et=zs(de,E);return Yn(function Ji(E){return E&&X(E.canMatch)}(et)?et.canMatch(C,w):(0,V.N4e)(E,()=>et(C,w)))});return(0,le.of)(q).pipe(es(),ti())}(b,C,w).pipe((0,Ct.T)(de=>!0===de?q:{...vo}))):(0,le.of)(q)}function Vo(E,C,w){if("**"===C.path)return function ra(E){return{matched:!0,parameters:E.length>0?mn(E).parameters:{},consumedSegments:E,remainingSegments:[],positionalParamSegments:{}}}(w);if(""===C.path)return"full"===C.pathMatch&&(E.hasChildren()||w.length>0)?{...vo}:{matched:!0,consumedSegments:[],remainingSegments:w,parameters:{},positionalParamSegments:{}};const O=(C.matcher||Dn)(w,E,C);if(!O)return{...vo};const q={};Object.entries(O.posParams??{}).forEach(([et,ze])=>{q[et]=ze.path});const de=O.consumed.length>0?{...q,...O.consumed[O.consumed.length-1].parameters}:q;return{matched:!0,consumedSegments:O.consumed,remainingSegments:w.slice(O.consumed.length),parameters:de,positionalParamSegments:O.posParams??{}}}function rc(E,C,w,b){return w.length>0&&function Fo(E,C,w){return w.some(b=>Uo(E,C,b)&&Hi(b)!==ot)}(E,w,b)?{segmentGroup:new Ie(C,Iu(b,new Ie(w,E.children))),slicedSegments:[]}:0===w.length&&function Lo(E,C,w){return w.some(b=>Uo(E,C,b))}(E,w,b)?{segmentGroup:new Ie(E.segments,ic(E,w,b,E.children)),slicedSegments:w}:{segmentGroup:new Ie(E.segments,E.children),slicedSegments:w}}function ic(E,C,w,b){const O={};for(const q of w)if(Uo(E,C,q)&&!b[Hi(q)]){const de=new Ie([],{});O[Hi(q)]=de}return{...b,...O}}function Iu(E,C){const w={};w[ot]=C;for(const b of E)if(""===b.path&&Hi(b)!==ot){const O=new Ie([],{});w[Hi(b)]=O}return w}function Uo(E,C,w){return(!(E.hasChildren()||C.length>0)||"full"!==w.pathMatch)&&""===w.path}class Ks{}class ia{constructor(C,w,b,O,q,de,et){this.injector=C,this.configLoader=w,this.rootComponentType=b,this.config=O,this.urlTree=q,this.paramsInheritanceStrategy=de,this.urlSerializer=et,this.applyRedirects=new ta(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(C){return new V.wOt(4002,`'${C.segmentGroup}'`)}recognize(){const C=rc(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(C).pipe((0,Ct.T)(w=>{const b=new xi([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},ot,this.rootComponentType,null,{}),O=new Pr(b,w),q=new Zo("",O),de=function it(E,C,w=null,b=null){return _t(ke(E),C,w,b)}(b,[],this.urlTree.queryParams,this.urlTree.fragment);return de.queryParams=this.urlTree.queryParams,q.url=this.urlSerializer.serialize(de),this.inheritParamsAndData(q._root,null),{state:q,tree:de}}))}match(C){return this.processSegmentGroup(this.injector,this.config,C,ot).pipe(ye(b=>{if(b instanceof no)return this.urlTree=b.urlTree,this.match(b.urlTree.root);throw b instanceof fi?this.noMatchError(b):b}))}inheritParamsAndData(C,w){const b=C.value,O=Js(b,w,this.paramsInheritanceStrategy);b.params=Object.freeze(O.params),b.data=Object.freeze(O.data),C.children.forEach(q=>this.inheritParamsAndData(q,b))}processSegmentGroup(C,w,b,O){return 0===b.segments.length&&b.hasChildren()?this.processChildren(C,w,b):this.processSegment(C,w,b,b.segments,O,!0).pipe((0,Ct.T)(q=>q instanceof Pr?[q]:[]))}processChildren(C,w,b){const O=[];for(const q of Object.keys(b.children))"primary"===q?O.unshift(q):O.push(q);return(0,Ue.H)(O).pipe((0,Me.H)(q=>{const de=b.children[q],et=function Yi(E,C){const w=E.filter(b=>Hi(b)===C);return w.push(...E.filter(b=>Hi(b)!==C)),w}(w,q);return this.processSegmentGroup(C,et,de,q)}),(0,He.S)((q,de)=>(q.push(...de),q)),(0,lt.U)(null),function Zt(E,C){const w=arguments.length>=2;return b=>b.pipe(E?(0,Pe.p)((O,q)=>E(O,q,b)):pe.D,bt(1),w?(0,lt.U)(C):(0,cn.v)(()=>new un.G))}(),(0,Jt.Z)(q=>{if(null===q)return yo(b);const de=Er(q);return function sa(E){E.sort((C,w)=>C.value.outlet===ot?-1:w.value.outlet===ot?1:C.value.outlet.localeCompare(w.value.outlet))}(de),(0,le.of)(de)}))}processSegment(C,w,b,O,q,de){return(0,Ue.H)(w).pipe((0,Me.H)(et=>this.processSegmentAgainstRoute(et._injector??C,w,et,b,O,q,de).pipe(ye(ze=>{if(ze instanceof fi)return(0,le.of)(null);throw ze}))),(0,Re.$)(et=>!!et),ye(et=>{if(Zi(et))return function sc(E,C,w){return 0===C.length&&!E.children[w]}(b,O,q)?(0,le.of)(new Ks):yo(b);throw et}))}processSegmentAgainstRoute(C,w,b,O,q,de,et){return function ts(E,C,w,b){return!!(Hi(E)===b||b!==ot&&Uo(C,w,E))&&Vo(C,E,w).matched}(b,O,q,de)?void 0===b.redirectTo?this.matchSegmentAgainstRoute(C,O,b,q,de):this.allowRedirects&&et?this.expandSegmentAgainstRouteUsingRedirect(C,O,w,b,q,de):yo(O):yo(O)}expandSegmentAgainstRouteUsingRedirect(C,w,b,O,q,de){const{matched:et,consumedSegments:ze,positionalParamSegments:tn,remainingSegments:Un}=Vo(w,O,q);if(!et)return yo(w);O.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>31&&(this.allowRedirects=!1));const Fn=this.applyRedirects.applyRedirectCommands(ze,O.redirectTo,tn);return this.applyRedirects.lineralizeSegments(O,Fn).pipe((0,Jt.Z)(vi=>this.processSegment(C,b,w,vi.concat(Un),de,!1)))}matchSegmentAgainstRoute(C,w,b,O,q){const de=na(w,b,O,C);return"**"===b.path&&(w.children={}),de.pipe((0,Bn.n)(et=>et.matched?this.getChildConfig(C=b._injector??C,b,O).pipe((0,Bn.n)(({routes:ze})=>{const tn=b._loadedInjector??C,{consumedSegments:Un,remainingSegments:Fn,parameters:vi}=et,ks=new xi(Un,vi,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,function Ra(E){return E.data||{}}(b),Hi(b),b.component??b._loadedComponent??null,b,function Hc(E){return E.resolve||{}}(b)),{segmentGroup:ka,slicedSegments:la}=rc(w,Un,Fn,ze);if(0===la.length&&ka.hasChildren())return this.processChildren(tn,ze,ka).pipe((0,Ct.T)(Do=>null===Do?null:new Pr(ks,Do)));if(0===ze.length&&0===la.length)return(0,le.of)(new Pr(ks,[]));const Xs=Hi(b)===q;return this.processSegment(tn,ze,ka,la,Xs?ot:q,!0).pipe((0,Ct.T)(Do=>new Pr(ks,Do instanceof Pr?[Do]:[])))})):yo(w)))}getChildConfig(C,w,b){return w.children?(0,le.of)({routes:w.children,injector:C}):w.loadChildren?void 0!==w._loadedRoutes?(0,le.of)({routes:w._loadedRoutes,injector:w._loadedInjector}):function Hr(E,C,w,b){const O=C.canLoad;if(void 0===O||0===O.length)return(0,le.of)(!0);const q=O.map(de=>{const et=zs(de,E);return Yn(function Gt(E){return E&&X(E.canLoad)}(et)?et.canLoad(C,w):(0,V.N4e)(E,()=>et(C,w)))});return(0,le.of)(q).pipe(es(),ti())}(C,w,b).pipe((0,Jt.Z)(O=>O?this.configLoader.loadChildren(C,w).pipe((0,Ne.M)(q=>{w._loadedRoutes=q.routes,w._loadedInjector=q.injector})):function nc(E){return Dt(tr(!1,pr.GuardRejected))}())):(0,le.of)({routes:[],injector:C})}}function Ns(E){const C=E.value.routeConfig;return C&&""===C.path}function Er(E){const C=[],w=new Set;for(const b of E){if(!Ns(b)){C.push(b);continue}const O=C.find(q=>b.value.routeConfig===q.value.routeConfig);void 0!==O?(O.children.push(...b.children),w.add(O)):C.push(b)}for(const b of w){const O=Er(b.children);C.push(new Pr(b.value,O))}return C.filter(b=>!w.has(b))}function Tu(E){const C=E.children.map(w=>Tu(w)).flat();return[E,...C]}function Os(E){return(0,Bn.n)(C=>{const w=E(C);return w?(0,Ue.H)(w).pipe((0,Ct.T)(()=>C)):(0,le.of)(C)})}let Du=(()=>{class E{buildTitle(w){let b,O=w.root;for(;void 0!==O;)b=this.getResolvedTitleForRoute(O)??b,O=O.children.find(q=>q.outlet===ot);return b}getResolvedTitleForRoute(w){return w.data[Pt]}static{this.\u0275fac=function(b){return new(b||E)}}static{this.\u0275prov=V.jDH({token:E,factory:()=>(0,V.WQX)(io),providedIn:"root"})}}return E})(),io=(()=>{class E extends Du{constructor(w){super(),this.title=w}updateTitle(w){const b=this.buildTitle(w);void 0!==b&&this.title.setTitle(b)}static{this.\u0275fac=function(b){return new(b||E)(V.KVO(ht.hE))}}static{this.\u0275prov=V.jDH({token:E,factory:E.\u0275fac,providedIn:"root"})}}return E})();const D=new V.nKC("",{providedIn:"root",factory:()=>({})}),z=new V.nKC("");let M=(()=>{class E{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,V.WQX)(V.Ql9)}loadComponent(w){if(this.componentLoaders.get(w))return this.componentLoaders.get(w);if(w._loadedComponent)return(0,le.of)(w._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(w);const b=Yn(w.loadComponent()).pipe((0,Ct.T)(nt),(0,Ne.M)(q=>{this.onLoadEndListener&&this.onLoadEndListener(w),w._loadedComponent=q}),(0,$e.j)(()=>{this.componentLoaders.delete(w)})),O=new rn(b,()=>new bn.B).pipe(Xe());return this.componentLoaders.set(w,O),O}loadChildren(w,b){if(this.childrenLoaders.get(b))return this.childrenLoaders.get(b);if(b._loadedRoutes)return(0,le.of)({routes:b._loadedRoutes,injector:b._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(b);const q=function F(E,C,w,b){return Yn(E.loadChildren()).pipe((0,Ct.T)(nt),(0,Jt.Z)(O=>O instanceof V.Co$||Array.isArray(O)?(0,le.of)(O):(0,Ue.H)(C.compileModuleAsync(O))),(0,Ct.T)(O=>{b&&b(E);let q,de,et=!1;return Array.isArray(O)?(de=O,!0):(q=O.create(w).injector,de=q.get(z,[],{optional:!0,self:!0}).flat()),{routes:de.map(ms),injector:q}}))}(b,this.compiler,w,this.onLoadEndListener).pipe((0,$e.j)(()=>{this.childrenLoaders.delete(b)})),de=new rn(q,()=>new bn.B).pipe(Xe());return this.childrenLoaders.set(b,de),de}static{this.\u0275fac=function(b){return new(b||E)}}static{this.\u0275prov=V.jDH({token:E,factory:E.\u0275fac,providedIn:"root"})}}return E})();function nt(E){return function ce(E){return E&&"object"==typeof E&&"default"in E}(E)?E.default:E}let Tt=(()=>{class E{static{this.\u0275fac=function(b){return new(b||E)}}static{this.\u0275prov=V.jDH({token:E,factory:()=>(0,V.WQX)(Kt),providedIn:"root"})}}return E})(),Kt=(()=>{class E{shouldProcessUrl(w){return!0}extract(w){return w}merge(w,b){return w}static{this.\u0275fac=function(b){return new(b||E)}}static{this.\u0275prov=V.jDH({token:E,factory:E.\u0275fac,providedIn:"root"})}}return E})();const yn=new V.nKC(""),Ir=new V.nKC("");function Mr(E,C,w){const b=E.get(Ir),O=E.get(wt.qQ);return E.get(V.SKi).runOutsideAngular(()=>{if(!O.startViewTransition||b.skipNextTransition)return b.skipNextTransition=!1,new Promise(tn=>setTimeout(tn));let q;const de=new Promise(tn=>{q=tn}),et=O.startViewTransition(()=>(q(),function er(E){return new Promise(C=>{(0,V.mal)(C,{injector:E})})}(E))),{onViewTransitionCreated:ze}=b;return ze&&(0,V.N4e)(E,()=>ze({transition:et,from:C,to:w})),de})}let Gr=(()=>{class E{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new bn.B,this.transitionAbortSubject=new bn.B,this.configLoader=(0,V.WQX)(M),this.environmentInjector=(0,V.WQX)(V.uvJ),this.urlSerializer=(0,V.WQX)(G),this.rootContexts=(0,V.WQX)(ds),this.location=(0,V.WQX)(wt.aZ),this.inputBindingEnabled=null!==(0,V.WQX)(ir,{optional:!0}),this.titleStrategy=(0,V.WQX)(Du),this.options=(0,V.WQX)(D,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=(0,V.WQX)(Tt),this.createViewTransition=(0,V.WQX)(yn,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,le.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=O=>this.events.next(new Ys(O)),this.configLoader.onLoadStartListener=O=>this.events.next(new qi(O))}complete(){this.transitions?.complete()}handleNavigationRequest(w){const b=++this.navigationId;this.transitions?.next({...this.transitions.value,...w,id:b})}setupNavigations(w,b,O){return this.transitions=new Qe.t({id:0,currentUrlTree:b,currentRawUrl:b,extractedUrl:this.urlHandlingStrategy.extract(b),urlAfterRedirects:this.urlHandlingStrategy.extract(b),rawUrl:b,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Sn,restoredState:null,currentSnapshot:O.snapshot,targetSnapshot:null,currentRouterState:O,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,Pe.p)(q=>0!==q.id),(0,Ct.T)(q=>({...q,extractedUrl:this.urlHandlingStrategy.extract(q.rawUrl)})),(0,Bn.n)(q=>{let de=!1,et=!1;return(0,le.of)(q).pipe((0,Bn.n)(ze=>{if(this.navigationId>q.id)return this.cancelNavigationTransition(q,"",pr.SupersededByNewNavigation),ut.w;this.currentTransition=q,this.currentNavigation={id:ze.id,initialUrl:ze.rawUrl,extractedUrl:ze.extractedUrl,trigger:ze.source,extras:ze.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null};const tn=!w.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl();if(!tn&&"reload"!==(ze.extras.onSameUrlNavigation??w.onSameUrlNavigation)){const Fn="";return this.events.next(new wa(ze.id,this.urlSerializer.serialize(ze.rawUrl),Fn,dn.IgnoredSameUrlNavigation)),ze.resolve(null),ut.w}if(this.urlHandlingStrategy.shouldProcessUrl(ze.rawUrl))return(0,le.of)(ze).pipe((0,Bn.n)(Fn=>{const vi=this.transitions?.getValue();return this.events.next(new xn(Fn.id,this.urlSerializer.serialize(Fn.extractedUrl),Fn.source,Fn.restoredState)),vi!==this.transitions?.getValue()?ut.w:Promise.resolve(Fn)}),function wu(E,C,w,b,O,q){return(0,Jt.Z)(de=>function tu(E,C,w,b,O,q,de="emptyOnly"){return new ia(E,C,w,b,O,de,q).recognize()}(E,C,w,b,de.extractedUrl,O,q).pipe((0,Ct.T)(({state:et,tree:ze})=>({...de,targetSnapshot:et,urlAfterRedirects:ze}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,w.config,this.urlSerializer,this.paramsInheritanceStrategy),(0,Ne.M)(Fn=>{q.targetSnapshot=Fn.targetSnapshot,q.urlAfterRedirects=Fn.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:Fn.urlAfterRedirects};const vi=new Ta(Fn.id,this.urlSerializer.serialize(Fn.extractedUrl),this.urlSerializer.serialize(Fn.urlAfterRedirects),Fn.targetSnapshot);this.events.next(vi)}));if(tn&&this.urlHandlingStrategy.shouldProcessUrl(ze.currentRawUrl)){const{id:Fn,extractedUrl:vi,source:ks,restoredState:ka,extras:la}=ze,Xs=new xn(Fn,this.urlSerializer.serialize(vi),ks,ka);this.events.next(Xs);const Do=As(this.rootComponentType).snapshot;return this.currentTransition=q={...ze,targetSnapshot:Do,urlAfterRedirects:vi,extras:{...la,skipLocationChange:!1,replaceUrl:!1}},this.currentNavigation.finalUrl=vi,(0,le.of)(q)}{const Fn="";return this.events.next(new wa(ze.id,this.urlSerializer.serialize(ze.extractedUrl),Fn,dn.IgnoredByUrlHandlingStrategy)),ze.resolve(null),ut.w}}),(0,Ne.M)(ze=>{const tn=new ls(ze.id,this.urlSerializer.serialize(ze.extractedUrl),this.urlSerializer.serialize(ze.urlAfterRedirects),ze.targetSnapshot);this.events.next(tn)}),(0,Ct.T)(ze=>(this.currentTransition=q={...ze,guards:_o(ze.targetSnapshot,ze.currentSnapshot,this.rootContexts)},q)),function ko(E,C){return(0,Jt.Z)(w=>{const{targetSnapshot:b,currentSnapshot:O,guards:{canActivateChecks:q,canDeactivateChecks:de}}=w;return 0===de.length&&0===q.length?(0,le.of)({...w,guardsResult:!0}):function ec(E,C,w,b){return(0,Ue.H)(E).pipe((0,Jt.Z)(O=>function Ln(E,C,w,b,O){const q=C&&C.routeConfig?C.routeConfig.canDeactivate:null;if(!q||0===q.length)return(0,le.of)(!0);const de=q.map(et=>{const ze=Gi(C)??O,tn=zs(et,ze);return Yn(function Ps(E){return E&&X(E.canDeactivate)}(tn)?tn.canDeactivate(E,C,w,b):(0,V.N4e)(ze,()=>tn(E,C,w,b))).pipe((0,Re.$)())});return(0,le.of)(de).pipe(es())}(O.component,O.route,w,C,b)),(0,Re.$)(O=>!0!==O,!0))}(de,b,O,E).pipe((0,Jt.Z)(et=>et&&function ve(E){return"boolean"==typeof E}(et)?function eu(E,C,w,b){return(0,Ue.H)(C).pipe((0,Me.H)(O=>(0,ln.x)(function Ms(E,C){return null!==E&&C&&C(new mi(E)),(0,le.of)(!0)}(O.route.parent,b),function tc(E,C){return null!==E&&C&&C(new Hs(E)),(0,le.of)(!0)}(O.route,b),function Ti(E,C,w){const b=C[C.length-1],q=C.slice(0,C.length-1).reverse().map(de=>function Oo(E){const C=E.routeConfig?E.routeConfig.canActivateChild:null;return C&&0!==C.length?{node:E,guards:C}:null}(de)).filter(de=>null!==de).map(de=>he(()=>{const et=de.guards.map(ze=>{const tn=Gi(de.node)??w,Un=zs(ze,tn);return Yn(function Hn(E){return E&&X(E.canActivateChild)}(Un)?Un.canActivateChild(b,E):(0,V.N4e)(tn,()=>Un(b,E))).pipe((0,Re.$)())});return(0,le.of)(et).pipe(es())}));return(0,le.of)(q).pipe(es())}(E,O.path,w),function $c(E,C,w){const b=C.routeConfig?C.routeConfig.canActivate:null;if(!b||0===b.length)return(0,le.of)(!0);const O=b.map(q=>he(()=>{const de=Gi(C)??w,et=zs(q,de);return Yn(function Mn(E){return E&&X(E.canActivate)}(et)?et.canActivate(C,E):(0,V.N4e)(de,()=>et(C,E))).pipe((0,Re.$)())}));return(0,le.of)(O).pipe(es())}(E,O.route,w))),(0,Re.$)(O=>!0!==O,!0))}(b,q,E,C):(0,le.of)(et)),(0,Ct.T)(et=>({...w,guardsResult:et})))})}(this.environmentInjector,ze=>this.events.next(ze)),(0,Ne.M)(ze=>{if(q.guardsResult=ze.guardsResult,Ai(ze.guardsResult))throw $n(0,ze.guardsResult);const tn=new Lr(ze.id,this.urlSerializer.serialize(ze.extractedUrl),this.urlSerializer.serialize(ze.urlAfterRedirects),ze.targetSnapshot,!!ze.guardsResult);this.events.next(tn)}),(0,Pe.p)(ze=>!!ze.guardsResult||(this.cancelNavigationTransition(ze,"",pr.GuardRejected),!1)),Os(ze=>{if(ze.guards.canActivateChecks.length)return(0,le.of)(ze).pipe((0,Ne.M)(tn=>{const Un=new Bi(tn.id,this.urlSerializer.serialize(tn.extractedUrl),this.urlSerializer.serialize(tn.urlAfterRedirects),tn.targetSnapshot);this.events.next(Un)}),(0,Bn.n)(tn=>{let Un=!1;return(0,le.of)(tn).pipe(function ro(E,C){return(0,Jt.Z)(w=>{const{targetSnapshot:b,guards:{canActivateChecks:O}}=w;if(!O.length)return(0,le.of)(w);const q=new Set(O.map(ze=>ze.route)),de=new Set;for(const ze of q)if(!de.has(ze))for(const tn of Tu(ze))de.add(tn);let et=0;return(0,Ue.H)(de).pipe((0,Me.H)(ze=>q.has(ze)?function Gc(E,C,w,b){const O=E.routeConfig,q=E._resolve;return void 0!==O?.title&&!Aa(O)&&(q[Pt]=O.title),function Pa(E,C,w,b){const O=Nn(E);if(0===O.length)return(0,le.of)({});const q={};return(0,Ue.H)(O).pipe((0,Jt.Z)(de=>function xs(E,C,w,b){const O=Gi(C)??b,q=zs(E,O);return Yn(q.resolve?q.resolve(C,w):(0,V.N4e)(O,()=>q(C,w)))}(E[de],C,w,b).pipe((0,Re.$)(),(0,Ne.M)(et=>{q[de]=et}))),bt(1),function Wt(E){return(0,Ct.T)(()=>E)}(q),ye(de=>Zi(de)?ut.w:Dt(de)))}(q,E,C,b).pipe((0,Ct.T)(de=>(E._resolvedData=de,E.data=Js(E,E.parent,w).resolve,null)))}(ze,b,E,C):(ze.data=Js(ze,ze.parent,E).resolve,(0,le.of)(void 0))),(0,Ne.M)(()=>et++),bt(1),(0,Jt.Z)(ze=>et===de.size?(0,le.of)(w):ut.w))})}(this.paramsInheritanceStrategy,this.environmentInjector),(0,Ne.M)({next:()=>Un=!0,complete:()=>{Un||this.cancelNavigationTransition(tn,"",pr.NoDataFromResolver)}}))}),(0,Ne.M)(tn=>{const Un=new Xn(tn.id,this.urlSerializer.serialize(tn.extractedUrl),this.urlSerializer.serialize(tn.urlAfterRedirects),tn.targetSnapshot);this.events.next(Un)}))}),Os(ze=>{const tn=Un=>{const Fn=[];Un.routeConfig?.loadComponent&&!Un.routeConfig._loadedComponent&&Fn.push(this.configLoader.loadComponent(Un.routeConfig).pipe((0,Ne.M)(vi=>{Un.component=vi}),(0,Ct.T)(()=>{})));for(const vi of Un.children)Fn.push(...tn(vi));return Fn};return qt(tn(ze.targetSnapshot.root)).pipe((0,lt.U)(null),(0,Ze.s)(1))}),Os(()=>this.afterPreactivation()),(0,Bn.n)(()=>{const{currentSnapshot:ze,targetSnapshot:tn}=q,Un=this.createViewTransition?.(this.environmentInjector,ze.root,tn.root);return Un?(0,Ue.H)(Un).pipe((0,Ct.T)(()=>q)):(0,le.of)(q)}),(0,Ct.T)(ze=>{const tn=function hi(E,C,w){const b=_i(E,C._root,w?w._root:void 0);return new $r(b,C)}(w.routeReuseStrategy,ze.targetSnapshot,ze.currentRouterState);return this.currentTransition=q={...ze,targetRouterState:tn},this.currentNavigation.targetRouterState=tn,q}),(0,Ne.M)(()=>{this.events.next(new bi)}),((E,C,w,b)=>(0,Ct.T)(O=>(new si(C,O.targetRouterState,O.currentRouterState,w,b).activate(E),O)))(this.rootContexts,w.routeReuseStrategy,ze=>this.events.next(ze),this.inputBindingEnabled),(0,Ze.s)(1),(0,Ne.M)({next:ze=>{de=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Fr(ze.id,this.urlSerializer.serialize(ze.extractedUrl),this.urlSerializer.serialize(ze.urlAfterRedirects))),this.titleStrategy?.updateTitle(ze.targetRouterState.snapshot),ze.resolve(!0)},complete:()=>{de=!0}}),function ct(E){return(0,be.N)((C,w)=>{(0,vt.Tg)(E).subscribe((0,Je._)(w,()=>w.complete(),gt.l)),!w.closed&&C.subscribe(w)})}(this.transitionAbortSubject.pipe((0,Ne.M)(ze=>{throw ze}))),(0,$e.j)(()=>{!de&&!et&&this.cancelNavigationTransition(q,"",pr.SupersededByNewNavigation),this.currentTransition?.id===q.id&&(this.currentNavigation=null,this.currentTransition=null)}),ye(ze=>{if(et=!0,po(ze))this.events.next(new Qn(q.id,this.urlSerializer.serialize(q.extractedUrl),ze.message,ze.cancellationCode)),function fo(E){return po(E)&&Ai(E.url)}(ze)?this.events.next(new ji(ze.url)):q.resolve(!1);else{this.events.next(new cr(q.id,this.urlSerializer.serialize(q.extractedUrl),ze,q.targetSnapshot??void 0));try{q.resolve(w.errorHandler(ze))}catch(tn){this.options.resolveNavigationPromiseOnError?q.resolve(!1):q.reject(tn)}}return ut.w}))}))}cancelNavigationTransition(w,b,O){const q=new Qn(w.id,this.urlSerializer.serialize(w.extractedUrl),b,O);this.events.next(q),w.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}static{this.\u0275fac=function(b){return new(b||E)}}static{this.\u0275prov=V.jDH({token:E,factory:E.\u0275fac,providedIn:"root"})}}return E})();function Ar(E){return E!==Sn}let ci=(()=>{class E{static{this.\u0275fac=function(b){return new(b||E)}}static{this.\u0275prov=V.jDH({token:E,factory:()=>(0,V.WQX)(Lt),providedIn:"root"})}}return E})();class wr{shouldDetach(C){return!1}store(C,w){}shouldAttach(C){return!1}retrieve(C){return null}shouldReuseRoute(C,w){return C.routeConfig===w.routeConfig}}let Lt=(()=>{class E extends wr{static{this.\u0275fac=(()=>{let w;return function(O){return(w||(w=V.xGo(E)))(O||E)}})()}static{this.\u0275prov=V.jDH({token:E,factory:E.\u0275fac,providedIn:"root"})}}return E})(),pn=(()=>{class E{static{this.\u0275fac=function(b){return new(b||E)}}static{this.\u0275prov=V.jDH({token:E,factory:()=>(0,V.WQX)(dr),providedIn:"root"})}}return E})(),dr=(()=>{class E extends pn{constructor(){super(...arguments),this.location=(0,V.WQX)(wt.aZ),this.urlSerializer=(0,V.WQX)(G),this.options=(0,V.WQX)(D,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=(0,V.WQX)(Tt),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Jr,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=As(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(w){return this.location.subscribe(b=>{"popstate"===b.type&&w(b.url,b.state)})}handleRouterEvent(w,b){if(w instanceof xn)this.stateMemento=this.createStateMemento();else if(w instanceof wa)this.rawUrlTree=b.initialUrl;else if(w instanceof Ta){if("eager"===this.urlUpdateStrategy&&!b.extras.skipLocationChange){const O=this.urlHandlingStrategy.merge(b.finalUrl,b.initialUrl);this.setBrowserUrl(O,b)}}else w instanceof bi?(this.currentUrlTree=b.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(b.finalUrl,b.initialUrl),this.routerState=b.targetRouterState,"deferred"===this.urlUpdateStrategy&&(b.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,b))):w instanceof Qn&&(w.code===pr.GuardRejected||w.code===pr.NoDataFromResolver)?this.restoreHistory(b):w instanceof cr?this.restoreHistory(b,!0):w instanceof Fr&&(this.lastSuccessfulId=w.id,this.currentPageId=this.browserPageId)}setBrowserUrl(w,b){const O=this.urlSerializer.serialize(w);if(this.location.isCurrentPathEqualTo(O)||b.extras.replaceUrl){const de={...b.extras.state,...this.generateNgRouterState(b.id,this.browserPageId)};this.location.replaceState(O,"",de)}else{const q={...b.extras.state,...this.generateNgRouterState(b.id,this.browserPageId+1)};this.location.go(O,"",q)}}restoreHistory(w,b=!1){if("computed"===this.canceledNavigationResolution){const q=this.currentPageId-this.browserPageId;0!==q?this.location.historyGo(q):this.currentUrlTree===w.finalUrl&&0===q&&(this.resetState(w),this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(b&&this.resetState(w),this.resetUrlToCurrentUrlTree())}resetState(w){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,w.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(w,b){return"computed"===this.canceledNavigationResolution?{navigationId:w,\u0275routerPageId:b}:{navigationId:w}}static{this.\u0275fac=(()=>{let w;return function(O){return(w||(w=V.xGo(E)))(O||E)}})()}static{this.\u0275prov=V.jDH({token:E,factory:E.\u0275fac,providedIn:"root"})}}return E})();var Tr=function(E){return E[E.COMPLETE=0]="COMPLETE",E[E.FAILED=1]="FAILED",E[E.REDIRECTING=2]="REDIRECTING",E}(Tr||{});function Cr(E,C){E.events.pipe((0,Pe.p)(w=>w instanceof Fr||w instanceof Qn||w instanceof cr||w instanceof wa),(0,Ct.T)(w=>w instanceof Fr||w instanceof wa?Tr.COMPLETE:w instanceof Qn&&(w.code===pr.Redirect||w.code===pr.SupersededByNewNavigation)?Tr.REDIRECTING:Tr.FAILED),(0,Pe.p)(w=>w!==Tr.REDIRECTING),(0,Ze.s)(1)).subscribe(()=>{C()})}function yi(E){throw E}const so={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},zr={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Nr=(()=>{class E{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=(0,V.WQX)(V.H3F),this.stateManager=(0,V.WQX)(pn),this.options=(0,V.WQX)(D,{optional:!0})||{},this.pendingTasks=(0,V.WQX)(V.TgB),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=(0,V.WQX)(Gr),this.urlSerializer=(0,V.WQX)(G),this.location=(0,V.WQX)(wt.aZ),this.urlHandlingStrategy=(0,V.WQX)(Tt),this._events=new bn.B,this.errorHandler=this.options.errorHandler||yi,this.navigated=!1,this.routeReuseStrategy=(0,V.WQX)(ci),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=(0,V.WQX)(z,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!(0,V.WQX)(ir,{optional:!0}),this.eventsSubscription=new Ut.yU,this.isNgZoneEnabled=(0,V.WQX)(V.SKi)instanceof V.SKi&&V.SKi.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:w=>{this.console.warn(w)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const w=this.navigationTransitions.events.subscribe(b=>{try{const O=this.navigationTransitions.currentTransition,q=this.navigationTransitions.currentNavigation;if(null!==O&&null!==q)if(this.stateManager.handleRouterEvent(b,q),b instanceof Qn&&b.code!==pr.Redirect&&b.code!==pr.SupersededByNewNavigation)this.navigated=!0;else if(b instanceof Fr)this.navigated=!0;else if(b instanceof ji){const de=this.urlHandlingStrategy.merge(b.url,O.currentRawUrl),et={info:O.extras.info,skipLocationChange:O.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Ar(O.source)};this.scheduleNavigation(de,Sn,null,et,{resolve:O.resolve,reject:O.reject,promise:O.promise})}(function On(E){return!(E instanceof bi||E instanceof ji)})(b)&&this._events.next(b)}catch(O){this.navigationTransitions.transitionAbortSubject.next(O)}});this.eventsSubscription.add(w)}resetRootComponentType(w){this.routerState.root.component=w,this.navigationTransitions.rootComponentType=w}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Sn,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((w,b)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(w,"popstate",b)},0)})}navigateToSyncWithBrowser(w,b,O){const q={replaceUrl:!0},de=O?.navigationId?O:null;if(O){const ze={...O};delete ze.navigationId,delete ze.\u0275routerPageId,0!==Object.keys(ze).length&&(q.state=ze)}const et=this.parseUrl(w);this.scheduleNavigation(et,b,de,q)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(w){this.config=w.map(ms),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(w,b={}){const{relativeTo:O,queryParams:q,fragment:de,queryParamsHandling:et,preserveFragment:ze}=b,tn=ze?this.currentUrlTree.fragment:de;let Fn,Un=null;switch(et){case"merge":Un={...this.currentUrlTree.queryParams,...q};break;case"preserve":Un=this.currentUrlTree.queryParams;break;default:Un=q||null}null!==Un&&(Un=this.removeEmptyProps(Un));try{Fn=ke(O?O.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof w[0]||!w[0].startsWith("/"))&&(w=[]),Fn=this.currentUrlTree.root}return _t(Fn,w,Un,tn??null)}navigateByUrl(w,b={skipLocationChange:!1}){const O=Ai(w)?w:this.parseUrl(w),q=this.urlHandlingStrategy.merge(O,this.rawUrlTree);return this.scheduleNavigation(q,Sn,null,b)}navigate(w,b={skipLocationChange:!1}){return function qs(E){for(let C=0;C<E.length;C++)if(null==E[C])throw new V.wOt(4008,!1)}(w),this.navigateByUrl(this.createUrlTree(w,b),b)}serializeUrl(w){return this.urlSerializer.serialize(w)}parseUrl(w){try{return this.urlSerializer.parse(w)}catch{return this.urlSerializer.parse("/")}}isActive(w,b){let O;if(O=!0===b?{...so}:!1===b?{...zr}:b,Ai(w))return gi(this.currentUrlTree,w,O);const q=this.parseUrl(w);return gi(this.currentUrlTree,q,O)}removeEmptyProps(w){return Object.entries(w).reduce((b,[O,q])=>(null!=q&&(b[O]=q),b),{})}scheduleNavigation(w,b,O,q,de){if(this.disposed)return Promise.resolve(!1);let et,ze,tn;de?(et=de.resolve,ze=de.reject,tn=de.promise):tn=new Promise((Fn,vi)=>{et=Fn,ze=vi});const Un=this.pendingTasks.add();return Cr(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(Un))}),this.navigationTransitions.handleNavigationRequest({source:b,restoredState:O,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:w,extras:q,resolve:et,reject:ze,promise:tn,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),tn.catch(Fn=>Promise.reject(Fn))}static{this.\u0275fac=function(b){return new(b||E)}}static{this.\u0275prov=V.jDH({token:E,factory:E.\u0275fac,providedIn:"root"})}}return E})(),Eo=(()=>{class E{constructor(w,b,O,q,de,et){this.router=w,this.route=b,this.tabIndexAttribute=O,this.renderer=q,this.el=de,this.locationStrategy=et,this.href=null,this.commands=null,this.onChanges=new bn.B,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const ze=de.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===ze||"area"===ze,this.isAnchorElement?this.subscription=w.events.subscribe(tn=>{tn instanceof Fr&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(w){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",w)}ngOnChanges(w){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(w){null!=w?(this.commands=Array.isArray(w)?w:[w],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(w,b,O,q,de){const et=this.urlTree;return!!(null===et||this.isAnchorElement&&(0!==w||b||O||q||de||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(et,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){const w=this.urlTree;this.href=null!==w&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(w)):null;const b=null===this.href?null:(0,V.n$t)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",b)}applyAttributeValue(w,b){const O=this.renderer,q=this.el.nativeElement;null!==b?O.setAttribute(q,w,b):O.removeAttribute(q,w)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(b){return new(b||E)(V.rXU(Nr),V.rXU(Si),V.kS0("tabindex"),V.rXU(V.sFG),V.rXU(V.aKT),V.rXU(wt.hb))}}static{this.\u0275dir=V.FsC({type:E,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(b,O){1&b&&V.bIt("click",function(de){return O.onClick(de.button,de.ctrlKey,de.shiftKey,de.altKey,de.metaKey)}),2&b&&V.BMQ("target",O.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[V.Mj6.HasDecoratorInputTransform,"preserveFragment","preserveFragment",V.L39],skipLocationChange:[V.Mj6.HasDecoratorInputTransform,"skipLocationChange","skipLocationChange",V.L39],replaceUrl:[V.Mj6.HasDecoratorInputTransform,"replaceUrl","replaceUrl",V.L39],routerLink:"routerLink"},standalone:!0,features:[V.GFd,V.OA$]})}}return E})();class Wr{}let wo=(()=>{class E{constructor(w,b,O,q,de){this.router=w,this.injector=O,this.preloadingStrategy=q,this.loader=de}setUpPreloading(){this.subscription=this.router.events.pipe((0,Pe.p)(w=>w instanceof Fr),(0,Me.H)(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(w,b){const O=[];for(const q of b){q.providers&&!q._injector&&(q._injector=(0,V.Ol2)(q.providers,w,`Route: ${q.path}`));const de=q._injector??w,et=q._loadedInjector??de;(q.loadChildren&&!q._loadedRoutes&&void 0===q.canLoad||q.loadComponent&&!q._loadedComponent)&&O.push(this.preloadConfig(de,q)),(q.children||q._loadedRoutes)&&O.push(this.processRoutes(et,q.children??q._loadedRoutes))}return(0,Ue.H)(O).pipe((0,dt.U)())}preloadConfig(w,b){return this.preloadingStrategy.preload(b,()=>{let O;O=b.loadChildren&&void 0===b.canLoad?this.loader.loadChildren(w,b):(0,le.of)(null);const q=O.pipe((0,Jt.Z)(de=>null===de?(0,le.of)(void 0):(b._loadedRoutes=de.routes,b._loadedInjector=de.injector,this.processRoutes(de.injector??w,de.routes))));if(b.loadComponent&&!b._loadedComponent){const de=this.loader.loadComponent(b);return(0,Ue.H)([q,de]).pipe((0,dt.U)())}return q})}static{this.\u0275fac=function(b){return new(b||E)(V.KVO(Nr),V.KVO(V.Ql9),V.KVO(V.uvJ),V.KVO(Wr),V.KVO(M))}}static{this.\u0275prov=V.jDH({token:E,factory:E.\u0275fac,providedIn:"root"})}}return E})();const su=new V.nKC("");let Xr=(()=>{class E{constructor(w,b,O,q,de={}){this.urlSerializer=w,this.transitions=b,this.viewportScroller=O,this.zone=q,this.options=de,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},this.environmentInjector=(0,V.WQX)(V.uvJ),de.scrollPositionRestoration||="disabled",de.anchorScrolling||="disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(w=>{w instanceof xn?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=w.navigationTrigger,this.restoredId=w.restoredState?w.restoredState.navigationId:0):w instanceof Fr?(this.lastId=w.id,this.scheduleScrollEvent(w,this.urlSerializer.parse(w.urlAfterRedirects).fragment)):w instanceof wa&&w.code===dn.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(w,this.urlSerializer.parse(w.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(w=>{w instanceof wi&&(w.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(w.position):w.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(w.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(w,b){var O=this;this.zone.runOutsideAngular((0,m.A)(function*(){yield new Promise(q=>{setTimeout(()=>{q()}),(0,V.mal)(()=>{q()},{injector:O.environmentInjector})}),O.zone.run(()=>{O.transitions.events.next(new wi(w,"popstate"===O.lastSource?O.store[O.restoredId]:null,b))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(b){V.QTQ()}}static{this.\u0275prov=V.jDH({token:E,factory:E.\u0275fac})}}return E})();function zi(E,C){return{\u0275kind:E,\u0275providers:C}}function Na(){const E=(0,V.WQX)(V.zZn);return C=>{const w=E.get(V.o8S);if(C!==w.components[0])return;const b=E.get(Nr),O=E.get(To);1===E.get(oi)&&b.initialNavigation(),E.get(Bo,null,V.$GK.Optional)?.setUpPreloading(),E.get(su,null,V.$GK.Optional)?.init(),b.resetRootComponentType(w.componentTypes[0]),O.closed||(O.next(),O.complete(),O.unsubscribe())}}const To=new V.nKC("",{factory:()=>new bn.B}),oi=new V.nKC("",{providedIn:"root",factory:()=>1}),Bo=new V.nKC("");function jo(E){return zi(0,[{provide:Bo,useExisting:wo},{provide:Wr,useExisting:E}])}function Nl(E){return zi(9,[{provide:yn,useValue:Mr},{provide:Ir,useValue:{skipNextTransition:!!E?.skipInitialTransition,...E}}])}const bu=new V.nKC("ROUTER_FORROOT_GUARD"),zc=[wt.aZ,{provide:G,useClass:te},Nr,ds,{provide:Si,useFactory:function _s(E){return E.routerState.root},deps:[Nr]},M,[]];let Wc=(()=>{class E{constructor(w){}static forRoot(w,b){return{ngModule:E,providers:[zc,[],{provide:z,multi:!0,useValue:w},{provide:bu,useFactory:Yd,deps:[[Nr,new V.Xx1,new V.kdw]]},{provide:D,useValue:b||{}},b?.useHash?{provide:wt.hb,useClass:wt.fw}:{provide:wt.hb,useClass:wt.Sm},{provide:su,useFactory:()=>{const E=(0,V.WQX)(wt.Xr),C=(0,V.WQX)(V.SKi),w=(0,V.WQX)(D),b=(0,V.WQX)(Gr),O=(0,V.WQX)(G);return w.scrollOffset&&E.setOffset(w.scrollOffset),new Xr(O,b,E,C,w)}},b?.preloadingStrategy?jo(b.preloadingStrategy).\u0275providers:[],b?.initialNavigation?sg(b):[],b?.bindToComponentInputs?zi(8,[gs,{provide:ir,useExisting:gs}]).\u0275providers:[],b?.enableViewTransitions?Nl().\u0275providers:[],[{provide:xa,useFactory:Na},{provide:V.iLQ,multi:!0,useExisting:xa}]]}}static forChild(w){return{ngModule:E,providers:[{provide:z,multi:!0,useValue:w}]}}static{this.\u0275fac=function(b){return new(b||E)(V.KVO(bu,8))}}static{this.\u0275mod=V.$C({type:E})}static{this.\u0275inj=V.G2t({})}}return E})();function Yd(E){return"guarded"}function sg(E){return["disabled"===E.initialNavigation?zi(3,[{provide:V.hnV,multi:!0,useFactory:()=>{const C=(0,V.WQX)(Nr);return()=>{C.setUpLocationChangeListener()}}},{provide:oi,useValue:2}]).\u0275providers:[],"enabledBlocking"===E.initialNavigation?zi(2,[{provide:oi,useValue:0},{provide:V.hnV,multi:!0,deps:[V.zZn],useFactory:C=>{const w=C.get(wt.hj,Promise.resolve());return()=>w.then(()=>new Promise(b=>{const O=C.get(Nr),q=C.get(To);Cr(O,()=>{b(!0)}),C.get(Gr).afterPreactivation=()=>(b(!0),q.closed?(0,le.of)(void 0):q),O.initialNavigation()}))}}]).\u0275providers:[]]}const xa=new V.nKC("")},3345:(on,rt,$)=>{$.d(rt,{A:()=>xt});var m=$(1076),V=$(1362),oe=$(7852),ne=$(8041);class k{constructor($t,Nt){this._delegate=$t,this.firebase=Nt,(0,oe._addComponent)($t,new V.uA("app-compat",()=>this,"PUBLIC")),this.container=$t.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled($t){this._delegate.automaticDataCollectionEnabled=$t}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise($t=>{this._delegate.checkDestroyed(),$t()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,oe.deleteApp)(this._delegate)))}_getService($t,Nt=oe._DEFAULT_ENTRY_NAME){var un;this._delegate.checkDestroyed();const ln=this._delegate.container.getProvider($t);return!ln.isInitialized()&&"EXPLICIT"===(null===(un=ln.getComponent())||void 0===un?void 0:un.instantiationMode)&&ln.initialize(),ln.getImmediate({identifier:Nt})}_removeServiceInstance($t,Nt=oe._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider($t).clearInstance(Nt)}_addComponent($t){(0,oe._addComponent)(this._delegate,$t)}_addOrOverwriteComponent($t){(0,oe._addOrOverwriteComponent)(this._delegate,$t)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const le=new m.FA("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),pe=function We(){const qt=function Qe(qt){const $t={},Nt={__esModule:!0,initializeApp:function vt(ut,Ut={}){const be=oe.initializeApp(ut,Ut);if((0,m.gR)($t,be.name))return $t[be.name];const Xe=new qt(be,Nt);return $t[be.name]=Xe,Xe},app:ln,registerVersion:oe.registerVersion,setLogLevel:oe.setLogLevel,onLog:oe.onLog,apps:null,SDK_VERSION:oe.SDK_VERSION,INTERNAL:{registerComponent:function at(ut){const Ut=ut.name,be=Ut.replace("-compat","");if(oe._registerComponent(ut)&&"PUBLIC"===ut.type){const Xe=(rn=ln())=>{if("function"!=typeof rn[be])throw le.create("invalid-app-argument",{appName:Ut});return rn[be]()};void 0!==ut.serviceProps&&(0,m.zw)(Xe,ut.serviceProps),Nt[be]=Xe,qt.prototype[be]=function(...rn){return this._getService.bind(this,Ut).apply(this,ut.multipleInstances?rn:[])}}return"PUBLIC"===ut.type?Nt[be]:null},removeApp:function un(ut){delete $t[ut]},useAsService:function Dt(ut,Ut){return"serverAuth"===Ut?null:Ut},modularAPIs:oe}};function ln(ut){if(!(0,m.gR)($t,ut=ut||oe._DEFAULT_ENTRY_NAME))throw le.create("no-app",{appName:ut});return $t[ut]}return Nt.default=Nt,Object.defineProperty(Nt,"apps",{get:function he(){return Object.keys($t).map(ut=>$t[ut])}}),ln.App=qt,Nt}(k);return qt.INTERNAL=Object.assign(Object.assign({},qt.INTERNAL),{createFirebaseNamespace:We,extendNamespace:function $t(Nt){(0,m.zw)(qt,Nt)},createSubscribe:m.tD,ErrorFactory:m.FA,deepExtend:m.zw}),qt}(),fe=new ne.Vy("@firebase/app-compat");try{const qt=(0,m.mS)();if(void 0!==qt.firebase){fe.warn("\n      Warning: Firebase is already defined in the global scope. Please make sure\n      Firebase library is only loaded once.\n    ");const $t=qt.firebase.SDK_VERSION;$t&&$t.indexOf("LITE")>=0&&fe.warn("\n        Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n        ")}}catch{}const xt=pe;!function Je(qt){(0,oe.registerVersion)("@firebase/app-compat","0.2.43",qt)}()},7852:(on,rt,$)=>{$.r(rt),$.d(rt,{FirebaseError:()=>ne.g,SDK_VERSION:()=>Y,_DEFAULT_ENTRY_NAME:()=>an,_addComponent:()=>gi,_addOrOverwriteComponent:()=>Or,_apps:()=>Yn,_clearComponents:()=>Jr,_components:()=>Jn,_getProvider:()=>En,_isFirebaseApp:()=>jn,_isFirebaseServerApp:()=>In,_registerComponent:()=>_r,_removeServiceInstance:()=>Kr,_serverApps:()=>xr,deleteApp:()=>pt,getApp:()=>J,getApps:()=>Ee,initializeApp:()=>G,initializeServerApp:()=>te,onLog:()=>ue,registerVersion:()=>ie,setLogLevel:()=>ge});var m=$(467),V=$(1362),oe=$(8041),ne=$(1076);const k=(it,ke)=>ke.some(_t=>it instanceof _t);let Ue,le;const pe=new WeakMap,fe=new WeakMap,Be=new WeakMap,At=new WeakMap,Je=new WeakMap;let $t={get(it,ke,_t){if(it instanceof IDBTransaction){if("done"===ke)return fe.get(it);if("objectStoreNames"===ke)return it.objectStoreNames||Be.get(it);if("store"===ke)return _t.objectStoreNames[1]?void 0:_t.objectStore(_t.objectStoreNames[0])}return vt(it[ke])},set:(it,ke,_t)=>(it[ke]=_t,!0),has:(it,ke)=>it instanceof IDBTransaction&&("done"===ke||"store"===ke)||ke in it};function ln(it){return"function"==typeof it?function un(it){return it!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function We(){return le||(le=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(it)?function(...ke){return it.apply(he(this),ke),vt(pe.get(this))}:function(...ke){return vt(it.apply(he(this),ke))}:function(ke,..._t){const W=it.call(he(this),ke,..._t);return Be.set(W,ke.sort?ke.sort():[ke]),vt(W)}}(it):(it instanceof IDBTransaction&&function qt(it){if(fe.has(it))return;const ke=new Promise((_t,W)=>{const se=()=>{it.removeEventListener("complete",ae),it.removeEventListener("error",Fe),it.removeEventListener("abort",Fe)},ae=()=>{_t(),se()},Fe=()=>{W(it.error||new DOMException("AbortError","AbortError")),se()};it.addEventListener("complete",ae),it.addEventListener("error",Fe),it.addEventListener("abort",Fe)});fe.set(it,ke)}(it),k(it,function Qe(){return Ue||(Ue=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(it,$t):it)}function vt(it){if(it instanceof IDBRequest)return function xt(it){const ke=new Promise((_t,W)=>{const se=()=>{it.removeEventListener("success",ae),it.removeEventListener("error",Fe)},ae=()=>{_t(vt(it.result)),se()},Fe=()=>{W(it.error),se()};it.addEventListener("success",ae),it.addEventListener("error",Fe)});return ke.then(_t=>{_t instanceof IDBCursor&&pe.set(_t,it)}).catch(()=>{}),Je.set(ke,it),ke}(it);if(At.has(it))return At.get(it);const ke=ln(it);return ke!==it&&(At.set(it,ke),Je.set(ke,it)),ke}const he=it=>Je.get(it),ut=["get","getKey","getAll","getAllKeys","count"],Ut=["put","add","delete","clear"],be=new Map;function Xe(it,ke){if(!(it instanceof IDBDatabase)||ke in it||"string"!=typeof ke)return;if(be.get(ke))return be.get(ke);const _t=ke.replace(/FromIndex$/,""),W=ke!==_t,se=Ut.includes(_t);if(!(_t in(W?IDBIndex:IDBObjectStore).prototype)||!se&&!ut.includes(_t))return;const ae=function(){var Fe=(0,m.A)(function*(je,...St){const kt=this.transaction(je,se?"readwrite":"readonly");let sn=kt.store;return W&&(sn=sn.index(St.shift())),(yield Promise.all([sn[_t](...St),se&&kt.done]))[0]});return function(St){return Fe.apply(this,arguments)}}();return be.set(ke,ae),ae}!function Nt(it){$t=it($t)}(it=>({...it,get:(ke,_t,W)=>Xe(ke,_t)||it.get(ke,_t,W),has:(ke,_t)=>!!Xe(ke,_t)||it.has(ke,_t)}));class rn{constructor(ke){this.container=ke}getPlatformInfoString(){return this.container.getProviders().map(_t=>{if(function bn(it){const ke=it.getComponent();return"VERSION"===ke?.type}(_t)){const W=_t.getImmediate();return`${W.library}/${W.version}`}return null}).filter(_t=>_t).join(" ")}}const wt="@firebase/app",Ct="0.10.13",Bn=new oe.Vy("@firebase/app"),an="[DEFAULT]",mn={[wt]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/data-connect":"fire-data-connect","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","@firebase/vertexai-preview":"fire-vertex","fire-js":"fire-js",firebase:"fire-js-all"},Yn=new Map,xr=new Map,Jn=new Map;function gi(it,ke){try{it.container.addComponent(ke)}catch(_t){Bn.debug(`Component ${ke.name} failed to register with FirebaseApp ${it.name}`,_t)}}function Or(it,ke){it.container.addOrOverwriteComponent(ke)}function _r(it){const ke=it.name;if(Jn.has(ke))return Bn.debug(`There were multiple attempts to register component ${ke}.`),!1;Jn.set(ke,it);for(const _t of Yn.values())gi(_t,it);for(const _t of xr.values())gi(_t,it);return!0}function En(it,ke){const _t=it.container.getProvider("heartbeat").getImmediate({optional:!0});return _t&&_t.triggerHeartbeat(),it.container.getProvider(ke)}function Kr(it,ke,_t=an){En(it,ke).clearInstance(_t)}function jn(it){return void 0!==it.options}function In(it){return void 0!==it.settings}function Jr(){Jn.clear()}const or=new ne.FA("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class ri{constructor(ke,_t,W){this._isDeleted=!1,this._options=Object.assign({},ke),this._config=Object.assign({},_t),this._name=_t.name,this._automaticDataCollectionEnabled=_t.automaticDataCollectionEnabled,this._container=W,this.container.addComponent(new V.uA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ke){this.checkDestroyed(),this._automaticDataCollectionEnabled=ke}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(ke){this._isDeleted=ke}checkDestroyed(){if(this.isDeleted)throw or.create("app-deleted",{appName:this._name})}}class mt extends ri{constructor(ke,_t,W,se){const ae=void 0!==_t.automaticDataCollectionEnabled&&_t.automaticDataCollectionEnabled,Fe={name:W,automaticDataCollectionEnabled:ae};super(void 0!==ke.apiKey?ke:ke.options,Fe,se),this._serverConfig=Object.assign({automaticDataCollectionEnabled:ae},_t),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,_t.releaseOnDeref=void 0,ie(wt,Ct,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(ke){this.isDeleted||(this._refCount++,void 0!==ke&&null!==this._finalizationRegistry&&this._finalizationRegistry.register(ke,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){pt(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw or.create("server-app-deleted")}}const Y="10.14.1";function G(it,ke={}){let _t=it;"object"!=typeof ke&&(ke={name:ke});const W=Object.assign({name:an,automaticDataCollectionEnabled:!1},ke),se=W.name;if("string"!=typeof se||!se)throw or.create("bad-app-name",{appName:String(se)});if(_t||(_t=(0,ne.T9)()),!_t)throw or.create("no-options");const ae=Yn.get(se);if(ae){if((0,ne.bD)(_t,ae.options)&&(0,ne.bD)(W,ae.config))return ae;throw or.create("duplicate-app",{appName:se})}const Fe=new V.h1(se);for(const St of Jn.values())Fe.addComponent(St);const je=new ri(_t,W,Fe);return Yn.set(se,je),je}function te(it,ke){if((0,ne.Bd)()&&!(0,ne.p7)())throw or.create("invalid-server-app-environment");let _t;void 0===ke.automaticDataCollectionEnabled&&(ke.automaticDataCollectionEnabled=!1),_t=jn(it)?it.options:it;const W=Object.assign(Object.assign({},ke),_t);if(void 0!==W.releaseOnDeref&&delete W.releaseOnDeref,void 0!==ke.releaseOnDeref&&typeof FinalizationRegistry>"u")throw or.create("finalization-registry-not-supported",{});const ae=""+(kt=JSON.stringify(W),[...kt].reduce((sn,gn)=>Math.imul(31,sn)+gn.charCodeAt(0)|0,0)),Fe=xr.get(ae);var kt;if(Fe)return Fe.incRefCount(ke.releaseOnDeref),Fe;const je=new V.h1(ae);for(const kt of Jn.values())je.addComponent(kt);const St=new mt(_t,ke,ae,je);return xr.set(ae,St),St}function J(it=an){const ke=Yn.get(it);if(!ke&&it===an&&(0,ne.T9)())return G();if(!ke)throw or.create("no-app",{appName:it});return ke}function Ee(){return Array.from(Yn.values())}function pt(it){return Ft.apply(this,arguments)}function Ft(){return(Ft=(0,m.A)(function*(it){let ke=!1;const _t=it.name;Yn.has(_t)?(ke=!0,Yn.delete(_t)):xr.has(_t)&&it.decRefCount()<=0&&(xr.delete(_t),ke=!0),ke&&(yield Promise.all(it.container.getProviders().map(W=>W.delete())),it.isDeleted=!0)})).apply(this,arguments)}function ie(it,ke,_t){var W;let se=null!==(W=mn[it])&&void 0!==W?W:it;_t&&(se+=`-${_t}`);const ae=se.match(/\s|\//),Fe=ke.match(/\s|\//);if(ae||Fe){const je=[`Unable to register library "${se}" with version "${ke}":`];return ae&&je.push(`library name "${se}" contains illegal characters (whitespace or "/")`),ae&&Fe&&je.push("and"),Fe&&je.push(`version name "${ke}" contains illegal characters (whitespace or "/")`),void Bn.warn(je.join(" "))}_r(new V.uA(`${se}-version`,()=>({library:se,version:ke}),"VERSION"))}function ue(it,ke){if(null!==it&&"function"!=typeof it)throw or.create("invalid-log-argument");(0,oe.Ey)(it,ke)}function ge(it){(0,oe.He)(it)}const tt="firebase-heartbeat-database",Oe=1,zt="firebase-heartbeat-store";let Qt=null;function Dr(){return Qt||(Qt=function at(it,ke,{blocked:_t,upgrade:W,blocking:se,terminated:ae}={}){const Fe=indexedDB.open(it,ke),je=vt(Fe);return W&&Fe.addEventListener("upgradeneeded",St=>{W(vt(Fe.result),St.oldVersion,St.newVersion,vt(Fe.transaction),St)}),_t&&Fe.addEventListener("blocked",St=>_t(St.oldVersion,St.newVersion,St)),je.then(St=>{ae&&St.addEventListener("close",()=>ae()),se&&St.addEventListener("versionchange",kt=>se(kt.oldVersion,kt.newVersion,kt))}).catch(()=>{}),je}(tt,Oe,{upgrade:(it,ke)=>{if(0===ke)try{it.createObjectStore(zt)}catch(_t){console.warn(_t)}}}).catch(it=>{throw or.create("idb-open",{originalErrorMessage:it.message})})),Qt}function wn(){return(wn=(0,m.A)(function*(it){try{const _t=(yield Dr()).transaction(zt),W=yield _t.objectStore(zt).get(fr(it));return yield _t.done,W}catch(ke){if(ke instanceof ne.g)Bn.warn(ke.message);else{const _t=or.create("idb-get",{originalErrorMessage:ke?.message});Bn.warn(_t.message)}}})).apply(this,arguments)}function en(it,ke){return Vn.apply(this,arguments)}function Vn(){return(Vn=(0,m.A)(function*(it,ke){try{const W=(yield Dr()).transaction(zt,"readwrite");yield W.objectStore(zt).put(ke,fr(it)),yield W.done}catch(_t){if(_t instanceof ne.g)Bn.warn(_t.message);else{const W=or.create("idb-set",{originalErrorMessage:_t?.message});Bn.warn(W.message)}}})).apply(this,arguments)}function fr(it){return`${it.name}!${it.options.appId}`}class Ni{constructor(ke){this.container=ke,this._heartbeatsCache=null;const _t=this.container.getProvider("app").getImmediate();this._storage=new cs(_t),this._heartbeatsCachePromise=this._storage.read().then(W=>(this._heartbeatsCache=W,W))}triggerHeartbeat(){var ke=this;return(0,m.A)(function*(){var _t,W;try{const ae=ke.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Fe=Wn();return null==(null===(_t=ke._heartbeatsCache)||void 0===_t?void 0:_t.heartbeats)&&(ke._heartbeatsCache=yield ke._heartbeatsCachePromise,null==(null===(W=ke._heartbeatsCache)||void 0===W?void 0:W.heartbeats))||ke._heartbeatsCache.lastSentHeartbeatDate===Fe||ke._heartbeatsCache.heartbeats.some(je=>je.date===Fe)?void 0:(ke._heartbeatsCache.heartbeats.push({date:Fe,agent:ae}),ke._heartbeatsCache.heartbeats=ke._heartbeatsCache.heartbeats.filter(je=>{const St=new Date(je.date).valueOf();return Date.now()-St<=2592e6}),ke._storage.overwrite(ke._heartbeatsCache))}catch(se){Bn.warn(se)}})()}getHeartbeatsHeader(){var ke=this;return(0,m.A)(function*(){var _t;try{if(null===ke._heartbeatsCache&&(yield ke._heartbeatsCachePromise),null==(null===(_t=ke._heartbeatsCache)||void 0===_t?void 0:_t.heartbeats)||0===ke._heartbeatsCache.heartbeats.length)return"";const W=Wn(),{heartbeatsToSend:se,unsentEntries:ae}=function Is(it,ke=1024){const _t=[];let W=it.slice();for(const se of it){const ae=_t.find(Fe=>Fe.agent===se.agent);if(ae){if(ae.dates.push(se.date),Ii(_t)>ke){ae.dates.pop();break}}else if(_t.push({agent:se.agent,dates:[se.date]}),Ii(_t)>ke){_t.pop();break}W=W.slice(1)}return{heartbeatsToSend:_t,unsentEntries:W}}(ke._heartbeatsCache.heartbeats),Fe=(0,ne.Uj)(JSON.stringify({version:2,heartbeats:se}));return ke._heartbeatsCache.lastSentHeartbeatDate=W,ae.length>0?(ke._heartbeatsCache.heartbeats=ae,yield ke._storage.overwrite(ke._heartbeatsCache)):(ke._heartbeatsCache.heartbeats=[],ke._storage.overwrite(ke._heartbeatsCache)),Fe}catch(W){return Bn.warn(W),""}})()}}function Wn(){return(new Date).toISOString().substring(0,10)}class cs{constructor(ke){this.app=ke,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,m.A)(function*(){return!!(0,ne.zW)()&&(0,ne.eX)().then(()=>!0).catch(()=>!1)})()}read(){var ke=this;return(0,m.A)(function*(){if(yield ke._canUseIndexedDBPromise){const W=yield function qr(it){return wn.apply(this,arguments)}(ke.app);return W?.heartbeats?W:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(ke){var _t=this;return(0,m.A)(function*(){var W;if(yield _t._canUseIndexedDBPromise){const ae=yield _t.read();return en(_t.app,{lastSentHeartbeatDate:null!==(W=ke.lastSentHeartbeatDate)&&void 0!==W?W:ae.lastSentHeartbeatDate,heartbeats:ke.heartbeats})}})()}add(ke){var _t=this;return(0,m.A)(function*(){var W;if(yield _t._canUseIndexedDBPromise){const ae=yield _t.read();return en(_t.app,{lastSentHeartbeatDate:null!==(W=ke.lastSentHeartbeatDate)&&void 0!==W?W:ae.lastSentHeartbeatDate,heartbeats:[...ae.heartbeats,...ke.heartbeats]})}})()}}function Ii(it){return(0,ne.Uj)(JSON.stringify({version:2,heartbeats:it})).length}!function Ai(it){_r(new V.uA("platform-logger",ke=>new rn(ke),"PRIVATE")),_r(new V.uA("heartbeat",ke=>new Ni(ke),"PRIVATE")),ie(wt,Ct,it),ie(wt,Ct,"esm2017"),ie("fire-js","")}("")},1362:(on,rt,$)=>{$.d(rt,{h1:()=>Qe,uA:()=>oe});var m=$(467),V=$(1076);class oe{constructor(pe,fe,Be){this.name=pe,this.instanceFactory=fe,this.type=Be,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(pe){return this.instantiationMode=pe,this}setMultipleInstances(pe){return this.multipleInstances=pe,this}setServiceProps(pe){return this.serviceProps=pe,this}setInstanceCreatedCallback(pe){return this.onInstanceCreated=pe,this}}const ne="[DEFAULT]";class k{constructor(pe,fe){this.name=pe,this.container=fe,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(pe){const fe=this.normalizeInstanceIdentifier(pe);if(!this.instancesDeferred.has(fe)){const Be=new V.cY;if(this.instancesDeferred.set(fe,Be),this.isInitialized(fe)||this.shouldAutoInitialize())try{const At=this.getOrInitializeService({instanceIdentifier:fe});At&&Be.resolve(At)}catch{}}return this.instancesDeferred.get(fe).promise}getImmediate(pe){var fe;const Be=this.normalizeInstanceIdentifier(pe?.identifier),At=null!==(fe=pe?.optional)&&void 0!==fe&&fe;if(!this.isInitialized(Be)&&!this.shouldAutoInitialize()){if(At)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Be})}catch(Je){if(At)return null;throw Je}}getComponent(){return this.component}setComponent(pe){if(pe.name!==this.name)throw Error(`Mismatching Component ${pe.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=pe,this.shouldAutoInitialize()){if(function le(We){return"EAGER"===We.instantiationMode}(pe))try{this.getOrInitializeService({instanceIdentifier:ne})}catch{}for(const[fe,Be]of this.instancesDeferred.entries()){const At=this.normalizeInstanceIdentifier(fe);try{const Je=this.getOrInitializeService({instanceIdentifier:At});Be.resolve(Je)}catch{}}}}clearInstance(pe=ne){this.instancesDeferred.delete(pe),this.instancesOptions.delete(pe),this.instances.delete(pe)}delete(){var pe=this;return(0,m.A)(function*(){const fe=Array.from(pe.instances.values());yield Promise.all([...fe.filter(Be=>"INTERNAL"in Be).map(Be=>Be.INTERNAL.delete()),...fe.filter(Be=>"_delete"in Be).map(Be=>Be._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(pe=ne){return this.instances.has(pe)}getOptions(pe=ne){return this.instancesOptions.get(pe)||{}}initialize(pe={}){const{options:fe={}}=pe,Be=this.normalizeInstanceIdentifier(pe.instanceIdentifier);if(this.isInitialized(Be))throw Error(`${this.name}(${Be}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const At=this.getOrInitializeService({instanceIdentifier:Be,options:fe});for(const[Je,xt]of this.instancesDeferred.entries())Be===this.normalizeInstanceIdentifier(Je)&&xt.resolve(At);return At}onInit(pe,fe){var Be;const At=this.normalizeInstanceIdentifier(fe),Je=null!==(Be=this.onInitCallbacks.get(At))&&void 0!==Be?Be:new Set;Je.add(pe),this.onInitCallbacks.set(At,Je);const xt=this.instances.get(At);return xt&&pe(xt,At),()=>{Je.delete(pe)}}invokeOnInitCallbacks(pe,fe){const Be=this.onInitCallbacks.get(fe);if(Be)for(const At of Be)try{At(pe,fe)}catch{}}getOrInitializeService({instanceIdentifier:pe,options:fe={}}){let Be=this.instances.get(pe);if(!Be&&this.component&&(Be=this.component.instanceFactory(this.container,{instanceIdentifier:(We=pe,We===ne?void 0:We),options:fe}),this.instances.set(pe,Be),this.instancesOptions.set(pe,fe),this.invokeOnInitCallbacks(Be,pe),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,pe,Be)}catch{}var We;return Be||null}normalizeInstanceIdentifier(pe=ne){return this.component?this.component.multipleInstances?pe:ne:pe}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Qe{constructor(pe){this.name=pe,this.providers=new Map}addComponent(pe){const fe=this.getProvider(pe.name);if(fe.isComponentSet())throw new Error(`Component ${pe.name} has already been registered with ${this.name}`);fe.setComponent(pe)}addOrOverwriteComponent(pe){this.getProvider(pe.name).isComponentSet()&&this.providers.delete(pe.name),this.addComponent(pe)}getProvider(pe){if(this.providers.has(pe))return this.providers.get(pe);const fe=new k(pe,this);return this.providers.set(pe,fe),fe}getProviders(){return Array.from(this.providers.values())}}},8041:(on,rt,$)=>{$.d(rt,{$b:()=>V,Ey:()=>We,He:()=>Qe,Vy:()=>le});const m=[];var V=function(pe){return pe[pe.DEBUG=0]="DEBUG",pe[pe.VERBOSE=1]="VERBOSE",pe[pe.INFO=2]="INFO",pe[pe.WARN=3]="WARN",pe[pe.ERROR=4]="ERROR",pe[pe.SILENT=5]="SILENT",pe}(V||{});const oe={debug:V.DEBUG,verbose:V.VERBOSE,info:V.INFO,warn:V.WARN,error:V.ERROR,silent:V.SILENT},ne=V.INFO,k={[V.DEBUG]:"log",[V.VERBOSE]:"log",[V.INFO]:"info",[V.WARN]:"warn",[V.ERROR]:"error"},Ue=(pe,fe,...Be)=>{if(fe<pe.logLevel)return;const At=(new Date).toISOString(),Je=k[fe];if(!Je)throw new Error(`Attempted to log a message with an invalid logType (value: ${fe})`);console[Je](`[${At}]  ${pe.name}:`,...Be)};class le{constructor(fe){this.name=fe,this._logLevel=ne,this._logHandler=Ue,this._userLogHandler=null,m.push(this)}get logLevel(){return this._logLevel}set logLevel(fe){if(!(fe in V))throw new TypeError(`Invalid value "${fe}" assigned to \`logLevel\``);this._logLevel=fe}setLogLevel(fe){this._logLevel="string"==typeof fe?oe[fe]:fe}get logHandler(){return this._logHandler}set logHandler(fe){if("function"!=typeof fe)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=fe}get userLogHandler(){return this._userLogHandler}set userLogHandler(fe){this._userLogHandler=fe}debug(...fe){this._userLogHandler&&this._userLogHandler(this,V.DEBUG,...fe),this._logHandler(this,V.DEBUG,...fe)}log(...fe){this._userLogHandler&&this._userLogHandler(this,V.VERBOSE,...fe),this._logHandler(this,V.VERBOSE,...fe)}info(...fe){this._userLogHandler&&this._userLogHandler(this,V.INFO,...fe),this._logHandler(this,V.INFO,...fe)}warn(...fe){this._userLogHandler&&this._userLogHandler(this,V.WARN,...fe),this._logHandler(this,V.WARN,...fe)}error(...fe){this._userLogHandler&&this._userLogHandler(this,V.ERROR,...fe),this._logHandler(this,V.ERROR,...fe)}}function Qe(pe){m.forEach(fe=>{fe.setLogLevel(pe)})}function We(pe,fe){for(const Be of m){let At=null;fe&&fe.level&&(At=oe[fe.level]),Be.userLogHandler=null===pe?null:(Je,xt,...qt)=>{const $t=qt.map(Nt=>{if(null==Nt)return null;if("string"==typeof Nt)return Nt;if("number"==typeof Nt||"boolean"==typeof Nt)return Nt.toString();if(Nt instanceof Error)return Nt.message;try{return JSON.stringify(Nt)}catch{return null}}).filter(Nt=>Nt).join(" ");xt>=(At??Je.logLevel)&&pe({level:V[xt].toLowerCase(),message:$t,args:qt,type:Je.name})}}}},7935:(on,rt,$)=>{$.d(rt,{A:()=>m.A});var m=$(3345);m.A.registerVersion("firebase","10.14.1","app-compat")},7955:(on,rt,$)=>{var m=$(467),V=$(3345),oe=$(7852),ne=$(1076),k=$(8041),Ue=$(1635),le=$(1362);const We={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const xt=function At(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},qt=function Je(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},$t=new ne.FA("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),un=new k.Vy("@firebase/auth");function vt(y,...d){un.logLevel<=k.$b.ERROR&&un.error(`Auth (${oe.SDK_VERSION}): ${y}`,...d)}function he(y,...d){throw be(y,...d)}function at(y,...d){return be(y,...d)}function Dt(y,d,h){const I=Object.assign(Object.assign({},qt()),{[d]:h});return new ne.FA("auth","Firebase",I).create(d,{appName:y.name})}function ut(y){return Dt(y,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ut(y,d,h){if(!(d instanceof h))throw h.name!==d.constructor.name&&he(y,"argument-error"),Dt(y,"argument-error",`Type of ${d.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function be(y,...d){if("string"!=typeof y){const h=d[0],I=[...d.slice(1)];return I[0]&&(I[0].appName=y.name),y._errorFactory.create(h,...I)}return $t.create(y,...d)}function Xe(y,d,...h){if(!y)throw be(d,...h)}function rn(y){const d="INTERNAL ASSERTION FAILED: "+y;throw vt(d),new Error(d)}function bn(y,d){y||rn(d)}function wt(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function Ct(){return"http:"===Bn()||"https:"===Bn()}function Bn(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class Pe{constructor(d,h){this.shortDelay=d,this.longDelay=h,bn(h>d,"Short delay should be less than long delay!"),this.isMobile=(0,ne.jZ)()||(0,ne.lV)()}get(){return function Ze(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Ct()||(0,ne.sr)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Jt(y,d){bn(y.emulator,"Emulator should always be set here");const{url:h}=y.emulator;return d?`${h}${d.startsWith("/")?d.slice(1):d}`:h}class Re{static initialize(d,h,I){this.fetchImpl=d,h&&(this.headersImpl=h),I&&(this.responseImpl=I)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void rn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void rn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void rn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Me={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Ne=new Pe(3e4,6e4);function ye(y,d){return y.tenantId&&!d.tenantId?Object.assign(Object.assign({},d),{tenantId:y.tenantId}):d}function He(y,d,h,I){return lt.apply(this,arguments)}function lt(){return(lt=(0,m.A)(function*(y,d,h,I,N={}){return bt(y,N,(0,m.A)(function*(){let K={},me={};I&&("GET"===d?me=I:K={body:JSON.stringify(I)});const Le=(0,ne.Am)(Object.assign({key:y.config.apiKey},me)).slice(1),Et=yield y._getAdditionalHeaders();Et["Content-Type"]="application/json",y.languageCode&&(Et["X-Firebase-Locale"]=y.languageCode);const Bt=Object.assign({method:d,headers:Et},K);return(0,ne.c1)()||(Bt.referrerPolicy="no-referrer"),Re.fetch()($e(y,y.config.apiHost,h,Le),Bt)}))})).apply(this,arguments)}function bt(y,d,h){return cn.apply(this,arguments)}function cn(){return(cn=(0,m.A)(function*(y,d,h){y._canInitEmulator=!1;const I=Object.assign(Object.assign({},Me),d);try{const N=new ct(y),K=yield Promise.race([h(),N.promise]);N.clearNetworkTimeout();const me=yield K.json();if("needConfirmation"in me)throw dt(y,"account-exists-with-different-credential",me);if(K.ok&&!("errorMessage"in me))return me;{const Le=K.ok?me.errorMessage:me.error.message,[Et,Bt]=Le.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Et)throw dt(y,"credential-already-in-use",me);if("EMAIL_EXISTS"===Et)throw dt(y,"email-already-in-use",me);if("USER_DISABLED"===Et)throw dt(y,"user-disabled",me);const hn=I[Et]||Et.toLowerCase().replace(/[_\s]+/g,"-");if(Bt)throw Dt(y,hn,Bt);he(y,hn)}}catch(N){if(N instanceof ne.g)throw N;he(y,"network-request-failed",{message:String(N)})}})).apply(this,arguments)}function Zt(y,d,h,I){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,m.A)(function*(y,d,h,I,N={}){const K=yield He(y,d,h,I,N);return"mfaPendingCredential"in K&&he(y,"multi-factor-auth-required",{_serverResponse:K}),K})).apply(this,arguments)}function $e(y,d,h,I){const N=`${d}${h}?${I}`;return y.config.emulator?Jt(y.config,N):`${y.config.apiScheme}://${N}`}function gt(y){switch(y){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class ct{constructor(d){this.auth=d,this.timer=null,this.promise=new Promise((h,I)=>{this.timer=setTimeout(()=>I(at(this.auth,"network-request-failed")),Ne.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function dt(y,d,h){const I={appName:y.name};h.email&&(I.email=h.email),h.phoneNumber&&(I.phoneNumber=h.phoneNumber);const N=at(y,d,I);return N.customData._tokenResponse=h,N}function ht(y){return void 0!==y&&void 0!==y.getResponse}function ot(y){return void 0!==y&&void 0!==y.enterprise}class Pt{constructor(d){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===d.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=d.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=d.recaptchaEnforcementState}getProviderEnforcementState(d){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const h of this.recaptchaEnforcementState)if(h.provider&&h.provider===d)return gt(h.enforcementState);return null}isProviderEnabled(d){return"ENFORCE"===this.getProviderEnforcementState(d)||"AUDIT"===this.getProviderEnforcementState(d)}}function zn(){return(zn=(0,m.A)(function*(y){return(yield He(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Dn(y,d){return Ot.apply(this,arguments)}function Ot(){return(Ot=(0,m.A)(function*(y,d){return He(y,"GET","/v2/recaptchaConfig",ye(y,d))})).apply(this,arguments)}function Nn(){return(Nn=(0,m.A)(function*(y,d){return He(y,"POST","/v1/accounts:delete",d)})).apply(this,arguments)}function mn(){return(mn=(0,m.A)(function*(y,d){return He(y,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function Yn(y,d){return xr.apply(this,arguments)}function xr(){return(xr=(0,m.A)(function*(y,d){return He(y,"POST","/v1/accounts:lookup",d)})).apply(this,arguments)}function Jn(y){if(y)try{const d=new Date(Number(y));if(!isNaN(d.getTime()))return d.toUTCString()}catch{}}function _r(){return(_r=(0,m.A)(function*(y,d=!1){const h=(0,ne.Ku)(y),I=yield h.getIdToken(d),N=Kr(I);Xe(N&&N.exp&&N.auth_time&&N.iat,h.auth,"internal-error");const K="object"==typeof N.firebase?N.firebase:void 0,me=K?.sign_in_provider;return{claims:N,token:I,authTime:Jn(En(N.auth_time)),issuedAtTime:Jn(En(N.iat)),expirationTime:Jn(En(N.exp)),signInProvider:me||null,signInSecondFactor:K?.sign_in_second_factor||null}})).apply(this,arguments)}function En(y){return 1e3*Number(y)}function Kr(y){const[d,h,I]=y.split(".");if(void 0===d||void 0===h||void 0===I)return vt("JWT malformed, contained fewer than 3 sections"),null;try{const N=(0,ne.u)(h);return N?JSON.parse(N):(vt("Failed to decode base64 JWT payload"),null)}catch(N){return vt("Caught error parsing JWT payload as JSON",N?.toString()),null}}function jn(y){const d=Kr(y);return Xe(d,"internal-error"),Xe(typeof d.exp<"u","internal-error"),Xe(typeof d.iat<"u","internal-error"),Number(d.exp)-Number(d.iat)}function In(y,d){return Jr.apply(this,arguments)}function Jr(){return(Jr=(0,m.A)(function*(y,d,h=!1){if(h)return d;try{return yield d}catch(I){throw I instanceof ne.g&&function Ie({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}(I)&&y.auth.currentUser===y&&(yield y.auth.signOut()),I}})).apply(this,arguments)}class or{constructor(d){this.user=d,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(d){var h;if(d){const I=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),I}{this.errorBackoff=3e4;const N=(null!==(h=this.user.stsTokenManager.expirationTime)&&void 0!==h?h:0)-Date.now()-3e5;return Math.max(0,N)}}schedule(d=!1){var h=this;if(!this.isRunning)return;const I=this.getInterval(d);this.timerId=setTimeout((0,m.A)(function*(){yield h.iteration()}),I)}iteration(){var d=this;return(0,m.A)(function*(){try{yield d.user.getIdToken(!0)}catch(h){return void("auth/network-request-failed"===h?.code&&d.schedule(!0))}d.schedule()})()}}class ri{constructor(d,h){this.createdAt=d,this.lastLoginAt=h,this._initializeTime()}_initializeTime(){this.lastSignInTime=Jn(this.lastLoginAt),this.creationTime=Jn(this.createdAt)}_copy(d){this.createdAt=d.createdAt,this.lastLoginAt=d.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function mt(y){return Y.apply(this,arguments)}function Y(){return(Y=(0,m.A)(function*(y){var d;const h=y.auth,I=yield y.getIdToken(),N=yield In(y,Yn(h,{idToken:I}));Xe(N?.users.length,h,"internal-error");const K=N.users[0];y._notifyReloadListener(K);const me=null!==(d=K.providerUserInfo)&&void 0!==d&&d.length?Ee(K.providerUserInfo):[],Le=function J(y,d){return[...y.filter(I=>!d.some(N=>N.providerId===I.providerId)),...d]}(y.providerData,me),hn=!!y.isAnonymous&&!(y.email&&K.passwordHash||Le?.length),fn={uid:K.localId,displayName:K.displayName||null,photoURL:K.photoUrl||null,email:K.email||null,emailVerified:K.emailVerified||!1,phoneNumber:K.phoneNumber||null,tenantId:K.tenantId||null,providerData:Le,metadata:new ri(K.createdAt,K.lastLoginAt),isAnonymous:hn};Object.assign(y,fn)})).apply(this,arguments)}function te(){return(te=(0,m.A)(function*(y){const d=(0,ne.Ku)(y);yield mt(d),yield d.auth._persistUserIfCurrent(d),d.auth._notifyListenersIfCurrent(d)})).apply(this,arguments)}function Ee(y){return y.map(d=>{var{providerId:h}=d,I=(0,Ue.Tt)(d,["providerId"]);return{providerId:h,uid:I.rawId||"",displayName:I.displayName||null,email:I.email||null,phoneNumber:I.phoneNumber||null,photoURL:I.photoUrl||null}})}function Ft(){return(Ft=(0,m.A)(function*(y,d){const h=yield bt(y,{},(0,m.A)(function*(){const I=(0,ne.Am)({grant_type:"refresh_token",refresh_token:d}).slice(1),{tokenApiHost:N,apiKey:K}=y.config,me=$e(y,N,"/v1/token",`key=${K}`),Le=yield y._getAdditionalHeaders();return Le["Content-Type"]="application/x-www-form-urlencoded",Re.fetch()(me,{method:"POST",headers:Le,body:I})}));return{accessToken:h.access_token,expiresIn:h.expires_in,refreshToken:h.refresh_token}})).apply(this,arguments)}function ue(){return(ue=(0,m.A)(function*(y,d){return He(y,"POST","/v2/accounts:revokeToken",ye(y,d))})).apply(this,arguments)}class ge{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(d){Xe(d.idToken,"internal-error"),Xe(typeof d.idToken<"u","internal-error"),Xe(typeof d.refreshToken<"u","internal-error");const h="expiresIn"in d&&typeof d.expiresIn<"u"?Number(d.expiresIn):jn(d.idToken);this.updateTokensAndExpiration(d.idToken,d.refreshToken,h)}updateFromIdToken(d){Xe(0!==d.length,"internal-error");const h=jn(d);this.updateTokensAndExpiration(d,null,h)}getToken(d,h=!1){var I=this;return(0,m.A)(function*(){return h||!I.accessToken||I.isExpired?(Xe(I.refreshToken,d,"user-token-expired"),I.refreshToken?(yield I.refresh(d,I.refreshToken),I.accessToken):null):I.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(d,h){var I=this;return(0,m.A)(function*(){const{accessToken:N,refreshToken:K,expiresIn:me}=yield function pt(y,d){return Ft.apply(this,arguments)}(d,h);I.updateTokensAndExpiration(N,K,Number(me))})()}updateTokensAndExpiration(d,h,I){this.refreshToken=h||null,this.accessToken=d||null,this.expirationTime=Date.now()+1e3*I}static fromJSON(d,h){const{refreshToken:I,accessToken:N,expirationTime:K}=h,me=new ge;return I&&(Xe("string"==typeof I,"internal-error",{appName:d}),me.refreshToken=I),N&&(Xe("string"==typeof N,"internal-error",{appName:d}),me.accessToken=N),K&&(Xe("number"==typeof K,"internal-error",{appName:d}),me.expirationTime=K),me}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(d){this.accessToken=d.accessToken,this.refreshToken=d.refreshToken,this.expirationTime=d.expirationTime}_clone(){return Object.assign(new ge,this.toJSON())}_performRefresh(){return rn("not implemented")}}function tt(y,d){Xe("string"==typeof y||typeof y>"u","internal-error",{appName:d})}class Oe{constructor(d){var{uid:h,auth:I,stsTokenManager:N}=d,K=(0,Ue.Tt)(d,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new or(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=h,this.auth=I,this.stsTokenManager=N,this.accessToken=N.accessToken,this.displayName=K.displayName||null,this.email=K.email||null,this.emailVerified=K.emailVerified||!1,this.phoneNumber=K.phoneNumber||null,this.photoURL=K.photoURL||null,this.isAnonymous=K.isAnonymous||!1,this.tenantId=K.tenantId||null,this.providerData=K.providerData?[...K.providerData]:[],this.metadata=new ri(K.createdAt||void 0,K.lastLoginAt||void 0)}getIdToken(d){var h=this;return(0,m.A)(function*(){const I=yield In(h,h.stsTokenManager.getToken(h.auth,d));return Xe(I,h.auth,"internal-error"),h.accessToken!==I&&(h.accessToken=I,yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)),I})()}getIdTokenResult(d){return function Or(y){return _r.apply(this,arguments)}(this,d)}reload(){return function G(y){return te.apply(this,arguments)}(this)}_assign(d){this!==d&&(Xe(this.uid===d.uid,this.auth,"internal-error"),this.displayName=d.displayName,this.photoURL=d.photoURL,this.email=d.email,this.emailVerified=d.emailVerified,this.phoneNumber=d.phoneNumber,this.isAnonymous=d.isAnonymous,this.tenantId=d.tenantId,this.providerData=d.providerData.map(h=>Object.assign({},h)),this.metadata._copy(d.metadata),this.stsTokenManager._assign(d.stsTokenManager))}_clone(d){const h=new Oe(Object.assign(Object.assign({},this),{auth:d,stsTokenManager:this.stsTokenManager._clone()}));return h.metadata._copy(this.metadata),h}_onReload(d){Xe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=d,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(d){this.reloadListener?this.reloadListener(d):this.reloadUserInfo=d}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(d,h=!1){var I=this;return(0,m.A)(function*(){let N=!1;d.idToken&&d.idToken!==I.stsTokenManager.accessToken&&(I.stsTokenManager.updateFromServerResponse(d),N=!0),h&&(yield mt(I)),yield I.auth._persistUserIfCurrent(I),N&&I.auth._notifyListenersIfCurrent(I)})()}delete(){var d=this;return(0,m.A)(function*(){if((0,oe._isFirebaseServerApp)(d.auth.app))return Promise.reject(ut(d.auth));const h=yield d.getIdToken();return yield In(d,function mr(y,d){return Nn.apply(this,arguments)}(d.auth,{idToken:h})),d.stsTokenManager.clearRefreshToken(),d.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(d=>Object.assign({},d)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(d,h){var I,N,K,me,Le,Et,Bt,hn;const fn=null!==(I=h.displayName)&&void 0!==I?I:void 0,di=null!==(N=h.email)&&void 0!==N?N:void 0,ui=null!==(K=h.phoneNumber)&&void 0!==K?K:void 0,gu=null!==(me=h.photoURL)&&void 0!==me?me:void 0,vh=null!==(Le=h.tenantId)&&void 0!==Le?Le:void 0,wc=null!==(Et=h._redirectEventId)&&void 0!==Et?Et:void 0,Mf=null!==(Bt=h.createdAt)&&void 0!==Bt?Bt:void 0,hl=null!==(hn=h.lastLoginAt)&&void 0!==hn?hn:void 0,{uid:dd,emailVerified:fl,isAnonymous:hd,providerData:Tc,stsTokenManager:Nf}=h;Xe(dd&&Nf,d,"internal-error");const Eh=ge.fromJSON(this.name,Nf);Xe("string"==typeof dd,d,"internal-error"),tt(fn,d.name),tt(di,d.name),Xe("boolean"==typeof fl,d,"internal-error"),Xe("boolean"==typeof hd,d,"internal-error"),tt(ui,d.name),tt(gu,d.name),tt(vh,d.name),tt(wc,d.name),tt(Mf,d.name),tt(hl,d.name);const Ih=new Oe({uid:dd,auth:d,email:di,emailVerified:fl,displayName:fn,isAnonymous:hd,photoURL:gu,phoneNumber:ui,tenantId:vh,stsTokenManager:Eh,createdAt:Mf,lastLoginAt:hl});return Tc&&Array.isArray(Tc)&&(Ih.providerData=Tc.map(wh=>Object.assign({},wh))),wc&&(Ih._redirectEventId=wc),Ih}static _fromIdTokenResponse(d,h,I=!1){return(0,m.A)(function*(){const N=new ge;N.updateFromServerResponse(h);const K=new Oe({uid:h.localId,auth:d,stsTokenManager:N,isAnonymous:I});return yield mt(K),K})()}static _fromGetAccountInfoResponse(d,h,I){return(0,m.A)(function*(){const N=h.users[0];Xe(void 0!==N.localId,"internal-error");const K=void 0!==N.providerUserInfo?Ee(N.providerUserInfo):[],me=!(N.email&&N.passwordHash||K?.length),Le=new ge;Le.updateFromIdToken(I);const Et=new Oe({uid:N.localId,auth:d,stsTokenManager:Le,isAnonymous:me}),Bt={uid:N.localId,displayName:N.displayName||null,photoURL:N.photoUrl||null,email:N.email||null,emailVerified:N.emailVerified||!1,phoneNumber:N.phoneNumber||null,tenantId:N.tenantId||null,providerData:K,metadata:new ri(N.createdAt,N.lastLoginAt),isAnonymous:!(N.email&&N.passwordHash||K?.length)};return Object.assign(Et,Bt),Et})()}}const zt=new Map;function Qt(y){bn(y instanceof Function,"Expected a class definition");let d=zt.get(y);return d?(bn(d instanceof y,"Instance stored in cache mismatched with class"),d):(d=new y,zt.set(y,d),d)}const qr=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,m.A)(function*(){return!0})()}_set(h,I){var N=this;return(0,m.A)(function*(){N.storage[h]=I})()}_get(h){var I=this;return(0,m.A)(function*(){const N=I.storage[h];return void 0===N?null:N})()}_remove(h){var I=this;return(0,m.A)(function*(){delete I.storage[h]})()}_addListener(h,I){}_removeListener(h,I){}}return y.type="NONE",y})();function wn(y,d,h){return`firebase:${y}:${d}:${h}`}class en{constructor(d,h,I){this.persistence=d,this.auth=h,this.userKey=I;const{config:N,name:K}=this.auth;this.fullUserKey=wn(this.userKey,N.apiKey,K),this.fullPersistenceKey=wn("persistence",N.apiKey,K),this.boundEventHandler=h._onStorageEvent.bind(h),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(d){return this.persistence._set(this.fullUserKey,d.toJSON())}getCurrentUser(){var d=this;return(0,m.A)(function*(){const h=yield d.persistence._get(d.fullUserKey);return h?Oe._fromJSON(d.auth,h):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(d){var h=this;return(0,m.A)(function*(){if(h.persistence===d)return;const I=yield h.getCurrentUser();return yield h.removeCurrentUser(),h.persistence=d,I?h.setCurrentUser(I):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(d,h,I="authUser"){return(0,m.A)(function*(){if(!h.length)return new en(Qt(qr),d,I);const N=(yield Promise.all(h.map(function(){var Bt=(0,m.A)(function*(hn){if(yield hn._isAvailable())return hn});return function(hn){return Bt.apply(this,arguments)}}()))).filter(Bt=>Bt);let K=N[0]||Qt(qr);const me=wn(I,d.config.apiKey,d.name);let Le=null;for(const Bt of h)try{const hn=yield Bt._get(me);if(hn){const fn=Oe._fromJSON(d,hn);Bt!==K&&(Le=fn),K=Bt;break}}catch{}const Et=N.filter(Bt=>Bt._shouldAllowMigration);return K._shouldAllowMigration&&Et.length?(K=Et[0],Le&&(yield K._set(me,Le.toJSON())),yield Promise.all(h.map(function(){var Bt=(0,m.A)(function*(hn){if(hn!==K)try{yield hn._remove(me)}catch{}});return function(hn){return Bt.apply(this,arguments)}}())),new en(K,d,I)):new en(K,d,I)})()}}function Vn(y){const d=y.toLowerCase();if(d.includes("opera/")||d.includes("opr/")||d.includes("opios/"))return"Opera";if(Ni(d))return"IEMobile";if(d.includes("msie")||d.includes("trident/"))return"IE";if(d.includes("edge/"))return"Edge";if(fr(d))return"Firefox";if(d.includes("silk/"))return"Silk";if(Is(d))return"Blackberry";if(cs(d))return"Webos";if(Zr(d))return"Safari";if((d.includes("chrome/")||Ui(d))&&!d.includes("edge/"))return"Chrome";if(Wn(d))return"Android";{const I=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===I?.length)return I[1]}return"Other"}function fr(y=(0,ne.ZQ)()){return/firefox\//i.test(y)}function Zr(y=(0,ne.ZQ)()){const d=y.toLowerCase();return d.includes("safari/")&&!d.includes("chrome/")&&!d.includes("crios/")&&!d.includes("android")}function Ui(y=(0,ne.ZQ)()){return/crios\//i.test(y)}function Ni(y=(0,ne.ZQ)()){return/iemobile/i.test(y)}function Wn(y=(0,ne.ZQ)()){return/android/i.test(y)}function Is(y=(0,ne.ZQ)()){return/blackberry/i.test(y)}function cs(y=(0,ne.ZQ)()){return/webos/i.test(y)}function Ii(y=(0,ne.ZQ)()){return/iphone|ipad|ipod/i.test(y)||/macintosh/i.test(y)&&/mobile/i.test(y)}function _t(y=(0,ne.ZQ)()){return Ii(y)||Wn(y)||cs(y)||Is(y)||/windows phone/i.test(y)||Ni(y)}function W(y,d=[]){let h;switch(y){case"Browser":h=Vn((0,ne.ZQ)());break;case"Worker":h=`${Vn((0,ne.ZQ)())}-${y}`;break;default:h=y}const I=d.length?d.join(","):"FirebaseCore-web";return`${h}/JsCore/${oe.SDK_VERSION}/${I}`}class se{constructor(d){this.auth=d,this.queue=[]}pushCallback(d,h){const I=K=>new Promise((me,Le)=>{try{me(d(K))}catch(Et){Le(Et)}});I.onAbort=h,this.queue.push(I);const N=this.queue.length-1;return()=>{this.queue[N]=()=>Promise.resolve()}}runMiddleware(d){var h=this;return(0,m.A)(function*(){if(h.auth.currentUser===d)return;const I=[];try{for(const N of h.queue)yield N(d),N.onAbort&&I.push(N.onAbort)}catch(N){I.reverse();for(const K of I)try{K()}catch{}throw h.auth._errorFactory.create("login-blocked",{originalMessage:N?.message})}})()}}function Fe(){return(Fe=(0,m.A)(function*(y,d={}){return He(y,"GET","/v2/passwordPolicy",ye(y,d))})).apply(this,arguments)}class St{constructor(d){var h,I,N,K;const me=d.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(h=me.minPasswordLength)&&void 0!==h?h:6,me.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=me.maxPasswordLength),void 0!==me.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=me.containsLowercaseCharacter),void 0!==me.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=me.containsUppercaseCharacter),void 0!==me.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=me.containsNumericCharacter),void 0!==me.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=me.containsNonAlphanumericCharacter),this.enforcementState=d.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(N=null===(I=d.allowedNonAlphanumericCharacters)||void 0===I?void 0:I.join(""))&&void 0!==N?N:"",this.forceUpgradeOnSignin=null!==(K=d.forceUpgradeOnSignin)&&void 0!==K&&K,this.schemaVersion=d.schemaVersion}validatePassword(d){var h,I,N,K,me,Le;const Et={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(d,Et),this.validatePasswordCharacterOptions(d,Et),Et.isValid&&(Et.isValid=null===(h=Et.meetsMinPasswordLength)||void 0===h||h),Et.isValid&&(Et.isValid=null===(I=Et.meetsMaxPasswordLength)||void 0===I||I),Et.isValid&&(Et.isValid=null===(N=Et.containsLowercaseLetter)||void 0===N||N),Et.isValid&&(Et.isValid=null===(K=Et.containsUppercaseLetter)||void 0===K||K),Et.isValid&&(Et.isValid=null===(me=Et.containsNumericCharacter)||void 0===me||me),Et.isValid&&(Et.isValid=null===(Le=Et.containsNonAlphanumericCharacter)||void 0===Le||Le),Et}validatePasswordLengthOptions(d,h){const I=this.customStrengthOptions.minPasswordLength,N=this.customStrengthOptions.maxPasswordLength;I&&(h.meetsMinPasswordLength=d.length>=I),N&&(h.meetsMaxPasswordLength=d.length<=N)}validatePasswordCharacterOptions(d,h){let I;this.updatePasswordCharacterOptionsStatuses(h,!1,!1,!1,!1);for(let N=0;N<d.length;N++)I=d.charAt(N),this.updatePasswordCharacterOptionsStatuses(h,I>="a"&&I<="z",I>="A"&&I<="Z",I>="0"&&I<="9",this.allowedNonAlphanumericCharacters.includes(I))}updatePasswordCharacterOptionsStatuses(d,h,I,N,K){this.customStrengthOptions.containsLowercaseLetter&&(d.containsLowercaseLetter||(d.containsLowercaseLetter=h)),this.customStrengthOptions.containsUppercaseLetter&&(d.containsUppercaseLetter||(d.containsUppercaseLetter=I)),this.customStrengthOptions.containsNumericCharacter&&(d.containsNumericCharacter||(d.containsNumericCharacter=N)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(d.containsNonAlphanumericCharacter||(d.containsNonAlphanumericCharacter=K))}}class kt{constructor(d,h,I,N){this.app=d,this.heartbeatServiceProvider=h,this.appCheckServiceProvider=I,this.config=N,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new gn(this),this.idTokenSubscription=new gn(this),this.beforeStateQueue=new se(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=$t,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=d.name,this.clientVersion=N.sdkClientVersion}_initializeWithPersistence(d,h){var I=this;return h&&(this._popupRedirectResolver=Qt(h)),this._initializationPromise=this.queue((0,m.A)(function*(){var N,K;if(!I._deleted&&(I.persistenceManager=yield en.create(I,d),!I._deleted)){if(null!==(N=I._popupRedirectResolver)&&void 0!==N&&N._shouldInitProactively)try{yield I._popupRedirectResolver._initialize(I)}catch{}yield I.initializeCurrentUser(h),I.lastNotifiedUid=(null===(K=I.currentUser)||void 0===K?void 0:K.uid)||null,!I._deleted&&(I._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var d=this;return(0,m.A)(function*(){if(d._deleted)return;const h=yield d.assertedPersistence.getCurrentUser();if(d.currentUser||h){if(d.currentUser&&h&&d.currentUser.uid===h.uid)return d._currentUser._assign(h),void(yield d.currentUser.getIdToken());yield d._updateCurrentUser(h,!0)}})()}initializeCurrentUserFromIdToken(d){var h=this;return(0,m.A)(function*(){try{const I=yield Yn(h,{idToken:d}),N=yield Oe._fromGetAccountInfoResponse(h,I,d);yield h.directlySetCurrentUser(N)}catch(I){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",I),yield h.directlySetCurrentUser(null)}})()}initializeCurrentUser(d){var h=this;return(0,m.A)(function*(){var I;if((0,oe._isFirebaseServerApp)(h.app)){const Le=h.app.settings.authIdToken;return Le?new Promise(Et=>{setTimeout(()=>h.initializeCurrentUserFromIdToken(Le).then(Et,Et))}):h.directlySetCurrentUser(null)}const N=yield h.assertedPersistence.getCurrentUser();let K=N,me=!1;if(d&&h.config.authDomain){yield h.getOrInitRedirectPersistenceManager();const Le=null===(I=h.redirectUser)||void 0===I?void 0:I._redirectEventId,Et=K?._redirectEventId,Bt=yield h.tryRedirectSignIn(d);(!Le||Le===Et)&&Bt?.user&&(K=Bt.user,me=!0)}if(!K)return h.directlySetCurrentUser(null);if(!K._redirectEventId){if(me)try{yield h.beforeStateQueue.runMiddleware(K)}catch(Le){K=N,h._popupRedirectResolver._overrideRedirectResult(h,()=>Promise.reject(Le))}return K?h.reloadAndSetCurrentUserOrClear(K):h.directlySetCurrentUser(null)}return Xe(h._popupRedirectResolver,h,"argument-error"),yield h.getOrInitRedirectPersistenceManager(),h.redirectUser&&h.redirectUser._redirectEventId===K._redirectEventId?h.directlySetCurrentUser(K):h.reloadAndSetCurrentUserOrClear(K)})()}tryRedirectSignIn(d){var h=this;return(0,m.A)(function*(){let I=null;try{I=yield h._popupRedirectResolver._completeRedirectFn(h,d,!0)}catch{yield h._setRedirectUser(null)}return I})()}reloadAndSetCurrentUserOrClear(d){var h=this;return(0,m.A)(function*(){try{yield mt(d)}catch(I){if("auth/network-request-failed"!==I?.code)return h.directlySetCurrentUser(null)}return h.directlySetCurrentUser(d)})()}useDeviceLanguage(){this.languageCode=function Ae(){if(typeof navigator>"u")return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var d=this;return(0,m.A)(function*(){d._deleted=!0})()}updateCurrentUser(d){var h=this;return(0,m.A)(function*(){if((0,oe._isFirebaseServerApp)(h.app))return Promise.reject(ut(h));const I=d?(0,ne.Ku)(d):null;return I&&Xe(I.auth.config.apiKey===h.config.apiKey,h,"invalid-user-token"),h._updateCurrentUser(I&&I._clone(h))})()}_updateCurrentUser(d,h=!1){var I=this;return(0,m.A)(function*(){if(!I._deleted)return d&&Xe(I.tenantId===d.tenantId,I,"tenant-id-mismatch"),h||(yield I.beforeStateQueue.runMiddleware(d)),I.queue((0,m.A)(function*(){yield I.directlySetCurrentUser(d),I.notifyAuthListeners()}))})()}signOut(){var d=this;return(0,m.A)(function*(){return(0,oe._isFirebaseServerApp)(d.app)?Promise.reject(ut(d)):(yield d.beforeStateQueue.runMiddleware(null),(d.redirectPersistenceManager||d._popupRedirectResolver)&&(yield d._setRedirectUser(null)),d._updateCurrentUser(null,!0))})()}setPersistence(d){var h=this;return(0,oe._isFirebaseServerApp)(this.app)?Promise.reject(ut(this)):this.queue((0,m.A)(function*(){yield h.assertedPersistence.setPersistence(Qt(d))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(d){var h=this;return(0,m.A)(function*(){h._getPasswordPolicyInternal()||(yield h._updatePasswordPolicy());const I=h._getPasswordPolicyInternal();return I.schemaVersion!==h.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(h._errorFactory.create("unsupported-password-policy-schema-version",{})):I.validatePassword(d)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var d=this;return(0,m.A)(function*(){const h=yield function ae(y){return Fe.apply(this,arguments)}(d),I=new St(h);null===d.tenantId?d._projectPasswordPolicy=I:d._tenantPasswordPolicies[d.tenantId]=I})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(d){this._errorFactory=new ne.FA("auth","Firebase",d())}onAuthStateChanged(d,h,I){return this.registerStateListener(this.authStateSubscription,d,h,I)}beforeAuthStateChanged(d,h){return this.beforeStateQueue.pushCallback(d,h)}onIdTokenChanged(d,h,I){return this.registerStateListener(this.idTokenSubscription,d,h,I)}authStateReady(){return new Promise((d,h)=>{if(this.currentUser)d();else{const I=this.onAuthStateChanged(()=>{I(),d()},h)}})}revokeAccessToken(d){var h=this;return(0,m.A)(function*(){if(h.currentUser){const I=yield h.currentUser.getIdToken(),N={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:d,idToken:I};null!=h.tenantId&&(N.tenantId=h.tenantId),yield function ie(y,d){return ue.apply(this,arguments)}(h,N)}})()}toJSON(){var d;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(d=this._currentUser)||void 0===d?void 0:d.toJSON()}}_setRedirectUser(d,h){var I=this;return(0,m.A)(function*(){const N=yield I.getOrInitRedirectPersistenceManager(h);return null===d?N.removeCurrentUser():N.setCurrentUser(d)})()}getOrInitRedirectPersistenceManager(d){var h=this;return(0,m.A)(function*(){if(!h.redirectPersistenceManager){const I=d&&Qt(d)||h._popupRedirectResolver;Xe(I,h,"argument-error"),h.redirectPersistenceManager=yield en.create(h,[Qt(I._redirectPersistence)],"redirectUser"),h.redirectUser=yield h.redirectPersistenceManager.getCurrentUser()}return h.redirectPersistenceManager})()}_redirectUserForId(d){var h=this;return(0,m.A)(function*(){var I,N;return h._isInitialized&&(yield h.queue((0,m.A)(function*(){}))),(null===(I=h._currentUser)||void 0===I?void 0:I._redirectEventId)===d?h._currentUser:(null===(N=h.redirectUser)||void 0===N?void 0:N._redirectEventId)===d?h.redirectUser:null})()}_persistUserIfCurrent(d){var h=this;return(0,m.A)(function*(){if(d===h.currentUser)return h.queue((0,m.A)(function*(){return h.directlySetCurrentUser(d)}))})()}_notifyListenersIfCurrent(d){d===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var d,h;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const I=null!==(h=null===(d=this.currentUser)||void 0===d?void 0:d.uid)&&void 0!==h?h:null;this.lastNotifiedUid!==I&&(this.lastNotifiedUid=I,this.authStateSubscription.next(this.currentUser))}registerStateListener(d,h,I,N){if(this._deleted)return()=>{};const K="function"==typeof h?h:h.next.bind(h);let me=!1;const Le=this._isInitialized?Promise.resolve():this._initializationPromise;if(Xe(Le,this,"internal-error"),Le.then(()=>{me||K(this.currentUser)}),"function"==typeof h){const Et=d.addObserver(h,I,N);return()=>{me=!0,Et()}}{const Et=d.addObserver(h);return()=>{me=!0,Et()}}}directlySetCurrentUser(d){var h=this;return(0,m.A)(function*(){h.currentUser&&h.currentUser!==d&&h._currentUser._stopProactiveRefresh(),d&&h.isProactiveRefreshEnabled&&d._startProactiveRefresh(),h.currentUser=d,d?yield h.assertedPersistence.setCurrentUser(d):yield h.assertedPersistence.removeCurrentUser()})()}queue(d){return this.operations=this.operations.then(d,d),this.operations}get assertedPersistence(){return Xe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(d){!d||this.frameworks.includes(d)||(this.frameworks.push(d),this.frameworks.sort(),this.clientVersion=W(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var d=this;return(0,m.A)(function*(){var h;const I={"X-Client-Version":d.clientVersion};d.app.options.appId&&(I["X-Firebase-gmpid"]=d.app.options.appId);const N=yield null===(h=d.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===h?void 0:h.getHeartbeatsHeader();N&&(I["X-Firebase-Client"]=N);const K=yield d._getAppCheckToken();return K&&(I["X-Firebase-AppCheck"]=K),I})()}_getAppCheckToken(){var d=this;return(0,m.A)(function*(){var h;const I=yield null===(h=d.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===h?void 0:h.getToken();return I?.error&&function ln(y,...d){un.logLevel<=k.$b.WARN&&un.warn(`Auth (${oe.SDK_VERSION}): ${y}`,...d)}(`Error while retrieving App Check token: ${I.error}`),I?.token})()}}function sn(y){return(0,ne.Ku)(y)}class gn{constructor(d){this.auth=d,this.observer=null,this.addObserver=(0,ne.tD)(h=>this.observer=h)}get next(){return Xe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let yr={loadJS:()=>(0,m.A)(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Kn(y){return yr.loadJS(y)}function qn(y){return`__${y}${Math.floor(1e6*Math.random())}`}class Cn{constructor(d){this.type="recaptcha-enterprise",this.auth=sn(d)}verify(d="verify",h=!1){var I=this;return(0,m.A)(function*(){function K(){return K=(0,m.A)(function*(Le){if(!h){if(null==Le.tenantId&&null!=Le._agentRecaptchaConfig)return Le._agentRecaptchaConfig.siteKey;if(null!=Le.tenantId&&void 0!==Le._tenantRecaptchaConfigs[Le.tenantId])return Le._tenantRecaptchaConfigs[Le.tenantId].siteKey}return new Promise(function(){var Et=(0,m.A)(function*(Bt,hn){Dn(Le,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(fn=>{if(void 0!==fn.recaptchaKey){const di=new Pt(fn);return null==Le.tenantId?Le._agentRecaptchaConfig=di:Le._tenantRecaptchaConfigs[Le.tenantId]=di,Bt(di.siteKey)}hn(new Error("recaptcha Enterprise site key undefined"))}).catch(fn=>{hn(fn)})});return function(Bt,hn){return Et.apply(this,arguments)}}())}),K.apply(this,arguments)}function me(Le,Et,Bt){const hn=window.grecaptcha;ot(hn)?hn.enterprise.ready(()=>{hn.enterprise.execute(Le,{action:d}).then(fn=>{Et(fn)}).catch(()=>{Et("NO_RECAPTCHA")})}):Bt(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((Le,Et)=>{(function N(Le){return K.apply(this,arguments)})(I.auth).then(Bt=>{if(!h&&ot(window.grecaptcha))me(Bt,Le,Et);else{if(typeof window>"u")return void Et(new Error("RecaptchaVerifier is only supported in browser"));let hn=function Ci(){return yr.recaptchaEnterpriseScript}();0!==hn.length&&(hn+=Bt),Kn(hn).then(()=>{me(Bt,Le,Et)}).catch(fn=>{Et(fn)})}}).catch(Bt=>{Et(Bt)})})})()}}function An(y,d,h){return xn.apply(this,arguments)}function xn(){return(xn=(0,m.A)(function*(y,d,h,I=!1){const N=new Cn(y);let K;try{K=yield N.verify(h)}catch{K=yield N.verify(h,!0)}const me=Object.assign({},d);return Object.assign(me,I?{captchaResp:K}:{captchaResponse:K}),Object.assign(me,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(me,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),me})).apply(this,arguments)}function Fr(y,d,h,I){return pr.apply(this,arguments)}function pr(){return pr=(0,m.A)(function*(y,d,h,I){var N;if(null!==(N=y._getRecaptchaConfig())&&void 0!==N&&N.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const K=yield An(y,d,h,"getOobCode"===h);return I(y,K)}return I(y,d).catch(function(){var K=(0,m.A)(function*(me){if("auth/missing-recaptcha-token"===me.code){console.log(`${h} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const Le=yield An(y,d,h,"getOobCode"===h);return I(y,Le)}return Promise.reject(me)});return function(me){return K.apply(this,arguments)}}())}),pr.apply(this,arguments)}function ls(y){const d=y.indexOf(":");return d<0?"":y.substr(0,d+1)}function Bi(y){if(!y)return null;const d=Number(y);return isNaN(d)?null:d}class qi{constructor(d,h){this.providerId=d,this.signInMethod=h}toJSON(){return rn("not implemented")}_getIdTokenResponse(d){return rn("not implemented")}_linkToIdToken(d,h){return rn("not implemented")}_getReauthenticationResolver(d){return rn("not implemented")}}function Ys(y,d){return mi.apply(this,arguments)}function mi(){return(mi=(0,m.A)(function*(y,d){return He(y,"POST","/v1/accounts:resetPassword",ye(y,d))})).apply(this,arguments)}function Hs(){return(Hs=(0,m.A)(function*(y,d){return He(y,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function Da(y,d){return wi.apply(this,arguments)}function wi(){return(wi=(0,m.A)(function*(y,d){return He(y,"POST","/v1/accounts:signUp",d)})).apply(this,arguments)}function ji(){return(ji=(0,m.A)(function*(y,d){return He(y,"POST","/v1/accounts:update",ye(y,d))})).apply(this,arguments)}function Ts(y,d){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,m.A)(function*(y,d){return Zt(y,"POST","/v1/accounts:signInWithPassword",ye(y,d))})).apply(this,arguments)}function ds(y,d){return hs.apply(this,arguments)}function hs(){return(hs=(0,m.A)(function*(y,d){return He(y,"POST","/v1/accounts:sendOobCode",ye(y,d))})).apply(this,arguments)}function Ds(){return(Ds=(0,m.A)(function*(y,d){return ds(y,d)})).apply(this,arguments)}function Pr(y,d){return fs.apply(this,arguments)}function fs(){return(fs=(0,m.A)(function*(y,d){return ds(y,d)})).apply(this,arguments)}function $r(y,d){return As.apply(this,arguments)}function As(){return(As=(0,m.A)(function*(y,d){return ds(y,d)})).apply(this,arguments)}function Si(){return(Si=(0,m.A)(function*(y,d){return ds(y,d)})).apply(this,arguments)}function xi(){return(xi=(0,m.A)(function*(y,d){return Zt(y,"POST","/v1/accounts:signInWithEmailLink",ye(y,d))})).apply(this,arguments)}function Cs(){return(Cs=(0,m.A)(function*(y,d){return Zt(y,"POST","/v1/accounts:signInWithEmailLink",ye(y,d))})).apply(this,arguments)}class Zs extends qi{constructor(d,h,I,N=null){super("password",I),this._email=d,this._password=h,this._tenantId=N}static _fromEmailAndPassword(d,h){return new Zs(d,h,"password")}static _fromEmailAndCode(d,h,I=null){return new Zs(d,h,"emailLink",I)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(d){const h="string"==typeof d?JSON.parse(d):d;if(h?.email&&h?.password){if("password"===h.signInMethod)return this._fromEmailAndPassword(h.email,h.password);if("emailLink"===h.signInMethod)return this._fromEmailAndCode(h.email,h.password,h.tenantId)}return null}_getIdTokenResponse(d){var h=this;return(0,m.A)(function*(){switch(h.signInMethod){case"password":return Fr(d,{returnSecureToken:!0,email:h._email,password:h._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Ts);case"emailLink":return function Js(y,d){return xi.apply(this,arguments)}(d,{email:h._email,oobCode:h._password});default:he(d,"internal-error")}})()}_linkToIdToken(d,h){var I=this;return(0,m.A)(function*(){switch(I.signInMethod){case"password":return Fr(d,{idToken:h,returnSecureToken:!0,email:I._email,password:I._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Da);case"emailLink":return function Zo(y,d){return Cs.apply(this,arguments)}(d,{idToken:h,email:I._email,oobCode:I._password});default:he(d,"internal-error")}})()}_getReauthenticationResolver(d){return this._getIdTokenResponse(d)}}function Xi(y,d){return ps.apply(this,arguments)}function ps(){return(ps=(0,m.A)(function*(y,d){return Zt(y,"POST","/v1/accounts:signInWithIdp",ye(y,d))})).apply(this,arguments)}class vr extends qi{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(d){const h=new vr(d.providerId,d.signInMethod);return d.idToken||d.accessToken?(d.idToken&&(h.idToken=d.idToken),d.accessToken&&(h.accessToken=d.accessToken),d.nonce&&!d.pendingToken&&(h.nonce=d.nonce),d.pendingToken&&(h.pendingToken=d.pendingToken)):d.oauthToken&&d.oauthTokenSecret?(h.accessToken=d.oauthToken,h.secret=d.oauthTokenSecret):he("argument-error"),h}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(d){const h="string"==typeof d?JSON.parse(d):d,{providerId:I,signInMethod:N}=h,K=(0,Ue.Tt)(h,["providerId","signInMethod"]);if(!I||!N)return null;const me=new vr(I,N);return me.idToken=K.idToken||void 0,me.accessToken=K.accessToken||void 0,me.secret=K.secret,me.nonce=K.nonce,me.pendingToken=K.pendingToken||null,me}_getIdTokenResponse(d){return Xi(d,this.buildRequest())}_linkToIdToken(d,h){const I=this.buildRequest();return I.idToken=h,Xi(d,I)}_getReauthenticationResolver(d){const h=this.buildRequest();return h.autoCreate=!1,Xi(d,h)}buildRequest(){const d={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)d.pendingToken=this.pendingToken;else{const h={};this.idToken&&(h.id_token=this.idToken),this.accessToken&&(h.access_token=this.accessToken),this.secret&&(h.oauth_token_secret=this.secret),h.providerId=this.providerId,this.nonce&&!this.pendingToken&&(h.nonce=this.nonce),d.postBody=(0,ne.Am)(h)}return d}}function ir(){return(ir=(0,m.A)(function*(y,d){return He(y,"POST","/v1/accounts:sendVerificationCode",ye(y,d))})).apply(this,arguments)}function hi(){return(hi=(0,m.A)(function*(y,d){return Zt(y,"POST","/v1/accounts:signInWithPhoneNumber",ye(y,d))})).apply(this,arguments)}function Gs(){return(Gs=(0,m.A)(function*(y,d){const h=yield Zt(y,"POST","/v1/accounts:signInWithPhoneNumber",ye(y,d));if(h.temporaryProof)throw dt(y,"account-exists-with-different-credential",h);return h})).apply(this,arguments)}const xo={USER_NOT_FOUND:"user-not-found"};function $n(){return($n=(0,m.A)(function*(y,d){return Zt(y,"POST","/v1/accounts:signInWithPhoneNumber",ye(y,Object.assign(Object.assign({},d),{operation:"REAUTH"})),xo)})).apply(this,arguments)}class tr extends qi{constructor(d){super("phone","phone"),this.params=d}static _fromVerification(d,h){return new tr({verificationId:d,verificationCode:h})}static _fromTokenResponse(d,h){return new tr({phoneNumber:d,temporaryProof:h})}_getIdTokenResponse(d){return function gs(y,d){return hi.apply(this,arguments)}(d,this._makeVerificationRequest())}_linkToIdToken(d,h){return function _i(y,d){return Gs.apply(this,arguments)}(d,Object.assign({idToken:h},this._makeVerificationRequest()))}_getReauthenticationResolver(d){return function bs(y,d){return $n.apply(this,arguments)}(d,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:d,phoneNumber:h,verificationId:I,verificationCode:N}=this.params;return d&&h?{temporaryProof:d,phoneNumber:h}:{sessionInfo:I,code:N}}toJSON(){const d={providerId:this.providerId};return this.params.phoneNumber&&(d.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(d.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(d.verificationCode=this.params.verificationCode),this.params.verificationId&&(d.verificationId=this.params.verificationId),d}static fromJSON(d){"string"==typeof d&&(d=JSON.parse(d));const{verificationId:h,verificationCode:I,phoneNumber:N,temporaryProof:K}=d;return I||h||N||K?new tr({verificationId:h,verificationCode:I,phoneNumber:N,temporaryProof:K}):null}}class ei{constructor(d){var h,I,N,K,me,Le;const Et=(0,ne.I9)((0,ne.hp)(d)),Bt=null!==(h=Et.apiKey)&&void 0!==h?h:null,hn=null!==(I=Et.oobCode)&&void 0!==I?I:null,fn=function fo(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(N=Et.mode)&&void 0!==N?N:null);Xe(Bt&&hn&&fn,"argument-error"),this.apiKey=Bt,this.operation=fn,this.code=hn,this.continueUrl=null!==(K=Et.continueUrl)&&void 0!==K?K:null,this.languageCode=null!==(me=Et.languageCode)&&void 0!==me?me:null,this.tenantId=null!==(Le=Et.tenantId)&&void 0!==Le?Le:null}static parseLink(d){const h=function po(y){const d=(0,ne.I9)((0,ne.hp)(y)).link,h=d?(0,ne.I9)((0,ne.hp)(d)).deep_link_id:null,I=(0,ne.I9)((0,ne.hp)(y)).deep_link_id;return(I?(0,ne.I9)((0,ne.hp)(I)).link:null)||I||h||d||y}(d);try{return new ei(h)}catch{return null}}}let Oi=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(h,I){return Zs._fromEmailAndPassword(h,I)}static credentialWithLink(h,I){const N=ei.parseLink(I);return Xe(N,"argument-error"),Zs._fromEmailAndCode(h,N.code,N.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class Ss{constructor(d){this.providerId=d,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(d){this.defaultLanguageCode=d}setCustomParameters(d){return this.customParameters=d,this}getCustomParameters(){return this.customParameters}}class eo extends Ss{constructor(){super(...arguments),this.scopes=[]}addScope(d){return this.scopes.includes(d)||this.scopes.push(d),this}getScopes(){return[...this.scopes]}}class Ri extends eo{static credentialFromJSON(d){const h="string"==typeof d?JSON.parse(d):d;return Xe("providerId"in h&&"signInMethod"in h,"argument-error"),vr._fromParams(h)}credential(d){return this._credential(Object.assign(Object.assign({},d),{nonce:d.rawNonce}))}_credential(d){return Xe(d.idToken||d.accessToken,"argument-error"),vr._fromParams(Object.assign(Object.assign({},d),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(d){return Ri.oauthCredentialFromTaggedObject(d)}static credentialFromError(d){return Ri.oauthCredentialFromTaggedObject(d.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthIdToken:h,oauthAccessToken:I,oauthTokenSecret:N,pendingToken:K,nonce:me,providerId:Le}=d;if(!I&&!N&&!h&&!K||!Le)return null;try{return new Ri(Le)._credential({idToken:h,accessToken:I,nonce:me,pendingToken:K})}catch{return null}}}let ur=(()=>{class y extends eo{constructor(){super("facebook.com")}static credential(h){return vr._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:h})}static credentialFromResult(h){return y.credentialFromTaggedObject(h)}static credentialFromError(h){return y.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h||!("oauthAccessToken"in h)||!h.oauthAccessToken)return null;try{return y.credential(h.oauthAccessToken)}catch{return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),go=(()=>{class y extends eo{constructor(){super("google.com"),this.addScope("profile")}static credential(h,I){return vr._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:h,accessToken:I})}static credentialFromResult(h){return y.credentialFromTaggedObject(h)}static credentialFromError(h){return y.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:I,oauthAccessToken:N}=h;if(!I&&!N)return null;try{return y.credential(I,N)}catch{return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),ba=(()=>{class y extends eo{constructor(){super("github.com")}static credential(h){return vr._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:h})}static credentialFromResult(h){return y.credentialFromTaggedObject(h)}static credentialFromError(h){return y.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h||!("oauthAccessToken"in h)||!h.oauthAccessToken)return null;try{return y.credential(h.oauthAccessToken)}catch{return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class ms extends qi{constructor(d,h){super(d,d),this.pendingToken=h}_getIdTokenResponse(d){return Xi(d,this.buildRequest())}_linkToIdToken(d,h){const I=this.buildRequest();return I.idToken=h,Xi(d,I)}_getReauthenticationResolver(d){const h=this.buildRequest();return h.autoCreate=!1,Xi(d,h)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(d){const h="string"==typeof d?JSON.parse(d):d,{providerId:I,signInMethod:N,pendingToken:K}=h;return I&&N&&K&&I===N?new ms(I,K):null}static _create(d,h){return new ms(d,h)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Yi extends Ss{constructor(d){Xe(d.startsWith("saml."),"argument-error"),super(d)}static credentialFromResult(d){return Yi.samlCredentialFromTaggedObject(d)}static credentialFromError(d){return Yi.samlCredentialFromTaggedObject(d.customData||{})}static credentialFromJSON(d){const h=ms.fromJSON(d);return Xe(h,"argument-error"),h}static samlCredentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{pendingToken:h,providerId:I}=d;if(!h||!I)return null;try{return ms._create(I,h)}catch{return null}}}let Gi=(()=>{class y extends eo{constructor(){super("twitter.com")}static credential(h,I){return vr._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:h,oauthTokenSecret:I})}static credentialFromResult(h){return y.credentialFromTaggedObject(h)}static credentialFromError(h){return y.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthAccessToken:I,oauthTokenSecret:N}=h;if(!I||!N)return null;try{return y.credential(I,N)}catch{return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function Zu(y,d){return mo.apply(this,arguments)}function mo(){return(mo=(0,m.A)(function*(y,d){return Zt(y,"POST","/v1/accounts:signUp",ye(y,d))})).apply(this,arguments)}class si{constructor(d){this.user=d.user,this.providerId=d.providerId,this._tokenResponse=d._tokenResponse,this.operationType=d.operationType}static _fromIdTokenResponse(d,h,I,N=!1){return(0,m.A)(function*(){const K=yield Oe._fromIdTokenResponse(d,I,N),me=to(I);return new si({user:K,providerId:me,_tokenResponse:I,operationType:h})})()}static _forOperation(d,h,I){return(0,m.A)(function*(){yield d._updateTokensIfNecessary(I,!0);const N=to(I);return new si({user:d,providerId:N,_tokenResponse:I,operationType:h})})()}}function to(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function _o(){return(_o=(0,m.A)(function*(y){var d;if((0,oe._isFirebaseServerApp)(y.app))return Promise.reject(ut(y));const h=sn(y);if(yield h._initializationPromise,null!==(d=h.currentUser)&&void 0!==d&&d.isAnonymous)return new si({user:h.currentUser,providerId:null,operationType:"signIn"});const I=yield Zu(h,{returnSecureToken:!0}),N=yield si._fromIdTokenResponse(h,"signIn",I,!0);return yield h._updateCurrentUser(N.user),N})).apply(this,arguments)}class Oo extends ne.g{constructor(d,h,I,N){var K;super(h.code,h.message),this.operationType=I,this.user=N,Object.setPrototypeOf(this,Oo.prototype),this.customData={appName:d.name,tenantId:null!==(K=d.tenantId)&&void 0!==K?K:void 0,_serverResponse:h.customData._serverResponse,operationType:I}}static _fromErrorAndOperation(d,h,I,N){return new Oo(d,h,I,N)}}function zs(y,d,h,I){return("reauthenticate"===d?h._getReauthenticationResolver(y):h._getIdTokenResponse(y)).catch(K=>{throw"auth/multi-factor-auth-required"===K.code?Oo._fromErrorAndOperation(y,K,d,I):K})}function Pi(y){return new Set(y.map(({providerId:d})=>d).filter(d=>!!d))}function j(){return j=(0,m.A)(function*(y,d){const h=(0,ne.Ku)(y);yield ve(!0,h,d);const{providerUserInfo:I}=yield function an(y,d){return mn.apply(this,arguments)}(h.auth,{idToken:yield h.getIdToken(),deleteProvider:[d]}),N=Pi(I||[]);return h.providerData=h.providerData.filter(K=>N.has(K.providerId)),N.has("phone")||(h.phoneNumber=null),yield h.auth._persistUserIfCurrent(h),h}),j.apply(this,arguments)}function R(y,d){return X.apply(this,arguments)}function X(){return(X=(0,m.A)(function*(y,d,h=!1){const I=yield In(y,d._linkToIdToken(y.auth,yield y.getIdToken()),h);return si._forOperation(y,"link",I)})).apply(this,arguments)}function ve(y,d,h){return Gt.apply(this,arguments)}function Gt(){return(Gt=(0,m.A)(function*(y,d,h){yield mt(d);const N=!1===y?"provider-already-linked":"no-such-provider";Xe(Pi(d.providerData).has(h)===y,d.auth,N)})).apply(this,arguments)}function Mn(y,d){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,m.A)(function*(y,d,h=!1){const{auth:I}=y;if((0,oe._isFirebaseServerApp)(I.app))return Promise.reject(ut(I));const N="reauthenticate";try{const K=yield In(y,zs(I,N,d,y),h);Xe(K.idToken,I,"internal-error");const me=Kr(K.idToken);Xe(me,I,"internal-error");const{sub:Le}=me;return Xe(y.uid===Le,I,"user-mismatch"),si._forOperation(y,N,K)}catch(K){throw"auth/user-not-found"===K?.code&&he(I,"user-mismatch"),K}})).apply(this,arguments)}function Ps(y,d){return Ji.apply(this,arguments)}function Ji(){return(Ji=(0,m.A)(function*(y,d,h=!1){if((0,oe._isFirebaseServerApp)(y.app))return Promise.reject(ut(y));const I="signIn",N=yield zs(y,I,d),K=yield si._fromIdTokenResponse(y,I,N);return h||(yield y._updateCurrentUser(K.user)),K})).apply(this,arguments)}function Zi(y,d){return Ws.apply(this,arguments)}function Ws(){return(Ws=(0,m.A)(function*(y,d){return Ps(sn(y),d)})).apply(this,arguments)}function es(y,d){return ko.apply(this,arguments)}function ko(){return(ko=(0,m.A)(function*(y,d){const h=(0,ne.Ku)(y);return yield ve(!1,h,d.providerId),R(h,d)})).apply(this,arguments)}function ec(y,d){return eu.apply(this,arguments)}function eu(){return(eu=(0,m.A)(function*(y,d){return Mn((0,ne.Ku)(y),d)})).apply(this,arguments)}function Ms(){return(Ms=(0,m.A)(function*(y,d){return Zt(y,"POST","/v1/accounts:signInWithCustomToken",ye(y,d))})).apply(this,arguments)}function Ti(){return Ti=(0,m.A)(function*(y,d){if((0,oe._isFirebaseServerApp)(y.app))return Promise.reject(ut(y));const h=sn(y),I=yield function tc(y,d){return Ms.apply(this,arguments)}(h,{token:d,returnSecureToken:!0}),N=yield si._fromIdTokenResponse(h,"signIn",I);return yield h._updateCurrentUser(N.user),N}),Ti.apply(this,arguments)}class Ln{constructor(d,h){this.factorId=d,this.uid=h.mfaEnrollmentId,this.enrollmentTime=new Date(h.enrolledAt).toUTCString(),this.displayName=h.displayName}static _fromServerResponse(d,h){return"phoneInfo"in h?Hr._fromServerResponse(d,h):"totpInfo"in h?ti._fromServerResponse(d,h):he(d,"internal-error")}}class Hr extends Ln{constructor(d){super("phone",d),this.phoneNumber=d.phoneInfo}static _fromServerResponse(d,h){return new Hr(h)}}class ti extends Ln{constructor(d){super("totp",d)}static _fromServerResponse(d,h){return new ti(h)}}function Qr(y,d,h){var I;Xe((null===(I=h.url)||void 0===I?void 0:I.length)>0,y,"invalid-continue-uri"),Xe(typeof h.dynamicLinkDomain>"u"||h.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),d.continueUrl=h.url,d.dynamicLinkDomain=h.dynamicLinkDomain,d.canHandleCodeInApp=h.handleCodeInApp,h.iOS&&(Xe(h.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),d.iOSBundleId=h.iOS.bundleId),h.android&&(Xe(h.android.packageName.length>0,y,"missing-android-pkg-name"),d.androidInstallApp=h.android.installApp,d.androidMinimumVersionCode=h.android.minimumVersion,d.androidPackageName=h.android.packageName)}function fi(y){return no.apply(this,arguments)}function no(){return(no=(0,m.A)(function*(y){const d=sn(y);d._getPasswordPolicyInternal()&&(yield d._updatePasswordPolicy())})).apply(this,arguments)}function ea(){return(ea=(0,m.A)(function*(y,d,h){const I=sn(y),N={requestType:"PASSWORD_RESET",email:d,clientType:"CLIENT_TYPE_WEB"};h&&Qr(I,N,h),yield Fr(I,N,"getOobCode",Pr)})).apply(this,arguments)}function nc(){return nc=(0,m.A)(function*(y,d,h){yield Ys((0,ne.Ku)(y),{oobCode:d,newPassword:h}).catch(function(){var I=(0,m.A)(function*(N){throw"auth/password-does-not-meet-requirements"===N.code&&fi(y),N});return function(N){return I.apply(this,arguments)}}())}),nc.apply(this,arguments)}function vo(){return vo=(0,m.A)(function*(y,d){yield function bi(y,d){return ji.apply(this,arguments)}((0,ne.Ku)(y),{oobCode:d})}),vo.apply(this,arguments)}function na(y,d){return Vo.apply(this,arguments)}function Vo(){return(Vo=(0,m.A)(function*(y,d){const h=(0,ne.Ku)(y),I=yield Ys(h,{oobCode:d}),N=I.requestType;switch(Xe(N,h,"internal-error"),N){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Xe(I.newEmail,h,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Xe(I.mfaInfo,h,"internal-error");default:Xe(I.email,h,"internal-error")}let K=null;return I.mfaInfo&&(K=Ln._fromServerResponse(sn(h),I.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.newEmail:I.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.email:I.newEmail)||null,multiFactorInfo:K},operation:N}})).apply(this,arguments)}function rc(){return(rc=(0,m.A)(function*(y,d){const{data:h}=yield na((0,ne.Ku)(y),d);return h.email})).apply(this,arguments)}function Iu(){return(Iu=(0,m.A)(function*(y,d,h){if((0,oe._isFirebaseServerApp)(y.app))return Promise.reject(ut(y));const I=sn(y),me=yield Fr(I,{returnSecureToken:!0,email:d,password:h,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Zu).catch(Et=>{throw"auth/password-does-not-meet-requirements"===Et.code&&fi(y),Et}),Le=yield si._fromIdTokenResponse(I,"signIn",me);return yield I._updateCurrentUser(Le.user),Le})).apply(this,arguments)}function Uo(){return(Uo=(0,m.A)(function*(y,d,h){const I=sn(y),N={requestType:"EMAIL_SIGNIN",email:d,clientType:"CLIENT_TYPE_WEB"};(function K(me,Le){Xe(Le.handleCodeInApp,I,"argument-error"),Le&&Qr(I,me,Le)})(N,h),yield Fr(I,N,"getOobCode",$r)})).apply(this,arguments)}function Ks(){return(Ks=(0,m.A)(function*(y,d,h){if((0,oe._isFirebaseServerApp)(y.app))return Promise.reject(ut(y));const I=(0,ne.Ku)(y),N=Oi.credentialWithLink(d,h||wt());return Xe(N._tenantId===(I.tenantId||null),I,"tenant-id-mismatch"),Zi(I,N)})).apply(this,arguments)}function nu(){return(nu=(0,m.A)(function*(y,d){return He(y,"POST","/v1/accounts:createAuthUri",ye(y,d))})).apply(this,arguments)}function sa(){return sa=(0,m.A)(function*(y,d){const I={identifier:d,continueUri:Ct()?wt():"http://localhost"},{signinMethods:N}=yield function tu(y,d){return nu.apply(this,arguments)}((0,ne.Ku)(y),I);return N||[]}),sa.apply(this,arguments)}function Er(){return Er=(0,m.A)(function*(y,d){const h=(0,ne.Ku)(y),N={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};d&&Qr(h.auth,N,d);const{email:K}=yield function $i(y,d){return Ds.apply(this,arguments)}(h.auth,N);K!==y.email&&(yield y.reload())}),Er.apply(this,arguments)}function Ra(){return Ra=(0,m.A)(function*(y,d,h){const I=(0,ne.Ku)(y),K={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:d};h&&Qr(I.auth,K,h);const{email:me}=yield function Pn(y,d){return Si.apply(this,arguments)}(I.auth,K);me!==y.email&&(yield y.reload())}),Ra.apply(this,arguments)}function wu(){return(wu=(0,m.A)(function*(y,d){return He(y,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function Tu(){return Tu=(0,m.A)(function*(y,{displayName:d,photoURL:h}){if(void 0===d&&void 0===h)return;const I=(0,ne.Ku)(y),K={idToken:yield I.getIdToken(),displayName:d,photoUrl:h,returnSecureToken:!0},me=yield In(I,function Hc(y,d){return wu.apply(this,arguments)}(I.auth,K));I.displayName=me.displayName||null,I.photoURL=me.photoUrl||null;const Le=I.providerData.find(({providerId:Et})=>"password"===Et);Le&&(Le.displayName=I.displayName,Le.photoURL=I.photoURL),yield I._updateTokensIfNecessary(me)}),Tu.apply(this,arguments)}function xs(y,d,h){return Os.apply(this,arguments)}function Os(){return Os=(0,m.A)(function*(y,d,h){const{auth:I}=y,K={idToken:yield y.getIdToken(),returnSecureToken:!0};d&&(K.email=d),h&&(K.password=h);const me=yield In(y,function ws(y,d){return Hs.apply(this,arguments)}(I,K));yield y._updateTokensIfNecessary(me,!0)}),Os.apply(this,arguments)}class io{constructor(d,h,I={}){this.isNewUser=d,this.providerId=h,this.profile=I}}class D extends io{constructor(d,h,I,N){super(d,h,I),this.username=N}}class z extends io{constructor(d,h){super(d,"facebook.com",h)}}class M extends D{constructor(d,h){super(d,"github.com",h,"string"==typeof h?.login?h?.login:null)}}class F extends io{constructor(d,h){super(d,"google.com",h)}}class ce extends D{constructor(d,h,I){super(d,"twitter.com",h,I)}}function nt(y){const{user:d,_tokenResponse:h}=y;return d.isAnonymous&&!h?{providerId:null,isNewUser:!1,profile:null}:function Du(y){var d,h;if(!y)return null;const{providerId:I}=y,N=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},K=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!I&&y?.idToken){const me=null===(h=null===(d=Kr(y.idToken))||void 0===d?void 0:d.firebase)||void 0===h?void 0:h.sign_in_provider;if(me)return new io(K,"anonymous"!==me&&"custom"!==me?me:null)}if(!I)return null;switch(I){case"facebook.com":return new z(K,N);case"github.com":return new M(K,N);case"google.com":return new F(K,N);case"twitter.com":return new ce(K,N,y.screenName||null);case"custom":case"anonymous":return new io(K,null);default:return new io(K,I,N)}}(h)}class Tr{constructor(d,h,I){this.type=d,this.credential=h,this.user=I}static _fromIdtoken(d,h){return new Tr("enroll",d,h)}static _fromMfaPendingCredential(d){return new Tr("signin",d)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(d){var h,I;if(d?.multiFactorSession){if(null!==(h=d.multiFactorSession)&&void 0!==h&&h.pendingCredential)return Tr._fromMfaPendingCredential(d.multiFactorSession.pendingCredential);if(null!==(I=d.multiFactorSession)&&void 0!==I&&I.idToken)return Tr._fromIdtoken(d.multiFactorSession.idToken)}return null}}class Cr{constructor(d,h,I){this.session=d,this.hints=h,this.signInResolver=I}static _fromError(d,h){const I=sn(d),N=h.customData._serverResponse,K=(N.mfaInfo||[]).map(Le=>Ln._fromServerResponse(I,Le));Xe(N.mfaPendingCredential,I,"internal-error");const me=Tr._fromMfaPendingCredential(N.mfaPendingCredential);return new Cr(me,K,function(){var Le=(0,m.A)(function*(Et){const Bt=yield Et._process(I,me);delete N.mfaInfo,delete N.mfaPendingCredential;const hn=Object.assign(Object.assign({},N),{idToken:Bt.idToken,refreshToken:Bt.refreshToken});switch(h.operationType){case"signIn":const fn=yield si._fromIdTokenResponse(I,h.operationType,hn);return yield I._updateCurrentUser(fn.user),fn;case"reauthenticate":return Xe(h.user,I,"internal-error"),si._forOperation(h.user,h.operationType,hn);default:he(I,"internal-error")}});return function(Et){return Le.apply(this,arguments)}}())}resolveSignIn(d){var h=this;return(0,m.A)(function*(){return h.signInResolver(d)})()}}class Eo{constructor(d){this.user=d,this.enrolledFactors=[],d._onReload(h=>{h.mfaInfo&&(this.enrolledFactors=h.mfaInfo.map(I=>Ln._fromServerResponse(d.auth,I)))})}static _fromUser(d){return new Eo(d)}getSession(){var d=this;return(0,m.A)(function*(){return Tr._fromIdtoken(yield d.user.getIdToken(),d.user)})()}enroll(d,h){var I=this;return(0,m.A)(function*(){const N=d,K=yield I.getSession(),me=yield In(I.user,N._process(I.user.auth,K,h));return yield I.user._updateTokensIfNecessary(me),I.user.reload()})()}unenroll(d){var h=this;return(0,m.A)(function*(){const I="string"==typeof d?d:d.uid,N=yield h.user.getIdToken();try{const K=yield In(h.user,function On(y,d){return He(y,"POST","/v2/accounts/mfaEnrollment:withdraw",ye(y,d))}(h.user.auth,{idToken:N,mfaEnrollmentId:I}));h.enrolledFactors=h.enrolledFactors.filter(({uid:me})=>me!==I),yield h.user._updateTokensIfNecessary(K),yield h.user.reload()}catch(K){throw K}})()}}const oc=new WeakMap,Wr="__sak";class Ma{constructor(d,h){this.storageRetriever=d,this.type=h}_isAvailable(){try{return this.storage?(this.storage.setItem(Wr,"1"),this.storage.removeItem(Wr),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(d,h){return this.storage.setItem(d,JSON.stringify(h)),Promise.resolve()}_get(d){const h=this.storage.getItem(d);return Promise.resolve(h?JSON.parse(h):null)}_remove(d){return this.storage.removeItem(d),Promise.resolve()}get storage(){return this.storageRetriever()}}const Xr=(()=>{class y extends Ma{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(h,I)=>this.onStorageEvent(h,I),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=_t(),this._shouldAllowMigration=!0}forAllChangedKeys(h){for(const I of Object.keys(this.listeners)){const N=this.storage.getItem(I),K=this.localCache[I];N!==K&&h(I,K,N)}}onStorageEvent(h,I=!1){if(!h.key)return void this.forAllChangedKeys((Le,Et,Bt)=>{this.notifyListeners(Le,Bt)});const N=h.key;I?this.detachListener():this.stopPolling();const K=()=>{const Le=this.storage.getItem(N);!I&&this.localCache[N]===Le||this.notifyListeners(N,Le)},me=this.storage.getItem(N);!function ke(){return(0,ne.lT)()&&10===document.documentMode}()||me===h.newValue||h.newValue===h.oldValue?K():setTimeout(K,10)}notifyListeners(h,I){this.localCache[h]=I;const N=this.listeners[h];if(N)for(const K of Array.from(N))K(I&&JSON.parse(I))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((h,I,N)=>{this.onStorageEvent(new StorageEvent("storage",{key:h,oldValue:I,newValue:N}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(h,I){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[h]||(this.listeners[h]=new Set,this.localCache[h]=this.storage.getItem(h)),this.listeners[h].add(I)}_removeListener(h,I){this.listeners[h]&&(this.listeners[h].delete(I),0===this.listeners[h].size&&delete this.listeners[h]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(h,I){var N=()=>super._set,K=this;return(0,m.A)(function*(){yield N().call(K,h,I),K.localCache[h]=JSON.stringify(I)})()}_get(h){var I=()=>super._get,N=this;return(0,m.A)(function*(){const K=yield I().call(N,h);return N.localCache[h]=JSON.stringify(K),K})()}_remove(h){var I=()=>super._remove,N=this;return(0,m.A)(function*(){yield I().call(N,h),delete N.localCache[h]})()}}return y.type="LOCAL",y})(),_s=(()=>{class y extends Ma{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(h,I){}_removeListener(h,I){}}return y.type="SESSION",y})();let kn=(()=>{class y{constructor(h){this.eventTarget=h,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(h){const I=this.receivers.find(K=>K.isListeningto(h));if(I)return I;const N=new y(h);return this.receivers.push(N),N}isListeningto(h){return this.eventTarget===h}handleEvent(h){var I=this;return(0,m.A)(function*(){const N=h,{eventId:K,eventType:me,data:Le}=N.data,Et=I.handlersMap[me];if(!Et?.size)return;N.ports[0].postMessage({status:"ack",eventId:K,eventType:me});const Bt=Array.from(Et).map(function(){var fn=(0,m.A)(function*(di){return di(N.origin,Le)});return function(di){return fn.apply(this,arguments)}}()),hn=yield function zi(y){return Promise.all(y.map(function(){var d=(0,m.A)(function*(h){try{return{fulfilled:!0,value:yield h}}catch(I){return{fulfilled:!1,reason:I}}});return function(h){return d.apply(this,arguments)}}()))}(Bt);N.ports[0].postMessage({status:"done",eventId:K,eventType:me,response:hn})})()}_subscribe(h,I){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[h]||(this.handlersMap[h]=new Set),this.handlersMap[h].add(I)}_unsubscribe(h,I){this.handlersMap[h]&&I&&this.handlersMap[h].delete(I),(!I||0===this.handlersMap[h].size)&&delete this.handlersMap[h],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function ns(y="",d=10){let h="";for(let I=0;I<d;I++)h+=Math.floor(10*Math.random());return y+h}class Au{constructor(d){this.target=d,this.handlers=new Set}removeMessageHandler(d){d.messageChannel&&(d.messageChannel.port1.removeEventListener("message",d.onMessage),d.messageChannel.port1.close()),this.handlers.delete(d)}_send(d,h,I=50){var N=this;return(0,m.A)(function*(){const K=typeof MessageChannel<"u"?new MessageChannel:null;if(!K)throw new Error("connection_unavailable");let me,Le;return new Promise((Et,Bt)=>{const hn=ns("",20);K.port1.start();const fn=setTimeout(()=>{Bt(new Error("unsupported_event"))},I);Le={messageChannel:K,onMessage(di){const ui=di;if(ui.data.eventId===hn)switch(ui.data.status){case"ack":clearTimeout(fn),me=setTimeout(()=>{Bt(new Error("timeout"))},3e3);break;case"done":clearTimeout(me),Et(ui.data.response);break;default:clearTimeout(fn),clearTimeout(me),Bt(new Error("invalid_response"))}}},N.handlers.add(Le),K.port1.addEventListener("message",Le.onMessage),N.target.postMessage({eventType:d,eventId:hn,data:h},[K.port2])}).finally(()=>{Le&&N.removeMessageHandler(Le)})})()}}function kr(){return window}function To(){return typeof kr().WorkerGlobalScope<"u"&&"function"==typeof kr().importScripts}function ou(){return(ou=(0,m.A)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Bo="firebaseLocalStorageDb",au="firebaseLocalStorage",Qs="fbase_key";class $o{constructor(d){this.request=d}toPromise(){return new Promise((d,h)=>{this.request.addEventListener("success",()=>{d(this.request.result)}),this.request.addEventListener("error",()=>{h(this.request.error)})})}}function Cu(y,d){return y.transaction([au],d?"readwrite":"readonly").objectStore(au)}function ac(){const y=indexedDB.open(Bo,1);return new Promise((d,h)=>{y.addEventListener("error",()=>{h(y.error)}),y.addEventListener("upgradeneeded",()=>{const I=y.result;try{I.createObjectStore(au,{keyPath:Qs})}catch(N){h(N)}}),y.addEventListener("success",(0,m.A)(function*(){const I=y.result;I.objectStoreNames.contains(au)?d(I):(I.close(),yield function Nl(){const y=indexedDB.deleteDatabase(Bo);return new $o(y).toPromise()}(),d(yield ac()))}))})}function bu(y,d,h){return zc.apply(this,arguments)}function zc(){return(zc=(0,m.A)(function*(y,d,h){const I=Cu(y,!0).put({[Qs]:d,value:h});return new $o(I).toPromise()})).apply(this,arguments)}function xl(){return(xl=(0,m.A)(function*(y,d){const h=Cu(y,!1).get(d),I=yield new $o(h).toPromise();return void 0===I?null:I.value})).apply(this,arguments)}function aa(y,d){const h=Cu(y,!0).delete(d);return new $o(h).toPromise()}const xa=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var h=this;return(0,m.A)(function*(){return h.db||(h.db=yield ac()),h.db})()}_withRetries(h){var I=this;return(0,m.A)(function*(){let N=0;for(;;)try{const K=yield I._openDb();return yield h(K)}catch(K){if(N++>3)throw K;I.db&&(I.db.close(),I.db=void 0)}})()}initializeServiceWorkerMessaging(){var h=this;return(0,m.A)(function*(){return To()?h.initializeReceiver():h.initializeSender()})()}initializeReceiver(){var h=this;return(0,m.A)(function*(){h.receiver=kn._getInstance(function rs(){return To()?self:null}()),h.receiver._subscribe("keyChanged",function(){var I=(0,m.A)(function*(N,K){return{keyProcessed:(yield h._poll()).includes(K.key)}});return function(N,K){return I.apply(this,arguments)}}()),h.receiver._subscribe("ping",function(){var I=(0,m.A)(function*(N,K){return["keyChanged"]});return function(N,K){return I.apply(this,arguments)}}())})()}initializeSender(){var h=this;return(0,m.A)(function*(){var I,N;if(h.activeServiceWorker=yield function oi(){return ou.apply(this,arguments)}(),!h.activeServiceWorker)return;h.sender=new Au(h.activeServiceWorker);const K=yield h.sender._send("ping",{},800);K&&null!==(I=K[0])&&void 0!==I&&I.fulfilled&&null!==(N=K[0])&&void 0!==N&&N.value.includes("keyChanged")&&(h.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(h){var I=this;return(0,m.A)(function*(){if(I.sender&&I.activeServiceWorker&&function Qi(){var y;return(null===(y=navigator?.serviceWorker)||void 0===y?void 0:y.controller)||null}()===I.activeServiceWorker)try{yield I.sender._send("keyChanged",{key:h},I.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,m.A)(function*(){try{if(!indexedDB)return!1;const h=yield ac();return yield bu(h,Wr,"1"),yield aa(h,Wr),!0}catch{}return!1})()}_withPendingWrite(h){var I=this;return(0,m.A)(function*(){I.pendingWrites++;try{yield h()}finally{I.pendingWrites--}})()}_set(h,I){var N=this;return(0,m.A)(function*(){return N._withPendingWrite((0,m.A)(function*(){return yield N._withRetries(K=>bu(K,h,I)),N.localCache[h]=I,N.notifyServiceWorker(h)}))})()}_get(h){var I=this;return(0,m.A)(function*(){const N=yield I._withRetries(K=>function Wc(y,d){return xl.apply(this,arguments)}(K,h));return I.localCache[h]=N,N})()}_remove(h){var I=this;return(0,m.A)(function*(){return I._withPendingWrite((0,m.A)(function*(){return yield I._withRetries(N=>aa(N,h)),delete I.localCache[h],I.notifyServiceWorker(h)}))})()}_poll(){var h=this;return(0,m.A)(function*(){const I=yield h._withRetries(me=>{const Le=Cu(me,!1).getAll();return new $o(Le).toPromise()});if(!I)return[];if(0!==h.pendingWrites)return[];const N=[],K=new Set;if(0!==I.length)for(const{fbase_key:me,value:Le}of I)K.add(me),JSON.stringify(h.localCache[me])!==JSON.stringify(Le)&&(h.notifyListeners(me,Le),N.push(me));for(const me of Object.keys(h.localCache))h.localCache[me]&&!K.has(me)&&(h.notifyListeners(me,null),N.push(me));return N})()}notifyListeners(h,I){this.localCache[h]=I;const N=this.listeners[h];if(N)for(const K of Array.from(N))K(I)}startPolling(){var h=this;this.stopPolling(),this.pollTimer=setInterval((0,m.A)(function*(){return h._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(h,I){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[h]||(this.listeners[h]=new Set,this._get(h)),this.listeners[h].add(I)}_removeListener(h,I){this.listeners[h]&&(this.listeners[h].delete(I),0===this.listeners[h].size&&delete this.listeners[h]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})(),ca=1e12;class Oa{constructor(d){this.auth=d,this.counter=ca,this._widgets=new Map}render(d,h){const I=this.counter;return this._widgets.set(I,new E(d,this.auth.name,h||{})),this.counter++,I}reset(d){var h;const I=d||ca;null===(h=this._widgets.get(I))||void 0===h||h.delete(),this._widgets.delete(I)}getResponse(d){var h;return(null===(h=this._widgets.get(d||ca))||void 0===h?void 0:h.getResponse())||""}execute(d){var h=this;return(0,m.A)(function*(){var I;return null===(I=h._widgets.get(d||ca))||void 0===I||I.execute(),""})()}}class E{constructor(d,h,I){this.params=I,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const N="string"==typeof d?document.getElementById(d):d;Xe(N,"argument-error",{appName:h}),this.container=N,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function C(y){const d=[],h="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let I=0;I<y;I++)d.push(h.charAt(Math.floor(62*Math.random())));return d.join("")}(50);const{callback:d,"expired-callback":h}=this.params;if(d)try{d(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,h)try{h()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const w=qn("rcb"),b=new Pe(3e4,6e4);class O{constructor(){var d;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(d=kr().grecaptcha)||void 0===d||!d.render)}load(d,h=""){return Xe(function q(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(h),d,"argument-error"),this.shouldResolveImmediately(h)&&ht(kr().grecaptcha)?Promise.resolve(kr().grecaptcha):new Promise((I,N)=>{const K=kr().setTimeout(()=>{N(at(d,"network-request-failed"))},b.get());kr()[w]=()=>{kr().clearTimeout(K),delete kr()[w];const Le=kr().grecaptcha;if(!Le||!ht(Le))return void N(at(d,"internal-error"));const Et=Le.render;Le.render=(Bt,hn)=>{const fn=Et(Bt,hn);return this.counter++,fn},this.hostLanguage=h,I(Le)},Kn(`${function ar(){return yr.recaptchaV2Script}()}?${(0,ne.Am)({onload:w,render:"explicit",hl:h})}`).catch(()=>{clearTimeout(K),N(at(d,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(d){var h;return!(null===(h=kr().grecaptcha)||void 0===h||!h.render)&&(d===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class de{load(d){return(0,m.A)(function*(){return new Oa(d)})()}clearedOneInstance(){}}const et="recaptcha",ze={theme:"light",type:"image"};class tn{constructor(d,h,I=Object.assign({},ze)){this.parameters=I,this.type=et,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=sn(d),this.isInvisible="invisible"===this.parameters.size,Xe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const N="string"==typeof h?document.getElementById(h):h;Xe(N,this.auth,"argument-error"),this.container=N,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new de:new O,this.validateStartingState()}verify(){var d=this;return(0,m.A)(function*(){d.assertNotDestroyed();const h=yield d.render(),I=d.getAssertedRecaptcha();return I.getResponse(h)||new Promise(K=>{const me=Le=>{Le&&(d.tokenChangeListeners.delete(me),K(Le))};d.tokenChangeListeners.add(me),d.isInvisible&&I.execute(h)})})()}render(){try{this.assertNotDestroyed()}catch(d){return Promise.reject(d)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(d=>{throw this.renderPromise=null,d})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(d=>{this.container.removeChild(d)})}validateStartingState(){Xe(!this.parameters.sitekey,this.auth,"argument-error"),Xe(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Xe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(d){return h=>{if(this.tokenChangeListeners.forEach(I=>I(h)),"function"==typeof d)d(h);else if("string"==typeof d){const I=kr()[d];"function"==typeof I&&I(h)}}}assertNotDestroyed(){Xe(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var d=this;return(0,m.A)(function*(){if(yield d.init(),!d.widgetId){let h=d.container;if(!d.isInvisible){const I=document.createElement("div");h.appendChild(I),h=I}d.widgetId=d.getAssertedRecaptcha().render(h,d.parameters)}return d.widgetId})()}init(){var d=this;return(0,m.A)(function*(){Xe(Ct()&&!To(),d.auth,"internal-error"),yield function Un(){let y=null;return new Promise(d=>{"complete"!==document.readyState?(y=()=>d(),window.addEventListener("load",y)):d()}).catch(d=>{throw y&&window.removeEventListener("load",y),d})}(),d.recaptcha=yield d._recaptchaLoader.load(d.auth,d.auth.languageCode||void 0);const h=yield function Xt(y){return zn.apply(this,arguments)}(d.auth);Xe(h,d.auth,"internal-error"),d.parameters.sitekey=h})()}getAssertedRecaptcha(){return Xe(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Fn{constructor(d,h){this.verificationId=d,this.onConfirmation=h}confirm(d){const h=tr._fromVerification(this.verificationId,d);return this.onConfirmation(h)}}function ks(){return(ks=(0,m.A)(function*(y,d,h){if((0,oe._isFirebaseServerApp)(y.app))return Promise.reject(ut(y));const I=sn(y),N=yield Kc(I,d,(0,ne.Ku)(h));return new Fn(N,K=>Zi(I,K))})).apply(this,arguments)}function la(){return(la=(0,m.A)(function*(y,d,h){const I=(0,ne.Ku)(y);yield ve(!1,I,"phone");const N=yield Kc(I.auth,d,(0,ne.Ku)(h));return new Fn(N,K=>es(I,K))})).apply(this,arguments)}function Do(){return(Do=(0,m.A)(function*(y,d,h){const I=(0,ne.Ku)(y);if((0,oe._isFirebaseServerApp)(I.auth.app))return Promise.reject(ut(I.auth));const N=yield Kc(I.auth,d,(0,ne.Ku)(h));return new Fn(N,K=>ec(I,K))})).apply(this,arguments)}function Kc(y,d,h){return uu.apply(this,arguments)}function uu(){return uu=(0,m.A)(function*(y,d,h){var I;const N=yield h.verify();try{let K;if(Xe("string"==typeof N,y,"argument-error"),Xe(h.type===et,y,"argument-error"),K="string"==typeof d?{phoneNumber:d}:d,"session"in K){const me=K.session;if("phoneNumber"in K)return Xe("enroll"===me.type,y,"internal-error"),(yield function so(y,d){return He(y,"POST","/v2/accounts/mfaEnrollment:start",ye(y,d))}(y,{idToken:me.credential,phoneEnrollmentInfo:{phoneNumber:K.phoneNumber,recaptchaToken:N}})).phoneSessionInfo.sessionInfo;{Xe("signin"===me.type,y,"internal-error");const Le=(null===(I=K.multiFactorHint)||void 0===I?void 0:I.uid)||K.multiFactorUid;return Xe(Le,y,"missing-multi-factor-info"),(yield function ua(y,d){return He(y,"POST","/v2/accounts/mfaSignIn:start",ye(y,d))}(y,{mfaPendingCredential:me.credential,mfaEnrollmentId:Le,phoneSignInInfo:{recaptchaToken:N}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:me}=yield function No(y,d){return ir.apply(this,arguments)}(y,{phoneNumber:K.phoneNumber,recaptchaToken:N});return me}}finally{h._reset()}}),uu.apply(this,arguments)}function Va(){return(Va=(0,m.A)(function*(y,d){const h=(0,ne.Ku)(y);if((0,oe._isFirebaseServerApp)(h.auth.app))return Promise.reject(ut(h.auth));yield R(h,d)})).apply(this,arguments)}let br=(()=>{class y{constructor(h){this.providerId=y.PROVIDER_ID,this.auth=sn(h)}verifyPhoneNumber(h,I){return Kc(this.auth,h,(0,ne.Ku)(I))}static credential(h,I){return tr._fromVerification(h,I)}static credentialFromResult(h){return y.credentialFromTaggedObject(h)}static credentialFromError(h){return y.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{phoneNumber:I,temporaryProof:N}=h;return I&&N?tr._fromTokenResponse(I,N):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function da(y,d){return d?Qt(d):(Xe(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class cu extends qi{constructor(d){super("custom","custom"),this.params=d}_getIdTokenResponse(d){return Xi(d,this._buildIdpRequest())}_linkToIdToken(d,h){return Xi(d,this._buildIdpRequest(h))}_getReauthenticationResolver(d){return Xi(d,this._buildIdpRequest())}_buildIdpRequest(d){const h={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return d&&(h.idToken=d),h}}function Vs(y){return Ps(y.auth,new cu(y),y.bypassAuthState)}function Jd(y){const{auth:d,user:h}=y;return Xe(h,d,"internal-error"),Mn(h,new cu(y),y.bypassAuthState)}function Pu(y){return Fa.apply(this,arguments)}function Fa(){return(Fa=(0,m.A)(function*(y){const{auth:d,user:h}=y;return Xe(h,d,"internal-error"),R(h,new cu(y),y.bypassAuthState)})).apply(this,arguments)}class ys{constructor(d,h,I,N,K=!1){this.auth=d,this.resolver=I,this.user=N,this.bypassAuthState=K,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(h)?h:[h]}execute(){var d=this;return new Promise(function(){var h=(0,m.A)(function*(I,N){d.pendingPromise={resolve:I,reject:N};try{d.eventManager=yield d.resolver._initialize(d.auth),yield d.onExecution(),d.eventManager.registerConsumer(d)}catch(K){d.reject(K)}});return function(I,N){return h.apply(this,arguments)}}())}onAuthEvent(d){var h=this;return(0,m.A)(function*(){const{urlResponse:I,sessionId:N,postBody:K,tenantId:me,error:Le,type:Et}=d;if(Le)return void h.reject(Le);const Bt={auth:h.auth,requestUri:I,sessionId:N,tenantId:me||void 0,postBody:K||void 0,user:h.user,bypassAuthState:h.bypassAuthState};try{h.resolve(yield h.getIdpTask(Et)(Bt))}catch(hn){h.reject(hn)}})()}onError(d){this.reject(d)}getIdpTask(d){switch(d){case"signInViaPopup":case"signInViaRedirect":return Vs;case"linkViaPopup":case"linkViaRedirect":return Pu;case"reauthViaPopup":case"reauthViaRedirect":return Jd;default:he(this.auth,"internal-error")}}resolve(d){bn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(d),this.unregisterAndCleanUp()}reject(d){bn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(d),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Zd=new Pe(2e3,1e4);function uc(){return(uc=(0,m.A)(function*(y,d,h){if((0,oe._isFirebaseServerApp)(y.app))return Promise.reject(at(y,"operation-not-supported-in-this-environment"));const I=sn(y);Ut(y,d,Ss);const N=da(I,h);return new lc(I,"signInViaPopup",d,N).executeNotNull()})).apply(this,arguments)}function cc(){return(cc=(0,m.A)(function*(y,d,h){const I=(0,ne.Ku)(y);if((0,oe._isFirebaseServerApp)(I.auth.app))return Promise.reject(at(I.auth,"operation-not-supported-in-this-environment"));Ut(I.auth,d,Ss);const N=da(I.auth,h);return new lc(I.auth,"reauthViaPopup",d,N,I).executeNotNull()})).apply(this,arguments)}function Fl(){return(Fl=(0,m.A)(function*(y,d,h){const I=(0,ne.Ku)(y);Ut(I.auth,d,Ss);const N=da(I.auth,h);return new lc(I.auth,"linkViaPopup",d,N,I).executeNotNull()})).apply(this,arguments)}let lc=(()=>{class y extends ys{constructor(h,I,N,K,me){super(h,I,K,me),this.provider=N,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var h=this;return(0,m.A)(function*(){const I=yield h.execute();return Xe(I,h.auth,"internal-error"),I})()}onExecution(){var h=this;return(0,m.A)(function*(){bn(1===h.filter.length,"Popup operations only handle one event");const I=ns();h.authWindow=yield h.resolver._openPopup(h.auth,h.provider,h.filter[0],I),h.authWindow.associatedEvent=I,h.resolver._originValidation(h.auth).catch(N=>{h.reject(N)}),h.resolver._isIframeWebStorageSupported(h.auth,N=>{N||h.reject(at(h.auth,"web-storage-unsupported"))}),h.pollUserCancellation()})()}get eventId(){var h;return(null===(h=this.authWindow)||void 0===h?void 0:h.associatedEvent)||null}cancel(){this.reject(at(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const h=()=>{var I,N;this.pollId=null!==(N=null===(I=this.authWindow)||void 0===I?void 0:I.window)&&void 0!==N&&N.closed?window.setTimeout(()=>{this.pollId=null,this.reject(at(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(h,Zd.get())};h()}}return y.currentPopupAction=null,y})();const lu="pendingRedirect",oo=new Map;class La extends ys{constructor(d,h,I=!1){super(d,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],h,void 0,I),this.eventId=null}execute(){var d=()=>super.execute,h=this;return(0,m.A)(function*(){let I=oo.get(h.auth._key());if(!I){try{const K=(yield function Ll(y,d){return fa.apply(this,arguments)}(h.resolver,h.auth))?yield d().call(h):null;I=()=>Promise.resolve(K)}catch(N){I=()=>Promise.reject(N)}oo.set(h.auth._key(),I)}return h.bypassAuthState||oo.set(h.auth._key(),()=>Promise.resolve(null)),I()})()}onAuthEvent(d){var h=()=>super.onAuthEvent,I=this;return(0,m.A)(function*(){if("signInViaRedirect"===d.type)return h().call(I,d);if("unknown"!==d.type){if(d.eventId){const N=yield I.auth._redirectUserForId(d.eventId);if(N)return I.user=N,h().call(I,d);I.resolve(null)}}else I.resolve(null)})()}onExecution(){return(0,m.A)(function*(){})()}cleanUp(){}}function fa(){return(fa=(0,m.A)(function*(y,d){const h=Ua(d),I=th(y);if(!(yield I._isAvailable()))return!1;const N="true"===(yield I._get(h));return yield I._remove(h),N})).apply(this,arguments)}function _n(y,d){return qc.apply(this,arguments)}function qc(){return(qc=(0,m.A)(function*(y,d){return th(y)._set(Ua(d),"true")})).apply(this,arguments)}function dc(y,d){oo.set(y._key(),d)}function th(y){return Qt(y._redirectPersistence)}function Ua(y){return wn(lu,y.config.apiKey,y.name)}function Mu(y,d,h){return function Nu(y,d,h){return Ba.apply(this,arguments)}(y,d,h)}function Ba(){return(Ba=(0,m.A)(function*(y,d,h){if((0,oe._isFirebaseServerApp)(y.app))return Promise.reject(ut(y));const I=sn(y);Ut(y,d,Ss),yield I._initializationPromise;const N=da(I,h);return yield _n(N,I),N._openRedirect(I,d,"signInViaRedirect")})).apply(this,arguments)}function ag(y,d,h){return function hc(y,d,h){return Ul.apply(this,arguments)}(y,d,h)}function Ul(){return(Ul=(0,m.A)(function*(y,d,h){const I=(0,ne.Ku)(y);if(Ut(I.auth,d,Ss),(0,oe._isFirebaseServerApp)(I.auth.app))return Promise.reject(ut(I.auth));yield I.auth._initializationPromise;const N=da(I.auth,h);yield _n(N,I.auth);const K=yield ja(I);return N._openRedirect(I.auth,d,"reauthViaRedirect",K)})).apply(this,arguments)}function du(y,d,h){return function yt(y,d,h){return lr.apply(this,arguments)}(y,d,h)}function lr(){return(lr=(0,m.A)(function*(y,d,h){const I=(0,ne.Ku)(y);Ut(I.auth,d,Ss),yield I.auth._initializationPromise;const N=da(I.auth,h);yield ve(!1,I,d.providerId),yield _n(N,I.auth);const K=yield ja(I);return N._openRedirect(I.auth,d,"linkViaRedirect",K)})).apply(this,arguments)}function Bl(){return(Bl=(0,m.A)(function*(y,d){return yield sn(y)._initializationPromise,Sr(y,d,!1)})).apply(this,arguments)}function Sr(y,d){return jl.apply(this,arguments)}function jl(){return(jl=(0,m.A)(function*(y,d,h=!1){if((0,oe._isFirebaseServerApp)(y.app))return Promise.reject(ut(y));const I=sn(y),N=da(I,d),me=yield new La(I,N,h).execute();return me&&!h&&(delete me.user._redirectEventId,yield I._persistUserIfCurrent(me.user),yield I._setRedirectUser(null,d)),me})).apply(this,arguments)}function ja(y){return ao.apply(this,arguments)}function ao(){return(ao=(0,m.A)(function*(y){const d=ns(`${y.uid}:::`);return y._redirectEventId=d,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),d})).apply(this,arguments)}class Qc{constructor(d){this.auth=d,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(d){this.consumers.add(d),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,d)&&(this.sendToConsumer(this.queuedRedirectEvent,d),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(d){this.consumers.delete(d)}onEvent(d){if(this.hasEventBeenHandled(d))return!1;let h=!1;return this.consumers.forEach(I=>{this.isEventForConsumer(d,I)&&(h=!0,this.sendToConsumer(d,I),this.saveEventToCache(d))}),this.hasHandledPotentialRedirect||!function hu(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return df(y);default:return!1}}(d)||(this.hasHandledPotentialRedirect=!0,h||(this.queuedRedirectEvent=d,h=!0)),h}sendToConsumer(d,h){var I;if(d.error&&!df(d)){const N=(null===(I=d.error.code)||void 0===I?void 0:I.split("auth/")[1])||"internal-error";h.onError(at(this.auth,N))}else h.onAuthEvent(d)}isEventForConsumer(d,h){const I=null===h.eventId||!!d.eventId&&d.eventId===h.eventId;return h.filter.includes(d.type)&&I}hasEventBeenHandled(d){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(lf(d))}saveEventToCache(d){this.cachedEventUids.add(lf(d)),this.lastProcessedEventTime=Date.now()}}function lf(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(d=>d).join("-")}function df({type:y,error:d}){return"unknown"===y&&"auth/no-auth-event"===d?.code}function ki(y){return Ao.apply(this,arguments)}function Ao(){return(Ao=(0,m.A)(function*(y,d={}){return He(y,"GET","/v1/projects",d)})).apply(this,arguments)}const ih=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ho=/^https?/;function sh(){return(sh=(0,m.A)(function*(y){if(y.config.emulator)return;const{authorizedDomains:d}=yield ki(y);for(const h of d)try{if(hf(h))return}catch{}he(y,"unauthorized-domain")})).apply(this,arguments)}function hf(y){const d=wt(),{protocol:h,hostname:I}=new URL(d);if(y.startsWith("chrome-extension://")){const me=new URL(y);return""===me.hostname&&""===I?"chrome-extension:"===h&&y.replace("chrome-extension://","")===d.replace("chrome-extension://",""):"chrome-extension:"===h&&me.hostname===I}if(!Ho.test(h))return!1;if(ih.test(y))return I===y;const N=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+N+"|"+N+")$","i").test(I)}const ug=new Pe(3e4,6e4);function $l(){const y=kr().___jsl;if(y?.H)for(const d of Object.keys(y.H))if(y.H[d].r=y.H[d].r||[],y.H[d].L=y.H[d].L||[],y.H[d].r=[...y.H[d].L],y.CP)for(let h=0;h<y.CP.length;h++)y.CP[h]=null}let fc=null;const Hl=new Pe(5e3,15e3),cg="__/auth/iframe",Gl="emulator/auth/iframe",ah={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Xc=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Yc(y){const d=y.config;Xe(d.authDomain,y,"auth-domain-config-required");const h=d.emulator?Jt(d,Gl):`https://${y.config.authDomain}/${cg}`,I={apiKey:d.apiKey,appName:y.name,v:oe.SDK_VERSION},N=Xc.get(y.config.apiHost);N&&(I.eid=N);const K=y._getFrameworks();return K.length&&(I.fw=K.join(",")),`${h}?${(0,ne.Am)(I).slice(1)}`}function Jc(){return Jc=(0,m.A)(function*(y){const d=yield function oh(y){return fc=fc||function Vi(y){return new Promise((d,h)=>{var I,N,K;function me(){$l(),gapi.load("gapi.iframes",{callback:()=>{d(gapi.iframes.getContext())},ontimeout:()=>{$l(),h(at(y,"network-request-failed"))},timeout:ug.get()})}if(null!==(N=null===(I=kr().gapi)||void 0===I?void 0:I.iframes)&&void 0!==N&&N.Iframe)d(gapi.iframes.getContext());else{if(null===(K=kr().gapi)||void 0===K||!K.load){const Le=qn("iframefcb");return kr()[Le]=()=>{gapi.load?me():h(at(y,"network-request-failed"))},Kn(`${function jr(){return yr.gapiScript}()}?onload=${Le}`).catch(Et=>h(Et))}me()}}).catch(d=>{throw fc=null,d})}(y),fc}(y),h=kr().gapi;return Xe(h,y,"internal-error"),d.open({where:document.body,url:Yc(y),messageHandlersFilter:h.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ah,dontclear:!0},I=>new Promise(function(){var N=(0,m.A)(function*(K,me){yield I.restyle({setHideOnLeave:!1});const Le=at(y,"network-request-failed"),Et=kr().setTimeout(()=>{me(Le)},Hl.get());function Bt(){kr().clearTimeout(Et),K(I)}I.ping(Bt).then(Bt,()=>{me(Le)})});return function(K,me){return N.apply(this,arguments)}}()))}),Jc.apply(this,arguments)}const Zc={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class zl{constructor(d){this.window=d,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const dg="__/auth/handler",ch="emulator/auth/handler",lh=encodeURIComponent("fac");function $a(y,d,h,I,N,K){return Co.apply(this,arguments)}function Co(){return(Co=(0,m.A)(function*(y,d,h,I,N,K){Xe(y.config.authDomain,y,"auth-domain-config-required"),Xe(y.config.apiKey,y,"invalid-api-key");const me={apiKey:y.config.apiKey,appName:y.name,authType:h,redirectUrl:I,v:oe.SDK_VERSION,eventId:N};if(d instanceof Ss){d.setDefaultLanguage(y.languageCode),me.providerId=d.providerId||"",(0,ne.Im)(d.getCustomParameters())||(me.customParameters=JSON.stringify(d.getCustomParameters()));for(const[hn,fn]of Object.entries(K||{}))me[hn]=fn}if(d instanceof eo){const hn=d.getScopes().filter(fn=>""!==fn);hn.length>0&&(me.scopes=hn.join(","))}y.tenantId&&(me.tid=y.tenantId);const Le=me;for(const hn of Object.keys(Le))void 0===Le[hn]&&delete Le[hn];const Et=yield y._getAppCheckToken(),Bt=Et?`#${lh}=${encodeURIComponent(Et)}`:"";return`${function gf({config:y}){return y.emulator?Jt(y,ch):`https://${y.authDomain}/${dg}`}(y)}?${(0,ne.Am)(Le).slice(1)}${Bt}`})).apply(this,arguments)}const pc="webStorageSupport",tl=class el{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=_s,this._completeRedirectFn=Sr,this._overrideRedirectResult=dc}_openPopup(d,h,I,N){var K=this;return(0,m.A)(function*(){var me;bn(null===(me=K.eventManagers[d._key()])||void 0===me?void 0:me.manager,"_initialize() not called before _openPopup()");const Le=yield $a(d,h,I,wt(),N);return function lg(y,d,h,I=500,N=600){const K=Math.max((window.screen.availHeight-N)/2,0).toString(),me=Math.max((window.screen.availWidth-I)/2,0).toString();let Le="";const Et=Object.assign(Object.assign({},Zc),{width:I.toString(),height:N.toString(),top:K,left:me}),Bt=(0,ne.ZQ)().toLowerCase();h&&(Le=Ui(Bt)?"_blank":h),fr(Bt)&&(d=d||"http://localhost",Et.scrollbars="yes");const hn=Object.entries(Et).reduce((di,[ui,gu])=>`${di}${ui}=${gu},`,"");if(function it(y=(0,ne.ZQ)()){var d;return Ii(y)&&!(null===(d=window.navigator)||void 0===d||!d.standalone)}(Bt)&&"_self"!==Le)return function pf(y,d){const h=document.createElement("a");h.href=y,h.target=d;const I=document.createEvent("MouseEvent");I.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),h.dispatchEvent(I)}(d||"",Le),new zl(null);const fn=window.open(d||"",Le,hn);Xe(fn,y,"popup-blocked");try{fn.focus()}catch{}return new zl(fn)}(d,Le,ns())})()}_openRedirect(d,h,I,N){var K=this;return(0,m.A)(function*(){return yield K._originValidation(d),function Na(y){kr().location.href=y}(yield $a(d,h,I,wt(),N)),new Promise(()=>{})})()}_initialize(d){const h=d._key();if(this.eventManagers[h]){const{manager:N,promise:K}=this.eventManagers[h];return N?Promise.resolve(N):(bn(K,"If manager is not set, promise should be"),K)}const I=this.initAndGetManager(d);return this.eventManagers[h]={promise:I},I.catch(()=>{delete this.eventManagers[h]}),I}initAndGetManager(d){var h=this;return(0,m.A)(function*(){const I=yield function ff(y){return Jc.apply(this,arguments)}(d),N=new Qc(d);return I.register("authEvent",K=>(Xe(K?.authEvent,d,"invalid-auth-event"),{status:N.onEvent(K.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),h.eventManagers[d._key()]={manager:N},h.iframes[d._key()]=I,N})()}_isIframeWebStorageSupported(d,h){this.iframes[d._key()].send(pc,{type:pc},N=>{var K;const me=null===(K=N?.[0])||void 0===K?void 0:K[pc];void 0!==me&&h(!!me),he(d,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(d){const h=d._key();return this.originValidationPromises[h]||(this.originValidationPromises[h]=function pa(y){return sh.apply(this,arguments)}(d)),this.originValidationPromises[h]}get _shouldInitProactively(){return _t()||Zr()||Ii()}};class Ha{constructor(d){this.factorId=d}_process(d,h,I){switch(h.type){case"enroll":return this._finalizeEnroll(d,h.credential,I);case"signin":return this._finalizeSignIn(d,h.credential);default:return rn("unexpected MultiFactorSessionType")}}}class Ga extends Ha{constructor(d){super("phone"),this.credential=d}static _fromCredential(d){return new Ga(d)}_finalizeEnroll(d,h,I){return function zr(y,d){return He(y,"POST","/v2/accounts/mfaEnrollment:finalize",ye(y,d))}(d,{idToken:h,displayName:I,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(d,h){return function uf(y,d){return He(y,"POST","/v2/accounts/mfaSignIn:finalize",ye(y,d))}(d,{mfaPendingCredential:h,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Wl=(()=>{class y{constructor(){}static assertion(h){return Ga._fromCredential(h)}}return y.FACTOR_ID="phone",y})();var Kl="@firebase/auth";class hg{constructor(d){this.auth=d,this.internalListeners=new Map}getUid(){var d;return this.assertAuthConfigured(),(null===(d=this.auth.currentUser)||void 0===d?void 0:d.uid)||null}getToken(d){var h=this;return(0,m.A)(function*(){return h.assertAuthConfigured(),yield h.auth._initializationPromise,h.auth.currentUser?{accessToken:yield h.auth.currentUser.getIdToken(d)}:null})()}addAuthTokenListener(d){if(this.assertAuthConfigured(),this.internalListeners.has(d))return;const h=this.auth.onIdTokenChanged(I=>{d(I?.stsTokenManager.accessToken||null)});this.internalListeners.set(d,h),this.updateProactiveRefresh()}removeAuthTokenListener(d){this.assertAuthConfigured();const h=this.internalListeners.get(d);h&&(this.internalListeners.delete(d),h(),this.updateProactiveRefresh())}assertAuthConfigured(){Xe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function bo(){return window}(0,ne.XA)("authIdTokenMaxAge"),function ii(y){yr=y}({loadJS:y=>new Promise((d,h)=>{const I=document.createElement("script");I.setAttribute("src",y),I.onload=d,I.onerror=N=>{const K=at("internal-error");K.customData=N,h(K)},I.type="text/javascript",I.charset="UTF-8",function sl(){var y,d;return null!==(d=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==d?d:document}().appendChild(I)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function fg(y){(0,oe._registerComponent)(new le.uA("auth",(d,{options:h})=>{const I=d.getProvider("app").getImmediate(),N=d.getProvider("heartbeat"),K=d.getProvider("app-check-internal"),{apiKey:me,authDomain:Le}=I.options;Xe(me&&!me.includes(":"),"invalid-api-key",{appName:I.name});const Et={apiKey:me,authDomain:Le,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:W(y)},Bt=new kt(I,N,K,Et);return function cr(y,d){const h=d?.persistence||[],I=(Array.isArray(h)?h:[h]).map(Qt);d?.errorMap&&y._updateErrorMap(d.errorMap),y._initializeWithPersistence(I,d?.popupRedirectResolver)}(Bt,h),Bt},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((d,h,I)=>{d.getProvider("auth-internal").initialize()})),(0,oe._registerComponent)(new le.uA("auth-internal",d=>{const h=sn(d.getProvider("auth").getImmediate());return new hg(h)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,oe.registerVersion)(Kl,"1.7.9",function hh(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(y)),(0,oe.registerVersion)(Kl,"1.7.9","esm2017")}("Browser");function Ql(){return Ql=(0,m.A)(function*(y,d,h){var I;const{BuildInfo:N}=bo();bn(d.sessionId,"AuthEvent did not contain a session ID");const K=yield function Yl(y){return gc.apply(this,arguments)}(d.sessionId),me={};return Ii()?me.ibi=N.packageName:Wn()?me.apn=N.packageName:he(y,"operation-not-supported-in-this-environment"),N.displayName&&(me.appDisplayName=N.displayName),me.sessionId=K,$a(y,h,d.type,void 0,null!==(I=d.eventId)&&void 0!==I?I:void 0,me)}),Ql.apply(this,arguments)}function Fs(){return(Fs=(0,m.A)(function*(y){const{BuildInfo:d}=bo(),h={};Ii()?h.iosBundleId=d.packageName:Wn()?h.androidPackageName=d.packageName:he(y,"operation-not-supported-in-this-environment"),yield ki(y,h)})).apply(this,arguments)}function ol(){return(ol=(0,m.A)(function*(y,d,h){const{cordova:I}=bo();let N=()=>{};try{yield new Promise((K,me)=>{let Le=null;function Et(){var fn;K();const di=null===(fn=I.plugins.browsertab)||void 0===fn?void 0:fn.close;"function"==typeof di&&di(),"function"==typeof h?.close&&h.close()}function Bt(){Le||(Le=window.setTimeout(()=>{me(at(y,"redirect-cancelled-by-user"))},2e3))}function hn(){"visible"===document?.visibilityState&&Bt()}d.addPassiveListener(Et),document.addEventListener("resume",Bt,!1),Wn()&&document.addEventListener("visibilitychange",hn,!1),N=()=>{d.removePassiveListener(Et),document.removeEventListener("resume",Bt,!1),document.removeEventListener("visibilitychange",hn,!1),Le&&window.clearTimeout(Le)}})}finally{N()}})).apply(this,arguments)}function gc(){return(gc=(0,m.A)(function*(y){const d=function Jl(y){if(bn(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(y);const d=new ArrayBuffer(y.length),h=new Uint8Array(d);for(let I=0;I<y.length;I++)h[I]=y.charCodeAt(I);return h}(y),h=yield crypto.subtle.digest("SHA-256",d);return Array.from(new Uint8Array(h)).map(N=>N.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class Zl extends Qc{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(d=>{this.resolveInitialized=d})}addPassiveListener(d){this.passiveListeners.add(d)}removePassiveListener(d){this.passiveListeners.delete(d)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(d){return this.resolveInitialized(),this.passiveListeners.forEach(h=>h(d)),super.onEvent(d)}initialized(){var d=this;return(0,m.A)(function*(){yield d.initPromise})()}}function vf(y){return _c.apply(this,arguments)}function _c(){return(_c=(0,m.A)(function*(y){const d=yield fu()._get(yc(y));return d&&(yield fu()._remove(yc(y))),d})).apply(this,arguments)}function gg(){const y=[];for(let h=0;h<20;h++){const I=Math.floor(62*Math.random());y.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(I))}return y.join("")}function fu(){return Qt(Xr)}function yc(y){return wn("authEvent",y.config.apiKey,y.name)}function li(y){if(!y?.includes("?"))return{};const[d,...h]=y.split("?");return(0,ne.I9)(h.join("?"))}const td=class ed{constructor(){this._redirectPersistence=_s,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Sr,this._overrideRedirectResult=dc}_initialize(d){var h=this;return(0,m.A)(function*(){const I=d._key();let N=h.eventManagers.get(I);return N||(N=new Zl(d),h.eventManagers.set(I,N),h.attachCallbackListeners(d,N)),N})()}_openPopup(d){he(d,"operation-not-supported-in-this-environment")}_openRedirect(d,h,I,N){var K=this;return(0,m.A)(function*(){!function is(y){var d,h,I,N,K,me,Le,Et,Bt,hn;const fn=bo();Xe("function"==typeof(null===(d=fn?.universalLinks)||void 0===d?void 0:d.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Xe(typeof(null===(h=fn?.BuildInfo)||void 0===h?void 0:h.packageName)<"u",y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Xe("function"==typeof(null===(K=null===(N=null===(I=fn?.cordova)||void 0===I?void 0:I.plugins)||void 0===N?void 0:N.browsertab)||void 0===K?void 0:K.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Xe("function"==typeof(null===(Et=null===(Le=null===(me=fn?.cordova)||void 0===me?void 0:me.plugins)||void 0===Le?void 0:Le.browsertab)||void 0===Et?void 0:Et.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Xe("function"==typeof(null===(hn=null===(Bt=fn?.cordova)||void 0===Bt?void 0:Bt.InAppBrowser)||void 0===hn?void 0:hn.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(d);const me=yield K._initialize(d);yield me.initialized(),me.resetRedirect(),function eh(){oo.clear()}(),yield K._originValidation(d);const Le=function gh(y,d,h=null){return{type:d,eventId:h,urlResponse:null,sessionId:gg(),postBody:null,tenantId:y.tenantId,error:at(y,"no-auth-event")}}(d,I,N);yield function yf(y,d){return fu()._set(yc(y),d)}(d,Le);const Et=yield function fh(y,d,h){return Ql.apply(this,arguments)}(d,Le,h),Bt=yield function ph(y){const{cordova:d}=bo();return new Promise(h=>{d.plugins.browsertab.isAvailable(I=>{let N=null;I?d.plugins.browsertab.openUrl(y):N=d.InAppBrowser.open(y,function Ai(y=(0,ne.ZQ)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),h(N)})})}(Et);return function Xl(y,d,h){return ol.apply(this,arguments)}(d,me,Bt)})()}_isIframeWebStorageSupported(d,h){throw new Error("Method not implemented.")}_originValidation(d){const h=d._key();return this.originValidationPromises[h]||(this.originValidationPromises[h]=function _f(y){return Fs.apply(this,arguments)}(d)),this.originValidationPromises[h]}attachCallbackListeners(d,h){const{universalLinks:I,handleOpenURL:N,BuildInfo:K}=bo(),me=setTimeout((0,m.A)(function*(){yield vf(d),h.onEvent(nd())}),500),Le=function(){var hn=(0,m.A)(function*(fn){clearTimeout(me);const di=yield vf(d);let ui=null;di&&fn?.url&&(ui=function ku(y,d){var h,I;const N=function pu(y){const d=li(y),h=d.link?decodeURIComponent(d.link):void 0,I=li(h).link,N=d.deep_link_id?decodeURIComponent(d.deep_link_id):void 0;return li(N).link||N||I||h||y}(d);if(N.includes("/__/auth/callback")){const K=li(N),me=K.firebaseError?function Go(y){try{return JSON.parse(y)}catch{return null}}(decodeURIComponent(K.firebaseError)):null,Le=null===(I=null===(h=me?.code)||void 0===h?void 0:h.split("auth/"))||void 0===I?void 0:I[1],Et=Le?at(Le):null;return Et?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:Et,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:N,postBody:null}}return null}(di,fn.url)),h.onEvent(ui||nd())});return function(di){return hn.apply(this,arguments)}}();typeof I<"u"&&"function"==typeof I.subscribe&&I.subscribe(null,Le);const Et=N,Bt=`${K.packageName.toLowerCase()}://`;bo().handleOpenURL=function(){var hn=(0,m.A)(function*(fn){if(fn.toLowerCase().startsWith(Bt)&&Le({url:fn}),"function"==typeof Et)try{Et(fn)}catch(di){console.error(di)}});return function(fn){return hn.apply(this,arguments)}}()}};function nd(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:at("no-auth-event")}}function Ka(){var y;return(null===(y=self?.location)||void 0===y?void 0:y.protocol)||null}function al(y=(0,ne.ZQ)()){return!("file:"!==Ka()&&"ionic:"!==Ka()&&"capacitor:"!==Ka()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function ul(){try{const y=self.localStorage,d=ns();if(y)return y.setItem(d,"1"),y.removeItem(d),!function sd(y=(0,ne.ZQ)()){return function mh(){return(0,ne.lT)()&&11===document?.documentMode}()||function _g(y=(0,ne.ZQ)()){return/Edge\/\d+/.test(y)}(y)}()||(0,ne.zW)()}catch{return Ec()&&(0,ne.zW)()}return!1}function Ec(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function od(){return(function id(){return"http:"===Ka()||"https:"===Ka()}()||(0,ne.sr)()||al())&&!function mg(){return(0,ne.lV)()||(0,ne.Ll)()}()&&ul()&&!Ec()}function Vu(){return al()&&typeof document<"u"}function ad(){return(ad=(0,m.A)(function*(){return!!Vu()&&new Promise(y=>{const d=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(d),y(!0)})})})).apply(this,arguments)}const ai={LOCAL:"local",NONE:"none",SESSION:"session"},cl=Xe,_h="persistence";function ll(y){return uo.apply(this,arguments)}function uo(){return(uo=(0,m.A)(function*(y){yield y._initializationPromise;const d=qa(),h=wn(_h,y.config.apiKey,y.name);d&&d.setItem(h,y._getPersistence())})).apply(this,arguments)}function qa(){var y;try{return(null===(y=function Tf(){return typeof window<"u"?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch{return null}}const yg=Xe;class ma{constructor(){this.browserResolver=Qt(tl),this.cordovaResolver=Qt(td),this.underlyingResolver=null,this._redirectPersistence=_s,this._completeRedirectFn=Sr,this._overrideRedirectResult=dc}_initialize(d){var h=this;return(0,m.A)(function*(){return yield h.selectUnderlyingResolver(),h.assertedUnderlyingResolver._initialize(d)})()}_openPopup(d,h,I,N){var K=this;return(0,m.A)(function*(){return yield K.selectUnderlyingResolver(),K.assertedUnderlyingResolver._openPopup(d,h,I,N)})()}_openRedirect(d,h,I,N){var K=this;return(0,m.A)(function*(){return yield K.selectUnderlyingResolver(),K.assertedUnderlyingResolver._openRedirect(d,h,I,N)})()}_isIframeWebStorageSupported(d,h){this.assertedUnderlyingResolver._isIframeWebStorageSupported(d,h)}_originValidation(d){return this.assertedUnderlyingResolver._originValidation(d)}get _shouldInitProactively(){return Vu()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return yg(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var d=this;return(0,m.A)(function*(){if(d.underlyingResolver)return;const h=yield function wf(){return ad.apply(this,arguments)}();d.underlyingResolver=h?d.cordovaResolver:d.browserResolver})()}}function ud(y){return y.unwrap()}function bf(y){return Ic(y)}function Ic(y){const{_tokenResponse:d}=y instanceof ne.g?y.customData:y;if(!d)return null;if(!(y instanceof ne.g)&&"temporaryProof"in d&&"phoneNumber"in d)return br.credentialFromResult(y);const h=d.providerId;if(!h||h===We.PASSWORD)return null;let I;switch(h){case We.GOOGLE:I=go;break;case We.FACEBOOK:I=ur;break;case We.GITHUB:I=ba;break;case We.TWITTER:I=Gi;break;default:const{oauthIdToken:N,oauthAccessToken:K,oauthTokenSecret:me,pendingToken:Le,nonce:Et}=d;return K||me||N||Le?Le?h.startsWith("saml.")?ms._create(h,Le):vr._fromParams({providerId:h,signInMethod:h,pendingToken:Le,idToken:N,accessToken:K}):new Ri(h).credential({idToken:N,accessToken:K,rawNonce:Et}):null}return y instanceof ne.g?I.credentialFromError(y):I.credentialFromResult(y)}function Li(y,d){return d.catch(h=>{throw h instanceof ne.g&&function Sf(y,d){var h;const I=null===(h=d.customData)||void 0===h?void 0:h._tokenResponse;if("auth/multi-factor-auth-required"===d?.code)d.resolver=new _a(y,function yi(y,d){var h;const I=(0,ne.Ku)(y),N=d;return Xe(d.customData.operationType,I,"argument-error"),Xe(null===(h=N.customData._serverResponse)||void 0===h?void 0:h.mfaPendingCredential,I,"argument-error"),Cr._fromError(I,N)}(y,d));else if(I){const N=Ic(d),K=d;N&&(K.credential=N,K.tenantId=I.tenantId||void 0,K.email=I.email||void 0,K.phoneNumber=I.phoneNumber||void 0)}}(y,h),h}).then(h=>{const N=h.user;return{operationType:h.operationType,credential:bf(h),additionalUserInfo:nt(h),user:Wo.getOrCreate(N)}})}function dl(y,d){return co.apply(this,arguments)}function co(){return(co=(0,m.A)(function*(y,d){const h=yield d;return{verificationId:h.verificationId,confirm:I=>Li(y,h.confirm(I))}})).apply(this,arguments)}class _a{constructor(d,h){this.resolver=h,this.auth=function Cf(y){return y.wrapped()}(d)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(d){return Li(ud(this.auth),this.resolver.resolveSignIn(d))}}class Wo{constructor(d){this._delegate=d,this.multiFactor=function iu(y){const d=(0,ne.Ku)(y);return oc.has(d)||oc.set(d,Eo._fromUser(d)),oc.get(d)}(d)}static getOrCreate(d){return Wo.USER_MAP.has(d)||Wo.USER_MAP.set(d,new Wo(d)),Wo.USER_MAP.get(d)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(d){return this._delegate.getIdTokenResult(d)}getIdToken(d){return this._delegate.getIdToken(d)}linkAndRetrieveDataWithCredential(d){return this.linkWithCredential(d)}linkWithCredential(d){var h=this;return(0,m.A)(function*(){return Li(h.auth,es(h._delegate,d))})()}linkWithPhoneNumber(d,h){var I=this;return(0,m.A)(function*(){return dl(I.auth,function ka(y,d,h){return la.apply(this,arguments)}(I._delegate,d,h))})()}linkWithPopup(d){var h=this;return(0,m.A)(function*(){return Li(h.auth,function Vl(y,d,h){return Fl.apply(this,arguments)}(h._delegate,d,ma))})()}linkWithRedirect(d){var h=this;return(0,m.A)(function*(){return yield ll(sn(h.auth)),du(h._delegate,d,ma)})()}reauthenticateAndRetrieveDataWithCredential(d){return this.reauthenticateWithCredential(d)}reauthenticateWithCredential(d){var h=this;return(0,m.A)(function*(){return Li(h.auth,ec(h._delegate,d))})()}reauthenticateWithPhoneNumber(d,h){return dl(this.auth,function Xs(y,d,h){return Do.apply(this,arguments)}(this._delegate,d,h))}reauthenticateWithPopup(d){return Li(this.auth,function ha(y,d,h){return cc.apply(this,arguments)}(this._delegate,d,ma))}reauthenticateWithRedirect(d){var h=this;return(0,m.A)(function*(){return yield ll(sn(h.auth)),ag(h._delegate,d,ma)})()}sendEmailVerification(d){return function Ns(y,d){return Er.apply(this,arguments)}(this._delegate,d)}unlink(d){var h=this;return(0,m.A)(function*(){return yield function U(y,d){return j.apply(this,arguments)}(h._delegate,d),h})()}updateEmail(d){return function Gc(y,d){const h=(0,ne.Ku)(y);return(0,oe._isFirebaseServerApp)(h.auth.app)?Promise.reject(ut(h.auth)):xs(h,d,null)}(this._delegate,d)}updatePassword(d){return function Pa(y,d){return xs((0,ne.Ku)(y),null,d)}(this._delegate,d)}updatePhoneNumber(d){return function Ru(y,d){return Va.apply(this,arguments)}(this._delegate,d)}updateProfile(d){return function ro(y,d){return Tu.apply(this,arguments)}(this._delegate,d)}verifyBeforeUpdateEmail(d,h){return function ru(y,d,h){return Ra.apply(this,arguments)}(this._delegate,d,h)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Wo.USER_MAP=new WeakMap;const ya=Xe;let cd=(()=>{class y{constructor(h,I){if(this.app=h,I.isInitialized())return this._delegate=I.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:N}=h.options;ya(N,"invalid-api-key",{appName:h.name}),ya(N,"invalid-api-key",{appName:h.name});const K=typeof window<"u"?ma:void 0;this._delegate=I.initialize({options:{persistence:Rf(N,h.name),popupRedirectResolver:K}}),this._delegate._updateErrorMap(xt),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Wo.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(h){this._delegate.languageCode=h}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(h){this._delegate.tenantId=h}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(h,I){!function Ta(y,d,h){const I=sn(y);Xe(I._canInitEmulator,I,"emulator-config-failed"),Xe(/^https?:\/\//.test(d),I,"invalid-emulator-scheme");const N=!!h?.disableWarnings,K=ls(d),{host:me,port:Le}=function Lr(y){const d=ls(y),h=/(\/\/)?([^?#/]+)/.exec(y.substr(d.length));if(!h)return{host:"",port:null};const I=h[2].split("@").pop()||"",N=/^(\[[^\]]+\])(:|$)/.exec(I);if(N){const K=N[1];return{host:K,port:Bi(I.substr(K.length+1))}}{const[K,me]=I.split(":");return{host:K,port:Bi(me)}}}(d);I.config.emulator={url:`${K}//${me}${null===Le?"":`:${Le}`}/`},I.settings.appVerificationDisabledForTesting=!0,I.emulatorConfig=Object.freeze({host:me,port:Le,protocol:K.replace(":",""),options:Object.freeze({disableWarnings:N})}),N||function Xn(){function y(){const d=document.createElement("p"),h=d.style;d.innerText="Running in emulator mode. Do not use with production credentials.",h.position="fixed",h.width="100%",h.backgroundColor="#ffffff",h.border=".1em solid #000000",h.color="#b50000",h.bottom="0px",h.left="0px",h.margin="0px",h.zIndex="10000",h.textAlign="center",d.classList.add("firebase-emulator-warning"),document.body.appendChild(d)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,h,I)}applyActionCode(h){return function ta(y,d){return vo.apply(this,arguments)}(this._delegate,h)}checkActionCode(h){return na(this._delegate,h)}confirmPasswordReset(h,I){return function Zn(y,d,h){return nc.apply(this,arguments)}(this._delegate,h,I)}createUserWithEmailAndPassword(h,I){var N=this;return(0,m.A)(function*(){return Li(N._delegate,function ic(y,d,h){return Iu.apply(this,arguments)}(N._delegate,h,I))})()}fetchProvidersForEmail(h){return this.fetchSignInMethodsForEmail(h)}fetchSignInMethodsForEmail(h){return function ia(y,d){return sa.apply(this,arguments)}(this._delegate,h)}isSignInWithEmailLink(h){return function ts(y,d){const h=ei.parseLink(d);return"EMAIL_SIGNIN"===h?.operation}(0,h)}getRedirectResult(){var h=this;return(0,m.A)(function*(){ya(od(),h._delegate,"operation-not-supported-in-this-environment");const I=yield function nh(y,d){return Bl.apply(this,arguments)}(h._delegate,ma);return I?Li(h._delegate,Promise.resolve(I)):{credential:null,user:null}})()}addFrameworkForLogging(h){!function rd(y,d){sn(y)._logFramework(d)}(this._delegate,h)}onAuthStateChanged(h,I,N){const{next:K,error:me,complete:Le}=Ko(h,I,N);return this._delegate.onAuthStateChanged(K,me,Le)}onIdTokenChanged(h,I,N){const{next:K,error:me,complete:Le}=Ko(h,I,N);return this._delegate.onIdTokenChanged(K,me,Le)}sendSignInLinkToEmail(h,I){return function Lo(y,d,h){return Uo.apply(this,arguments)}(this._delegate,h,I)}sendPasswordResetEmail(h,I){return function yo(y,d,h){return ea.apply(this,arguments)}(this._delegate,h,I||void 0)}setPersistence(h){var I=this;return(0,m.A)(function*(){let N;switch(function Df(y,d){cl(Object.values(ai).includes(d),y,"invalid-persistence-type"),(0,ne.lV)()?cl(d!==ai.SESSION,y,"unsupported-persistence-type"):(0,ne.Ll)()?cl(d===ai.NONE,y,"unsupported-persistence-type"):Ec()?cl(d===ai.NONE||d===ai.LOCAL&&(0,ne.zW)(),y,"unsupported-persistence-type"):cl(d===ai.NONE||ul(),y,"unsupported-persistence-type")}(I._delegate,h),h){case ai.SESSION:N=_s;break;case ai.LOCAL:N=(yield Qt(xa)._isAvailable())?xa:Xr;break;case ai.NONE:N=qr;break;default:return he("argument-error",{appName:I._delegate.name})}return I._delegate.setPersistence(N)})()}signInAndRetrieveDataWithCredential(h){return this.signInWithCredential(h)}signInAnonymously(){return Li(this._delegate,function Rs(y){return _o.apply(this,arguments)}(this._delegate))}signInWithCredential(h){return Li(this._delegate,Zi(this._delegate,h))}signInWithCustomToken(h){return Li(this._delegate,function $c(y,d){return Ti.apply(this,arguments)}(this._delegate,h))}signInWithEmailAndPassword(h,I){return Li(this._delegate,function Fo(y,d,h){return(0,oe._isFirebaseServerApp)(y.app)?Promise.reject(ut(y)):Zi((0,ne.Ku)(y),Oi.credential(d,h)).catch(function(){var I=(0,m.A)(function*(N){throw"auth/password-does-not-meet-requirements"===N.code&&fi(y),N});return function(N){return I.apply(this,arguments)}}())}(this._delegate,h,I))}signInWithEmailLink(h,I){return Li(this._delegate,function sc(y,d,h){return Ks.apply(this,arguments)}(this._delegate,h,I))}signInWithPhoneNumber(h,I){return dl(this._delegate,function vi(y,d,h){return ks.apply(this,arguments)}(this._delegate,h,I))}signInWithPopup(h){var I=this;return(0,m.A)(function*(){return ya(od(),I._delegate,"operation-not-supported-in-this-environment"),Li(I._delegate,function kl(y,d,h){return uc.apply(this,arguments)}(I._delegate,h,ma))})()}signInWithRedirect(h){var I=this;return(0,m.A)(function*(){return ya(od(),I._delegate,"operation-not-supported-in-this-environment"),yield ll(I._delegate),Mu(I._delegate,h,ma)})()}updateCurrentUser(h){return this._delegate.updateCurrentUser(h)}verifyPasswordResetCode(h){return function ra(y,d){return rc.apply(this,arguments)}(this._delegate,h)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=ai,y})();function Ko(y,d,h){let I=y;"function"!=typeof y&&({next:I,error:d,complete:h}=y);const N=I;return{next:me=>N(me&&Wo.getOrCreate(me)),error:d,complete:h}}function Rf(y,d){const h=function Af(y,d){const h=qa();if(!h)return[];const I=wn(_h,y,d);switch(h.getItem(I)){case ai.NONE:return[qr];case ai.LOCAL:return[xa,_s];case ai.SESSION:return[_s];default:return[]}}(y,d);if(typeof self<"u"&&!h.includes(xa)&&h.push(xa),typeof window<"u")for(const I of[Xr,_s])h.includes(I)||h.push(I);return h.includes(qr)||h.push(qr),h}class Fu{constructor(){this.providerId="phone",this._delegate=new br(ud(V.A.auth()))}static credential(d,h){return br.credential(d,h)}verifyPhoneNumber(d,h){return this._delegate.verifyPhoneNumber(d,h)}unwrap(){return this._delegate}}Fu.PHONE_SIGN_IN_METHOD=br.PHONE_SIGN_IN_METHOD,Fu.PROVIDER_ID=br.PROVIDER_ID;const Lu=Xe;class yh{constructor(d,h,I=V.A.app()){var N;Lu(null===(N=I.options)||void 0===N?void 0:N.apiKey,"invalid-api-key",{appName:I.name}),this._delegate=new tn(I.auth(),d,h),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Pf(y){y.INTERNAL.registerComponent(new le.uA("auth-compat",d=>{const h=d.getProvider("app-compat").getImmediate(),I=d.getProvider("auth");return new cd(h,I)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Oi,FacebookAuthProvider:ur,GithubAuthProvider:ba,GoogleAuthProvider:go,OAuthProvider:Ri,SAMLAuthProvider:Yi,PhoneAuthProvider:Fu,PhoneMultiFactorGenerator:Wl,RecaptchaVerifier:yh,TwitterAuthProvider:Gi,Auth:cd,AuthCredential:qi,Error:ne.g}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.5.14")}(V.A)},467:(on,rt,$)=>{function m(oe,ne,k,Ue,le,Qe,We){try{var pe=oe[Qe](We),fe=pe.value}catch(Be){return void k(Be)}pe.done?ne(fe):Promise.resolve(fe).then(Ue,le)}function V(oe){return function(){var ne=this,k=arguments;return new Promise(function(Ue,le){var Qe=oe.apply(ne,k);function We(fe){m(Qe,Ue,le,We,pe,"next",fe)}function pe(fe){m(Qe,Ue,le,We,pe,"throw",fe)}We(void 0)})}}$.d(rt,{A:()=>V})},1635:(on,rt,$)=>{function ne(Re,Me){var Ne={};for(var ye in Re)Object.prototype.hasOwnProperty.call(Re,ye)&&Me.indexOf(ye)<0&&(Ne[ye]=Re[ye]);if(null!=Re&&"function"==typeof Object.getOwnPropertySymbols){var He=0;for(ye=Object.getOwnPropertySymbols(Re);He<ye.length;He++)Me.indexOf(ye[He])<0&&Object.prototype.propertyIsEnumerable.call(Re,ye[He])&&(Ne[ye[He]]=Re[ye[He]])}return Ne}function Be(Re,Me,Ne,ye){return new(Ne||(Ne=Promise))(function(lt,bt){function cn($e){try{Wt(ye.next($e))}catch(gt){bt(gt)}}function Zt($e){try{Wt(ye.throw($e))}catch(gt){bt(gt)}}function Wt($e){$e.done?lt($e.value):function He(lt){return lt instanceof Ne?lt:new Ne(function(bt){bt(lt)})}($e.value).then(cn,Zt)}Wt((ye=ye.apply(Re,Me||[])).next())})}function vt(Re){return this instanceof vt?(this.v=Re,this):new vt(Re)}function he(Re,Me,Ne){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var He,ye=Ne.apply(Re,Me||[]),lt=[];return He=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),cn("next"),cn("throw"),cn("return",function bt(dt){return function(ht){return Promise.resolve(ht).then(dt,gt)}}),He[Symbol.asyncIterator]=function(){return this},He;function cn(dt,ht){ye[dt]&&(He[dt]=function(ot){return new Promise(function(Pt,Xt){lt.push([dt,ot,Pt,Xt])>1||Zt(dt,ot)})},ht&&(He[dt]=ht(He[dt])))}function Zt(dt,ht){try{!function Wt(dt){dt.value instanceof vt?Promise.resolve(dt.value.v).then($e,gt):ct(lt[0][2],dt)}(ye[dt](ht))}catch(ot){ct(lt[0][3],ot)}}function $e(dt){Zt("next",dt)}function gt(dt){Zt("throw",dt)}function ct(dt,ht){dt(ht),lt.shift(),lt.length&&Zt(lt[0][0],lt[0][1])}}function Dt(Re){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ne,Me=Re[Symbol.asyncIterator];return Me?Me.call(Re):(Re=function qt(Re){var Me="function"==typeof Symbol&&Symbol.iterator,Ne=Me&&Re[Me],ye=0;if(Ne)return Ne.call(Re);if(Re&&"number"==typeof Re.length)return{next:function(){return Re&&ye>=Re.length&&(Re=void 0),{value:Re&&Re[ye++],done:!Re}}};throw new TypeError(Me?"Object is not iterable.":"Symbol.iterator is not defined.")}(Re),Ne={},ye("next"),ye("throw"),ye("return"),Ne[Symbol.asyncIterator]=function(){return this},Ne);function ye(lt){Ne[lt]=Re[lt]&&function(bt){return new Promise(function(cn,Zt){!function He(lt,bt,cn,Zt){Promise.resolve(Zt).then(function(Wt){lt({value:Wt,done:cn})},bt)}(cn,Zt,(bt=Re[lt](bt)).done,bt.value)})}}}$.d(rt,{AQ:()=>he,N3:()=>vt,Tt:()=>ne,sH:()=>Be,xN:()=>Dt}),"function"==typeof SuppressedError&&SuppressedError}},on=>{on(on.s=5547)}]);